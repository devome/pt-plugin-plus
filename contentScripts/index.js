(function(){"use strict";function getDefaultExportFromCjs$1(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var browser={exports:{}},process=browser.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(f){if(cachedSetTimeout===setTimeout)return setTimeout(f,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(f,0);try{return cachedSetTimeout(f,0)}catch{try{return cachedSetTimeout.call(null,f,0)}catch{return cachedSetTimeout.call(this,f,0)}}}function runClearTimeout(f){if(cachedClearTimeout===clearTimeout)return clearTimeout(f);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(f);try{return cachedClearTimeout(f)}catch{try{return cachedClearTimeout.call(null,f)}catch{return cachedClearTimeout.call(this,f)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var f=runTimeout(cleanUpNextTick);draining=!0;for(var s=queue.length;s;){for(currentQueue=queue,queue=[];++queueIndex<s;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,s=queue.length}currentQueue=null,draining=!1,runClearTimeout(f)}}process.nextTick=function(f){var s=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)s[a-1]=arguments[a];queue.push(new Item(f,s)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(f,s){this.fun=f,this.array=s}Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={};function noop$1(){}process.on=noop$1,process.addListener=noop$1,process.once=noop$1,process.off=noop$1,process.removeListener=noop$1,process.removeAllListeners=noop$1,process.emit=noop$1,process.prependListener=noop$1,process.prependOnceListener=noop$1,process.listeners=function(f){return[]},process.binding=function(f){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(f){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var browserExports=browser.exports;const process$1=getDefaultExportFromCjs$1(browserExports);var ESizeUnit=(f=>(f.ZiB="ZiB",f.EiB="EiB",f.PiB="PiB",f.TiB="TiB",f.GiB="GiB",f.MiB="MiB",f.KiB="KiB",f))(ESizeUnit||{}),ERequestType=(f=>(f.JSON="json",f.TEXT="urlencode",f))(ERequestType||{}),ERequestResultType=(f=>(f.JSON="json",f.XML="xml",f.HTML="html",f.TEXT="text",f))(ERequestResultType||{}),EDownloadClientType=(f=>(f.transmission="transmission",f.utorrent="utorrent",f.deluge="deluge",f.synologyDownloadStation="synologyDownloadStation",f.rutorrent="rutorrent",f.qbittorrent="qbittorrent",f))(EDownloadClientType||{}),EButtonType=(f=>(f.normal="normal",f.label="label",f.spliter="spliter",f.popup="popup",f))(EButtonType||{}),ERequestMethod=(f=>(f.POST="POST",f.GET="GET",f))(ERequestMethod||{}),EAction=(f=>(f.readConfig="readConfig",f.saveConfig="saveConfig",f.reloadConfig="reloadConfig",f.sendTorrentToDefaultClient="sendTorrentToDefaultClient",f.sendTorrentToClient="sendTorrentToClient",f.searchTorrent="searchTorrent",f.copyTextToClipboard="copyTextToClipboard",f.addTorrentFromURL="addTorrentFromURL",f.getFreeSpace="getFreeSpace",f.downloadFromDroper="downloadFromDroper",f.openOptions="openOptions",f.updateOptionsTabId="updateOptionsTabId",f.getSearchResult="getSearchResult",f.getDownloadHistory="getDownloadHistory",f.removeDownloadHistory="removeDownloadHistory",f.clearDownloadHistory="clearDownloadHistory",f.testClientConnectivity="testClientConnectivity",f.getSystemLogs="getSystemLogs",f.removeSystemLogs="removeSystemLogs",f.clearSystemLogs="clearSystemLogs",f.readUIOptions="readUIOptions",f.saveUIOptions="saveUIOptions",f.showMessage="showMessage",f.writeLog="writeLog",f.serviceStoped="serviceStoped",f.addContentPage="addContentPage",f.abortSearch="abortSearch",f.backupToGoogle="backupToGoogle",f.restoreFromGoogle="restoreFromGoogle",f.clearFromGoogle="clearFromGoogle",f.getTorrentDataFromURL="getTorrentDataFromURL",f.getUserInfo="getUserInfo",f.abortGetUserInfo="abortGetUserInfo",f.refreshUserData="refreshUserData",f.getClearedOptions="getClearedOptions",f.resetRunTimeOptions="resetRunTimeOptions",f.getBase64FromImageUrl="getBase64FromImageUrl",f.getUserHistoryData="getUserHistoryData",f.getMovieInfos="getMovieInfos",f.getMovieRatings="getMovieRatings",f.getIMDbIdFromDouban="getIMDbIdFromDouban",f.queryMovieInfoFromDouban="queryMovieInfoFromDouban",f.addBrowserDownloads="addBrowserDownloads",f.checkPermissions="checkPermissions",f.requestPermissions="requestPermissions",f.changeLanguage="changeLanguage",f.getCurrentLanguageResource="getCurrentLanguageResource",f.addLanguage="addLanguage",f.replaceLanguage="replaceLanguage",f.hideMessage="hideMessage",f.resetUserDatas="resetUserDatas",f.backupToServer="backupToServer",f.restoreFromServer="restoreFromServer",f.getBackupListFromServer="getBackupListFromServer",f.deleteFileFromBackupServer="deleteFileFromBackupServer",f.sendTorrentsInBackground="sendTorrentsInBackground",f.createBackupFile="createBackupFile",f.checkBackupData="checkBackupData",f.addTorrentToCollection="addTorrentToCollection",f.getTorrentCollections="getTorrentCollections",f.deleteTorrentFromCollention="deleteTorrentFromCollention",f.clearTorrentCollention="clearTorrentCollention",f.getTorrentCollention="getTorrentCollention",f.getSiteSelectorConfig="getSiteSelectorConfig",f.resetTorrentCollections="resetTorrentCollections",f.getTorrentCollectionGroups="getTorrentCollectionGroups",f.addTorrentCollectionGroup="addTorrentCollectionGroup",f.addTorrentCollectionToGroup="addTorrentCollectionToGroup",f.updateTorrentCollectionGroup="updateTorrentCollectionGroup",f.removeTorrentCollectionFromGroup="removeTorrentCollectionFromGroup",f.removeTorrentCollectionGroup="removeTorrentCollectionGroup",f.updateTorrentCollention="updateTorrentCollention",f.getAllTorrentCollectionLinks="getAllTorrentCollectionLinks",f.restoreCookies="restoreCookies",f.resetFavicons="resetFavicons",f.resetFavicon="resetFavicon",f.getBackupRawData="getBackupRawData",f.testBackupServerConnectivity="testBackupServerConnectivity",f.createSearchResultSnapshot="createSearchResultSnapshot",f.loadSearchResultSnapshot="loadSearchResultSnapshot",f.getSearchResultSnapshot="getSearchResultSnapshot",f.removeSearchResultSnapshot="removeSearchResultSnapshot",f.clearSearchResultSnapshot="clearSearchResultSnapshot",f.resetSearchResultSnapshot="resetSearchResultSnapshot",f.createKeepUploadTask="createKeepUploadTask",f.loadKeepUploadTask="loadKeepUploadTask",f.getKeepUploadTask="getKeepUploadTask",f.removeKeepUploadTask="removeKeepUploadTask",f.clearKeepUploadTask="clearKeepUploadTask",f.resetKeepUploadTask="resetKeepUploadTask",f.updateKeepUploadTask="updateKeepUploadTask",f.resetDownloadHistory="resetDownloadHistory",f.pushDebugMsg="pushDebugMsg",f.updateDebuggerTabId="updateDebuggerTabId",f.getTopSearches="getTopSearches",f))(EAction||{}),EStorageType=(f=>(f.text="TEXT",f.json="JSON",f))(EStorageType||{}),EConfigKey=(f=>(f.default="PT-Plugin-Plus-Config",f.downloadHistory="PT-Plugin-Plus-downloadHistory",f.systemLogs="PT-Plugin-Plus-systemLogs",f.uiOptions="PT-Plugin-Plus-uiOptions",f.cache="PT-Plugin-Plus-Cache-Contents",f.userDatas="PT-Plugin-Plus-User-Datas",f.collection="PT-Plugin-Plus-Collection",f.searchResultSnapshot="PT-Plugin-Plus-SearchResultSnapshot",f.keepUploadTask="PT-Plugin-Plus-KeepUploadTask",f))(EConfigKey||{}),EDataResultType=(f=>(f.success="success",f.error="error",f.info="info",f.warning="warning",f.unknown="unknown",f))(EDataResultType||{}),EModule=(f=>(f.background="background",f.content="content",f.options="options",f.popup="popup",f.debugger="debugger",f))(EModule||{}),ELogEvent=(f=>(f.init="init",f.requestMessage="requestMessage",f))(ELogEvent||{}),EUserDataRange=(f=>(f.latest="latest",f.today="today",f.all="all",f))(EUserDataRange||{}),EUserDataRequestStatus=(f=>(f.needLogin="needLogin",f.notSupported="notSupported",f.unknown="unknown",f.success="success",f))(EUserDataRequestStatus||{}),ECommonKey=(f=>(f.allSite="__allSite__",f.all="__all__",f.noGroup="__noGroup__",f))(ECommonKey||{}),EInstallType=(f=>(f.development="development",f.normal="normal",f.crx="crx",f))(EInstallType||{}),EBeforeSearchingItemSearchMode=(f=>(f.id="id",f.name="name",f))(EBeforeSearchingItemSearchMode||{}),EBackupServerType=(f=>(f.OWSS="OWSS",f.WebDAV="WebDAV",f))(EBackupServerType||{}),EPluginPosition=(f=>(f.left="left",f.right="right",f))(EPluginPosition||{}),EWikiLink=(f=>(f.faq="https://github.com/pt-plugins/PT-Plugin-Plus/wiki/frequently-asked-questions",f))(EWikiLink||{}),EBrowserType=(f=>(f.Chrome="Chrome",f.Firefox="Firefox",f.Edge="Edge",f))(EBrowserType||{}),EResourceOrderBy=(f=>(f.time="time",f.name="name",f.size="size",f))(EResourceOrderBy||{}),EResourceOrderMode=(f=>(f.desc="desc",f.asc="asc",f))(EResourceOrderMode||{}),EEncryptMode=(f=>(f.AES="AES",f))(EEncryptMode||{}),ERestoreError=(f=>(f.needSecretKey="needSecretKey",f.errorSecretKey="errorSecretKey",f))(ERestoreError||{}),EAlarm=(f=>(f.refreshJob="PTPP_RefreshUserData_JOB",f))(EAlarm||{});const BASE_TAG_COLORS={Free:"blue","2xFree":"green","2xUp":"lime","2x50%":"light-green","25%":"purple","30%":"indigo","35%":"indigo darken-3","50%":"orange","70%":"blue-grey","75%":"lime darken-3",VIP:"orange darken-2","⛔️":"deep-orange darken-1"};class localStorage{constructor(){this.isExtensionMode=!1,window.chrome&&chrome.extension&&(this.isExtensionMode=!0)}set(s,a,u=EStorageType.json){return new Promise((l,h)=>{if(this.isExtensionMode){let d={};d[s]=a,chrome.storage.local.set(d,()=>{l()})}else typeof a!="string"&&u==EStorageType.json&&(a=JSON.stringify(a)),window.localStorage.setItem(s,a),l()})}get(s,a,u=EStorageType.json){if(this.isExtensionMode)chrome.storage.local.get(s,l=>{l&&l[s]?a(l[s]):a(null)});else{let l=window.localStorage.getItem(s);l&&u==EStorageType.json&&(l=JSON.parse(l)),a&&a(l)}}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function getAugmentedNamespace(f){if(f.__esModule)return f;var s=f.default;if(typeof s=="function"){var a=function u(){return this instanceof u?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};a.prototype=s.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(f).forEach(function(u){var l=Object.getOwnPropertyDescriptor(f,u);Object.defineProperty(a,u,l.get?l:{enumerable:!0,get:function(){return f[u]}})}),a}var cryptoJs={exports:{}};function commonjsRequire(f){throw new Error('Could not dynamically require "'+f+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core={exports:{}};const fs={},__viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null,default:fs},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal);var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(f,s){(function(a,u){f.exports=u()})(commonjsGlobal,function(){var a=a||function(u,l){var h;if(typeof window<"u"&&window.crypto&&(h=window.crypto),typeof self<"u"&&self.crypto&&(h=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(h=globalThis.crypto),!h&&typeof window<"u"&&window.msCrypto&&(h=window.msCrypto),!h&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(h=commonjsGlobal.crypto),!h&&typeof commonjsRequire=="function")try{h=require$$0}catch{}var d=function(){if(h){if(typeof h.getRandomValues=="function")try{return h.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof h.randomBytes=="function")try{return h.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},p=Object.create||function(){function E(){}return function(S){var B;return E.prototype=S,B=new E,E.prototype=null,B}}(),x={},m=x.lib={},g=m.Base=function(){return{extend:function(E){var S=p(this);return E&&S.mixIn(E),(!S.hasOwnProperty("init")||this.init===S.init)&&(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=m.WordArray=g.extend({init:function(E,S){E=this.words=E||[],S!=l?this.sigBytes=S:this.sigBytes=E.length*4},toString:function(E){return(E||y).stringify(this)},concat:function(E){var S=this.words,B=E.words,P=this.sigBytes,L=E.sigBytes;if(this.clamp(),P%4)for(var U=0;U<L;U++){var q=B[U>>>2]>>>24-U%4*8&255;S[P+U>>>2]|=q<<24-(P+U)%4*8}else for(var K=0;K<L;K+=4)S[P+K>>>2]=B[K>>>2];return this.sigBytes+=L,this},clamp:function(){var E=this.words,S=this.sigBytes;E[S>>>2]&=4294967295<<32-S%4*8,E.length=u.ceil(S/4)},clone:function(){var E=g.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var S=[],B=0;B<E;B+=4)S.push(d());return new b.init(S,E)}}),v=x.enc={},y=v.Hex={stringify:function(E){for(var S=E.words,B=E.sigBytes,P=[],L=0;L<B;L++){var U=S[L>>>2]>>>24-L%4*8&255;P.push((U>>>4).toString(16)),P.push((U&15).toString(16))}return P.join("")},parse:function(E){for(var S=E.length,B=[],P=0;P<S;P+=2)B[P>>>3]|=parseInt(E.substr(P,2),16)<<24-P%8*4;return new b.init(B,S/2)}},C=v.Latin1={stringify:function(E){for(var S=E.words,B=E.sigBytes,P=[],L=0;L<B;L++){var U=S[L>>>2]>>>24-L%4*8&255;P.push(String.fromCharCode(U))}return P.join("")},parse:function(E){for(var S=E.length,B=[],P=0;P<S;P++)B[P>>>2]|=(E.charCodeAt(P)&255)<<24-P%4*8;return new b.init(B,S)}},w=v.Utf8={stringify:function(E){try{return decodeURIComponent(escape(C.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return C.parse(unescape(encodeURIComponent(E)))}},_=m.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=new b.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=w.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var S,B=this._data,P=B.words,L=B.sigBytes,U=this.blockSize,q=U*4,K=L/q;E?K=u.ceil(K):K=u.max((K|0)-this._minBufferSize,0);var z=K*U,G=u.min(z*4,L);if(z){for(var N=0;N<z;N+=U)this._doProcessBlock(P,N);S=P.splice(0,z),B.sigBytes-=G}return new b.init(S,G)},clone:function(){var E=g.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});m.Hasher=_.extend({cfg:g.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var S=this._doFinalize();return S},blockSize:16,_createHelper:function(E){return function(S,B){return new E.init(B).finalize(S)}},_createHmacHelper:function(E){return function(S,B){return new k.HMAC.init(E,B).finalize(S)}}});var k=x.algo={};return x}(Math);return a})}(core)),core.exports}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){return function(u){var l=a,h=l.lib,d=h.Base,p=h.WordArray,x=l.x64={};x.Word=d.extend({init:function(m,g){this.high=m,this.low=g}}),x.WordArray=d.extend({init:function(m,g){m=this.words=m||[],g!=u?this.sigBytes=g:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,g=m.length,b=[],v=0;v<g;v++){var y=m[v];b.push(y.high),b.push(y.low)}return p.create(b,this.sigBytes)},clone:function(){for(var m=d.clone.call(this),g=m.words=this.words.slice(0),b=g.length,v=0;v<b;v++)g[v]=g[v].clone();return m}})}(),a})}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){return function(){if(typeof ArrayBuffer=="function"){var u=a,l=u.lib,h=l.WordArray,d=h.init,p=h.init=function(x){if(x instanceof ArrayBuffer&&(x=new Uint8Array(x)),(x instanceof Int8Array||typeof Uint8ClampedArray<"u"&&x instanceof Uint8ClampedArray||x instanceof Int16Array||x instanceof Uint16Array||x instanceof Int32Array||x instanceof Uint32Array||x instanceof Float32Array||x instanceof Float64Array)&&(x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength)),x instanceof Uint8Array){for(var m=x.byteLength,g=[],b=0;b<m;b++)g[b>>>2]|=x[b]<<24-b%4*8;d.call(this,g,m)}else d.apply(this,arguments)};p.prototype=h}}(),a.lib.WordArray})}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.WordArray,d=u.enc;d.Utf16=d.Utf16BE={stringify:function(x){for(var m=x.words,g=x.sigBytes,b=[],v=0;v<g;v+=2){var y=m[v>>>2]>>>16-v%4*8&65535;b.push(String.fromCharCode(y))}return b.join("")},parse:function(x){for(var m=x.length,g=[],b=0;b<m;b++)g[b>>>1]|=x.charCodeAt(b)<<16-b%2*16;return h.create(g,m*2)}},d.Utf16LE={stringify:function(x){for(var m=x.words,g=x.sigBytes,b=[],v=0;v<g;v+=2){var y=p(m[v>>>2]>>>16-v%4*8&65535);b.push(String.fromCharCode(y))}return b.join("")},parse:function(x){for(var m=x.length,g=[],b=0;b<m;b++)g[b>>>1]|=p(x.charCodeAt(b)<<16-b%2*16);return h.create(g,m*2)}};function p(x){return x<<8&4278255360|x>>>8&16711935}}(),a.enc.Utf16})}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.WordArray,d=u.enc;d.Base64={stringify:function(x){var m=x.words,g=x.sigBytes,b=this._map;x.clamp();for(var v=[],y=0;y<g;y+=3)for(var C=m[y>>>2]>>>24-y%4*8&255,w=m[y+1>>>2]>>>24-(y+1)%4*8&255,_=m[y+2>>>2]>>>24-(y+2)%4*8&255,k=C<<16|w<<8|_,E=0;E<4&&y+E*.75<g;E++)v.push(b.charAt(k>>>6*(3-E)&63));var S=b.charAt(64);if(S)for(;v.length%4;)v.push(S);return v.join("")},parse:function(x){var m=x.length,g=this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var v=0;v<g.length;v++)b[g.charCodeAt(v)]=v}var y=g.charAt(64);if(y){var C=x.indexOf(y);C!==-1&&(m=C)}return p(x,m,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function p(x,m,g){for(var b=[],v=0,y=0;y<m;y++)if(y%4){var C=g[x.charCodeAt(y-1)]<<y%4*2,w=g[x.charCodeAt(y)]>>>6-y%4*2,_=C|w;b[v>>>2]|=_<<24-v%4*8,v++}return h.create(b,v)}}(),a.enc.Base64})}(encBase64)),encBase64.exports}var encBase64url={exports:{}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.WordArray,d=u.enc;d.Base64url={stringify:function(x,m){m===void 0&&(m=!0);var g=x.words,b=x.sigBytes,v=m?this._safe_map:this._map;x.clamp();for(var y=[],C=0;C<b;C+=3)for(var w=g[C>>>2]>>>24-C%4*8&255,_=g[C+1>>>2]>>>24-(C+1)%4*8&255,k=g[C+2>>>2]>>>24-(C+2)%4*8&255,E=w<<16|_<<8|k,S=0;S<4&&C+S*.75<b;S++)y.push(v.charAt(E>>>6*(3-S)&63));var B=v.charAt(64);if(B)for(;y.length%4;)y.push(B);return y.join("")},parse:function(x,m){m===void 0&&(m=!0);var g=x.length,b=m?this._safe_map:this._map,v=this._reverseMap;if(!v){v=this._reverseMap=[];for(var y=0;y<b.length;y++)v[b.charCodeAt(y)]=y}var C=b.charAt(64);if(C){var w=x.indexOf(C);w!==-1&&(g=w)}return p(x,g,v)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function p(x,m,g){for(var b=[],v=0,y=0;y<m;y++)if(y%4){var C=g[x.charCodeAt(y-1)]<<y%4*2,w=g[x.charCodeAt(y)]>>>6-y%4*2,_=C|w;b[v>>>2]|=_<<24-v%4*8,v++}return h.create(b,v)}}(),a.enc.Base64url})}(encBase64url)),encBase64url.exports}var md5={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){return function(u){var l=a,h=l.lib,d=h.WordArray,p=h.Hasher,x=l.algo,m=[];(function(){for(var w=0;w<64;w++)m[w]=u.abs(u.sin(w+1))*4294967296|0})();var g=x.MD5=p.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,_){for(var k=0;k<16;k++){var E=_+k,S=w[E];w[E]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var B=this._hash.words,P=w[_+0],L=w[_+1],U=w[_+2],q=w[_+3],K=w[_+4],z=w[_+5],G=w[_+6],N=w[_+7],M=w[_+8],F=w[_+9],J=w[_+10],le=w[_+11],te=w[_+12],de=w[_+13],ne=w[_+14],ge=w[_+15],V=B[0],Y=B[1],ce=B[2],re=B[3];V=b(V,Y,ce,re,P,7,m[0]),re=b(re,V,Y,ce,L,12,m[1]),ce=b(ce,re,V,Y,U,17,m[2]),Y=b(Y,ce,re,V,q,22,m[3]),V=b(V,Y,ce,re,K,7,m[4]),re=b(re,V,Y,ce,z,12,m[5]),ce=b(ce,re,V,Y,G,17,m[6]),Y=b(Y,ce,re,V,N,22,m[7]),V=b(V,Y,ce,re,M,7,m[8]),re=b(re,V,Y,ce,F,12,m[9]),ce=b(ce,re,V,Y,J,17,m[10]),Y=b(Y,ce,re,V,le,22,m[11]),V=b(V,Y,ce,re,te,7,m[12]),re=b(re,V,Y,ce,de,12,m[13]),ce=b(ce,re,V,Y,ne,17,m[14]),Y=b(Y,ce,re,V,ge,22,m[15]),V=v(V,Y,ce,re,L,5,m[16]),re=v(re,V,Y,ce,G,9,m[17]),ce=v(ce,re,V,Y,le,14,m[18]),Y=v(Y,ce,re,V,P,20,m[19]),V=v(V,Y,ce,re,z,5,m[20]),re=v(re,V,Y,ce,J,9,m[21]),ce=v(ce,re,V,Y,ge,14,m[22]),Y=v(Y,ce,re,V,K,20,m[23]),V=v(V,Y,ce,re,F,5,m[24]),re=v(re,V,Y,ce,ne,9,m[25]),ce=v(ce,re,V,Y,q,14,m[26]),Y=v(Y,ce,re,V,M,20,m[27]),V=v(V,Y,ce,re,de,5,m[28]),re=v(re,V,Y,ce,U,9,m[29]),ce=v(ce,re,V,Y,N,14,m[30]),Y=v(Y,ce,re,V,te,20,m[31]),V=y(V,Y,ce,re,z,4,m[32]),re=y(re,V,Y,ce,M,11,m[33]),ce=y(ce,re,V,Y,le,16,m[34]),Y=y(Y,ce,re,V,ne,23,m[35]),V=y(V,Y,ce,re,L,4,m[36]),re=y(re,V,Y,ce,K,11,m[37]),ce=y(ce,re,V,Y,N,16,m[38]),Y=y(Y,ce,re,V,J,23,m[39]),V=y(V,Y,ce,re,de,4,m[40]),re=y(re,V,Y,ce,P,11,m[41]),ce=y(ce,re,V,Y,q,16,m[42]),Y=y(Y,ce,re,V,G,23,m[43]),V=y(V,Y,ce,re,F,4,m[44]),re=y(re,V,Y,ce,te,11,m[45]),ce=y(ce,re,V,Y,ge,16,m[46]),Y=y(Y,ce,re,V,U,23,m[47]),V=C(V,Y,ce,re,P,6,m[48]),re=C(re,V,Y,ce,N,10,m[49]),ce=C(ce,re,V,Y,ne,15,m[50]),Y=C(Y,ce,re,V,z,21,m[51]),V=C(V,Y,ce,re,te,6,m[52]),re=C(re,V,Y,ce,q,10,m[53]),ce=C(ce,re,V,Y,J,15,m[54]),Y=C(Y,ce,re,V,L,21,m[55]),V=C(V,Y,ce,re,M,6,m[56]),re=C(re,V,Y,ce,ge,10,m[57]),ce=C(ce,re,V,Y,G,15,m[58]),Y=C(Y,ce,re,V,de,21,m[59]),V=C(V,Y,ce,re,K,6,m[60]),re=C(re,V,Y,ce,le,10,m[61]),ce=C(ce,re,V,Y,U,15,m[62]),Y=C(Y,ce,re,V,F,21,m[63]),B[0]=B[0]+V|0,B[1]=B[1]+Y|0,B[2]=B[2]+ce|0,B[3]=B[3]+re|0},_doFinalize:function(){var w=this._data,_=w.words,k=this._nDataBytes*8,E=w.sigBytes*8;_[E>>>5]|=128<<24-E%32;var S=u.floor(k/4294967296),B=k;_[(E+64>>>9<<4)+15]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,_[(E+64>>>9<<4)+14]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,w.sigBytes=(_.length+1)*4,this._process();for(var P=this._hash,L=P.words,U=0;U<4;U++){var q=L[U];L[U]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}return P},clone:function(){var w=p.clone.call(this);return w._hash=this._hash.clone(),w}});function b(w,_,k,E,S,B,P){var L=w+(_&k|~_&E)+S+P;return(L<<B|L>>>32-B)+_}function v(w,_,k,E,S,B,P){var L=w+(_&E|k&~E)+S+P;return(L<<B|L>>>32-B)+_}function y(w,_,k,E,S,B,P){var L=w+(_^k^E)+S+P;return(L<<B|L>>>32-B)+_}function C(w,_,k,E,S,B,P){var L=w+(k^(_|~E))+S+P;return(L<<B|L>>>32-B)+_}l.MD5=p._createHelper(g),l.HmacMD5=p._createHmacHelper(g)}(Math),a.MD5})}(md5)),md5.exports}var sha1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.WordArray,d=l.Hasher,p=u.algo,x=[],m=p.SHA1=d.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(g,b){for(var v=this._hash.words,y=v[0],C=v[1],w=v[2],_=v[3],k=v[4],E=0;E<80;E++){if(E<16)x[E]=g[b+E]|0;else{var S=x[E-3]^x[E-8]^x[E-14]^x[E-16];x[E]=S<<1|S>>>31}var B=(y<<5|y>>>27)+k+x[E];E<20?B+=(C&w|~C&_)+1518500249:E<40?B+=(C^w^_)+1859775393:E<60?B+=(C&w|C&_|w&_)-1894007588:B+=(C^w^_)-899497514,k=_,_=w,w=C<<30|C>>>2,C=y,y=B}v[0]=v[0]+y|0,v[1]=v[1]+C|0,v[2]=v[2]+w|0,v[3]=v[3]+_|0,v[4]=v[4]+k|0},_doFinalize:function(){var g=this._data,b=g.words,v=this._nDataBytes*8,y=g.sigBytes*8;return b[y>>>5]|=128<<24-y%32,b[(y+64>>>9<<4)+14]=Math.floor(v/4294967296),b[(y+64>>>9<<4)+15]=v,g.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var g=d.clone.call(this);return g._hash=this._hash.clone(),g}});u.SHA1=d._createHelper(m),u.HmacSHA1=d._createHmacHelper(m)}(),a.SHA1})}(sha1)),sha1.exports}var sha256={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){return function(u){var l=a,h=l.lib,d=h.WordArray,p=h.Hasher,x=l.algo,m=[],g=[];(function(){function y(k){for(var E=u.sqrt(k),S=2;S<=E;S++)if(!(k%S))return!1;return!0}function C(k){return(k-(k|0))*4294967296|0}for(var w=2,_=0;_<64;)y(w)&&(_<8&&(m[_]=C(u.pow(w,1/2))),g[_]=C(u.pow(w,1/3)),_++),w++})();var b=[],v=x.SHA256=p.extend({_doReset:function(){this._hash=new d.init(m.slice(0))},_doProcessBlock:function(y,C){for(var w=this._hash.words,_=w[0],k=w[1],E=w[2],S=w[3],B=w[4],P=w[5],L=w[6],U=w[7],q=0;q<64;q++){if(q<16)b[q]=y[C+q]|0;else{var K=b[q-15],z=(K<<25|K>>>7)^(K<<14|K>>>18)^K>>>3,G=b[q-2],N=(G<<15|G>>>17)^(G<<13|G>>>19)^G>>>10;b[q]=z+b[q-7]+N+b[q-16]}var M=B&P^~B&L,F=_&k^_&E^k&E,J=(_<<30|_>>>2)^(_<<19|_>>>13)^(_<<10|_>>>22),le=(B<<26|B>>>6)^(B<<21|B>>>11)^(B<<7|B>>>25),te=U+le+M+g[q]+b[q],de=J+F;U=L,L=P,P=B,B=S+te|0,S=E,E=k,k=_,_=te+de|0}w[0]=w[0]+_|0,w[1]=w[1]+k|0,w[2]=w[2]+E|0,w[3]=w[3]+S|0,w[4]=w[4]+B|0,w[5]=w[5]+P|0,w[6]=w[6]+L|0,w[7]=w[7]+U|0},_doFinalize:function(){var y=this._data,C=y.words,w=this._nDataBytes*8,_=y.sigBytes*8;return C[_>>>5]|=128<<24-_%32,C[(_+64>>>9<<4)+14]=u.floor(w/4294967296),C[(_+64>>>9<<4)+15]=w,y.sigBytes=C.length*4,this._process(),this._hash},clone:function(){var y=p.clone.call(this);return y._hash=this._hash.clone(),y}});l.SHA256=p._createHelper(v),l.HmacSHA256=p._createHmacHelper(v)}(Math),a.SHA256})}(sha256)),sha256.exports}var sha224={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireSha256())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.WordArray,d=u.algo,p=d.SHA256,x=d.SHA224=p.extend({_doReset:function(){this._hash=new h.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=p._doFinalize.call(this);return m.sigBytes-=4,m}});u.SHA224=p._createHelper(x),u.HmacSHA224=p._createHmacHelper(x)}(),a.SHA224})}(sha224)),sha224.exports}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireX64Core())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.Hasher,d=u.x64,p=d.Word,x=d.WordArray,m=u.algo;function g(){return p.create.apply(p,arguments)}var b=[g(1116352408,3609767458),g(1899447441,602891725),g(3049323471,3964484399),g(3921009573,2173295548),g(961987163,4081628472),g(1508970993,3053834265),g(2453635748,2937671579),g(2870763221,3664609560),g(3624381080,2734883394),g(310598401,1164996542),g(607225278,1323610764),g(1426881987,3590304994),g(1925078388,4068182383),g(2162078206,991336113),g(2614888103,633803317),g(3248222580,3479774868),g(3835390401,2666613458),g(4022224774,944711139),g(264347078,2341262773),g(604807628,2007800933),g(770255983,1495990901),g(1249150122,1856431235),g(1555081692,3175218132),g(1996064986,2198950837),g(2554220882,3999719339),g(2821834349,766784016),g(2952996808,2566594879),g(3210313671,3203337956),g(3336571891,1034457026),g(3584528711,2466948901),g(113926993,3758326383),g(338241895,168717936),g(666307205,1188179964),g(773529912,1546045734),g(1294757372,1522805485),g(1396182291,2643833823),g(1695183700,2343527390),g(1986661051,1014477480),g(2177026350,1206759142),g(2456956037,344077627),g(2730485921,1290863460),g(2820302411,3158454273),g(3259730800,3505952657),g(3345764771,106217008),g(3516065817,3606008344),g(3600352804,1432725776),g(4094571909,1467031594),g(275423344,851169720),g(430227734,3100823752),g(506948616,1363258195),g(659060556,3750685593),g(883997877,3785050280),g(958139571,3318307427),g(1322822218,3812723403),g(1537002063,2003034995),g(1747873779,3602036899),g(1955562222,1575990012),g(2024104815,1125592928),g(2227730452,2716904306),g(2361852424,442776044),g(2428436474,593698344),g(2756734187,3733110249),g(3204031479,2999351573),g(3329325298,3815920427),g(3391569614,3928383900),g(3515267271,566280711),g(3940187606,3454069534),g(4118630271,4000239992),g(116418474,1914138554),g(174292421,2731055270),g(289380356,3203993006),g(460393269,320620315),g(685471733,587496836),g(852142971,1086792851),g(1017036298,365543100),g(1126000580,2618297676),g(1288033470,3409855158),g(1501505948,4234509866),g(1607167915,987167468),g(1816402316,1246189591)],v=[];(function(){for(var C=0;C<80;C++)v[C]=g()})();var y=m.SHA512=h.extend({_doReset:function(){this._hash=new x.init([new p.init(1779033703,4089235720),new p.init(3144134277,2227873595),new p.init(1013904242,4271175723),new p.init(2773480762,1595750129),new p.init(1359893119,2917565137),new p.init(2600822924,725511199),new p.init(528734635,4215389547),new p.init(1541459225,327033209)])},_doProcessBlock:function(C,w){for(var _=this._hash.words,k=_[0],E=_[1],S=_[2],B=_[3],P=_[4],L=_[5],U=_[6],q=_[7],K=k.high,z=k.low,G=E.high,N=E.low,M=S.high,F=S.low,J=B.high,le=B.low,te=P.high,de=P.low,ne=L.high,ge=L.low,V=U.high,Y=U.low,ce=q.high,re=q.low,pe=K,Pe=z,Oe=G,ke=N,Te=M,Le=F,Ue=J,Ke=le,Ie=te,I=de,xe=ne,he=ge,X=V,Q=Y,oe=ce,Ce=re,me=0;me<80;me++){var ae,ve,Ee=v[me];if(me<16)ve=Ee.high=C[w+me*2]|0,ae=Ee.low=C[w+me*2+1]|0;else{var ye=v[me-15],Ae=ye.high,Fe=ye.low,Ne=(Ae>>>1|Fe<<31)^(Ae>>>8|Fe<<24)^Ae>>>7,qe=(Fe>>>1|Ae<<31)^(Fe>>>8|Ae<<24)^(Fe>>>7|Ae<<25),H=v[me-2],A=H.high,T=H.low,W=(A>>>19|T<<13)^(A<<3|T>>>29)^A>>>6,se=(T>>>19|A<<13)^(T<<3|A>>>29)^(T>>>6|A<<26),fe=v[me-7],we=fe.high,ze=fe.low,Qe=v[me-16],Ye=Qe.high,Je=Qe.low;ae=qe+ze,ve=Ne+we+(ae>>>0<qe>>>0?1:0),ae=ae+se,ve=ve+W+(ae>>>0<se>>>0?1:0),ae=ae+Je,ve=ve+Ye+(ae>>>0<Je>>>0?1:0),Ee.high=ve,Ee.low=ae}var Ve=Ie&xe^~Ie&X,at=I&he^~I&Q,ut=pe&Oe^pe&Te^Oe&Te,Ct=Pe&ke^Pe&Le^ke&Le,ot=(pe>>>28|Pe<<4)^(pe<<30|Pe>>>2)^(pe<<25|Pe>>>7),gt=(Pe>>>28|pe<<4)^(Pe<<30|pe>>>2)^(Pe<<25|pe>>>7),mt=(Ie>>>14|I<<18)^(Ie>>>18|I<<14)^(Ie<<23|I>>>9),xt=(I>>>14|Ie<<18)^(I>>>18|Ie<<14)^(I<<23|Ie>>>9),vt=b[me],Dt=vt.high,Et=vt.low,Xe=Ce+xt,ct=oe+mt+(Xe>>>0<Ce>>>0?1:0),Xe=Xe+at,ct=ct+Ve+(Xe>>>0<at>>>0?1:0),Xe=Xe+Et,ct=ct+Dt+(Xe>>>0<Et>>>0?1:0),Xe=Xe+ae,ct=ct+ve+(Xe>>>0<ae>>>0?1:0),ht=gt+Ct,_t=ot+ut+(ht>>>0<gt>>>0?1:0);oe=X,Ce=Q,X=xe,Q=he,xe=Ie,he=I,I=Ke+Xe|0,Ie=Ue+ct+(I>>>0<Ke>>>0?1:0)|0,Ue=Te,Ke=Le,Te=Oe,Le=ke,Oe=pe,ke=Pe,Pe=Xe+ht|0,pe=ct+_t+(Pe>>>0<Xe>>>0?1:0)|0}z=k.low=z+Pe,k.high=K+pe+(z>>>0<Pe>>>0?1:0),N=E.low=N+ke,E.high=G+Oe+(N>>>0<ke>>>0?1:0),F=S.low=F+Le,S.high=M+Te+(F>>>0<Le>>>0?1:0),le=B.low=le+Ke,B.high=J+Ue+(le>>>0<Ke>>>0?1:0),de=P.low=de+I,P.high=te+Ie+(de>>>0<I>>>0?1:0),ge=L.low=ge+he,L.high=ne+xe+(ge>>>0<he>>>0?1:0),Y=U.low=Y+Q,U.high=V+X+(Y>>>0<Q>>>0?1:0),re=q.low=re+Ce,q.high=ce+oe+(re>>>0<Ce>>>0?1:0)},_doFinalize:function(){var C=this._data,w=C.words,_=this._nDataBytes*8,k=C.sigBytes*8;w[k>>>5]|=128<<24-k%32,w[(k+128>>>10<<5)+30]=Math.floor(_/4294967296),w[(k+128>>>10<<5)+31]=_,C.sigBytes=w.length*4,this._process();var E=this._hash.toX32();return E},clone:function(){var C=h.clone.call(this);return C._hash=this._hash.clone(),C},blockSize:1024/32});u.SHA512=h._createHelper(y),u.HmacSHA512=h._createHmacHelper(y)}(),a.SHA512})}(sha512)),sha512.exports}var sha384={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal,function(a){return function(){var u=a,l=u.x64,h=l.Word,d=l.WordArray,p=u.algo,x=p.SHA512,m=p.SHA384=x.extend({_doReset:function(){this._hash=new d.init([new h.init(3418070365,3238371032),new h.init(1654270250,914150663),new h.init(2438529370,812702999),new h.init(355462360,4144912697),new h.init(1731405415,4290775857),new h.init(2394180231,1750603025),new h.init(3675008525,1694076839),new h.init(1203062813,3204075428)])},_doFinalize:function(){var g=x._doFinalize.call(this);return g.sigBytes-=16,g}});u.SHA384=x._createHelper(m),u.HmacSHA384=x._createHmacHelper(m)}(),a.SHA384})}(sha384)),sha384.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireX64Core())})(commonjsGlobal,function(a){return function(u){var l=a,h=l.lib,d=h.WordArray,p=h.Hasher,x=l.x64,m=x.Word,g=l.algo,b=[],v=[],y=[];(function(){for(var _=1,k=0,E=0;E<24;E++){b[_+5*k]=(E+1)*(E+2)/2%64;var S=k%5,B=(2*_+3*k)%5;_=S,k=B}for(var _=0;_<5;_++)for(var k=0;k<5;k++)v[_+5*k]=k+(2*_+3*k)%5*5;for(var P=1,L=0;L<24;L++){for(var U=0,q=0,K=0;K<7;K++){if(P&1){var z=(1<<K)-1;z<32?q^=1<<z:U^=1<<z-32}P&128?P=P<<1^113:P<<=1}y[L]=m.create(U,q)}})();var C=[];(function(){for(var _=0;_<25;_++)C[_]=m.create()})();var w=g.SHA3=p.extend({cfg:p.cfg.extend({outputLength:512}),_doReset:function(){for(var _=this._state=[],k=0;k<25;k++)_[k]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(_,k){for(var E=this._state,S=this.blockSize/2,B=0;B<S;B++){var P=_[k+2*B],L=_[k+2*B+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360;var U=E[B];U.high^=L,U.low^=P}for(var q=0;q<24;q++){for(var K=0;K<5;K++){for(var z=0,G=0,N=0;N<5;N++){var U=E[K+5*N];z^=U.high,G^=U.low}var M=C[K];M.high=z,M.low=G}for(var K=0;K<5;K++)for(var F=C[(K+4)%5],J=C[(K+1)%5],le=J.high,te=J.low,z=F.high^(le<<1|te>>>31),G=F.low^(te<<1|le>>>31),N=0;N<5;N++){var U=E[K+5*N];U.high^=z,U.low^=G}for(var de=1;de<25;de++){var z,G,U=E[de],ne=U.high,ge=U.low,V=b[de];V<32?(z=ne<<V|ge>>>32-V,G=ge<<V|ne>>>32-V):(z=ge<<V-32|ne>>>64-V,G=ne<<V-32|ge>>>64-V);var Y=C[v[de]];Y.high=z,Y.low=G}var ce=C[0],re=E[0];ce.high=re.high,ce.low=re.low;for(var K=0;K<5;K++)for(var N=0;N<5;N++){var de=K+5*N,U=E[de],pe=C[de],Pe=C[(K+1)%5+5*N],Oe=C[(K+2)%5+5*N];U.high=pe.high^~Pe.high&Oe.high,U.low=pe.low^~Pe.low&Oe.low}var U=E[0],ke=y[q];U.high^=ke.high,U.low^=ke.low}},_doFinalize:function(){var _=this._data,k=_.words;this._nDataBytes*8;var E=_.sigBytes*8,S=this.blockSize*32;k[E>>>5]|=1<<24-E%32,k[(u.ceil((E+1)/S)*S>>>5)-1]|=128,_.sigBytes=k.length*4,this._process();for(var B=this._state,P=this.cfg.outputLength/8,L=P/8,U=[],q=0;q<L;q++){var K=B[q],z=K.high,G=K.low;z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,G=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360,U.push(G),U.push(z)}return new d.init(U,P)},clone:function(){for(var _=p.clone.call(this),k=_._state=this._state.slice(0),E=0;E<25;E++)k[E]=k[E].clone();return _}});l.SHA3=p._createHelper(w),l.HmacSHA3=p._createHmacHelper(w)}(Math),a.SHA3})}(sha3)),sha3.exports}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){/** @preserve
    			(c) 2012 by Cédric Mesnil. All rights reserved.

    			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

    			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
    			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

    			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    			*/return function(u){var l=a,h=l.lib,d=h.WordArray,p=h.Hasher,x=l.algo,m=d.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=d.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=d.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),v=d.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),y=d.create([0,1518500249,1859775393,2400959708,2840853838]),C=d.create([1352829926,1548603684,1836072691,2053994217,0]),w=x.RIPEMD160=p.extend({_doReset:function(){this._hash=d.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(L,U){for(var q=0;q<16;q++){var K=U+q,z=L[K];L[K]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360}var G=this._hash.words,N=y.words,M=C.words,F=m.words,J=g.words,le=b.words,te=v.words,de,ne,ge,V,Y,ce,re,pe,Pe,Oe;ce=de=G[0],re=ne=G[1],pe=ge=G[2],Pe=V=G[3],Oe=Y=G[4];for(var ke,q=0;q<80;q+=1)ke=de+L[U+F[q]]|0,q<16?ke+=_(ne,ge,V)+N[0]:q<32?ke+=k(ne,ge,V)+N[1]:q<48?ke+=E(ne,ge,V)+N[2]:q<64?ke+=S(ne,ge,V)+N[3]:ke+=B(ne,ge,V)+N[4],ke=ke|0,ke=P(ke,le[q]),ke=ke+Y|0,de=Y,Y=V,V=P(ge,10),ge=ne,ne=ke,ke=ce+L[U+J[q]]|0,q<16?ke+=B(re,pe,Pe)+M[0]:q<32?ke+=S(re,pe,Pe)+M[1]:q<48?ke+=E(re,pe,Pe)+M[2]:q<64?ke+=k(re,pe,Pe)+M[3]:ke+=_(re,pe,Pe)+M[4],ke=ke|0,ke=P(ke,te[q]),ke=ke+Oe|0,ce=Oe,Oe=Pe,Pe=P(pe,10),pe=re,re=ke;ke=G[1]+ge+Pe|0,G[1]=G[2]+V+Oe|0,G[2]=G[3]+Y+ce|0,G[3]=G[4]+de+re|0,G[4]=G[0]+ne+pe|0,G[0]=ke},_doFinalize:function(){var L=this._data,U=L.words,q=this._nDataBytes*8,K=L.sigBytes*8;U[K>>>5]|=128<<24-K%32,U[(K+64>>>9<<4)+14]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360,L.sigBytes=(U.length+1)*4,this._process();for(var z=this._hash,G=z.words,N=0;N<5;N++){var M=G[N];G[N]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return z},clone:function(){var L=p.clone.call(this);return L._hash=this._hash.clone(),L}});function _(L,U,q){return L^U^q}function k(L,U,q){return L&U|~L&q}function E(L,U,q){return(L|~U)^q}function S(L,U,q){return L&q|U&~q}function B(L,U,q){return L^(U|~q)}function P(L,U){return L<<U|L>>>32-U}l.RIPEMD160=p._createHelper(w),l.HmacRIPEMD160=p._createHmacHelper(w)}(),a.RIPEMD160})}(ripemd160)),ripemd160.exports}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(f,s){(function(a,u){f.exports=u(requireCore())})(commonjsGlobal,function(a){(function(){var u=a,l=u.lib,h=l.Base,d=u.enc,p=d.Utf8,x=u.algo;x.HMAC=h.extend({init:function(m,g){m=this._hasher=new m.init,typeof g=="string"&&(g=p.parse(g));var b=m.blockSize,v=b*4;g.sigBytes>v&&(g=m.finalize(g)),g.clamp();for(var y=this._oKey=g.clone(),C=this._iKey=g.clone(),w=y.words,_=C.words,k=0;k<b;k++)w[k]^=1549556828,_[k]^=909522486;y.sigBytes=C.sigBytes=v,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var g=this._hasher,b=g.finalize(m);g.reset();var v=g.finalize(this._oKey.clone().concat(b));return v}})})()})}(hmac)),hmac.exports}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireSha256(),requireHmac())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.Base,d=l.WordArray,p=u.algo,x=p.SHA256,m=p.HMAC,g=p.PBKDF2=h.extend({cfg:h.extend({keySize:128/32,hasher:x,iterations:25e4}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,v){for(var y=this.cfg,C=m.create(y.hasher,b),w=d.create(),_=d.create([1]),k=w.words,E=_.words,S=y.keySize,B=y.iterations;k.length<S;){var P=C.update(v).finalize(_);C.reset();for(var L=P.words,U=L.length,q=P,K=1;K<B;K++){q=C.finalize(q),C.reset();for(var z=q.words,G=0;G<U;G++)L[G]^=z[G]}w.concat(P),E[0]++}return w.sigBytes=S*4,w}});u.PBKDF2=function(b,v,y){return g.create(y).compute(b,v)}}(),a.PBKDF2})}(pbkdf2)),pbkdf2.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.Base,d=l.WordArray,p=u.algo,x=p.MD5,m=p.EvpKDF=h.extend({cfg:h.extend({keySize:128/32,hasher:x,iterations:1}),init:function(g){this.cfg=this.cfg.extend(g)},compute:function(g,b){for(var v,y=this.cfg,C=y.hasher.create(),w=d.create(),_=w.words,k=y.keySize,E=y.iterations;_.length<k;){v&&C.update(v),v=C.update(g).finalize(b),C.reset();for(var S=1;S<E;S++)v=C.finalize(v),C.reset();w.concat(v)}return w.sigBytes=k*4,w}});u.EvpKDF=function(g,b,v){return m.create(v).compute(g,b)}}(),a.EvpKDF})}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireEvpkdf())})(commonjsGlobal,function(a){a.lib.Cipher||function(u){var l=a,h=l.lib,d=h.Base,p=h.WordArray,x=h.BufferedBlockAlgorithm,m=l.enc;m.Utf8;var g=m.Base64,b=l.algo,v=b.EvpKDF,y=h.Cipher=x.extend({cfg:d.extend(),createEncryptor:function(z,G){return this.create(this._ENC_XFORM_MODE,z,G)},createDecryptor:function(z,G){return this.create(this._DEC_XFORM_MODE,z,G)},init:function(z,G,N){this.cfg=this.cfg.extend(N),this._xformMode=z,this._key=G,this.reset()},reset:function(){x.reset.call(this),this._doReset()},process:function(z){return this._append(z),this._process()},finalize:function(z){z&&this._append(z);var G=this._doFinalize();return G},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function z(G){return typeof G=="string"?K:L}return function(G){return{encrypt:function(N,M,F){return z(M).encrypt(G,N,M,F)},decrypt:function(N,M,F){return z(M).decrypt(G,N,M,F)}}}}()});h.StreamCipher=y.extend({_doFinalize:function(){var z=this._process(!0);return z},blockSize:1});var C=l.mode={},w=h.BlockCipherMode=d.extend({createEncryptor:function(z,G){return this.Encryptor.create(z,G)},createDecryptor:function(z,G){return this.Decryptor.create(z,G)},init:function(z,G){this._cipher=z,this._iv=G}}),_=C.CBC=function(){var z=w.extend();z.Encryptor=z.extend({processBlock:function(N,M){var F=this._cipher,J=F.blockSize;G.call(this,N,M,J),F.encryptBlock(N,M),this._prevBlock=N.slice(M,M+J)}}),z.Decryptor=z.extend({processBlock:function(N,M){var F=this._cipher,J=F.blockSize,le=N.slice(M,M+J);F.decryptBlock(N,M),G.call(this,N,M,J),this._prevBlock=le}});function G(N,M,F){var J,le=this._iv;le?(J=le,this._iv=u):J=this._prevBlock;for(var te=0;te<F;te++)N[M+te]^=J[te]}return z}(),k=l.pad={},E=k.Pkcs7={pad:function(z,G){for(var N=G*4,M=N-z.sigBytes%N,F=M<<24|M<<16|M<<8|M,J=[],le=0;le<M;le+=4)J.push(F);var te=p.create(J,M);z.concat(te)},unpad:function(z){var G=z.words[z.sigBytes-1>>>2]&255;z.sigBytes-=G}};h.BlockCipher=y.extend({cfg:y.cfg.extend({mode:_,padding:E}),reset:function(){var z;y.reset.call(this);var G=this.cfg,N=G.iv,M=G.mode;this._xformMode==this._ENC_XFORM_MODE?z=M.createEncryptor:(z=M.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==z?this._mode.init(this,N&&N.words):(this._mode=z.call(M,this,N&&N.words),this._mode.__creator=z)},_doProcessBlock:function(z,G){this._mode.processBlock(z,G)},_doFinalize:function(){var z,G=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(G.pad(this._data,this.blockSize),z=this._process(!0)):(z=this._process(!0),G.unpad(z)),z},blockSize:128/32});var S=h.CipherParams=d.extend({init:function(z){this.mixIn(z)},toString:function(z){return(z||this.formatter).stringify(this)}}),B=l.format={},P=B.OpenSSL={stringify:function(z){var G,N=z.ciphertext,M=z.salt;return M?G=p.create([1398893684,1701076831]).concat(M).concat(N):G=N,G.toString(g)},parse:function(z){var G,N=g.parse(z),M=N.words;return M[0]==1398893684&&M[1]==1701076831&&(G=p.create(M.slice(2,4)),M.splice(0,4),N.sigBytes-=16),S.create({ciphertext:N,salt:G})}},L=h.SerializableCipher=d.extend({cfg:d.extend({format:P}),encrypt:function(z,G,N,M){M=this.cfg.extend(M);var F=z.createEncryptor(N,M),J=F.finalize(G),le=F.cfg;return S.create({ciphertext:J,key:N,iv:le.iv,algorithm:z,mode:le.mode,padding:le.padding,blockSize:z.blockSize,formatter:M.format})},decrypt:function(z,G,N,M){M=this.cfg.extend(M),G=this._parse(G,M.format);var F=z.createDecryptor(N,M).finalize(G.ciphertext);return F},_parse:function(z,G){return typeof z=="string"?G.parse(z,this):z}}),U=l.kdf={},q=U.OpenSSL={execute:function(z,G,N,M,F){if(M||(M=p.random(64/8)),F)var J=v.create({keySize:G+N,hasher:F}).compute(z,M);else var J=v.create({keySize:G+N}).compute(z,M);var le=p.create(J.words.slice(G),N*4);return J.sigBytes=G*4,S.create({key:J,iv:le,salt:M})}},K=h.PasswordBasedCipher=L.extend({cfg:L.cfg.extend({kdf:q}),encrypt:function(z,G,N,M){M=this.cfg.extend(M);var F=M.kdf.execute(N,z.keySize,z.ivSize,M.salt,M.hasher);M.iv=F.iv;var J=L.encrypt.call(this,z,G,F.key,M);return J.mixIn(F),J},decrypt:function(z,G,N,M){M=this.cfg.extend(M),G=this._parse(G,M.format);var F=M.kdf.execute(N,z.keySize,z.ivSize,G.salt,M.hasher);M.iv=F.iv;var J=L.decrypt.call(this,z,G,F.key,M);return J}})}()})}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.mode.CFB=function(){var u=a.lib.BlockCipherMode.extend();u.Encryptor=u.extend({processBlock:function(h,d){var p=this._cipher,x=p.blockSize;l.call(this,h,d,x,p),this._prevBlock=h.slice(d,d+x)}}),u.Decryptor=u.extend({processBlock:function(h,d){var p=this._cipher,x=p.blockSize,m=h.slice(d,d+x);l.call(this,h,d,x,p),this._prevBlock=m}});function l(h,d,p,x){var m,g=this._iv;g?(m=g.slice(0),this._iv=void 0):m=this._prevBlock,x.encryptBlock(m,0);for(var b=0;b<p;b++)h[d+b]^=m[b]}return u}(),a.mode.CFB})}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.mode.CTR=function(){var u=a.lib.BlockCipherMode.extend(),l=u.Encryptor=u.extend({processBlock:function(h,d){var p=this._cipher,x=p.blockSize,m=this._iv,g=this._counter;m&&(g=this._counter=m.slice(0),this._iv=void 0);var b=g.slice(0);p.encryptBlock(b,0),g[x-1]=g[x-1]+1|0;for(var v=0;v<x;v++)h[d+v]^=b[v]}});return u.Decryptor=l,u}(),a.mode.CTR})}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return a.mode.CTRGladman=function(){var u=a.lib.BlockCipherMode.extend();function l(p){if((p>>24&255)===255){var x=p>>16&255,m=p>>8&255,g=p&255;x===255?(x=0,m===255?(m=0,g===255?g=0:++g):++m):++x,p=0,p+=x<<16,p+=m<<8,p+=g}else p+=1<<24;return p}function h(p){return(p[0]=l(p[0]))===0&&(p[1]=l(p[1])),p}var d=u.Encryptor=u.extend({processBlock:function(p,x){var m=this._cipher,g=m.blockSize,b=this._iv,v=this._counter;b&&(v=this._counter=b.slice(0),this._iv=void 0),h(v);var y=v.slice(0);m.encryptBlock(y,0);for(var C=0;C<g;C++)p[x+C]^=y[C]}});return u.Decryptor=d,u}(),a.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.mode.OFB=function(){var u=a.lib.BlockCipherMode.extend(),l=u.Encryptor=u.extend({processBlock:function(h,d){var p=this._cipher,x=p.blockSize,m=this._iv,g=this._keystream;m&&(g=this._keystream=m.slice(0),this._iv=void 0),p.encryptBlock(g,0);for(var b=0;b<x;b++)h[d+b]^=g[b]}});return u.Decryptor=l,u}(),a.mode.OFB})}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.mode.ECB=function(){var u=a.lib.BlockCipherMode.extend();return u.Encryptor=u.extend({processBlock:function(l,h){this._cipher.encryptBlock(l,h)}}),u.Decryptor=u.extend({processBlock:function(l,h){this._cipher.decryptBlock(l,h)}}),u}(),a.mode.ECB})}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.pad.AnsiX923={pad:function(u,l){var h=u.sigBytes,d=l*4,p=d-h%d,x=h+p-1;u.clamp(),u.words[x>>>2]|=p<<24-x%4*8,u.sigBytes+=p},unpad:function(u){var l=u.words[u.sigBytes-1>>>2]&255;u.sigBytes-=l}},a.pad.Ansix923})}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.pad.Iso10126={pad:function(u,l){var h=l*4,d=h-u.sigBytes%h;u.concat(a.lib.WordArray.random(d-1)).concat(a.lib.WordArray.create([d<<24],1))},unpad:function(u){var l=u.words[u.sigBytes-1>>>2]&255;u.sigBytes-=l}},a.pad.Iso10126})}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.pad.Iso97971={pad:function(u,l){u.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(u,l)},unpad:function(u){a.pad.ZeroPadding.unpad(u),u.sigBytes--}},a.pad.Iso97971})}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.pad.ZeroPadding={pad:function(u,l){var h=l*4;u.clamp(),u.sigBytes+=h-(u.sigBytes%h||h)},unpad:function(u){for(var l=u.words,h=u.sigBytes-1,h=u.sigBytes-1;h>=0;h--)if(l[h>>>2]>>>24-h%4*8&255){u.sigBytes=h+1;break}}},a.pad.ZeroPadding})}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return a.pad.NoPadding={pad:function(){},unpad:function(){}},a.pad.NoPadding})}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireCipherCore())})(commonjsGlobal,function(a){return function(u){var l=a,h=l.lib,d=h.CipherParams,p=l.enc,x=p.Hex,m=l.format;m.Hex={stringify:function(g){return g.ciphertext.toString(x)},parse:function(g){var b=x.parse(g);return d.create({ciphertext:b})}}}(),a.format.Hex})}(formatHex)),formatHex.exports}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.BlockCipher,d=u.algo,p=[],x=[],m=[],g=[],b=[],v=[],y=[],C=[],w=[],_=[];(function(){for(var S=[],B=0;B<256;B++)B<128?S[B]=B<<1:S[B]=B<<1^283;for(var P=0,L=0,B=0;B<256;B++){var U=L^L<<1^L<<2^L<<3^L<<4;U=U>>>8^U&255^99,p[P]=U,x[U]=P;var q=S[P],K=S[q],z=S[K],G=S[U]*257^U*16843008;m[P]=G<<24|G>>>8,g[P]=G<<16|G>>>16,b[P]=G<<8|G>>>24,v[P]=G;var G=z*16843009^K*65537^q*257^P*16843008;y[U]=G<<24|G>>>8,C[U]=G<<16|G>>>16,w[U]=G<<8|G>>>24,_[U]=G,P?(P=q^S[S[S[z^q]]],L^=S[S[L]]):P=L=1}})();var k=[0,1,2,4,8,16,32,64,128,27,54],E=d.AES=h.extend({_doReset:function(){var S;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var B=this._keyPriorReset=this._key,P=B.words,L=B.sigBytes/4,U=this._nRounds=L+6,q=(U+1)*4,K=this._keySchedule=[],z=0;z<q;z++)z<L?K[z]=P[z]:(S=K[z-1],z%L?L>6&&z%L==4&&(S=p[S>>>24]<<24|p[S>>>16&255]<<16|p[S>>>8&255]<<8|p[S&255]):(S=S<<8|S>>>24,S=p[S>>>24]<<24|p[S>>>16&255]<<16|p[S>>>8&255]<<8|p[S&255],S^=k[z/L|0]<<24),K[z]=K[z-L]^S);for(var G=this._invKeySchedule=[],N=0;N<q;N++){var z=q-N;if(N%4)var S=K[z];else var S=K[z-4];N<4||z<=4?G[N]=S:G[N]=y[p[S>>>24]]^C[p[S>>>16&255]]^w[p[S>>>8&255]]^_[p[S&255]]}}},encryptBlock:function(S,B){this._doCryptBlock(S,B,this._keySchedule,m,g,b,v,p)},decryptBlock:function(S,B){var P=S[B+1];S[B+1]=S[B+3],S[B+3]=P,this._doCryptBlock(S,B,this._invKeySchedule,y,C,w,_,x);var P=S[B+1];S[B+1]=S[B+3],S[B+3]=P},_doCryptBlock:function(S,B,P,L,U,q,K,z){for(var G=this._nRounds,N=S[B]^P[0],M=S[B+1]^P[1],F=S[B+2]^P[2],J=S[B+3]^P[3],le=4,te=1;te<G;te++){var de=L[N>>>24]^U[M>>>16&255]^q[F>>>8&255]^K[J&255]^P[le++],ne=L[M>>>24]^U[F>>>16&255]^q[J>>>8&255]^K[N&255]^P[le++],ge=L[F>>>24]^U[J>>>16&255]^q[N>>>8&255]^K[M&255]^P[le++],V=L[J>>>24]^U[N>>>16&255]^q[M>>>8&255]^K[F&255]^P[le++];N=de,M=ne,F=ge,J=V}var de=(z[N>>>24]<<24|z[M>>>16&255]<<16|z[F>>>8&255]<<8|z[J&255])^P[le++],ne=(z[M>>>24]<<24|z[F>>>16&255]<<16|z[J>>>8&255]<<8|z[N&255])^P[le++],ge=(z[F>>>24]<<24|z[J>>>16&255]<<16|z[N>>>8&255]<<8|z[M&255])^P[le++],V=(z[J>>>24]<<24|z[N>>>16&255]<<16|z[M>>>8&255]<<8|z[F&255])^P[le++];S[B]=de,S[B+1]=ne,S[B+2]=ge,S[B+3]=V},keySize:256/32});u.AES=h._createHelper(E)}(),a.AES})}(aes)),aes.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.WordArray,d=l.BlockCipher,p=u.algo,x=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],g=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],b=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],v=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],y=p.DES=d.extend({_doReset:function(){for(var k=this._key,E=k.words,S=[],B=0;B<56;B++){var P=x[B]-1;S[B]=E[P>>>5]>>>31-P%32&1}for(var L=this._subKeys=[],U=0;U<16;U++){for(var q=L[U]=[],K=g[U],B=0;B<24;B++)q[B/6|0]|=S[(m[B]-1+K)%28]<<31-B%6,q[4+(B/6|0)]|=S[28+(m[B+24]-1+K)%28]<<31-B%6;q[0]=q[0]<<1|q[0]>>>31;for(var B=1;B<7;B++)q[B]=q[B]>>>(B-1)*4+3;q[7]=q[7]<<5|q[7]>>>27}for(var z=this._invSubKeys=[],B=0;B<16;B++)z[B]=L[15-B]},encryptBlock:function(k,E){this._doCryptBlock(k,E,this._subKeys)},decryptBlock:function(k,E){this._doCryptBlock(k,E,this._invSubKeys)},_doCryptBlock:function(k,E,S){this._lBlock=k[E],this._rBlock=k[E+1],C.call(this,4,252645135),C.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),C.call(this,1,1431655765);for(var B=0;B<16;B++){for(var P=S[B],L=this._lBlock,U=this._rBlock,q=0,K=0;K<8;K++)q|=b[K][((U^P[K])&v[K])>>>0];this._lBlock=U,this._rBlock=L^q}var z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=z,C.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),C.call(this,16,65535),C.call(this,4,252645135),k[E]=this._lBlock,k[E+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function C(k,E){var S=(this._lBlock>>>k^this._rBlock)&E;this._rBlock^=S,this._lBlock^=S<<k}function w(k,E){var S=(this._rBlock>>>k^this._lBlock)&E;this._lBlock^=S,this._rBlock^=S<<k}u.DES=d._createHelper(y);var _=p.TripleDES=d.extend({_doReset:function(){var k=this._key,E=k.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var S=E.slice(0,2),B=E.length<4?E.slice(0,2):E.slice(2,4),P=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=y.createEncryptor(h.create(S)),this._des2=y.createEncryptor(h.create(B)),this._des3=y.createEncryptor(h.create(P))},encryptBlock:function(k,E){this._des1.encryptBlock(k,E),this._des2.decryptBlock(k,E),this._des3.encryptBlock(k,E)},decryptBlock:function(k,E){this._des3.decryptBlock(k,E),this._des2.encryptBlock(k,E),this._des1.decryptBlock(k,E)},keySize:192/32,ivSize:64/32,blockSize:64/32});u.TripleDES=d._createHelper(_)}(),a.TripleDES})}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.StreamCipher,d=u.algo,p=d.RC4=h.extend({_doReset:function(){for(var g=this._key,b=g.words,v=g.sigBytes,y=this._S=[],C=0;C<256;C++)y[C]=C;for(var C=0,w=0;C<256;C++){var _=C%v,k=b[_>>>2]>>>24-_%4*8&255;w=(w+y[C]+k)%256;var E=y[C];y[C]=y[w],y[w]=E}this._i=this._j=0},_doProcessBlock:function(g,b){g[b]^=x.call(this)},keySize:256/32,ivSize:0});function x(){for(var g=this._S,b=this._i,v=this._j,y=0,C=0;C<4;C++){b=(b+1)%256,v=(v+g[b])%256;var w=g[b];g[b]=g[v],g[v]=w,y|=g[(g[b]+g[v])%256]<<24-C*8}return this._i=b,this._j=v,y}u.RC4=h._createHelper(p);var m=d.RC4Drop=p.extend({cfg:p.cfg.extend({drop:192}),_doReset:function(){p._doReset.call(this);for(var g=this.cfg.drop;g>0;g--)x.call(this)}});u.RC4Drop=h._createHelper(m)}(),a.RC4})}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.StreamCipher,d=u.algo,p=[],x=[],m=[],g=d.Rabbit=h.extend({_doReset:function(){for(var v=this._key.words,y=this.cfg.iv,C=0;C<4;C++)v[C]=(v[C]<<8|v[C]>>>24)&16711935|(v[C]<<24|v[C]>>>8)&4278255360;var w=this._X=[v[0],v[3]<<16|v[2]>>>16,v[1],v[0]<<16|v[3]>>>16,v[2],v[1]<<16|v[0]>>>16,v[3],v[2]<<16|v[1]>>>16],_=this._C=[v[2]<<16|v[2]>>>16,v[0]&4294901760|v[1]&65535,v[3]<<16|v[3]>>>16,v[1]&4294901760|v[2]&65535,v[0]<<16|v[0]>>>16,v[2]&4294901760|v[3]&65535,v[1]<<16|v[1]>>>16,v[3]&4294901760|v[0]&65535];this._b=0;for(var C=0;C<4;C++)b.call(this);for(var C=0;C<8;C++)_[C]^=w[C+4&7];if(y){var k=y.words,E=k[0],S=k[1],B=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,P=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,L=B>>>16|P&4294901760,U=P<<16|B&65535;_[0]^=B,_[1]^=L,_[2]^=P,_[3]^=U,_[4]^=B,_[5]^=L,_[6]^=P,_[7]^=U;for(var C=0;C<4;C++)b.call(this)}},_doProcessBlock:function(v,y){var C=this._X;b.call(this),p[0]=C[0]^C[5]>>>16^C[3]<<16,p[1]=C[2]^C[7]>>>16^C[5]<<16,p[2]=C[4]^C[1]>>>16^C[7]<<16,p[3]=C[6]^C[3]>>>16^C[1]<<16;for(var w=0;w<4;w++)p[w]=(p[w]<<8|p[w]>>>24)&16711935|(p[w]<<24|p[w]>>>8)&4278255360,v[y+w]^=p[w]},blockSize:128/32,ivSize:64/32});function b(){for(var v=this._X,y=this._C,C=0;C<8;C++)x[C]=y[C];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<x[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<x[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<x[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<x[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<x[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<x[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<x[6]>>>0?1:0)|0,this._b=y[7]>>>0<x[7]>>>0?1:0;for(var C=0;C<8;C++){var w=v[C]+y[C],_=w&65535,k=w>>>16,E=((_*_>>>17)+_*k>>>15)+k*k,S=((w&4294901760)*w|0)+((w&65535)*w|0);m[C]=E^S}v[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,v[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,v[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,v[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,v[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,v[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,v[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,v[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}u.Rabbit=h._createHelper(g)}(),a.Rabbit})}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.StreamCipher,d=u.algo,p=[],x=[],m=[],g=d.RabbitLegacy=h.extend({_doReset:function(){var v=this._key.words,y=this.cfg.iv,C=this._X=[v[0],v[3]<<16|v[2]>>>16,v[1],v[0]<<16|v[3]>>>16,v[2],v[1]<<16|v[0]>>>16,v[3],v[2]<<16|v[1]>>>16],w=this._C=[v[2]<<16|v[2]>>>16,v[0]&4294901760|v[1]&65535,v[3]<<16|v[3]>>>16,v[1]&4294901760|v[2]&65535,v[0]<<16|v[0]>>>16,v[2]&4294901760|v[3]&65535,v[1]<<16|v[1]>>>16,v[3]&4294901760|v[0]&65535];this._b=0;for(var _=0;_<4;_++)b.call(this);for(var _=0;_<8;_++)w[_]^=C[_+4&7];if(y){var k=y.words,E=k[0],S=k[1],B=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,P=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,L=B>>>16|P&4294901760,U=P<<16|B&65535;w[0]^=B,w[1]^=L,w[2]^=P,w[3]^=U,w[4]^=B,w[5]^=L,w[6]^=P,w[7]^=U;for(var _=0;_<4;_++)b.call(this)}},_doProcessBlock:function(v,y){var C=this._X;b.call(this),p[0]=C[0]^C[5]>>>16^C[3]<<16,p[1]=C[2]^C[7]>>>16^C[5]<<16,p[2]=C[4]^C[1]>>>16^C[7]<<16,p[3]=C[6]^C[3]>>>16^C[1]<<16;for(var w=0;w<4;w++)p[w]=(p[w]<<8|p[w]>>>24)&16711935|(p[w]<<24|p[w]>>>8)&4278255360,v[y+w]^=p[w]},blockSize:128/32,ivSize:64/32});function b(){for(var v=this._X,y=this._C,C=0;C<8;C++)x[C]=y[C];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<x[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<x[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<x[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<x[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<x[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<x[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<x[6]>>>0?1:0)|0,this._b=y[7]>>>0<x[7]>>>0?1:0;for(var C=0;C<8;C++){var w=v[C]+y[C],_=w&65535,k=w>>>16,E=((_*_>>>17)+_*k>>>15)+k*k,S=((w&4294901760)*w|0)+((w&65535)*w|0);m[C]=E^S}v[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,v[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,v[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,v[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,v[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,v[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,v[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,v[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}u.RabbitLegacy=h._createHelper(g)}(),a.RabbitLegacy})}(rabbitLegacy)),rabbitLegacy.exports}var blowfish={exports:{}},hasRequiredBlowfish;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(a){return function(){var u=a,l=u.lib,h=l.BlockCipher,d=u.algo;const p=16,x=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var g={pbox:[],sbox:[]};function b(_,k){let E=k>>24&255,S=k>>16&255,B=k>>8&255,P=k&255,L=_.sbox[0][E]+_.sbox[1][S];return L=L^_.sbox[2][B],L=L+_.sbox[3][P],L}function v(_,k,E){let S=k,B=E,P;for(let L=0;L<p;++L)S=S^_.pbox[L],B=b(_,S)^B,P=S,S=B,B=P;return P=S,S=B,B=P,B=B^_.pbox[p],S=S^_.pbox[p+1],{left:S,right:B}}function y(_,k,E){let S=k,B=E,P;for(let L=p+1;L>1;--L)S=S^_.pbox[L],B=b(_,S)^B,P=S,S=B,B=P;return P=S,S=B,B=P,B=B^_.pbox[1],S=S^_.pbox[0],{left:S,right:B}}function C(_,k,E){for(let U=0;U<4;U++){_.sbox[U]=[];for(let q=0;q<256;q++)_.sbox[U][q]=m[U][q]}let S=0;for(let U=0;U<p+2;U++)_.pbox[U]=x[U]^k[S],S++,S>=E&&(S=0);let B=0,P=0,L=0;for(let U=0;U<p+2;U+=2)L=v(_,B,P),B=L.left,P=L.right,_.pbox[U]=B,_.pbox[U+1]=P;for(let U=0;U<4;U++)for(let q=0;q<256;q+=2)L=v(_,B,P),B=L.left,P=L.right,_.sbox[U][q]=B,_.sbox[U][q+1]=P;return!0}var w=d.Blowfish=h.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var _=this._keyPriorReset=this._key,k=_.words,E=_.sigBytes/4;C(g,k,E)}},encryptBlock:function(_,k){var E=v(g,_[k],_[k+1]);_[k]=E.left,_[k+1]=E.right},decryptBlock:function(_,k){var E=y(g,_[k],_[k+1]);_[k]=E.left,_[k+1]=E.right},blockSize:64/32,keySize:128/32,ivSize:64/32});u.Blowfish=h._createHelper(w)}(),a.Blowfish})}(blowfish)),blowfish.exports}(function(f,s){(function(a,u,l){f.exports=u(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish())})(commonjsGlobal,function(a){return a})})(cryptoJs);var cryptoJsExports=cryptoJs.exports,basicContext_min={exports:{}};(function(f){(function(s,a){f.exports?f.exports=a():window[s]=a()})("basicContext",function(){var s=null,a="item",u="separator",l=function(){var C=arguments.length<=0||arguments[0]===void 0?"":arguments[0];return document.querySelector(".basicContext "+C)},h=function(){var C=arguments.length<=0||arguments[0]===void 0?{}:arguments[0],w=Object.keys(C).length===0;return w===!0&&(C.type=u),C.type==null&&(C.type=a),C.class==null&&(C.class=""),C.visible!==!1&&(C.visible=!0),C.icon==null&&(C.icon=null),C.title==null&&(C.title="Undefined"),C.disabled!==!0&&(C.disabled=!1),C.disabled===!0&&(C.class+=" basicContext__item--disabled"),C.fn==null&&C.type!==u&&C.disabled===!1?(console.warn("Missing fn for item '"+C.title+"'"),!1):!0},d=function(C,w){var _="",k="";return h(C)===!1||C.visible===!1?"":(C.num=w,C.icon!==null&&(k="<span class='basicContext__icon "+C.icon+"'></span>"),C.type===a?_=`
		       <tr class='basicContext__item `+C.class+`'>
		           <td class='basicContext__data' data-num='`+C.num+"'>"+k+C.title+`</td>
		       </tr>
		       `:C.type===u&&(_=`
		       <tr class='basicContext__item basicContext__item--separator'></tr>
		       `),_)},p=function(C){var w="";return w+=`
	        <div class='basicContextContainer'>
	            <div class='basicContext'>
	                <table>
	                    <tbody>
	        `,C.forEach(function(_,k){return w+=d(_,k)}),w+=`
	                    </tbody>
	                </table>
	            </div>
	        </div>
	        `},x=function(){var C=arguments.length<=0||arguments[0]===void 0?{}:arguments[0],w={x:C.clientX,y:C.clientY};if(C.type==="touchend"&&(w.x==null||w.y==null)){var _=C.changedTouches;_!=null&&_.length>0&&(w.x=_[0].clientX,w.y=_[0].clientY)}return(w.x==null||w.x<0)&&(w.x=0),(w.y==null||w.y<0)&&(w.y=0),w},m=function(C,w){var _=x(C),k=_.x,E=_.y,S={width:window.innerWidth,height:window.innerHeight},B={width:w.offsetWidth,height:w.offsetHeight};k+B.width>S.width&&(k-=k+B.width-S.width),E+B.height>S.height&&(E-=E+B.height-S.height),B.height>S.height&&(E=0,w.classList.add("basicContext--scrollable"));var P=_.x-k,L=_.y-E;return{x:k,y:E,rx:P,ry:L}},g=function(){var C=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];return C.fn==null||C.visible===!1||C.disabled===!0?!1:(l("td[data-num='"+C.num+"']").onclick=C.fn,l("td[data-num='"+C.num+"']").oncontextmenu=C.fn,!0)},b=function(C,w,_,k){var E=p(C);document.body.insertAdjacentHTML("beforeend",E),s==null&&(s=document.body.style.overflow,document.body.style.overflow="hidden");var S=l(),B=m(w,S);return S.style.left=B.x+"px",S.style.top=B.y+"px",S.style.transformOrigin=B.rx+"px "+B.ry+"px",S.style.opacity=1,_==null&&(_=y),S.parentElement.onclick=_,S.parentElement.oncontextmenu=_,C.forEach(g),typeof w.preventDefault=="function"&&w.preventDefault(),typeof w.stopPropagation=="function"&&w.stopPropagation(),typeof k=="function"&&k(),!0},v=function(){var C=l();return!(C==null||C.length===0)},y=function(){if(v()===!1)return!1;var C=document.querySelector(".basicContextContainer");return C.parentElement.removeChild(C),s!=null&&(document.body.style.overflow=s,s=null),!0};return{ITEM:a,SEPARATOR:u,show:b,visible:v,close:y}})})(basicContext_min);var basicContext_minExports=basicContext_min.exports,dayjs_min={exports:{}};(function(f,s){(function(a,u){f.exports=u()})(commonjsGlobal,function(){var a=1e3,u=6e4,l=36e5,h="millisecond",d="second",p="minute",x="hour",m="day",g="week",b="month",v="quarter",y="year",C="date",w="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var F=["th","st","nd","rd"],J=M%100;return"["+M+(F[(J-20)%10]||F[J]||F[0])+"]"}},S=function(M,F,J){var le=String(M);return!le||le.length>=F?M:""+Array(F+1-le.length).join(J)+M},B={s:S,z:function(M){var F=-M.utcOffset(),J=Math.abs(F),le=Math.floor(J/60),te=J%60;return(F<=0?"+":"-")+S(le,2,"0")+":"+S(te,2,"0")},m:function M(F,J){if(F.date()<J.date())return-M(J,F);var le=12*(J.year()-F.year())+(J.month()-F.month()),te=F.clone().add(le,b),de=J-te<0,ne=F.clone().add(le+(de?-1:1),b);return+(-(le+(J-te)/(de?te-ne:ne-te))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:b,y,w:g,d:m,D:C,h:x,m:p,s:d,ms:h,Q:v}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},P="en",L={};L[P]=E;var U=function(M){return M instanceof G},q=function M(F,J,le){var te;if(!F)return P;if(typeof F=="string"){var de=F.toLowerCase();L[de]&&(te=de),J&&(L[de]=J,te=de);var ne=F.split("-");if(!te&&ne.length>1)return M(ne[0])}else{var ge=F.name;L[ge]=F,te=ge}return!le&&te&&(P=te),te||!le&&P},K=function(M,F){if(U(M))return M.clone();var J=typeof F=="object"?F:{};return J.date=M,J.args=arguments,new G(J)},z=B;z.l=q,z.i=U,z.w=function(M,F){return K(M,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var G=function(){function M(J){this.$L=q(J.locale,null,!0),this.parse(J)}var F=M.prototype;return F.parse=function(J){this.$d=function(le){var te=le.date,de=le.utc;if(te===null)return new Date(NaN);if(z.u(te))return new Date;if(te instanceof Date)return new Date(te);if(typeof te=="string"&&!/Z$/i.test(te)){var ne=te.match(_);if(ne){var ge=ne[2]-1||0,V=(ne[7]||"0").substring(0,3);return de?new Date(Date.UTC(ne[1],ge,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,V)):new Date(ne[1],ge,ne[3]||1,ne[4]||0,ne[5]||0,ne[6]||0,V)}}return new Date(te)}(J),this.$x=J.x||{},this.init()},F.init=function(){var J=this.$d;this.$y=J.getFullYear(),this.$M=J.getMonth(),this.$D=J.getDate(),this.$W=J.getDay(),this.$H=J.getHours(),this.$m=J.getMinutes(),this.$s=J.getSeconds(),this.$ms=J.getMilliseconds()},F.$utils=function(){return z},F.isValid=function(){return this.$d.toString()!==w},F.isSame=function(J,le){var te=K(J);return this.startOf(le)<=te&&te<=this.endOf(le)},F.isAfter=function(J,le){return K(J)<this.startOf(le)},F.isBefore=function(J,le){return this.endOf(le)<K(J)},F.$g=function(J,le,te){return z.u(J)?this[le]:this.set(te,J)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(J,le){var te=this,de=!!z.u(le)||le,ne=z.p(J),ge=function(ke,Te){var Le=z.w(te.$u?Date.UTC(te.$y,Te,ke):new Date(te.$y,Te,ke),te);return de?Le:Le.endOf(m)},V=function(ke,Te){return z.w(te.toDate()[ke].apply(te.toDate("s"),(de?[0,0,0,0]:[23,59,59,999]).slice(Te)),te)},Y=this.$W,ce=this.$M,re=this.$D,pe="set"+(this.$u?"UTC":"");switch(ne){case y:return de?ge(1,0):ge(31,11);case b:return de?ge(1,ce):ge(0,ce+1);case g:var Pe=this.$locale().weekStart||0,Oe=(Y<Pe?Y+7:Y)-Pe;return ge(de?re-Oe:re+(6-Oe),ce);case m:case C:return V(pe+"Hours",0);case x:return V(pe+"Minutes",1);case p:return V(pe+"Seconds",2);case d:return V(pe+"Milliseconds",3);default:return this.clone()}},F.endOf=function(J){return this.startOf(J,!1)},F.$set=function(J,le){var te,de=z.p(J),ne="set"+(this.$u?"UTC":""),ge=(te={},te[m]=ne+"Date",te[C]=ne+"Date",te[b]=ne+"Month",te[y]=ne+"FullYear",te[x]=ne+"Hours",te[p]=ne+"Minutes",te[d]=ne+"Seconds",te[h]=ne+"Milliseconds",te)[de],V=de===m?this.$D+(le-this.$W):le;if(de===b||de===y){var Y=this.clone().set(C,1);Y.$d[ge](V),Y.init(),this.$d=Y.set(C,Math.min(this.$D,Y.daysInMonth())).$d}else ge&&this.$d[ge](V);return this.init(),this},F.set=function(J,le){return this.clone().$set(J,le)},F.get=function(J){return this[z.p(J)]()},F.add=function(J,le){var te,de=this;J=Number(J);var ne=z.p(le),ge=function(ce){var re=K(de);return z.w(re.date(re.date()+Math.round(ce*J)),de)};if(ne===b)return this.set(b,this.$M+J);if(ne===y)return this.set(y,this.$y+J);if(ne===m)return ge(1);if(ne===g)return ge(7);var V=(te={},te[p]=u,te[x]=l,te[d]=a,te)[ne]||1,Y=this.$d.getTime()+J*V;return z.w(Y,this)},F.subtract=function(J,le){return this.add(-1*J,le)},F.format=function(J){var le=this,te=this.$locale();if(!this.isValid())return te.invalidDate||w;var de=J||"YYYY-MM-DDTHH:mm:ssZ",ne=z.z(this),ge=this.$H,V=this.$m,Y=this.$M,ce=te.weekdays,re=te.months,pe=function(Te,Le,Ue,Ke){return Te&&(Te[Le]||Te(le,de))||Ue[Le].slice(0,Ke)},Pe=function(Te){return z.s(ge%12||12,Te,"0")},Oe=te.meridiem||function(Te,Le,Ue){var Ke=Te<12?"AM":"PM";return Ue?Ke.toLowerCase():Ke},ke={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Y+1,MM:z.s(Y+1,2,"0"),MMM:pe(te.monthsShort,Y,re,3),MMMM:pe(re,Y),D:this.$D,DD:z.s(this.$D,2,"0"),d:String(this.$W),dd:pe(te.weekdaysMin,this.$W,ce,2),ddd:pe(te.weekdaysShort,this.$W,ce,3),dddd:ce[this.$W],H:String(ge),HH:z.s(ge,2,"0"),h:Pe(1),hh:Pe(2),a:Oe(ge,V,!0),A:Oe(ge,V,!1),m:String(V),mm:z.s(V,2,"0"),s:String(this.$s),ss:z.s(this.$s,2,"0"),SSS:z.s(this.$ms,3,"0"),Z:ne};return de.replace(k,function(Te,Le){return Le||ke[Te]||ne.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(J,le,te){var de,ne=z.p(le),ge=K(J),V=(ge.utcOffset()-this.utcOffset())*u,Y=this-ge,ce=z.m(this,ge);return ce=(de={},de[y]=ce/12,de[b]=ce,de[v]=ce/3,de[g]=(Y-V)/6048e5,de[m]=(Y-V)/864e5,de[x]=Y/l,de[p]=Y/u,de[d]=Y/a,de)[ne]||Y,te?ce:z.a(ce)},F.daysInMonth=function(){return this.endOf(b).$D},F.$locale=function(){return L[this.$L]},F.locale=function(J,le){if(!J)return this.$L;var te=this.clone(),de=q(J,le,!0);return de&&(te.$L=de),te},F.clone=function(){return z.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},M}(),N=G.prototype;return K.prototype=N,[["$ms",h],["$s",d],["$m",p],["$H",x],["$W",m],["$M",b],["$y",y],["$D",C]].forEach(function(M){N[M[1]]=function(F){return this.$g(F,M[0],M[1])}}),K.extend=function(M,F){return M.$i||(M(F,G,K),M.$i=!0),K},K.locale=q,K.isDayjs=U,K.unix=function(M){return K(1e3*M)},K.en=L[P],K.Ls=L,K.p={},K})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports);var uaParser={exports:{}};(function(f,s){(function(a,u){var l="1.0.33",h="",d="?",p="function",x="undefined",m="object",g="string",b="major",v="model",y="name",C="type",w="vendor",_="version",k="architecture",E="console",S="mobile",B="tablet",P="smarttv",L="wearable",U="embedded",q=350,K="Amazon",z="Apple",G="ASUS",N="BlackBerry",M="Browser",F="Chrome",J="Edge",le="Firefox",te="Google",de="Huawei",ne="LG",ge="Microsoft",V="Motorola",Y="Opera",ce="Samsung",re="Sharp",pe="Sony",Pe="Xiaomi",Oe="Zebra",ke="Facebook",Te=function(ve,Ee){var ye={};for(var Ae in ve)Ee[Ae]&&Ee[Ae].length%2===0?ye[Ae]=Ee[Ae].concat(ve[Ae]):ye[Ae]=ve[Ae];return ye},Le=function(ve){for(var Ee={},ye=0;ye<ve.length;ye++)Ee[ve[ye].toUpperCase()]=ve[ye];return Ee},Ue=function(ve,Ee){return typeof ve===g?Ke(Ee).indexOf(Ke(ve))!==-1:!1},Ke=function(ve){return ve.toLowerCase()},Ie=function(ve){return typeof ve===g?ve.replace(/[^\d\.]/g,h).split(".")[0]:u},I=function(ve,Ee){if(typeof ve===g)return ve=ve.replace(/^\s\s*/,h),typeof Ee===x?ve:ve.substring(0,q)},xe=function(ve,Ee){for(var ye=0,Ae,Fe,Ne,qe,H,A;ye<Ee.length&&!H;){var T=Ee[ye],W=Ee[ye+1];for(Ae=Fe=0;Ae<T.length&&!H;)if(H=T[Ae++].exec(ve),H)for(Ne=0;Ne<W.length;Ne++)A=H[++Fe],qe=W[Ne],typeof qe===m&&qe.length>0?qe.length===2?typeof qe[1]==p?this[qe[0]]=qe[1].call(this,A):this[qe[0]]=qe[1]:qe.length===3?typeof qe[1]===p&&!(qe[1].exec&&qe[1].test)?this[qe[0]]=A?qe[1].call(this,A,qe[2]):u:this[qe[0]]=A?A.replace(qe[1],qe[2]):u:qe.length===4&&(this[qe[0]]=A?qe[3].call(this,A.replace(qe[1],qe[2])):u):this[qe]=A||u;ye+=2}},he=function(ve,Ee){for(var ye in Ee)if(typeof Ee[ye]===m&&Ee[ye].length>0){for(var Ae=0;Ae<Ee[ye].length;Ae++)if(Ue(Ee[ye][Ae],ve))return ye===d?u:ye}else if(Ue(Ee[ye],ve))return ye===d?u:ye;return ve},X={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},oe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[y,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,_],[/opios[\/ ]+([\w\.]+)/i],[_,[y,Y+" Mini"]],[/\bopr\/([\w\.]+)/i],[_,[y,Y]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[y,_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[y,"UC"+M]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[_,[y,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[_,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[y,"IE"]],[/yabrowser\/([\w\.]+)/i],[_,[y,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure "+M],_],[/\bfocus\/([\w\.]+)/i],[_,[y,le+" Focus"]],[/\bopt\/([\w\.]+)/i],[_,[y,Y+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[y,Y+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[y,"MIUI "+M]],[/fxios\/([-\w\.]+)/i],[_,[y,le]],[/\bqihu|(qi?ho?o?|360)browser/i],[[y,"360 "+M]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1 "+M],_],[/(comodo_dragon)\/([\w\.]+)/i],[[y,/_/g," "],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[y,_],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,ke],_],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[y,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[y,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[y,F+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,F+" WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[y,"Android "+M]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_,[y,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[_,he,X]],[/(webkit|khtml)\/([\w\.]+)/i],[y,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[y,le+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[y,_],[/(cobalt)\/([\w\.]+)/i],[y,[_,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[k,"amd64"]],[/(ia32(?=;))/i],[[k,Ke]],[/((?:i[346]|x)86)[;\)]/i],[[k,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[k,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[k,"armhf"]],[/windows (ce|mobile); ppc;/i],[[k,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[k,/ower/,h,Ke]],[/(sun4\w)[;\)]/i],[[k,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[k,Ke]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[w,ce],[C,B]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[w,ce],[C,S]],[/\((ip(?:hone|od)[\w ]*);/i],[v,[w,z],[C,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[w,z],[C,B]],[/(macintosh);/i],[v,[w,z]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[w,de],[C,B]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[w,de],[C,S]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[w,Pe],[C,S]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[w,Pe],[C,B]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[w,"OPPO"],[C,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[w,"Vivo"],[C,S]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[v,[w,"Realme"],[C,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[w,V],[C,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[w,V],[C,B]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[w,ne],[C,B]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[w,ne],[C,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[w,"Lenovo"],[C,B]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[w,"Nokia"],[C,S]],[/(pixel c)\b/i],[v,[w,te],[C,B]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[w,te],[C,S]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[w,pe],[C,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[w,pe],[C,B]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[w,"OnePlus"],[C,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[w,K],[C,B]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[w,K],[C,S]],[/(playbook);[-\w\),; ]+(rim)/i],[v,w,[C,B]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[w,N],[C,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[w,G],[C,B]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[w,G],[C,S]],[/(nexus 9)/i],[v,[w,"HTC"],[C,B]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[w,[v,/_/g," "],[C,S]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[w,"Acer"],[C,B]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[w,"Meizu"],[C,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[w,re],[C,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[w,v,[C,S]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[w,v,[C,B]],[/(surface duo)/i],[v,[w,ge],[C,B]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[w,"Fairphone"],[C,S]],[/(u304aa)/i],[v,[w,"AT&T"],[C,S]],[/\bsie-(\w*)/i],[v,[w,"Siemens"],[C,S]],[/\b(rct\w+) b/i],[v,[w,"RCA"],[C,B]],[/\b(venue[\d ]{2,7}) b/i],[v,[w,"Dell"],[C,B]],[/\b(q(?:mv|ta)\w+) b/i],[v,[w,"Verizon"],[C,B]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[w,"Barnes & Noble"],[C,B]],[/\b(tm\d{3}\w+) b/i],[v,[w,"NuVision"],[C,B]],[/\b(k88) b/i],[v,[w,"ZTE"],[C,B]],[/\b(nx\d{3}j) b/i],[v,[w,"ZTE"],[C,S]],[/\b(gen\d{3}) b.+49h/i],[v,[w,"Swiss"],[C,S]],[/\b(zur\d{3}) b/i],[v,[w,"Swiss"],[C,B]],[/\b((zeki)?tb.*\b) b/i],[v,[w,"Zeki"],[C,B]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[w,"Dragon Touch"],v,[C,B]],[/\b(ns-?\w{0,9}) b/i],[v,[w,"Insignia"],[C,B]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[w,"NextBook"],[C,B]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[w,"Voice"],v,[C,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[w,"LvTel"],v,[C,S]],[/\b(ph-1) /i],[v,[w,"Essential"],[C,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[w,"Envizen"],[C,B]],[/\b(trio[-\w\. ]+) b/i],[v,[w,"MachSpeed"],[C,B]],[/\btu_(1491) b/i],[v,[w,"Rotor"],[C,B]],[/(shield[\w ]+) b/i],[v,[w,"Nvidia"],[C,B]],[/(sprint) (\w+)/i],[w,v,[C,S]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[w,ge],[C,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[w,Oe],[C,B]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[w,Oe],[C,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[w,v,[C,E]],[/droid.+; (shield) bui/i],[v,[w,"Nvidia"],[C,E]],[/(playstation [345portablevi]+)/i],[v,[w,pe],[C,E]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[w,ge],[C,E]],[/smart-tv.+(samsung)/i],[w,[C,P]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[w,ce],[C,P]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[w,ne],[C,P]],[/(apple) ?tv/i],[w,[v,z+" TV"],[C,P]],[/crkey/i],[[v,F+"cast"],[w,te],[C,P]],[/droid.+aft(\w)( bui|\))/i],[v,[w,K],[C,P]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[w,re],[C,P]],[/(bravia[\w ]+)( bui|\))/i],[v,[w,pe],[C,P]],[/(mitv-\w{5}) bui/i],[v,[w,Pe],[C,P]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[w,I],[v,I],[C,P]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[C,P]],[/((pebble))app/i],[w,v,[C,L]],[/droid.+; (glass) \d/i],[v,[w,te],[C,L]],[/droid.+; (wt63?0{2,3})\)/i],[v,[w,Oe],[C,L]],[/(quest( 2)?)/i],[v,[w,ke],[C,L]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[w,[C,U]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[v,[C,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[C,B]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[C,B]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[C,S]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[w,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[y,J+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[y,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,_],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[y,[_,he,Q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,"Windows"],[_,he,Q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,"Mac OS"],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,y],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[y,_],[/\(bb(10);/i],[_,[y,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[y,le+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[y,"webOS"]],[/crkey\/([\d\.]+)/i],[_,[y,F+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[y,"Chromium OS"],_],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,_],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[y,_]]},Ce=function(ve,Ee){if(typeof ve===m&&(Ee=ve,ve=u),!(this instanceof Ce))return new Ce(ve,Ee).getResult();var ye=ve||(typeof a!==x&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:h),Ae=Ee?Te(oe,Ee):oe;return this.getBrowser=function(){var Fe={};return Fe[y]=u,Fe[_]=u,xe.call(Fe,ye,Ae.browser),Fe.major=Ie(Fe.version),Fe},this.getCPU=function(){var Fe={};return Fe[k]=u,xe.call(Fe,ye,Ae.cpu),Fe},this.getDevice=function(){var Fe={};return Fe[w]=u,Fe[v]=u,Fe[C]=u,xe.call(Fe,ye,Ae.device),Fe},this.getEngine=function(){var Fe={};return Fe[y]=u,Fe[_]=u,xe.call(Fe,ye,Ae.engine),Fe},this.getOS=function(){var Fe={};return Fe[y]=u,Fe[_]=u,xe.call(Fe,ye,Ae.os),Fe},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ye},this.setUA=function(Fe){return ye=typeof Fe===g&&Fe.length>q?I(Fe,q):Fe,this},this.setUA(ye),this};Ce.VERSION=l,Ce.BROWSER=Le([y,_,b]),Ce.CPU=Le([k]),Ce.DEVICE=Le([v,w,C,E,S,P,B,L,U]),Ce.ENGINE=Ce.OS=Le([y,_]),f.exports&&(s=f.exports=Ce),s.UAParser=Ce;var me=typeof a!==x&&(a.jQuery||a.Zepto);if(me&&!me.ua){var ae=new Ce;me.ua=ae.getResult(),me.ua.get=function(){return ae.getUA()},me.ua.set=function(ve){ae.setUA(ve);var Ee=ae.getResult();for(var ye in Ee)me.ua[ye]=Ee[ye]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParser.exports);var uaParserExports=uaParser.exports;class HelpFunctions{constructor(){this.isExtensionMode=!1,this.browserName="",this.manifest={manifest_version:2,name:"",version:""};try{this.isExtensionMode=!!(chrome.runtime&&chrome.extension&&chrome.runtime.getManifest),this.manifest=chrome.runtime.getManifest()}catch(s){console.log("HelpFunctions: is not extension mode.",s)}this.browserName=new uaParserExports.UAParser().getBrowser().name||""}getToDay(s){let a=new Date;s&&(a=new Date(s));let u=a.getFullYear(),l=a.getMonth()+1,h=l<10?"0"+l:l,d=a.getDate(),p=d<10?"0"+d:d;return`${u}-${h}-${p}`}updateBadge(s){if(this.isExtensionMode)try{s==0?(chrome.browserAction.setBadgeText({text:""}),chrome.browserAction.enable()):(chrome.browserAction.setBadgeText({text:s.toString()}),chrome.browserAction.setBadgeBackgroundColor({color:"#aabbcc"}),chrome.browserAction.disable())}catch(a){console.log(a)}}getVersion(){return this.isExtensionMode?"v"+(this.manifest.version_name||this.manifest.version):"localVersion"}getRandomString(s=32,a=!1){let u=a?"abcdefhijkmnprstwxyz2345678ABCDEFGHJKMNPQRSTWXYZ":"abcdefghijkmnopqrstuvwxyz0123456789ABCDEFGHIJKMNOPQRSTUVWXYZ",l=u.length,h=[];for(let d=0;d<s;d++)h.push(u.charAt(Math.floor(Math.random()*l)));return h.join("")}getNewId(){return cryptoJsExports.MD5(new Date().getTime().toString()+this.getRandomString()).toString()}showNotifications(s,a=3e3){s=Object.assign({type:"basic",iconUrl:chrome.runtime.getURL("/assets/icon-128.png"),title:"PT 助手 Plus",priority:0,message:""},s);let u=Math.floor(Math.random()*99999)+"";chrome.notifications.create(u,s,function(l){u=l}),setTimeout(()=>{chrome.notifications.clear(u,()=>{})},a)}removeDuplicateQueryString(s){let a=[],u="",l=/([^&=]+)=([^&]*)/g,h,d="",p=s.indexOf("?");if(p!==-1){for(d=s.substr(0,p+1),u=s.substr(p+1);h=l.exec(u);){const x=h[1]+"="+h[2];a.includes(x)||a.push(x)}return d+a.join("&")}return s}removeQueryStringFromValue(s,a){let u=[],l="",h=/([^&=]+)=([^&]*)/g,d,p="",x=s.indexOf("?");if(x!==-1){for(p=s.substr(0,x+1),l=s.substr(x+1);d=h.exec(l);){const m=d[1]+"="+d[2];d[2]!==a&&u.push(m)}return p+u.join("&")}return s}removeQueryStringFields(s,a){let u=[],l="",h=/([^&=]+)=([^&]*)/g,d,p="",x=s.indexOf("?");if(x!==-1){for(p=s.substr(0,x+1),l=s.substr(x+1);d=h.exec(l);){const m=d[1]+"="+d[2];a.includes(d[1])||u.push(m)}return p+u.join("&")}return s}clone(s){return JSON.parse(JSON.stringify(s))}debug(...s){console.log(new Date().toLocaleString(),...s)}showContextMenu(s,a){try{basicContext_minExports.show(s,a),$(".basicContext").css({left:"-=20px",top:"+=10px"})}catch{}}getCleaningURL(s){return this.removeQueryStringFields(s,["hit","cmtpage","page"])}checkPermissions(s){return new Promise((a,u)=>{chrome&&chrome.permissions?chrome.permissions.contains({permissions:s},l=>{l===!0?a(!0):u({success:!1})}):u({success:!1})})}requestPermissions(s){return new Promise((a,u)=>{chrome&&chrome.permissions?chrome.permissions.request({permissions:s},l=>{l===!0?a(!0):u({success:!1})}):u({success:!1})})}usePermissions(s,a=!1,u=""){return new Promise((l,h)=>{this.checkPermissions(s).then(d=>{l(d)}).catch(()=>{let d=!0;if(a&&(d=confirm(u)),!d){h({success:!1});return}this.requestPermissions(s).then(p=>{l(p)}).catch(p=>{h(p)})})})}getSiteFromHost(s,a){let u=[];a.sites&&u.push(...a.sites),a.system&&a.system.publicSites&&u.push(...a.system.publicSites);let l=u.find(h=>{var p;let d=[h.url].concat(h.cdn,(p=h.formerHosts)==null?void 0:p.map(x=>`//${x}`));return h.host==s||d.join("").indexOf(`//${s}`)>-1});return l?this.clone(l):null}getNewBackupFileName(){return"PT-Plugin-Plus-Backup-"+dayjs().format("YYYY-MM-DD_HH-mm-ss")+".zip"}replaceKeys(s,a,u=""){if(!s||typeof s!="string")return s;let l=s;for(const h in a)if(a.hasOwnProperty(h)){const d=a[h];let p="$"+h+"$";u&&(p=`$${u}.${h}$`),l=l.replace(p,d)}return l}checkOptionalPermission(s){return this.isExtensionMode&&this.manifest&&this.manifest.optional_permissions?this.manifest.optional_permissions.includes(s):!1}transformTime(s,a){if(!a||!s)return s;let u=s;/^(\d){10}$/.test(u+"")&&(u=parseInt(u+"")*1e3);let l=dayjs(u).format("YYYY-MM-DDTHH:mm:ss");return u=new Date(`${l}${a}`).getTime(),u}resolveURL(s,a){const u=new URL(a,new URL(s,"resolve://"));if(u.protocol==="resolve:"){const{pathname:l,search:h,hash:d}=u;return l+h+d}return u.toString()}getIdFromMTURL(s){try{let a=new URL(s).pathname.split("/").pop();if(a)return parseInt(a),a}catch(a){console.log("getIdFromMTURL error",a)}}getSiteActiveUrl(s){return s.activeURL?s.activeURL:s.cdn&&s.cdn.length>0?s.cdn[0]:s.url}resolveMTDownloadURL(s,a,u=void 0){let l=this.getSiteActiveUrl(a);return $.ajax(this.resolveURL(l,"/api/torrent/genDlToken"),{method:"POST",data:{id:s},cache:!0,headers:{"x-api-key":a.authToken},success:function(d){if(d.code==="0")console.log(`种子 ${s} 下载链接获取成功`,d);else{let p=`种子 ${s} 下载链接获取失败, code != 0`;console.log(p,d),u&&u({msg:p})}},error:function(d){let p=`种子 ${s} 下载链接获取失败`;console.log(p,d),u&&u({msg:p})},async:!1}).responseJSON.data||""}}const PPF=new HelpFunctions,filters={formatNumber(f,s="###,###,###,###.00"){if(f===void 0)return"";const a=(p,x,m)=>{if(p===""||p===void 0)return x===""||x===void 0?"":x;let g="",b="",v="",y=0;m||(p=p.split("").reverse().join(""),x=x.split("").reverse().join(""));let C=0;for(let w=0;w<x.length;w++,C++)if(b=p.charAt(C),b!==void 0)switch(g=x.charAt(w),g){case"#":v+=b,y=w;break;case"0":v=b||b===g?v+b:v+0,y=w;break;case".":v+=b===g?b:(C--,g);break;case",":v+=b===g?b:(C--,g);break;default:v+=g,C--}return C!==p.length&&x.charAt(x.length-1)!=="0"&&y!==x.length&&x.charAt(y)!=="0"&&(v=v.substr(0,y+1)+p.substr(C)+v.substr(y+1)),v=(m?v:v.split("").reverse().join("")).replace(/(^,)|(,$)|(,,+)/g,""),v.substr(0,1)===","&&(v=v.substr(1)),v.substr(0,2)==="-,"&&(v="-"+v.substr(2)),v},u=f.toString();if(u.length===0)return"";let l=parseFloat(u);if(isNaN(l)||!s)return u;const h=s.split("."),d=u.split(".");return h.length>1?a(d[0],h[0])+"."+a(d[1],h[1],1):a(d[0],h[0])},formatSize(f,s=!1,a=""){let u=parseFloat(f);if(isNaN(u))return"";if(u<0)return"N/A";if(u===0)return s?"":a==="speed"?"0.00 KiB/s":"0.00";let l,h="KiB",d="###,###,###,###.00 ",p="###,###,###,###.000 ";return u<1e3*Math.pow(2,10)?(l=u/Math.pow(2,10),h="KiB"):u<1e3*Math.pow(2,20)?(l=u/Math.pow(2,20),h="MiB"):u<1e3*Math.pow(2,30)?(l=u/Math.pow(2,30),h="GiB"):u<1e3*Math.pow(2,40)?(l=u/Math.pow(2,40),h="TiB",d=p):u<1e3*Math.pow(2,50)?(l=u/Math.pow(2,50),h="PiB",d=p):u<1e3*Math.pow(2,60)?(l=u/Math.pow(2,60),h="EiB",d=p):(l=u/Math.pow(2,70),h="ZiB",d=p),a==="speed"&&(h+="/s"),this.formatNumber(l,d)+h},formatSizetoPrecision(f,s=!1,a=""){let u=parseFloat(f);if(isNaN(u))return"";if(u<0)return"N/A";if(u===0)return s?"":a==="speed"?"0.00 KiB/s":"0.00";let l,h="KiB";return u<1e3*Math.pow(2,10)?(l=u/Math.pow(2,10),h="KiB"):u<1e3*Math.pow(2,20)?(l=u/Math.pow(2,20),h="MiB"):u<1e3*Math.pow(2,30)?(l=u/Math.pow(2,30),h="GiB"):u<1e3*Math.pow(2,40)?(l=u/Math.pow(2,40),h="TiB"):u<1e3*Math.pow(2,50)?(l=u/Math.pow(2,50),h="PiB"):u<1e3*Math.pow(2,60)?(l=u/Math.pow(2,60),h="EiB"):(l=u/Math.pow(2,70),h="ZiB"),a==="speed"&&(h+="/s"),l.toPrecision(4)+" "+h},formatSizeWithNegative(f,s=!1,a=""){f=parseFloat(f);let u=f;f<0&&(u=-u);let l=this.formatSize(u,s,a);return f<0&&(l=`- ${l}`),l},formatSpeed(f,s=!1){return this.formatSize(f,s,"speed")},parseURL(f){var s=document.createElement("a");return s.href=f,{source:f,protocol:s.protocol.replace(":",""),host:s.hostname,port:s.port,query:s.search,params:function(){for(var a={},u=s.search.replace(/^\?/,"").split("&"),l=u.length,h=0,d;h<l;h++)u[h]&&(d=u[h].split("="),a[d[0]]=d[1]);return a}(),hash:s.hash.replace("#",""),path:s.pathname.replace(/^([^/])/,"/$1"),segments:s.pathname.replace(/^\//,"").split("/"),origin:`${s.protocol}//${s.hostname}`+(s.port?`:${s.port}`:"")}},formatIMDbId(f){return Number(f)&&(f.length<7&&(f=f.padStart(7,"0")),f="tt"+f),f},timeAgoToNumber(f){let s=/^([\d.]+).+?((year|month|week|day|hour|min|minute)s?)( +ago)?(.+)?$/i,a=f.trim().match(s);if(!a)return 0;let u=new Date,l=a[3],h=Math.round(parseFloat(a[1])),d=new Date;switch(l.toLowerCase()){case"year":d=new Date(u.setFullYear(u.getFullYear()-h));break;case"month":d=new Date(u.setMonth(u.getMonth()-h));break;case"day":d=new Date(u.setDate(u.getDate()-h));break;case"week":d=new Date(u.setDate(u.getDate()-7*h));break;case"hour":d=new Date(u.setHours(u.getHours()-h));break;case"min":case"minute":d=new Date(u.setMinutes(u.getMinutes()-h));break}return d.getTime()},formatInteger(f){return this.formatNumber(f,"###,###,###,###")}};var FileSaver_min={exports:{}};(function(f,s){(function(a,u){u()})(commonjsGlobal,function(){function a(m,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function u(m,g,b){var v=new XMLHttpRequest;v.open("GET",m),v.responseType="blob",v.onload=function(){x(v.response,g,b)},v.onerror=function(){console.error("could not download file")},v.send()}function l(m){var g=new XMLHttpRequest;g.open("HEAD",m,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function h(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(g)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,p=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),x=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(m,g,b){var v=d.URL||d.webkitURL,y=document.createElement("a");g=g||m.name||"download",y.download=g,y.rel="noopener",typeof m=="string"?(y.href=m,y.origin===location.origin?h(y):l(y.href)?u(m,g,b):h(y,y.target="_blank")):(y.href=v.createObjectURL(m),setTimeout(function(){v.revokeObjectURL(y.href)},4e4),setTimeout(function(){h(y)},0))}:"msSaveOrOpenBlob"in navigator?function(m,g,b){if(g=g||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(a(m,b),g);else if(l(m))u(m,g,b);else{var v=document.createElement("a");v.href=m,v.target="_blank",setTimeout(function(){h(v)})}}:function(m,g,b,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof m=="string")return u(m,g,b);var y=m.type==="application/octet-stream",C=/constructor/i.test(d.HTMLElement)||d.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||y&&C||p)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var S=_.result;S=w?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=S:location=S,v=null},_.readAsDataURL(m)}else{var k=d.URL||d.webkitURL,E=k.createObjectURL(m);v?v.location=E:location.href=E,v=null,setTimeout(function(){k.revokeObjectURL(E)},4e4)}});d.saveAs=x.saveAs=x,f.exports=x})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;const FileSaver=getDefaultExportFromCjs(FileSaver_minExports);class FileDownloader{constructor(s){this.lastTime=0,this.startTime=0,this.status=0,this.statusText="",this.url="",this.requestMethod=ERequestMethod.GET,this.postData=null,this.fileName="",this.loaded=0,this.total=0,this.percent=0,this.speed=0,this.showSpeed="",this.onProgress=function(){},this.onCompleted=function(){},this.onError=function(){},this.onStart=function(){},this.getDataOnly=!1,this.timeout=0,this.xhr=new XMLHttpRequest,this.fileName=s.fileName||"",this.url=s.url,this.getDataOnly=s.getDataOnly||!1,this.timeout=s.timeout||0,this.requestMethod=s.method||ERequestMethod.GET}start(){this.lastTime=+new Date,this.startTime=this.lastTime,this.statusText="数据准备中……",this.timeout>0&&(this.xhr.timeout=this.timeout),this.xhr.open(this.requestMethod,this.url,!0),this.xhr.responseType="blob",this.xhr.onreadystatechange=()=>{switch(this.xhr.readyState){case 4:switch(this.xhr.status){case 200:case 302:this.content=this.xhr.response,this.downloadCompleted();break;default:this.xhr.status!=0&&this.downloadError(`[${this.url}] 下载失败，返回的状态码为：${this.xhr.status}`);break}break;case 2:var a=this.xhr.getResponseHeader("Content-Disposition");a&&!this.fileName&&!this.getDataOnly&&(this.fileName=this.getFileName(a));break}},this.xhr.onprogress=a=>{this.loaded=a.loaded,this.total=a.total,this.percent=(100*(a.loaded/a.total)).toFixed(2),this.lastTime=+new Date,this.speed=this.loaded/(this.startTime-this.lastTime),this.updateProgress()},this.xhr.onerror=a=>{this.downloadError(a)},this.xhr.ontimeout=()=>{this.downloadError(`[${this.url}] 下载超时`)};var s=null;this.postData&&(s=$.param(this.postData)),this.requestMethod==ERequestMethod.POST&&this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xhr.send(s),this.onStart&&this.onStart.call(this)}getFileName(s=""){let a=s.split(";"),u={},l="";for(let d=0;d<a.length;d++){let x=a[d].replace(" ","").split("=");x.length==2&&(u[x[0]]=x[1].trim())}let h;if(h=u["filename*"]){let d=h.lastIndexOf("'");l=h.substr(d+1)}else l=u.filename;return l=l.replace(/"/g,""),decodeURI(l)}downloadCompleted(){this.loaded>0&&!this.getDataOnly&&FileSaver.saveAs(this.content,this.fileName),this.onCompleted&&this.onCompleted.call(this)}downloadError(s){this.onError&&this.onError.call(this,s)}updateProgress(){this.onProgress&&this.onProgress.call(this,this.loaded,this.total,this.speed)}}const StorageKey="Favicon-Cache",NOIMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";class Favicon{constructor(s){this.service=s,this.cache={},this.loadCache()}loadCache(){let s=window.localStorage.getItem(StorageKey);s&&(this.cache=JSON.parse(s)||{})}saveCache(){window.localStorage.setItem(StorageKey,JSON.stringify(this.cache))}clear(){this.cache={},this.saveCache()}reset(){let s=JSON.parse(JSON.stringify(this.cache));this.cache={};let a=[];for(const u in s)if(s.hasOwnProperty(u)){let l=s[u];a.push(l.origin)}return this.gets(a)}gets(s){return new Promise((a,u)=>{let l=[];s.forEach(h=>{l.push(this.get(h))}),Promise.all(l).then(h=>{a(h)}).catch(h=>{u(h)})})}get(s,a=!1){return new Promise((u,l)=>{let h=filters.parseURL(s),d=this.cache[h.host];if(!d||a){this.cacheFavicon(h.origin,h.host).then(p=>{u(p)}).catch(p=>{l(p)});return}return u(d)})}cacheFavicon(s,a){return new Promise((u,l)=>{var d;let h=((d=new URL(s).pathname)==null?void 0:d.length)>1?s:`${s}/favicon.ico`;this.download(h).then(p=>{p&&p.size>0?this.transformBlob(p,"base64").then(x=>{u(this.set(s,x))}).catch(x=>{l(x)}):this.cacheFromIndex(s,a).then(x=>{u(x)}).catch(x=>{l(x)})}).catch(()=>{this.cacheFromIndex(s,a).then(p=>{u(p)}).catch(p=>{l(p)})})})}set(s,a){let u=filters.parseURL(s),l={origin:u.origin,host:u.host,data:a};return this.cache[u.host]=l,this.saveCache(),l}cacheFromIndex(s,a){return new Promise((u,l)=>{this.download(s).then(h=>{h&&h.size>0&&/text/gi.test(h.type)?this.transformBlob(h,"text").then(d=>{try{const p=new DOMParser().parseFromString(d,"text/html");let m=$(p).find("head").find("link[rel*=icon]:first");if(m&&m.length>0){let g=filters.parseURL(s),b=m.attr("href")+"";b.substr(0,2)==="//"?b=`${g.protocol}:${b}`:b.substr(0,4)!=="http"&&(b=b.startsWith("/")?`${g.origin}${b}`:`${g.origin}/${b}`),this.download(b).then(v=>{v&&/image/gi.test(v.type)?this.transformBlob(v,"base64").then(y=>{u(this.set(s,y))}).catch(y=>{this.debug(y),l(y)}):u(this.set(s,NOIMAGE))}).catch(()=>{u(this.set(s,NOIMAGE))})}else u(this.set(s,NOIMAGE))}catch(p){console.log(p),this.debug(p),u(this.set(s,NOIMAGE))}}).catch(d=>{this.debug(`cacheFromIndex.error, url: ${s}, host: ${a}, result.length: ${h==null?void 0:h.length}`,d),l(d)}):l()}).catch(()=>{u(this.set(s,NOIMAGE))})})}transformBlob(s,a){return new Promise((u,l)=>{const h=new FileReader;switch(h.addEventListener("loadend",()=>{h.result?u(h.result):(this.debug("transformBlob.error",s,a),l())}),a){case"text":h.readAsText(s);break;case"base64":h.readAsDataURL(s);break}})}download(s){return new Promise((a,u)=>{let l=new FileDownloader({url:s,getDataOnly:!0,timeout:5e3});l.onCompleted=()=>{l.content?a(l.content):u()},l.onError=h=>{console.log("Favicon.download.error",h),this.debug(h),u(h)},l.start()})}debug(...s){this.service&&this.service.debug(...s)}}let rootPath="",isExtensionMode=!1;const isDebugMode=!1;try{let f=chrome.runtime;isExtensionMode=!0,rootPath=f.getManifest().options_ui.page.replace("index.html",""),rootPath&&rootPath.substr(-1)=="/"&&(rootPath=rootPath.substr(0,rootPath.length-1)),rootPath||(rootPath=`chrome-extension://${chrome.runtime.id}`),isDebugMode&&console.log("is extension mode.")}catch(f){isExtensionMode=!1}const RESOURCE_URL=isExtensionMode?(isExtensionMode?rootPath:"")+"/resource":`http://${window.location.hostname}:8001`;let RESOURCE_API={host:RESOURCE_URL,schemas:`${RESOURCE_URL}/schemas.json`,schemaConfig:`${RESOURCE_URL}/schemas/{$schema}/config.json`,sites:`${RESOURCE_URL}/sites.json`,siteConfig:`${RESOURCE_URL}/sites/{$site}/config.json`,clients:`${RESOURCE_URL}/clients.json`,clientConfig:`${RESOURCE_URL}/clients/{$client}/config.json`,latestReleases:"https://api.github.com/repos/pt-plugins/PT-Plugin-Plus/releases/latest",systemConfig:`${RESOURCE_URL}/systemConfig.json`};const APP={debugMode:isDebugMode,scriptQueues:[],isExtensionMode,cache:{localStorage:new localStorage,cacheKey:EConfigKey.cache,contents:{},expires:60*60*24*1,init(f){APP.debugMode&&console.log("cache.init"),this.localStorage.get(this.cacheKey,s=>{if(s){let a=s.expires;a&&new Date>new Date(a)||APP.debugMode?this.contents={}:this.contents=s}f&&f()})},get(f){return this.contents?this.contents[cryptoJsExports.MD5(f).toString()]:null},set(f,s){this.contents[cryptoJsExports.MD5(f).toString()]=s,this.contents.update=new Date().getTime(),this.contents.expires=new Date().getTime()+this.expires,this.localStorage.set(this.cacheKey,this.contents)},clear(){this.contents={},this.localStorage.set(this.cacheKey,this.contents)},getLastUpdateTime(){return new Promise((f,s)=>{this.localStorage.get(this.cacheKey,a=>{if(a){let u=a.update;f(u||0)}else s()})})}},addScript(f){APP.debugMode&&console.log("addScript",f),this.scriptQueues.push(f)},applyScripts(){let f=this.scriptQueues.shift();f&&this.execScript(f).then(()=>{this.applyScripts()})},execScript(f){return new Promise((s,a)=>{switch(f.type){case"code":this.runScript(f.content),s();break;default:{let u=f.content||f;u.substr(0,4)!=="http"&&(u.substr(0,1)!=="/"&&(u=`/${u}`),u=`${API.host}${u}`);let l=this.cache.get(u);try{l?(this.runScript(l),s()):(console.log("execScript: %s",u),$.ajax({url:u,dataType:"text"}).done(h=>{this.runScript(h),this.cache.set(u,h),s()}).fail((h,d,p)=>{h.responseJSON&&h.responseJSON.code&&h.responseJSON.msg?a(h.responseJSON.msg+" ("+h.responseJSON.code+")"):a(d+", "+p)}))}catch(h){a(h)}}break}})},runScript(f,s=window){eval.call(s,f)},applyStyle(f){return new Promise((s,a)=>{let u=$("<style/>").appendTo(document.body);switch(f.type){case"file":{let l=f.content;l.substr(0,4)!=="http"&&(l.substr(0,1)!=="/"&&(l=`/${l}`),l=`${API.host}${l}`);let h=this.cache.get(l);h?(u.html(h),s()):$.get(l,d=>{u.html(d),this.cache.set(l,d),s()},"text");break}default:u.html(f.content),s();break}})},getScriptContent(f){let s=`${API.host}/${f}`;return f.substr(0,4)==="http"?s=f:s=s.replace("resource//","resource/"),APP.debugMode&&console.log("getScriptContent",s),$.ajax({url:s,dataType:"text"})},createErrorMessage(f){return{type:EDataResultType.error,msg:f,success:!1}},showNotifications(f,s=3e3){PPF.showNotifications(f,s)},getInstallType(){return new Promise((f,s)=>{chrome&&chrome.management?chrome.management.getSelf(a=>{a.updateUrl&&a.updateUrl.indexOf("pt-plugins/PT-Plugin-Plus")>0?f(EInstallType.crx):f(a.installType)}):s()})}};APP.cache.init();const API=RESOURCE_API;class Extension{constructor(){this.isExtensionMode=APP.isExtensionMode}sendRequest(s,a,u){return new Promise((l,h)=>{if(this.isExtensionMode){try{chrome.runtime.sendMessage({action:s,data:u},d=>{if(chrome.runtime.lastError){let p=chrome.runtime.lastError.message||"";if(console.log("Extension.sendRequest.runtime",s,u,chrome.runtime.lastError.message),/Could not establish connection/.test(p)){APP.showNotifications({message:"插件状态未知，当前操作可能失败，请刷新页面后再试"}),h(chrome.runtime.lastError);return}if(!/The message port closed before a response was received/.test(p)){h(chrome.runtime.lastError);return}}a&&a(d.resolve||d.reject),d.reject?h(d.reject):d.resolve&&(d.resolve.status==="error"||d.resolve.success===!1)?h(d.resolve):l(d.resolve)})}catch(d){/Invocation of form runtime\.connect|doesn't match definition runtime\.connect|Extension context invalidated/.test(d.message)?h({type:EDataResultType.error,msg:"插件状态未知，当前操作可能失败，请刷新页面后再试",success:!1}):h(d)}return}process$1.env.NODE_ENV==="test"&&Promise.resolve().then(()=>service).then(d=>{console.log(d),new d.default(!0).requestMessage({action:s,data:u}).then(x=>{a&&a.call(this,x),l(x)}).catch(x=>{h(x)})}).catch(d=>{console.log("sendRequest.error",d)})})}}class PathHandler{constructor(){}replacePathKey(s,a){if(!s)return s;const u=new Date;return this.replaceKeys(s,{"site.name":a.name,"site.host":a.host,YYYY:u.getFullYear(),MM:("0"+(u.getMonth()+1).toString()).substr(-2),DD:("0"+u.getDate().toString()).substr(-2)})}getSavePath(s,a){if(!s)return;let u=s,l="<...>";if(u&&u.indexOf(l)>=0){let h=window.prompt(`当前为自定义路径：${u} 
请输入路径中 ${l} 部分的内容: `);if(h===null)return!1;u=u.replace(l,h)}return this.replacePathKey(u,a)}replaceKeys(s,a){let u=s;for(const l in a)if(a.hasOwnProperty(l)){const h=a[l];u=u.replace("$"+l+"$",h)}return u}}function _typeof(f){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(f)}function _classCallCheck(f,s){if(!(f instanceof s))throw new TypeError("Cannot call a class as a function")}function _toPrimitive(f,s){if(_typeof(f)!=="object"||f===null)return f;var a=f[Symbol.toPrimitive];if(a!==void 0){var u=a.call(f,s||"default");if(_typeof(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(f)}function _toPropertyKey(f){var s=_toPrimitive(f,"string");return _typeof(s)==="symbol"?s:String(s)}function _defineProperties(f,s){for(var a=0;a<s.length;a++){var u=s[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,_toPropertyKey(u.key),u)}}function _createClass(f,s,a){return s&&_defineProperties(f.prototype,s),a&&_defineProperties(f,a),Object.defineProperty(f,"prototype",{writable:!1}),f}function _assertThisInitialized(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function _setPrototypeOf(f,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,l){return u.__proto__=l,u},_setPrototypeOf(f,s)}function _inherits(f,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(s&&s.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),s&&_setPrototypeOf(f,s)}function _possibleConstructorReturn(f,s){if(s&&(_typeof(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(f)}function _getPrototypeOf(f){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(f)}function _defineProperty(f,s,a){return s=_toPropertyKey(s),s in f?Object.defineProperty(f,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):f[s]=a,f}function _arrayWithHoles(f){if(Array.isArray(f))return f}function _iterableToArray(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}function _arrayLikeToArray(f,s){(s==null||s>f.length)&&(s=f.length);for(var a=0,u=new Array(s);a<s;a++)u[a]=f[a];return u}function _unsupportedIterableToArray(f,s){if(f){if(typeof f=="string")return _arrayLikeToArray(f,s);var a=Object.prototype.toString.call(f).slice(8,-1);if(a==="Object"&&f.constructor&&(a=f.constructor.name),a==="Map"||a==="Set")return Array.from(f);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(f,s)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toArray(f){return _arrayWithHoles(f)||_iterableToArray(f)||_unsupportedIterableToArray(f)||_nonIterableRest()}function ownKeys(f,s){var a=Object.keys(f);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(f);s&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(f,l).enumerable})),a.push.apply(a,u)}return a}function _objectSpread(f){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(a),!0).forEach(function(u){_defineProperty(f,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(u){Object.defineProperty(f,u,Object.getOwnPropertyDescriptor(a,u))})}return f}var consoleLogger={type:"logger",log:function(s){this.output("log",s)},warn:function(s){this.output("warn",s)},error:function(s){this.output("error",s)},output:function(s,a){console&&console[s]&&console[s].apply(console,a)}},Logger$1=function(){function f(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,f),this.init(s,a)}return _createClass(f,[{key:"init",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=u.prefix||"i18next:",this.logger=a||consoleLogger,this.options=u,this.debug=u.debug}},{key:"setDebug",value:function(a){this.debug=a}},{key:"log",value:function(){for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return this.forward(u,"log","",!0)}},{key:"warn",value:function(){for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return this.forward(u,"warn","",!0)}},{key:"error",value:function(){for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return this.forward(u,"error","")}},{key:"deprecate",value:function(){for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return this.forward(u,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(a,u,l,h){return h&&!this.debug?null:(typeof a[0]=="string"&&(a[0]="".concat(l).concat(this.prefix," ").concat(a[0])),this.logger[u](a))}},{key:"create",value:function(a){return new f(this.logger,_objectSpread(_objectSpread({},{prefix:"".concat(this.prefix,":").concat(a,":")}),this.options))}},{key:"clone",value:function(a){return a=a||this.options,a.prefix=a.prefix||this.prefix,new f(this.logger,a)}}]),f}(),baseLogger=new Logger$1,EventEmitter=function(){function f(){_classCallCheck(this,f),this.observers={}}return _createClass(f,[{key:"on",value:function(a,u){var l=this;return a.split(" ").forEach(function(h){l.observers[h]=l.observers[h]||[],l.observers[h].push(u)}),this}},{key:"off",value:function(a,u){if(this.observers[a]){if(!u){delete this.observers[a];return}this.observers[a]=this.observers[a].filter(function(l){return l!==u})}}},{key:"emit",value:function(a){for(var u=arguments.length,l=new Array(u>1?u-1:0),h=1;h<u;h++)l[h-1]=arguments[h];if(this.observers[a]){var d=[].concat(this.observers[a]);d.forEach(function(x){x.apply(void 0,l)})}if(this.observers["*"]){var p=[].concat(this.observers["*"]);p.forEach(function(x){x.apply(x,[a].concat(l))})}}}]),f}();function defer(){var f,s,a=new Promise(function(u,l){f=u,s=l});return a.resolve=f,a.reject=s,a}function makeString(f){return f==null?"":""+f}function copy(f,s,a){f.forEach(function(u){s[u]&&(a[u]=s[u])})}function getLastOfPath(f,s,a){function u(p){return p&&p.indexOf("###")>-1?p.replace(/###/g,"."):p}function l(){return!f||typeof f=="string"}for(var h=typeof s!="string"?[].concat(s):s.split(".");h.length>1;){if(l())return{};var d=u(h.shift());!f[d]&&a&&(f[d]=new a),Object.prototype.hasOwnProperty.call(f,d)?f=f[d]:f={}}return l()?{}:{obj:f,k:u(h.shift())}}function setPath(f,s,a){var u=getLastOfPath(f,s,Object),l=u.obj,h=u.k;l[h]=a}function pushPath(f,s,a,u){var l=getLastOfPath(f,s,Object),h=l.obj,d=l.k;h[d]=h[d]||[],u&&(h[d]=h[d].concat(a)),u||h[d].push(a)}function getPath(f,s){var a=getLastOfPath(f,s),u=a.obj,l=a.k;if(u)return u[l]}function getPathWithDefaults(f,s,a){var u=getPath(f,a);return u!==void 0?u:getPath(s,a)}function deepExtend(f,s,a){for(var u in s)u!=="__proto__"&&u!=="constructor"&&(u in f?typeof f[u]=="string"||f[u]instanceof String||typeof s[u]=="string"||s[u]instanceof String?a&&(f[u]=s[u]):deepExtend(f[u],s[u],a):f[u]=s[u]);return f}function regexEscape(f){return f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape$1(f){return typeof f=="string"?f.replace(/[&<>"'\/]/g,function(s){return _entityMap[s]}):f}var isIE10=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,chars$1=[" ",",","?","!",";"];function looksLikeObjectPath(f,s,a){s=s||"",a=a||"";var u=chars$1.filter(function(p){return s.indexOf(p)<0&&a.indexOf(p)<0});if(u.length===0)return!0;var l=new RegExp("(".concat(u.map(function(p){return p==="?"?"\\?":p}).join("|"),")")),h=!l.test(f);if(!h){var d=f.indexOf(a);d>0&&!l.test(f.substring(0,d))&&(h=!0)}return h}function ownKeys$1(f,s){var a=Object.keys(f);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(f);s&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(f,l).enumerable})),a.push.apply(a,u)}return a}function _objectSpread$1(f){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$1(Object(a),!0).forEach(function(u){_defineProperty(f,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(a)):ownKeys$1(Object(a)).forEach(function(u){Object.defineProperty(f,u,Object.getOwnPropertyDescriptor(a,u))})}return f}function _createSuper(f){var s=_isNativeReflectConstruct();return function(){var u=_getPrototypeOf(f),l;if(s){var h=_getPrototypeOf(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return _possibleConstructorReturn(this,l)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function deepFind(f,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(f){if(f[s])return f[s];for(var u=s.split(a),l=f,h=0;h<u.length;++h){if(!l||typeof l[u[h]]=="string"&&h+1<u.length)return;if(l[u[h]]===void 0){for(var d=2,p=u.slice(h,h+d).join(a),x=l[p];x===void 0&&u.length>h+d;)d++,p=u.slice(h,h+d).join(a),x=l[p];if(x===void 0)return;if(x===null)return null;if(s.endsWith(p)){if(typeof x=="string")return x;if(p&&typeof x[p]=="string")return x[p]}var m=u.slice(h+d).join(a);return m?deepFind(x,m,a):void 0}l=l[u[h]]}return l}}var ResourceStore=function(f){_inherits(a,f);var s=_createSuper(a);function a(u){var l,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return _classCallCheck(this,a),l=s.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(l)),l.data=u||{},l.options=h,l.options.keySeparator===void 0&&(l.options.keySeparator="."),l.options.ignoreJSONStructure===void 0&&(l.options.ignoreJSONStructure=!0),l}return _createClass(a,[{key:"addNamespaces",value:function(l){this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}},{key:"removeNamespaces",value:function(l){var h=this.options.ns.indexOf(l);h>-1&&this.options.ns.splice(h,1)}},{key:"getResource",value:function(l,h,d){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},x=p.keySeparator!==void 0?p.keySeparator:this.options.keySeparator,m=p.ignoreJSONStructure!==void 0?p.ignoreJSONStructure:this.options.ignoreJSONStructure,g=[l,h];d&&typeof d!="string"&&(g=g.concat(d)),d&&typeof d=="string"&&(g=g.concat(x?d.split(x):d)),l.indexOf(".")>-1&&(g=l.split("."));var b=getPath(this.data,g);return b||!m||typeof d!="string"?b:deepFind(this.data&&this.data[l]&&this.data[l][h],d,x)}},{key:"addResource",value:function(l,h,d,p){var x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},m=this.options.keySeparator;m===void 0&&(m=".");var g=[l,h];d&&(g=g.concat(m?d.split(m):d)),l.indexOf(".")>-1&&(g=l.split("."),p=h,h=g[1]),this.addNamespaces(h),setPath(this.data,g,p),x.silent||this.emit("added",l,h,d,p)}},{key:"addResources",value:function(l,h,d){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var x in d)(typeof d[x]=="string"||Object.prototype.toString.apply(d[x])==="[object Array]")&&this.addResource(l,h,x,d[x],{silent:!0});p.silent||this.emit("added",l,h,d)}},{key:"addResourceBundle",value:function(l,h,d,p,x){var m=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},g=[l,h];l.indexOf(".")>-1&&(g=l.split("."),p=d,d=h,h=g[1]),this.addNamespaces(h);var b=getPath(this.data,g)||{};p?deepExtend(b,d,x):b=_objectSpread$1(_objectSpread$1({},b),d),setPath(this.data,g,b),m.silent||this.emit("added",l,h,d)}},{key:"removeResourceBundle",value:function(l,h){this.hasResourceBundle(l,h)&&delete this.data[l][h],this.removeNamespaces(h),this.emit("removed",l,h)}},{key:"hasResourceBundle",value:function(l,h){return this.getResource(l,h)!==void 0}},{key:"getResourceBundle",value:function(l,h){return h||(h=this.options.defaultNS),this.options.compatibilityAPI==="v1"?_objectSpread$1(_objectSpread$1({},{}),this.getResource(l,h)):this.getResource(l,h)}},{key:"getDataByLanguage",value:function(l){return this.data[l]}},{key:"hasLanguageSomeTranslations",value:function(l){var h=this.getDataByLanguage(l),d=h&&Object.keys(h)||[];return!!d.find(function(p){return h[p]&&Object.keys(h[p]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),a}(EventEmitter),postProcessor={processors:{},addPostProcessor:function(s){this.processors[s.name]=s},handle:function(s,a,u,l,h){var d=this;return s.forEach(function(p){d.processors[p]&&(a=d.processors[p].process(a,u,l,h))}),a}};function ownKeys$2(f,s){var a=Object.keys(f);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(f);s&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(f,l).enumerable})),a.push.apply(a,u)}return a}function _objectSpread$2(f){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$2(Object(a),!0).forEach(function(u){_defineProperty(f,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(a)):ownKeys$2(Object(a)).forEach(function(u){Object.defineProperty(f,u,Object.getOwnPropertyDescriptor(a,u))})}return f}function _createSuper$1(f){var s=_isNativeReflectConstruct$1();return function(){var u=_getPrototypeOf(f),l;if(s){var h=_getPrototypeOf(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return _possibleConstructorReturn(this,l)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var checkedLoadedFor={},Translator=function(f){_inherits(a,f);var s=_createSuper$1(a);function a(u){var l,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _classCallCheck(this,a),l=s.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(l)),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],u,_assertThisInitialized(l)),l.options=h,l.options.keySeparator===void 0&&(l.options.keySeparator="."),l.logger=baseLogger.create("translator"),l}return _createClass(a,[{key:"changeLanguage",value:function(l){l&&(this.language=l)}},{key:"exists",value:function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(l==null)return!1;var d=this.resolve(l,h);return d&&d.res!==void 0}},{key:"extractFromKey",value:function(l,h){var d=h.nsSeparator!==void 0?h.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");var p=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator,x=h.ns||this.options.defaultNS||[],m=d&&l.indexOf(d)>-1,g=!this.options.userDefinedKeySeparator&&!h.keySeparator&&!this.options.userDefinedNsSeparator&&!h.nsSeparator&&!looksLikeObjectPath(l,d,p);if(m&&!g){var b=l.match(this.interpolator.nestingRegexp);if(b&&b.length>0)return{key:l,namespaces:x};var v=l.split(d);(d!==p||d===p&&this.options.ns.indexOf(v[0])>-1)&&(x=v.shift()),l=v.join(p)}return typeof x=="string"&&(x=[x]),{key:l,namespaces:x}}},{key:"translate",value:function(l,h,d){var p=this;if(_typeof(h)!=="object"&&this.options.overloadTranslationOptionHandler&&(h=this.options.overloadTranslationOptionHandler(arguments)),h||(h={}),l==null)return"";Array.isArray(l)||(l=[String(l)]);var x=h.returnDetails!==void 0?h.returnDetails:this.options.returnDetails,m=h.keySeparator!==void 0?h.keySeparator:this.options.keySeparator,g=this.extractFromKey(l[l.length-1],h),b=g.key,v=g.namespaces,y=v[v.length-1],C=h.lng||this.language,w=h.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(C&&C.toLowerCase()==="cimode"){if(w){var _=h.nsSeparator||this.options.nsSeparator;return x?(k.res="".concat(y).concat(_).concat(b),k):"".concat(y).concat(_).concat(b)}return x?(k.res=b,k):b}var k=this.resolve(l,h),E=k&&k.res,S=k&&k.usedKey||b,B=k&&k.exactUsedKey||b,P=Object.prototype.toString.apply(E),L=["[object Number]","[object Function]","[object RegExp]"],U=h.joinArrays!==void 0?h.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,K=typeof E!="string"&&typeof E!="boolean"&&typeof E!="number";if(q&&E&&K&&L.indexOf(P)<0&&!(typeof U=="string"&&P==="[object Array]")){if(!h.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,E,_objectSpread$2(_objectSpread$2({},h),{},{ns:v})):"key '".concat(b," (").concat(this.language,")' returned an object instead of string.");return x?(k.res=z,k):z}if(m){var G=P==="[object Array]",N=G?[]:{},M=G?B:S;for(var F in E)if(Object.prototype.hasOwnProperty.call(E,F)){var J="".concat(M).concat(m).concat(F);N[F]=this.translate(J,_objectSpread$2(_objectSpread$2({},h),{joinArrays:!1,ns:v})),N[F]===J&&(N[F]=E[F])}E=N}}else if(q&&typeof U=="string"&&P==="[object Array]")E=E.join(U),E&&(E=this.extendTranslation(E,l,h,d));else{var le=!1,te=!1,de=h.count!==void 0&&typeof h.count!="string",ne=a.hasDefaultValue(h),ge=de?this.pluralResolver.getSuffix(C,h.count,h):"",V=h["defaultValue".concat(ge)]||h.defaultValue;!this.isValidLookup(E)&&ne&&(le=!0,E=V),this.isValidLookup(E)||(te=!0,E=b);var Y=h.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,ce=Y&&te?void 0:E,re=ne&&V!==E&&this.options.updateMissing;if(te||le||re){if(this.logger.log(re?"updateKey":"missingKey",C,y,b,re?V:E),m){var pe=this.resolve(b,_objectSpread$2(_objectSpread$2({},h),{},{keySeparator:!1}));pe&&pe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Pe=[],Oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,h.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Oe&&Oe[0])for(var ke=0;ke<Oe.length;ke++)Pe.push(Oe[ke]);else this.options.saveMissingTo==="all"?Pe=this.languageUtils.toResolveHierarchy(h.lng||this.language):Pe.push(h.lng||this.language);var Te=function(Ue,Ke,Ie){var I=ne&&Ie!==E?Ie:ce;p.options.missingKeyHandler?p.options.missingKeyHandler(Ue,y,Ke,I,re,h):p.backendConnector&&p.backendConnector.saveMissing&&p.backendConnector.saveMissing(Ue,y,Ke,I,re,h),p.emit("missingKey",Ue,y,Ke,E)};this.options.saveMissing&&(this.options.saveMissingPlurals&&de?Pe.forEach(function(Le){p.pluralResolver.getSuffixes(Le,h).forEach(function(Ue){Te([Le],b+Ue,h["defaultValue".concat(Ue)]||V)})}):Te(Pe,b,V))}E=this.extendTranslation(E,l,h,k,d),te&&E===b&&this.options.appendNamespaceToMissingKey&&(E="".concat(y,":").concat(b)),(te||le)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?E=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(y,":").concat(b):b,le?E:void 0):E=this.options.parseMissingKeyHandler(E))}return x?(k.res=E,k):E}},{key:"extendTranslation",value:function(l,h,d,p,x){var m=this;if(this.i18nFormat&&this.i18nFormat.parse)l=this.i18nFormat.parse(l,_objectSpread$2(_objectSpread$2({},this.options.interpolation.defaultVariables),d),p.usedLng,p.usedNS,p.usedKey,{resolved:p});else if(!d.skipInterpolation){d.interpolation&&this.interpolator.init(_objectSpread$2(_objectSpread$2({},d),{interpolation:_objectSpread$2(_objectSpread$2({},this.options.interpolation),d.interpolation)}));var g=typeof l=="string"&&(d&&d.interpolation&&d.interpolation.skipOnVariables!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),b;if(g){var v=l.match(this.interpolator.nestingRegexp);b=v&&v.length}var y=d.replace&&typeof d.replace!="string"?d.replace:d;if(this.options.interpolation.defaultVariables&&(y=_objectSpread$2(_objectSpread$2({},this.options.interpolation.defaultVariables),y)),l=this.interpolator.interpolate(l,y,d.lng||this.language,d),g){var C=l.match(this.interpolator.nestingRegexp),w=C&&C.length;b<w&&(d.nest=!1)}d.nest!==!1&&(l=this.interpolator.nest(l,function(){for(var E=arguments.length,S=new Array(E),B=0;B<E;B++)S[B]=arguments[B];return x&&x[0]===S[0]&&!d.context?(m.logger.warn("It seems you are nesting recursively key: ".concat(S[0]," in key: ").concat(h[0])),null):m.translate.apply(m,S.concat([h]))},d)),d.interpolation&&this.interpolator.reset()}var _=d.postProcess||this.options.postProcess,k=typeof _=="string"?[_]:_;return l!=null&&k&&k.length&&d.applyPostProcessor!==!1&&(l=postProcessor.handle(k,l,h,this.options&&this.options.postProcessPassResolved?_objectSpread$2({i18nResolved:p},d):d,this)),l}},{key:"resolve",value:function(l){var h=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p,x,m,g,b;return typeof l=="string"&&(l=[l]),l.forEach(function(v){if(!h.isValidLookup(p)){var y=h.extractFromKey(v,d),C=y.key;x=C;var w=y.namespaces;h.options.fallbackNS&&(w=w.concat(h.options.fallbackNS));var _=d.count!==void 0&&typeof d.count!="string",k=_&&!d.ordinal&&d.count===0&&h.pluralResolver.shouldUseIntlApi(),E=d.context!==void 0&&(typeof d.context=="string"||typeof d.context=="number")&&d.context!=="",S=d.lngs?d.lngs:h.languageUtils.toResolveHierarchy(d.lng||h.language,d.fallbackLng);w.forEach(function(B){h.isValidLookup(p)||(b=B,!checkedLoadedFor["".concat(S[0],"-").concat(B)]&&h.utils&&h.utils.hasLoadedNamespace&&!h.utils.hasLoadedNamespace(b)&&(checkedLoadedFor["".concat(S[0],"-").concat(B)]=!0,h.logger.warn('key "'.concat(x,'" for languages "').concat(S.join(", "),`" won't get resolved as namespace "`).concat(b,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),S.forEach(function(P){if(!h.isValidLookup(p)){g=P;var L=[C];if(h.i18nFormat&&h.i18nFormat.addLookupKeys)h.i18nFormat.addLookupKeys(L,C,P,B,d);else{var U;_&&(U=h.pluralResolver.getSuffix(P,d.count,d));var q="".concat(h.options.pluralSeparator,"zero");if(_&&(L.push(C+U),k&&L.push(C+q)),E){var K="".concat(C).concat(h.options.contextSeparator).concat(d.context);L.push(K),_&&(L.push(K+U),k&&L.push(K+q))}}for(var z;z=L.pop();)h.isValidLookup(p)||(m=z,p=h.getResource(P,B,z,d))}}))})}}),{res:p,usedKey:x,exactUsedKey:m,usedLng:g,usedNS:b}}},{key:"isValidLookup",value:function(l){return l!==void 0&&!(!this.options.returnNull&&l===null)&&!(!this.options.returnEmptyString&&l==="")}},{key:"getResource",value:function(l,h,d){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(l,h,d,p):this.resourceStore.getResource(l,h,d,p)}}],[{key:"hasDefaultValue",value:function(l){var h="defaultValue";for(var d in l)if(Object.prototype.hasOwnProperty.call(l,d)&&h===d.substring(0,h.length)&&l[d]!==void 0)return!0;return!1}}]),a}(EventEmitter);function capitalize(f){return f.charAt(0).toUpperCase()+f.slice(1)}var LanguageUtil=function(){function f(s){_classCallCheck(this,f),this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}return _createClass(f,[{key:"getScriptPartFromCode",value:function(a){if(!a||a.indexOf("-")<0)return null;var u=a.split("-");return u.length===2||(u.pop(),u[u.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(u.join("-"))}},{key:"getLanguagePartFromCode",value:function(a){if(!a||a.indexOf("-")<0)return a;var u=a.split("-");return this.formatLanguageCode(u[0])}},{key:"formatLanguageCode",value:function(a){if(typeof a=="string"&&a.indexOf("-")>-1){var u=["hans","hant","latn","cyrl","cans","mong","arab"],l=a.split("-");return this.options.lowerCaseLng?l=l.map(function(h){return h.toLowerCase()}):l.length===2?(l[0]=l[0].toLowerCase(),l[1]=l[1].toUpperCase(),u.indexOf(l[1].toLowerCase())>-1&&(l[1]=capitalize(l[1].toLowerCase()))):l.length===3&&(l[0]=l[0].toLowerCase(),l[1].length===2&&(l[1]=l[1].toUpperCase()),l[0]!=="sgn"&&l[2].length===2&&(l[2]=l[2].toUpperCase()),u.indexOf(l[1].toLowerCase())>-1&&(l[1]=capitalize(l[1].toLowerCase())),u.indexOf(l[2].toLowerCase())>-1&&(l[2]=capitalize(l[2].toLowerCase()))),l.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?a.toLowerCase():a}},{key:"isSupportedCode",value:function(a){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(a=this.getLanguagePartFromCode(a)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(a)>-1}},{key:"getBestMatchFromCodes",value:function(a){var u=this;if(!a)return null;var l;return a.forEach(function(h){if(!l){var d=u.formatLanguageCode(h);(!u.options.supportedLngs||u.isSupportedCode(d))&&(l=d)}}),!l&&this.options.supportedLngs&&a.forEach(function(h){if(!l){var d=u.getLanguagePartFromCode(h);if(u.isSupportedCode(d))return l=d;l=u.options.supportedLngs.find(function(p){if(p.indexOf(d)===0)return p})}}),l||(l=this.getFallbackCodes(this.options.fallbackLng)[0]),l}},{key:"getFallbackCodes",value:function(a,u){if(!a)return[];if(typeof a=="function"&&(a=a(u)),typeof a=="string"&&(a=[a]),Object.prototype.toString.apply(a)==="[object Array]")return a;if(!u)return a.default||[];var l=a[u];return l||(l=a[this.getScriptPartFromCode(u)]),l||(l=a[this.formatLanguageCode(u)]),l||(l=a[this.getLanguagePartFromCode(u)]),l||(l=a.default),l||[]}},{key:"toResolveHierarchy",value:function(a,u){var l=this,h=this.getFallbackCodes(u||this.options.fallbackLng||[],a),d=[],p=function(m){m&&(l.isSupportedCode(m)?d.push(m):l.logger.warn("rejecting language code not found in supportedLngs: ".concat(m)))};return typeof a=="string"&&a.indexOf("-")>-1?(this.options.load!=="languageOnly"&&p(this.formatLanguageCode(a)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&p(this.getScriptPartFromCode(a)),this.options.load!=="currentOnly"&&p(this.getLanguagePartFromCode(a))):typeof a=="string"&&p(this.formatLanguageCode(a)),h.forEach(function(x){d.indexOf(x)<0&&p(l.formatLanguageCode(x))}),d}}]),f}(),sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function(s){return+(s>1)},2:function(s){return+(s!=1)},3:function(s){return 0},4:function(s){return s%10==1&&s%100!=11?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2},5:function(s){return s==0?0:s==1?1:s==2?2:s%100>=3&&s%100<=10?3:s%100>=11?4:5},6:function(s){return s==1?0:s>=2&&s<=4?1:2},7:function(s){return s==1?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2},8:function(s){return s==1?0:s==2?1:s!=8&&s!=11?2:3},9:function(s){return+(s>=2)},10:function(s){return s==1?0:s==2?1:s<7?2:s<11?3:4},11:function(s){return s==1||s==11?0:s==2||s==12?1:s>2&&s<20?2:3},12:function(s){return+(s%10!=1||s%100==11)},13:function(s){return+(s!==0)},14:function(s){return s==1?0:s==2?1:s==3?2:3},15:function(s){return s%10==1&&s%100!=11?0:s%10>=2&&(s%100<10||s%100>=20)?1:2},16:function(s){return s%10==1&&s%100!=11?0:s!==0?1:2},17:function(s){return s==1||s%10==1&&s%100!=11?0:1},18:function(s){return s==0?0:s==1?1:2},19:function(s){return s==1?0:s==0||s%100>1&&s%100<11?1:s%100>10&&s%100<20?2:3},20:function(s){return s==1?0:s==0||s%100>0&&s%100<20?1:2},21:function(s){return s%100==1?1:s%100==2?2:s%100==3||s%100==4?3:0},22:function(s){return s==1?0:s==2?1:(s<0||s>10)&&s%10==0?2:3}},deprecatedJsonVersions=["v1","v2","v3"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5};function createRules(){var f={};return sets.forEach(function(s){s.lngs.forEach(function(a){f[a]={numbers:s.nr,plurals:_rulesPluralsTypes[s.fc]}})}),f}var PluralResolver=function(){function f(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,f),this.languageUtils=s,this.options=a,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules()}return _createClass(f,[{key:"addRule",value:function(a,u){this.rules[a]=u}},{key:"getRule",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(a,{type:u.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[a]||this.rules[this.languageUtils.getLanguagePartFromCode(a)]}},{key:"needsPlural",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=this.getRule(a,u);return this.shouldUseIntlApi()?l&&l.resolvedOptions().pluralCategories.length>1:l&&l.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(a,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(a,l).map(function(h){return"".concat(u).concat(h)})}},{key:"getSuffixes",value:function(a){var u=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=this.getRule(a,l);return h?this.shouldUseIntlApi()?h.resolvedOptions().pluralCategories.sort(function(d,p){return suffixesOrder[d]-suffixesOrder[p]}).map(function(d){return"".concat(u.options.prepend).concat(d)}):h.numbers.map(function(d){return u.getSuffix(a,d,l)}):[]}},{key:"getSuffix",value:function(a,u){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=this.getRule(a,l);return h?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(h.select(u)):this.getSuffixRetroCompatible(h,u):(this.logger.warn("no plural rule found for: ".concat(a)),"")}},{key:"getSuffixRetroCompatible",value:function(a,u){var l=this,h=a.noAbs?a.plurals(u):a.plurals(Math.abs(u)),d=a.numbers[h];this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1&&(d===2?d="plural":d===1&&(d=""));var p=function(){return l.options.prepend&&d.toString()?l.options.prepend+d.toString():d.toString()};return this.options.compatibilityJSON==="v1"?d===1?"":typeof d=="number"?"_plural_".concat(d.toString()):p():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1?p():this.options.prepend&&h.toString()?this.options.prepend+h.toString():h.toString()}},{key:"shouldUseIntlApi",value:function(){return!deprecatedJsonVersions.includes(this.options.compatibilityJSON)}}]),f}();function ownKeys$3(f,s){var a=Object.keys(f);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(f);s&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(f,l).enumerable})),a.push.apply(a,u)}return a}function _objectSpread$3(f){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$3(Object(a),!0).forEach(function(u){_defineProperty(f,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(a)):ownKeys$3(Object(a)).forEach(function(u){Object.defineProperty(f,u,Object.getOwnPropertyDescriptor(a,u))})}return f}var Interpolator=function(){function f(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck(this,f),this.logger=baseLogger.create("interpolator"),this.options=s,this.format=s.interpolation&&s.interpolation.format||function(a){return a},this.init(s)}return _createClass(f,[{key:"init",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};a.interpolation||(a.interpolation={escapeValue:!0});var u=a.interpolation;this.escape=u.escape!==void 0?u.escape:escape$1,this.escapeValue=u.escapeValue!==void 0?u.escapeValue:!0,this.useRawValueToEscape=u.useRawValueToEscape!==void 0?u.useRawValueToEscape:!1,this.prefix=u.prefix?regexEscape(u.prefix):u.prefixEscaped||"{{",this.suffix=u.suffix?regexEscape(u.suffix):u.suffixEscaped||"}}",this.formatSeparator=u.formatSeparator?u.formatSeparator:u.formatSeparator||",",this.unescapePrefix=u.unescapeSuffix?"":u.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":u.unescapeSuffix||"",this.nestingPrefix=u.nestingPrefix?regexEscape(u.nestingPrefix):u.nestingPrefixEscaped||regexEscape("$t("),this.nestingSuffix=u.nestingSuffix?regexEscape(u.nestingSuffix):u.nestingSuffixEscaped||regexEscape(")"),this.nestingOptionsSeparator=u.nestingOptionsSeparator?u.nestingOptionsSeparator:u.nestingOptionsSeparator||",",this.maxReplaces=u.maxReplaces?u.maxReplaces:1e3,this.alwaysFormat=u.alwaysFormat!==void 0?u.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var a="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(a,"g");var u="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(u,"g");var l="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(l,"g")}},{key:"interpolate",value:function(a,u,l,h){var d=this,p,x,m,g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function b(_){return _.replace(/\$/g,"$$$$")}var v=function(k){if(k.indexOf(d.formatSeparator)<0){var E=getPathWithDefaults(u,g,k);return d.alwaysFormat?d.format(E,void 0,l,_objectSpread$3(_objectSpread$3(_objectSpread$3({},h),u),{},{interpolationkey:k})):E}var S=k.split(d.formatSeparator),B=S.shift().trim(),P=S.join(d.formatSeparator).trim();return d.format(getPathWithDefaults(u,g,B),P,l,_objectSpread$3(_objectSpread$3(_objectSpread$3({},h),u),{},{interpolationkey:B}))};this.resetRegExp();var y=h&&h.missingInterpolationHandler||this.options.missingInterpolationHandler,C=h&&h.interpolation&&h.interpolation.skipOnVariables!==void 0?h.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,w=[{regex:this.regexpUnescape,safeValue:function(k){return b(k)}},{regex:this.regexp,safeValue:function(k){return d.escapeValue?b(d.escape(k)):b(k)}}];return w.forEach(function(_){for(m=0;p=_.regex.exec(a);){var k=p[1].trim();if(x=v(k),x===void 0)if(typeof y=="function"){var E=y(a,p,h);x=typeof E=="string"?E:""}else if(h&&h.hasOwnProperty(k))x="";else if(C){x=p[0];continue}else d.logger.warn("missed to pass in variable ".concat(k," for interpolating ").concat(a)),x="";else typeof x!="string"&&!d.useRawValueToEscape&&(x=makeString(x));var S=_.safeValue(x);if(a=a.replace(p[0],S),C?(_.regex.lastIndex+=x.length,_.regex.lastIndex-=p[0].length):_.regex.lastIndex=0,m++,m>=d.maxReplaces)break}}),a}},{key:"nest",value:function(a,u){var l=this,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d,p,x=_objectSpread$3({},h);x.applyPostProcessor=!1,delete x.defaultValue;function m(y,C){var w=this.nestingOptionsSeparator;if(y.indexOf(w)<0)return y;var _=y.split(new RegExp("".concat(w,"[ ]*{"))),k="{".concat(_[1]);y=_[0],k=this.interpolate(k,x);var E=k.match(/'/g),S=k.match(/"/g);(E&&E.length%2===0&&!S||S.length%2!==0)&&(k=k.replace(/'/g,'"'));try{x=JSON.parse(k),C&&(x=_objectSpread$3(_objectSpread$3({},C),x))}catch(B){return this.logger.warn("failed parsing options string in nesting for key ".concat(y),B),"".concat(y).concat(w).concat(k)}return delete x.defaultValue,y}for(;d=this.nestingRegexp.exec(a);){var g=[],b=!1;if(d[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(d[1])){var v=d[1].split(this.formatSeparator).map(function(y){return y.trim()});d[1]=v.shift(),g=v,b=!0}if(p=u(m.call(this,d[1].trim(),x),x),p&&d[0]===a&&typeof p!="string")return p;typeof p!="string"&&(p=makeString(p)),p||(this.logger.warn("missed to resolve ".concat(d[1]," for nesting ").concat(a)),p=""),b&&(p=g.reduce(function(y,C){return l.format(y,C,h.lng,_objectSpread$3(_objectSpread$3({},h),{},{interpolationkey:d[1].trim()}))},p.trim())),a=a.replace(d[0],p),this.regexp.lastIndex=0}return a}}]),f}();function ownKeys$4(f,s){var a=Object.keys(f);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(f);s&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(f,l).enumerable})),a.push.apply(a,u)}return a}function _objectSpread$4(f){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$4(Object(a),!0).forEach(function(u){_defineProperty(f,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(a)):ownKeys$4(Object(a)).forEach(function(u){Object.defineProperty(f,u,Object.getOwnPropertyDescriptor(a,u))})}return f}function parseFormatStr(f){var s=f.toLowerCase().trim(),a={};if(f.indexOf("(")>-1){var u=f.split("(");s=u[0].toLowerCase().trim();var l=u[1].substring(0,u[1].length-1);if(s==="currency"&&l.indexOf(":")<0)a.currency||(a.currency=l.trim());else if(s==="relativetime"&&l.indexOf(":")<0)a.range||(a.range=l.trim());else{var h=l.split(";");h.forEach(function(d){if(d){var p=d.split(":"),x=_toArray(p),m=x[0],g=x.slice(1),b=g.join(":").trim().replace(/^'+|'+$/g,"");a[m.trim()]||(a[m.trim()]=b),b==="false"&&(a[m.trim()]=!1),b==="true"&&(a[m.trim()]=!0),isNaN(b)||(a[m.trim()]=parseInt(b,10))}})}}return{formatName:s,formatOptions:a}}function createCachedFormatter(f){var s={};return function(u,l,h){var d=l+JSON.stringify(h),p=s[d];return p||(p=f(l,h),s[d]=p),p(u)}}var Formatter=function(){function f(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck(this,f),this.logger=baseLogger.create("formatter"),this.options=s,this.formats={number:createCachedFormatter(function(a,u){var l=new Intl.NumberFormat(a,u);return function(h){return l.format(h)}}),currency:createCachedFormatter(function(a,u){var l=new Intl.NumberFormat(a,_objectSpread$4(_objectSpread$4({},u),{},{style:"currency"}));return function(h){return l.format(h)}}),datetime:createCachedFormatter(function(a,u){var l=new Intl.DateTimeFormat(a,_objectSpread$4({},u));return function(h){return l.format(h)}}),relativetime:createCachedFormatter(function(a,u){var l=new Intl.RelativeTimeFormat(a,_objectSpread$4({},u));return function(h){return l.format(h,u.range||"day")}}),list:createCachedFormatter(function(a,u){var l=new Intl.ListFormat(a,_objectSpread$4({},u));return function(h){return l.format(h)}})},this.init(s)}return _createClass(f,[{key:"init",value:function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},l=u.interpolation;this.formatSeparator=l.formatSeparator?l.formatSeparator:l.formatSeparator||","}},{key:"add",value:function(a,u){this.formats[a.toLowerCase().trim()]=u}},{key:"addCached",value:function(a,u){this.formats[a.toLowerCase().trim()]=createCachedFormatter(u)}},{key:"format",value:function(a,u,l,h){var d=this,p=u.split(this.formatSeparator),x=p.reduce(function(m,g){var b=parseFormatStr(g),v=b.formatName,y=b.formatOptions;if(d.formats[v]){var C=m;try{var w=h&&h.formatParams&&h.formatParams[h.interpolationkey]||{},_=w.locale||w.lng||h.locale||h.lng||l;C=d.formats[v](m,_,_objectSpread$4(_objectSpread$4(_objectSpread$4({},y),h),w))}catch(k){d.logger.warn(k)}return C}else d.logger.warn("there was no format function for ".concat(v));return m},a);return x}}]),f}();function ownKeys$5(f,s){var a=Object.keys(f);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(f);s&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(f,l).enumerable})),a.push.apply(a,u)}return a}function _objectSpread$5(f){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$5(Object(a),!0).forEach(function(u){_defineProperty(f,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(a)):ownKeys$5(Object(a)).forEach(function(u){Object.defineProperty(f,u,Object.getOwnPropertyDescriptor(a,u))})}return f}function _createSuper$2(f){var s=_isNativeReflectConstruct$2();return function(){var u=_getPrototypeOf(f),l;if(s){var h=_getPrototypeOf(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return _possibleConstructorReturn(this,l)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function removePending(f,s){f.pending[s]!==void 0&&(delete f.pending[s],f.pendingCount--)}var Connector=function(f){_inherits(a,f);var s=_createSuper$2(a);function a(u,l,h){var d,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return _classCallCheck(this,a),d=s.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(d)),d.backend=u,d.store=l,d.services=h,d.languageUtils=h.languageUtils,d.options=p,d.logger=baseLogger.create("backendConnector"),d.waitingReads=[],d.maxParallelReads=p.maxParallelReads||10,d.readingCalls=0,d.maxRetries=p.maxRetries>=0?p.maxRetries:5,d.retryTimeout=p.retryTimeout>=1?p.retryTimeout:350,d.state={},d.queue=[],d.backend&&d.backend.init&&d.backend.init(h,p.backend,p),d}return _createClass(a,[{key:"queueLoad",value:function(l,h,d,p){var x=this,m={},g={},b={},v={};return l.forEach(function(y){var C=!0;h.forEach(function(w){var _="".concat(y,"|").concat(w);!d.reload&&x.store.hasResourceBundle(y,w)?x.state[_]=2:x.state[_]<0||(x.state[_]===1?g[_]===void 0&&(g[_]=!0):(x.state[_]=1,C=!1,g[_]===void 0&&(g[_]=!0),m[_]===void 0&&(m[_]=!0),v[w]===void 0&&(v[w]=!0)))}),C||(b[y]=!0)}),(Object.keys(m).length||Object.keys(g).length)&&this.queue.push({pending:g,pendingCount:Object.keys(g).length,loaded:{},errors:[],callback:p}),{toLoad:Object.keys(m),pending:Object.keys(g),toLoadLanguages:Object.keys(b),toLoadNamespaces:Object.keys(v)}}},{key:"loaded",value:function(l,h,d){var p=l.split("|"),x=p[0],m=p[1];h&&this.emit("failedLoading",x,m,h),d&&this.store.addResourceBundle(x,m,d),this.state[l]=h?-1:2;var g={};this.queue.forEach(function(b){pushPath(b.loaded,[x],m),removePending(b,l),h&&b.errors.push(h),b.pendingCount===0&&!b.done&&(Object.keys(b.loaded).forEach(function(v){g[v]||(g[v]={});var y=b.loaded[v];y.length&&y.forEach(function(C){g[v][C]===void 0&&(g[v][C]=!0)})}),b.done=!0,b.errors.length?b.callback(b.errors):b.callback())}),this.emit("loaded",g),this.queue=this.queue.filter(function(b){return!b.done})}},{key:"read",value:function(l,h,d){var p=this,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,g=arguments.length>5?arguments[5]:void 0;if(!l.length)return g(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:l,ns:h,fcName:d,tried:x,wait:m,callback:g});return}return this.readingCalls++,this.backend[d](l,h,function(b,v){if(p.readingCalls--,p.waitingReads.length>0){var y=p.waitingReads.shift();p.read(y.lng,y.ns,y.fcName,y.tried,y.wait,y.callback)}if(b&&v&&x<p.maxRetries){setTimeout(function(){p.read.call(p,l,h,d,x+1,m*2,g)},m);return}g(b,v)})}},{key:"prepareLoading",value:function(l,h){var d=this,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),x&&x();typeof l=="string"&&(l=this.languageUtils.toResolveHierarchy(l)),typeof h=="string"&&(h=[h]);var m=this.queueLoad(l,h,p,x);if(!m.toLoad.length)return m.pending.length||x(),null;m.toLoad.forEach(function(g){d.loadOne(g)})}},{key:"load",value:function(l,h,d){this.prepareLoading(l,h,{},d)}},{key:"reload",value:function(l,h,d){this.prepareLoading(l,h,{reload:!0},d)}},{key:"loadOne",value:function(l){var h=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",p=l.split("|"),x=p[0],m=p[1];this.read(x,m,"read",void 0,void 0,function(g,b){g&&h.logger.warn("".concat(d,"loading namespace ").concat(m," for language ").concat(x," failed"),g),!g&&b&&h.logger.log("".concat(d,"loaded namespace ").concat(m," for language ").concat(x),b),h.loaded(l,g,b)})}},{key:"saveMissing",value:function(l,h,d,p,x){var m=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(h)){this.logger.warn('did not save key "'.concat(d,'" as the namespace "').concat(h,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}d==null||d===""||(this.backend&&this.backend.create&&this.backend.create(l,h,d,p,null,_objectSpread$5(_objectSpread$5({},m),{},{isUpdate:x})),!(!l||!l[0])&&this.store.addResource(l[0],h,d,p))}}]),a}(EventEmitter);function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(s){var a={};if(_typeof(s[1])==="object"&&(a=s[1]),typeof s[1]=="string"&&(a.defaultValue=s[1]),typeof s[2]=="string"&&(a.tDescription=s[2]),_typeof(s[2])==="object"||_typeof(s[3])==="object"){var u=s[3]||s[2];Object.keys(u).forEach(function(l){a[l]=u[l]})}return a},interpolation:{escapeValue:!0,format:function(s,a,u,l){return s},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(f){return typeof f.ns=="string"&&(f.ns=[f.ns]),typeof f.fallbackLng=="string"&&(f.fallbackLng=[f.fallbackLng]),typeof f.fallbackNS=="string"&&(f.fallbackNS=[f.fallbackNS]),f.supportedLngs&&f.supportedLngs.indexOf("cimode")<0&&(f.supportedLngs=f.supportedLngs.concat(["cimode"])),f}function ownKeys$6(f,s){var a=Object.keys(f);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(f);s&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(f,l).enumerable})),a.push.apply(a,u)}return a}function _objectSpread$6(f){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$6(Object(a),!0).forEach(function(u){_defineProperty(f,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(a)):ownKeys$6(Object(a)).forEach(function(u){Object.defineProperty(f,u,Object.getOwnPropertyDescriptor(a,u))})}return f}function _createSuper$3(f){var s=_isNativeReflectConstruct$3();return function(){var u=_getPrototypeOf(f),l;if(s){var h=_getPrototypeOf(this).constructor;l=Reflect.construct(u,arguments,h)}else l=u.apply(this,arguments);return _possibleConstructorReturn(this,l)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function noop(){}function bindMemberFunctions(f){var s=Object.getOwnPropertyNames(Object.getPrototypeOf(f));s.forEach(function(a){typeof f[a]=="function"&&(f[a]=f[a].bind(f))})}var I18n=function(f){_inherits(a,f);var s=_createSuper$3(a);function a(){var u,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;if(_classCallCheck(this,a),u=s.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(u)),u.options=transformOptions(l),u.services={},u.logger=baseLogger,u.modules={external:[]},bindMemberFunctions(_assertThisInitialized(u)),h&&!u.isInitialized&&!l.isClone){if(!u.options.initImmediate)return u.init(l,h),_possibleConstructorReturn(u,_assertThisInitialized(u));setTimeout(function(){u.init(l,h)},0)}return u}return _createClass(a,[{key:"init",value:function(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;typeof h=="function"&&(d=h,h={}),!h.defaultNS&&h.defaultNS!==!1&&h.ns&&(typeof h.ns=="string"?h.defaultNS=h.ns:h.ns.indexOf("translation")<0&&(h.defaultNS=h.ns[0]));var p=get();this.options=_objectSpread$6(_objectSpread$6(_objectSpread$6({},p),this.options),transformOptions(h)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=_objectSpread$6(_objectSpread$6({},p.interpolation),this.options.interpolation)),h.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=h.keySeparator),h.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=h.nsSeparator);function x(k){return k?typeof k=="function"?new k:k:null}if(!this.options.isClone){this.modules.logger?baseLogger.init(x(this.modules.logger),this.options):baseLogger.init(null,this.options);var m;this.modules.formatter?m=this.modules.formatter:typeof Intl<"u"&&(m=Formatter);var g=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);var b=this.services;b.logger=baseLogger,b.resourceStore=this.store,b.languageUtils=g,b.pluralResolver=new PluralResolver(g,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),m&&(!this.options.interpolation.format||this.options.interpolation.format===p.interpolation.format)&&(b.formatter=x(m),b.formatter.init(b,this.options),this.options.interpolation.format=b.formatter.format.bind(b.formatter)),b.interpolator=new Interpolator(this.options),b.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},b.backendConnector=new Connector(x(this.modules.backend),b.resourceStore,b,this.options),b.backendConnector.on("*",function(k){for(var E=arguments.length,S=new Array(E>1?E-1:0),B=1;B<E;B++)S[B-1]=arguments[B];l.emit.apply(l,[k].concat(S))}),this.modules.languageDetector&&(b.languageDetector=x(this.modules.languageDetector),b.languageDetector.init(b,this.options.detection,this.options)),this.modules.i18nFormat&&(b.i18nFormat=x(this.modules.i18nFormat),b.i18nFormat.init&&b.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(k){for(var E=arguments.length,S=new Array(E>1?E-1:0),B=1;B<E;B++)S[B-1]=arguments[B];l.emit.apply(l,[k].concat(S))}),this.modules.external.forEach(function(k){k.init&&k.init(l)})}if(this.format=this.options.interpolation.format,d||(d=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var v=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);v.length>0&&v[0]!=="dev"&&(this.options.lng=v[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var y=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];y.forEach(function(k){l[k]=function(){var E;return(E=l.store)[k].apply(E,arguments)}});var C=["addResource","addResources","addResourceBundle","removeResourceBundle"];C.forEach(function(k){l[k]=function(){var E;return(E=l.store)[k].apply(E,arguments),l}});var w=defer(),_=function(){var E=function(B,P){l.isInitialized&&!l.initializedStoreOnce&&l.logger.warn("init: i18next is already initialized. You should call init just once!"),l.isInitialized=!0,l.options.isClone||l.logger.log("initialized",l.options),l.emit("initialized",l.options),w.resolve(P),d(B,P)};if(l.languages&&l.options.compatibilityAPI!=="v1"&&!l.isInitialized)return E(null,l.t.bind(l));l.changeLanguage(l.options.lng,E)};return this.options.resources||!this.options.initImmediate?_():setTimeout(_,0),w}},{key:"loadResources",value:function(l){var h=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop,p=d,x=typeof l=="string"?l:this.language;if(typeof l=="function"&&(p=l),!this.options.resources||this.options.partialBundledLanguages){if(x&&x.toLowerCase()==="cimode")return p();var m=[],g=function(y){if(y){var C=h.services.languageUtils.toResolveHierarchy(y);C.forEach(function(w){m.indexOf(w)<0&&m.push(w)})}};if(x)g(x);else{var b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.forEach(function(v){return g(v)})}this.options.preload&&this.options.preload.forEach(function(v){return g(v)}),this.services.backendConnector.load(m,this.options.ns,function(v){!v&&!h.resolvedLanguage&&h.language&&h.setResolvedLanguage(h.language),p(v)})}else p(null)}},{key:"reloadResources",value:function(l,h,d){var p=defer();return l||(l=this.languages),h||(h=this.options.ns),d||(d=noop),this.services.backendConnector.reload(l,h,function(x){p.resolve(),d(x)}),p}},{key:"use",value:function(l){if(!l)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!l.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return l.type==="backend"&&(this.modules.backend=l),(l.type==="logger"||l.log&&l.warn&&l.error)&&(this.modules.logger=l),l.type==="languageDetector"&&(this.modules.languageDetector=l),l.type==="i18nFormat"&&(this.modules.i18nFormat=l),l.type==="postProcessor"&&postProcessor.addPostProcessor(l),l.type==="formatter"&&(this.modules.formatter=l),l.type==="3rdParty"&&this.modules.external.push(l),this}},{key:"setResolvedLanguage",value:function(l){if(!(!l||!this.languages)&&!(["cimode","dev"].indexOf(l)>-1))for(var h=0;h<this.languages.length;h++){var d=this.languages[h];if(!(["cimode","dev"].indexOf(d)>-1)&&this.store.hasLanguageSomeTranslations(d)){this.resolvedLanguage=d;break}}}},{key:"changeLanguage",value:function(l,h){var d=this;this.isLanguageChangingTo=l;var p=defer();this.emit("languageChanging",l);var x=function(v){d.language=v,d.languages=d.services.languageUtils.toResolveHierarchy(v),d.resolvedLanguage=void 0,d.setResolvedLanguage(v)},m=function(v,y){y?(x(y),d.translator.changeLanguage(y),d.isLanguageChangingTo=void 0,d.emit("languageChanged",y),d.logger.log("languageChanged",y)):d.isLanguageChangingTo=void 0,p.resolve(function(){return d.t.apply(d,arguments)}),h&&h(v,function(){return d.t.apply(d,arguments)})},g=function(v){!l&&!v&&d.services.languageDetector&&(v=[]);var y=typeof v=="string"?v:d.services.languageUtils.getBestMatchFromCodes(v);y&&(d.language||x(y),d.translator.language||d.translator.changeLanguage(y),d.services.languageDetector&&d.services.languageDetector.cacheUserLanguage(y)),d.loadResources(y,function(C){m(C,y)})};return!l&&this.services.languageDetector&&!this.services.languageDetector.async?g(this.services.languageDetector.detect()):!l&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(g):g(l),p}},{key:"getFixedT",value:function(l,h,d){var p=this,x=function m(g,b){var v;if(_typeof(b)!=="object"){for(var y=arguments.length,C=new Array(y>2?y-2:0),w=2;w<y;w++)C[w-2]=arguments[w];v=p.options.overloadTranslationOptionHandler([g,b].concat(C))}else v=_objectSpread$6({},b);v.lng=v.lng||m.lng,v.lngs=v.lngs||m.lngs,v.ns=v.ns||m.ns,v.keyPrefix=v.keyPrefix||d||m.keyPrefix;var _=p.options.keySeparator||".",k=v.keyPrefix?"".concat(v.keyPrefix).concat(_).concat(g):g;return p.t(k,v)};return typeof l=="string"?x.lng=l:x.lngs=l,x.ns=h,x.keyPrefix=d,x}},{key:"t",value:function(){var l;return this.translator&&(l=this.translator).translate.apply(l,arguments)}},{key:"exists",value:function(){var l;return this.translator&&(l=this.translator).exists.apply(l,arguments)}},{key:"setDefaultNamespace",value:function(l){this.options.defaultNS=l}},{key:"hasLoadedNamespace",value:function(l){var h=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var p=this.resolvedLanguage||this.languages[0],x=this.options?this.options.fallbackLng:!1,m=this.languages[this.languages.length-1];if(p.toLowerCase()==="cimode")return!0;var g=function(y,C){var w=h.services.backendConnector.state["".concat(y,"|").concat(C)];return w===-1||w===2};if(d.precheck){var b=d.precheck(this,g);if(b!==void 0)return b}return!!(this.hasResourceBundle(p,l)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||g(p,l)&&(!x||g(m,l)))}},{key:"loadNamespaces",value:function(l,h){var d=this,p=defer();return this.options.ns?(typeof l=="string"&&(l=[l]),l.forEach(function(x){d.options.ns.indexOf(x)<0&&d.options.ns.push(x)}),this.loadResources(function(x){p.resolve(),h&&h(x)}),p):(h&&h(),Promise.resolve())}},{key:"loadLanguages",value:function(l,h){var d=defer();typeof l=="string"&&(l=[l]);var p=this.options.preload||[],x=l.filter(function(m){return p.indexOf(m)<0});return x.length?(this.options.preload=p.concat(x),this.loadResources(function(m){d.resolve(),h&&h(m)}),d):(h&&h(),Promise.resolve())}},{key:"dir",value:function(l){if(l||(l=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!l)return"rtl";var h=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return h.indexOf(this.services.languageUtils.getLanguagePartFromCode(l))>-1||l.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var l=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop,p=_objectSpread$6(_objectSpread$6(_objectSpread$6({},this.options),h),{isClone:!0}),x=new a(p);(h.debug!==void 0||h.prefix!==void 0)&&(x.logger=x.logger.clone(h));var m=["store","services","language"];return m.forEach(function(g){x[g]=l[g]}),x.services=_objectSpread$6({},this.services),x.services.utils={hasLoadedNamespace:x.hasLoadedNamespace.bind(x)},x.translator=new Translator(x.services,x.options),x.translator.on("*",function(g){for(var b=arguments.length,v=new Array(b>1?b-1:0),y=1;y<b;y++)v[y-1]=arguments[y];x.emit.apply(x,[g].concat(v))}),x.init(p,d),x.translator.options=x.options,x.translator.backendConnector.services.utils={hasLoadedNamespace:x.hasLoadedNamespace.bind(x)},x}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),a}(EventEmitter);_defineProperty(I18n,"createInstance",function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new I18n(f,s)});var instance=I18n.createInstance();instance.createInstance=I18n.createInstance,instance.createInstance,instance.init,instance.loadResources,instance.reloadResources,instance.use,instance.changeLanguage,instance.getFixedT,instance.t,instance.exists,instance.setDefaultNamespace,instance.hasLoadedNamespace,instance.loadNamespaces,instance.loadLanguages;var customParseFormat$1={exports:{}};(function(f,s){(function(a,u){f.exports=u()})(commonjsGlobal,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},u=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,l=/\d\d/,h=/\d\d?/,d=/\d*[^-_:/,()\s\d]+/,p={},x=function(w){return(w=+w)+(w>68?1900:2e3)},m=function(w){return function(_){this[w]=+_}},g=[/[+-]\d\d:?(\d\d)?|Z/,function(w){(this.zone||(this.zone={})).offset=function(_){if(!_||_==="Z")return 0;var k=_.match(/([+-]|\d\d)/g),E=60*k[1]+(+k[2]||0);return E===0?0:k[0]==="+"?-E:E}(w)}],b=function(w){var _=p[w];return _&&(_.indexOf?_:_.s.concat(_.f))},v=function(w,_){var k,E=p.meridiem;if(E){for(var S=1;S<=24;S+=1)if(w.indexOf(E(S,0,_))>-1){k=S>12;break}}else k=w===(_?"pm":"PM");return k},y={A:[d,function(w){this.afternoon=v(w,!1)}],a:[d,function(w){this.afternoon=v(w,!0)}],S:[/\d/,function(w){this.milliseconds=100*+w}],SS:[l,function(w){this.milliseconds=10*+w}],SSS:[/\d{3}/,function(w){this.milliseconds=+w}],s:[h,m("seconds")],ss:[h,m("seconds")],m:[h,m("minutes")],mm:[h,m("minutes")],H:[h,m("hours")],h:[h,m("hours")],HH:[h,m("hours")],hh:[h,m("hours")],D:[h,m("day")],DD:[l,m("day")],Do:[d,function(w){var _=p.ordinal,k=w.match(/\d+/);if(this.day=k[0],_)for(var E=1;E<=31;E+=1)_(E).replace(/\[|\]/g,"")===w&&(this.day=E)}],M:[h,m("month")],MM:[l,m("month")],MMM:[d,function(w){var _=b("months"),k=(b("monthsShort")||_.map(function(E){return E.slice(0,3)})).indexOf(w)+1;if(k<1)throw new Error;this.month=k%12||k}],MMMM:[d,function(w){var _=b("months").indexOf(w)+1;if(_<1)throw new Error;this.month=_%12||_}],Y:[/[+-]?\d+/,m("year")],YY:[l,function(w){this.year=x(w)}],YYYY:[/\d{4}/,m("year")],Z:g,ZZ:g};function C(w){var _,k;_=w,k=p&&p.formats;for(var E=(w=_.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(K,z,G){var N=G&&G.toUpperCase();return z||k[G]||a[G]||k[N].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(M,F,J){return F||J.slice(1)})})).match(u),S=E.length,B=0;B<S;B+=1){var P=E[B],L=y[P],U=L&&L[0],q=L&&L[1];E[B]=q?{regex:U,parser:q}:P.replace(/^\[|\]$/g,"")}return function(K){for(var z={},G=0,N=0;G<S;G+=1){var M=E[G];if(typeof M=="string")N+=M.length;else{var F=M.regex,J=M.parser,le=K.slice(N),te=F.exec(le)[0];J.call(z,te),K=K.replace(te,"")}}return function(de){var ne=de.afternoon;if(ne!==void 0){var ge=de.hours;ne?ge<12&&(de.hours+=12):ge===12&&(de.hours=0),delete de.afternoon}}(z),z}}return function(w,_,k){k.p.customParseFormat=!0,w&&w.parseTwoDigitYear&&(x=w.parseTwoDigitYear);var E=_.prototype,S=E.parse;E.parse=function(B){var P=B.date,L=B.utc,U=B.args;this.$u=L;var q=U[1];if(typeof q=="string"){var K=U[2]===!0,z=U[3]===!0,G=K||z,N=U[2];z&&(N=U[2]),p=this.$locale(),!K&&N&&(p=k.Ls[N]),this.$d=function(le,te,de){try{if(["x","X"].indexOf(te)>-1)return new Date((te==="X"?1e3:1)*le);var ne=C(te)(le),ge=ne.year,V=ne.month,Y=ne.day,ce=ne.hours,re=ne.minutes,pe=ne.seconds,Pe=ne.milliseconds,Oe=ne.zone,ke=new Date,Te=Y||(ge||V?1:ke.getDate()),Le=ge||ke.getFullYear(),Ue=0;ge&&!V||(Ue=V>0?V-1:ke.getMonth());var Ke=ce||0,Ie=re||0,I=pe||0,xe=Pe||0;return Oe?new Date(Date.UTC(Le,Ue,Te,Ke,Ie,I,xe+60*Oe.offset*1e3)):de?new Date(Date.UTC(Le,Ue,Te,Ke,Ie,I,xe)):new Date(Le,Ue,Te,Ke,Ie,I,xe)}catch{return new Date("")}}(P,q,L),this.init(),N&&N!==!0&&(this.$L=this.locale(N).$L),G&&P!=this.format(q)&&(this.$d=new Date("")),p={}}else if(q instanceof Array)for(var M=q.length,F=1;F<=M;F+=1){U[1]=q[F-1];var J=k.apply(this,U);if(J.isValid()){this.$d=J.$d,this.$L=J.$L,this.init();break}F===M&&(this.$d=new Date(""))}else S.call(this,B)}}})})(customParseFormat$1);var customParseFormatExports=customParseFormat$1.exports;const customParseFormat=getDefaultExportFromCjs(customParseFormatExports);var advancedFormat$1={exports:{}};(function(f,s){(function(a,u){f.exports=u()})(commonjsGlobal,function(){return function(a,u){var l=u.prototype,h=l.format;l.format=function(d){var p=this,x=this.$locale();if(!this.isValid())return h.bind(this)(d);var m=this.$utils(),g=(d||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(b){switch(b){case"Q":return Math.ceil((p.$M+1)/3);case"Do":return x.ordinal(p.$D);case"gggg":return p.weekYear();case"GGGG":return p.isoWeekYear();case"wo":return x.ordinal(p.week(),"W");case"w":case"ww":return m.s(p.week(),b==="w"?1:2,"0");case"W":case"WW":return m.s(p.isoWeek(),b==="W"?1:2,"0");case"k":case"kk":return m.s(String(p.$H===0?24:p.$H),b==="k"?1:2,"0");case"X":return Math.floor(p.$d.getTime()/1e3);case"x":return p.$d.getTime();case"z":return"["+p.offsetName()+"]";case"zzz":return"["+p.offsetName("long")+"]";default:return b}});return h.bind(this)(g)}}})})(advancedFormat$1);var advancedFormatExports=advancedFormat$1.exports;const advancedFormat=getDefaultExportFromCjs(advancedFormatExports);dayjs.extend(customParseFormat),dayjs.extend(advancedFormat);class InfoParser{constructor(f){this.service=f}getResult(f,s){let a={};if(f){for(const u in s.fields)if(s.fields.hasOwnProperty(u)){let l=s.fields[u],h=this.getFieldData(f,l,s);h!=null&&(a[u]=h)}}return a}debug(...f){this.service?this.service.debug(...f):PPF.debug(...f)}getFieldData(content,config,rule){let query,selectorIndex=0,selectors=[];if(typeof config.selector=="string")selectors.push(config.selector);else if(config.selector&&config.selector.length)selectors=config.selector;else return config.value===void 0?null:config.value;let lastSelector="";selectors.some(selector=>{lastSelector=selector;try{switch(rule.dataType){case ERequestResultType.JSON:if(selector==""?query=content:selector.substr(0,1)=="["?query=eval("content"+selector):query=eval("content."+selector),query!=null)return!0;break;case ERequestResultType.TEXT:case ERequestResultType.HTML:default:if(selector==""?query=content:(query=content.find(selector),query.length==0&&(query=content.filter(selector))),query.length>0)return!0;break}selectorIndex++}catch(f){return this.debug("InfoParser.getFieldData.Error",selector,f.message,f.stack),!0}}),console.log(`selector result for ${lastSelector} :`),console.log(query);let result=null;if(query!=null)if(config.attribute||config.filters||config.switchFilters){config.attribute&&rule.dataType!=ERequestResultType.JSON&&(query=query.attr(config.attribute));let filters;config.switchFilters?filters=config.switchFilters[selectorIndex]||null:filters=config.filters,filters&&filters.every(filter=>{try{query=eval(filter)}catch(f){return this.debug("InfoParser.filter.Error",filter,f.message,f.stack),query=null,!1}return!0}),result=query,Array.isArray(filters)&&console.log(`filter result for ${filters.join(" => ")}: ${result}`)}else switch(rule.dataType){case ERequestResultType.JSON:result=query;break;default:result=query.text().trim();break}return result}getTotalSize(f){let s=0;return f.forEach(a=>{let u=a.match(/^(\d*\.?\d+)(.*[^ZEPTGMK])?([ZEPTGMK](B|iB)?)$/i);if(!u)return;let l=parseFloat(u[1]),h=u[3].toLowerCase();switch(!0){case/ki?b/.test(h):s+=l*Math.pow(2,10);break;case/mi?b/.test(h):s+=l*Math.pow(2,20);break;case/gi?b/.test(h):s+=l*Math.pow(2,30);break;case/ti?b?/.test(h):s+=l*Math.pow(2,40);break;case/pi?b?/.test(h):s+=l*Math.pow(2,50);break;case/ei?b?/.test(h):s+=l*Math.pow(2,60);break;case/zi?b?/.test(h):s+=l*Math.pow(2,70);break}}),s}formatIMDbId(f){return Number(f)&&(f.length<7&&(f=f.padStart(7,"0")),f="tt"+f),f}}class PTPContent{constructor(){this.options={sites:[],clients:[]},this.site={name:""},this.action=EAction,this.filters=filters,this.downloadClientType=EDownloadClientType,this.sizeUnit=ESizeUnit,this.buttonType=EButtonType,this.allSiteKey=ECommonKey.allSite,this.schema={},this.scripts=[],this.styles=[],this.messageItems={},this.buttonBar=null,this.droper=$("<div style='display:none;' class='pt-plugin-droper'/>"),this.buttons=[],this.logo=null,this.backgroundServiceIsStoped=!1,this.locationURL=location.href,this.pathHandler=new PathHandler,this.i18n=instance,this.infoParser=new InfoParser,this.pageSelector={},this.autoPosition=!0,this.positionStorageKey="",this.extension=new Extension,this.extension.isExtensionMode&&(this.readConfig(),this.initBrowserEvent())}readConfig(){this.extension.sendRequest(EAction.readConfig,s=>{this.options=s,this.initI18n()})}init(){this.initPages(),setInterval(()=>{this.checkLocationURL()},1e3)}initI18n(){this.extension.sendRequest(EAction.getCurrentLanguageResource,null,"contentPage").then(s=>{let a=this.options.locale||"en";instance.init({lng:a,interpolation:{prefix:"{",suffix:"}"},resources:{[a]:{translation:s}}}),this.init()})}getSiteFromHost(s){APP.debugMode&&console.log("getSiteFromHost",s);let a=[];this.options.sites&&a.push(...this.options.sites),this.options.system&&this.options.system.publicSites&&a.push(...this.options.system.publicSites);let u=a.find(l=>{let h=[l.url].concat(l.cdn);return l.host==s||h.join("").indexOf(`//${s}`)>-1});return u?JSON.parse(JSON.stringify(u)):null}initPages(){this.initSiteConfig().then(()=>{this.initPlugins()}).catch(()=>{APP.debugMode&&console.log("initPages 失败")})}initSiteConfig(){return new Promise((s,a)=>{if(!this.options.showToolbarOnContentPage){a();return}if(this.site=this.getSiteFromHost(window.location.hostname),this.site&&(this.site.url=window.location.origin+"/"),this.site&&this.site.name){if(typeof this.site.schema=="string")this.schema=this.options.system&&this.options.system.schemas&&this.options.system.schemas.find(u=>u.name==this.site.schema);else{let u=this.options.system&&this.options.system.sites&&this.options.system.sites.find(l=>l.host==this.site.host);u&&u.schema&&typeof u.schema!="string"&&(this.schema=u.schema,this.schema.siteOnly=!0)}this.initPageSelector().finally(()=>{s()})}else a()})}initPlugins(){this.positionStorageKey=`pt-plugin-${this.site.host}-position`,this.scripts=[],this.styles=[],this.initButtonBar(),this.initDroper(),this.schema&&this.schema.plugins&&this.schema.plugins.forEach(a=>{a.pages.findIndex(l=>{let h=window.location.href,d=window.location.pathname;return h.indexOf(l)===-1?new RegExp(l,"").test(d):!0})!==-1&&a.scripts.forEach(l=>{let h=l;h.substr(0,1)!=="/"&&(h=this.schema.siteOnly?`sites/${this.site.host}/${l}`:`schemas/${this.schema.name}/${l}`),this.scripts.push({type:"file",content:h})})});let s=this.options.system&&this.options.system.sites&&this.options.system.sites.find(a=>a.host==this.site.host);if(!this.site.plugins)this.site.plugins=[];else if(this.site.schema!=="publicSite"&&s)for(let a=this.site.plugins.length-1;a>=0;a--)this.site.plugins[a].isCustom||this.site.plugins.splice(a,1);if(s&&s.plugins&&(this.site.plugins=s.plugins.concat(this.site.plugins)),this.site.plugins){let a=this.site.schema=="publicSite"?"publicSites":"sites";this.site.path?a+=`/${this.site.path}`:a+=`/${this.site.host}`,this.site.plugins.forEach(u=>{u.pages.findIndex(h=>{let d=window.location.pathname;return d.indexOf(h)===-1?new RegExp(h,"").test(d):!0})!==-1&&(u.scripts&&u.scripts.forEach(h=>{let d=h;d.substr(0,1)!=="/"&&d.substr(0,4)!=="http"&&(d=`${a}/${h}`),this.scripts.push({type:"file",content:d})}),u.script&&this.scripts.push({type:"code",content:u.script}),u.styles&&u.styles.forEach(h=>{let d=h;d.substr(0,1)!=="/"&&d.substr(0,4)!=="http"&&(d=`${a}/${h}`),this.styles.push({type:"file",content:d})}),u.style&&this.styles.push({type:"code",content:u.style}))})}this.styles&&this.styles.length>0&&this.styles.forEach(a=>{APP.applyStyle(a)}),this.scripts&&this.scripts.length>0&&(this.scripts.forEach(a=>{APP.addScript(a)}),APP.applyScripts()),this.extension.sendRequest(EAction.addContentPage).catch(a=>{console.log(a)})}call(s,a){return new Promise((u,l)=>{if(this.backgroundServiceIsStoped){l({msg:instance.t("backgroundServiceIsStoped")});return}try{this.extension.sendRequest(s,null,a).then(h=>{h?u&&u(h):l&&l()}).catch(h=>{l(h)})}catch(h){this.showNotice(instance.t("actionExecutionFailed",{action:s})),l(h)}})}initButtonBar(){if($(".pt-plugin-body").length&&$(".pt-plugin-body").remove(),this.buttonBar=$("<div class='pt-plugin-body'/>").appendTo(document.body),window.Drag){let s=$("<div class='pt-plugin-drag-title' title='"+instance.t("dragTitle")+"'>").appendTo(this.buttonBar);new window.Drag(this.buttonBar.get(0),{handle:s.get(0),onStop:a=>{console.log(a),this.saveButtonBarPosition(a)}}),s.on("dblclick",()=>{this.resetButtonBarPosition()})}this.logo=$("<div class='pt-plugin-logo' title='"+instance.t("pluginTitle")+"'/>").appendTo(this.buttonBar),this.logo.on("click",()=>{this.call(EAction.openOptions)}),this.initButtonBarPosition(),this.buttonBar.hide()}initButtonBarPosition(){let s=window.localStorage.getItem(this.positionStorageKey);if(s)try{let a=JSON.parse(s);this.buttonBar.css({top:a.top,left:a.left}),this.autoPosition=!1;return}catch(a){console.log(a)}this.buttonBar.css({top:window.innerHeight/2,left:"unset"}),this.options.position==EPluginPosition.left&&this.buttonBar.css({right:"unset",left:"5px"})}resetButtonBarPosition(){window.localStorage.removeItem(this.positionStorageKey),this.autoPosition=!0,this.initButtonBarPosition(),this.recalculateButtonBarPosition()}saveButtonBarPosition(s){window.localStorage.setItem(this.positionStorageKey,JSON.stringify(s)),this.autoPosition=!1}addButton(s){s=Object.assign({type:EButtonType.normal},s);let a=$("<hr/>").appendTo(this.buttonBar),u="<a class='pt-plugin-button'/>";(!s.click||s.type==EButtonType.label)&&(u="<span class='pt-plugin-button'/>");let l=$(u).attr({title:s.title,key:s.key}).data("line",a),h=$("<div class='pt-plugin-button-inner'/>").appendTo(l),d=$("<div class='pt-plugin-loading'/>").appendTo(l),p=$("<div class='action-success'/>").html('<div class="action-success-ani"></div>').appendTo(l);s.icon&&$("<i class='material-icons md-36'/>").html(s.icon).appendTo(h),$("<div/>").html(s.label).appendTo(h);let x=g=>{s.type==EButtonType.normal?d.hide():h.hide(),p.show(),g&&g.msg&&(g.type||(g.type="success"),this.showNotice(g)),setTimeout(()=>{p.hide(),h.show()},2e3)},m=g=>{s.type==EButtonType.normal&&d.hide(),h.show(),this.showNotice({msg:g||instance.t("callbackFailed",{label:s.label})})};s.click&&l.click(g=>{s.type==EButtonType.normal&&(h.hide(),d.show()),s.click(x,m,g)}),l.appendTo(this.buttonBar),s.onDrop&&this.addDroper(l,s.onDrop,x,m),this.buttons.push(l),this.recalculateButtonBarPosition()}removeButton(s){let a=this.buttons.findIndex(u=>u.attr("key")==s);if(a!=-1){let u=this.buttons[a],l=u.data("line");l&&l.remove(),u.remove(),this.buttons.splice(a,1)}this.recalculateButtonBarPosition()}recalculateButtonBarPosition(){this.buttons.length>0?this.buttonBar.show():this.buttonBar.hide(),this.autoPosition&&this.buttonBar.css({top:window.innerHeight/2-this.buttonBar.outerHeight(!0)/2})}showNotice(s){APP.debugMode&&console.log(s),s=Object.assign({type:"error",timeout:5,position:"bottomRight",progressBar:!0,width:320,indeterminate:!1},typeof s=="string"?{msg:s}:typeof s.msg=="object"?s.msg:s),s.text=s.text||s.msg,s.timeout&&(s.timeout=s.timeout*10),delete s.msg;let a=new window.NoticeJs(s);return s.indeterminate===!0?(this.messageItems[a.id]=a,a.show(),a):$(a.show())}hideMessage(s){this.messageItems[s]&&this.messageItems[s].close()}getSiteDefaultPath(s=""){s||(s=this.site.defaultClientId||this.options.defaultClientId);let a=this.options.clients.find(l=>l.id===s),u="";if(a&&a.paths){for(const l in a.paths)if(this.site.host===l){u=a.paths[l][0];break}}return this.pathHandler.replacePathKey(u,this.site)}getClientOptions(s=""){return s||(s=this.site.defaultClientId||this.options.defaultClientId),this.options.clients.find(u=>u.id===s)}initDroper(){this.options.allowDropToSend&&(document.addEventListener("dragstart",s=>{if(s.target.tagName=="A"){let a={url:s.target.getAttribute("href"),title:s.target.getAttribute("title")};s.dataTransfer.setData("text/plain",JSON.stringify(a))}}),this.buttonBar.on("dragover",s=>{s.stopPropagation(),s.preventDefault(),this.showDroper()}),this.buttonBar.on("dragleave",s=>{this.buttonBar.removeClass("pt-plugin-body-over")}),this.buttonBar.on("mouseleave",s=>{this.buttonBar.removeClass("pt-plugin-body-over"),this.hideDroper()}),this.droper.appendTo(this.buttonBar),this.droper[0].addEventListener("dragover",s=>{s.stopPropagation(),s.preventDefault(),this.logo.addClass("pt-plugin-onLoading"),this.buttonBar.addClass("pt-plugin-body-over")},!1),this.droper[0].addEventListener("drop",s=>{s.stopPropagation(),s.preventDefault(),this.hideDroper();try{let a=JSON.parse(s.dataTransfer.getData("text/plain"));if(a)if(a.url){let u=a.url.match(/imdb\.com\/title\/(tt\d+)/);if(u&&u.length>1){this.extension.sendRequest(EAction.openOptions,null,`search-torrent/${u[1]}`),this.logo.removeClass("pt-plugin-onLoading");return}this.pageApp?this.pageApp.call(EAction.downloadFromDroper,a).then(()=>{this.logo.removeClass("pt-plugin-onLoading")}).catch(()=>{this.logo.removeClass("pt-plugin-onLoading")}):(this.showNotice({type:EDataResultType.info,msg:instance.t("notSupported"),timeout:3}),this.logo.removeClass("pt-plugin-onLoading"))}else this.logo.removeClass("pt-plugin-onLoading")}catch{this.logo.removeClass("pt-plugin-onLoading")}},!1),this.droper.on("dragleave dragend",s=>{s.stopPropagation(),s.preventDefault(),this.hideDroper(),this.logo.removeClass("pt-plugin-onLoading"),this.buttonBar.removeClass("pt-plugin-body-over")}))}addDroper(s,a,u,l){if(!a)return;let h=$("<div style='display:none;' class='pt-plugin-droper'/>");h.appendTo(this.buttonBar),h.on("dragover",d=>{d.stopPropagation(),d.preventDefault(),this.buttonBar.addClass("pt-plugin-body-over")}),h.on("drop",d=>{console.log(d),d.stopPropagation(),d.preventDefault(),this.hideDroper();try{let p=JSON.parse(d.originalEvent.dataTransfer.getData("text/plain"));p&&p.url&&a.call(this,p,d,u,l)}catch{let x=d.originalEvent.dataTransfer.getData("text/plain");x&&(x={url:x},a.call(this,x,d,u,l))}}),h.on("dragleave dragend",d=>{d.stopPropagation(),d.preventDefault(),this.hideDroper(),this.buttonBar.removeClass("pt-plugin-body-over")}),h.offset(s.position())}hideDroper(){$(".pt-plugin-droper").hide()}showDroper(){$(".pt-plugin-droper").show()}initBrowserEvent(){chrome.runtime.onMessage.addListener((s,a,u)=>{switch(APP.debugMode&&console.log("content.onMessage",s),s.action){case EAction.showMessage:let l=this.showNotice(s.data);u&&u(l);break;case EAction.hideMessage:this.hideMessage(s.data);break;case EAction.serviceStoped:this.backgroundServiceIsStoped=!0;break}})}checkLocationURL(){location.href!=this.locationURL&&(this.locationURL=location.href,this.initPages())}initPageSelector(){return new Promise((s,a)=>{this.call(EAction.getSiteSelectorConfig,{host:this.site.host,name:location.pathname}).then(u=>{this.pageSelector=u,s()}).catch(()=>{this.call(EAction.getSiteSelectorConfig,{host:this.site.host,name:"common"}).then(u=>{this.pageSelector=u,s()}).catch(()=>{s()})})})}getFieldValue(s="",a=$("body")){let u;if(console.log("getFieldValue",s),this.pageSelector&&this.pageSelector.fields){if(u=this.pageSelector.fields[s],!u)return null}else return null;return this.infoParser.getFieldData(a,u,this.pageSelector)}resolveMTDownloadURL(s,a=!0,u=this.site){return u.authToken?s?a?PPF.resolveMTDownloadURL(s,this.site,this.showNotice):PPF.resolveMTDownloadURL(s,this.site):this.showNotice({msg:"种子 id 不能为空",type:"error"}):this.showNotice({msg:"未设置AuthToken，请先设置AuthToken",type:"error"})}}Object.assign(window,{PTService:new PTPContent,PPF});class SyncStorage{constructor(){this.arrayValues={}}isArray(s){return Object.prototype.toString.call(s)=="[object Array]"}clear(){return new Promise((s,a)=>{try{chrome.storage.sync.clear(),chrome.runtime.lastError?a(chrome.runtime.lastError):s()}catch(u){a(u)}})}_set(s,a,u=0,l,h){let d=a,p=s,x=-1;if(this.isArray(a)){if(u==0){u=a.length,this._set(`${s}__count`,u,0,()=>{this._set(s,a,u,l,h)},h);return}x=a.length-1,d=a.pop(),p=`${s}_${x}`}chrome.storage.sync.set({[p]:d},()=>{chrome.runtime.lastError?h(chrome.runtime.lastError):x>0?this._set(s,a,u,l,h):l(a)})}_get(s,a=!1,u=0,l,h){if(a){this._get(`${s}__count`,!1,0,p=>{p>0?(this.arrayValues[s]=[],this._get(s,!1,p,l,h)):this._get(s,!1,0,l,h)},p=>{p=="参数不存在"?this._get(s,!1,0,l,h):h&&h(p)});return}let d=s;u>0&&(d=`${s}_${u-1}`);try{chrome.storage.sync.get(d,p=>{let x=null;try{if(p[d])x=p[d];else{h("参数不存在");return}}catch(m){h(m);return}u--,u<=0?this.arrayValues[s]?(this.arrayValues[s].push(x),l(this.arrayValues[s]),delete this.arrayValues[s]):l(x):(this.arrayValues[s].push(x),this._get(s,!1,u,l,h))})}catch(p){h(p)}}set(s,a){return new Promise((u,l)=>{if(chrome.storage&&chrome.storage.sync)try{this._set(s,a,0,()=>{u(a)},h=>{l(h)})}catch(h){l(h)}else l("chrome.storage 不存在")})}get(s){return new Promise((a,u)=>{if(chrome.storage&&chrome.storage.sync)try{this._get(s,!0,0,l=>{a(l)},l=>{u(l)})}catch(l){u(l)}else u("chrome.storage 不存在")})}}class OWSS{constructor(s){this.options=s,this.serverURL="",this.serverURL=this.options.address,this.serverURL.substr(-1)!=="/"&&(this.serverURL+="/")}request(s,a=ERequestMethod.GET,u){return new Promise((l,h)=>{let d={url:this.serverURL+`${s}`,method:a,dataType:"json",data:u};a===ERequestMethod.POST&&(d.processData=!1,d.contentType=!1),$.ajax(d).done(p=>{l(p)}).fail(p=>{h(p)})})}create(){return new Promise((s,a)=>{this.request("create").then(u=>{u&&u.data?s(u.data):a()}).catch(u=>{a(u)})})}add(s){return new Promise((a,u)=>{this.request(`${this.options.authCode}/add`,ERequestMethod.POST,s).then(l=>{l&&l.data===!0?a(!0):u(!1)}).catch(l=>{u(l)})})}get(s){return new Promise((a,u)=>{let l=`${this.serverURL}${this.options.authCode}/get/${s}`,h=new FileDownloader({url:l,getDataOnly:!0});h.onCompleted=()=>{a(h.content)},h.onError=d=>{console.log(d),u(d)},h.start()})}delete(s){return new Promise((a,u)=>{this.request(`${this.options.authCode}/delete/${s}`,ERequestMethod.POST).then(l=>{l&&l.data?a(l.data):u(!1)}).catch(l=>{u(l)})})}list(s={}){return new Promise((a,u)=>{this.request(`${this.options.authCode}/list`,ERequestMethod.GET,s).then(l=>{l&&l.data?a(l.data):u(!1)}).catch(l=>{u(l)})})}ping(){return new Promise((s,a)=>{this.request(`${this.options.authCode}/list`,ERequestMethod.GET,{pageSize:1}).then(()=>{s(!0)}).catch(u=>{a(u)})})}}const global$1=globalThis||void 0||self;/*! For license information please see index.js.LICENSE.txt */var t={2:f=>{function s(l,h,d){l instanceof RegExp&&(l=a(l,d)),h instanceof RegExp&&(h=a(h,d));var p=u(l,h,d);return p&&{start:p[0],end:p[1],pre:d.slice(0,p[0]),body:d.slice(p[0]+l.length,p[1]),post:d.slice(p[1]+h.length)}}function a(l,h){var d=h.match(l);return d?d[0]:null}function u(l,h,d){var p,x,m,g,b,v=d.indexOf(l),y=d.indexOf(h,v+1),C=v;if(v>=0&&y>0){for(p=[],m=d.length;C>=0&&!b;)C==v?(p.push(C),v=d.indexOf(l,C+1)):p.length==1?b=[p.pop(),y]:((x=p.pop())<m&&(m=x,g=y),y=d.indexOf(h,C+1)),C=v<y&&v>=0?v:y;p.length&&(b=[m,g])}return b}f.exports=s,s.range=u},101:function(f,s,a){var u;f=a.nmd(f),function(l){var h=(f&&f.exports,typeof global$1=="object"&&global$1);h.global!==h&&h.window;var d=function(b){this.message=b};(d.prototype=new Error).name="InvalidCharacterError";var p=function(b){throw new d(b)},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=/[\t\n\f\r ]/g,g={encode:function(b){b=String(b),/[^\0-\xFF]/.test(b)&&p("The string to be encoded contains characters outside of the Latin1 range.");for(var v,y,C,w,_=b.length%3,k="",E=-1,S=b.length-_;++E<S;)v=b.charCodeAt(E)<<16,y=b.charCodeAt(++E)<<8,C=b.charCodeAt(++E),k+=x.charAt((w=v+y+C)>>18&63)+x.charAt(w>>12&63)+x.charAt(w>>6&63)+x.charAt(63&w);return _==2?(v=b.charCodeAt(E)<<8,y=b.charCodeAt(++E),k+=x.charAt((w=v+y)>>10)+x.charAt(w>>4&63)+x.charAt(w<<2&63)+"="):_==1&&(w=b.charCodeAt(E),k+=x.charAt(w>>2)+x.charAt(w<<4&63)+"=="),k},decode:function(b){var v=(b=String(b).replace(m,"")).length;v%4==0&&(v=(b=b.replace(/==?$/,"")).length),(v%4==1||/[^+a-zA-Z0-9/]/.test(b))&&p("Invalid character: the string to be decoded is not correctly encoded.");for(var y,C,w=0,_="",k=-1;++k<v;)C=x.indexOf(b.charAt(k)),y=w%4?64*y+C:C,w++%4&&(_+=String.fromCharCode(255&y>>(-2*w&6)));return _},version:"1.0.0"};(u=(function(){return g}).call(s,a,s,f))===void 0||(f.exports=u)}()},172:(f,s)=>{s.d=function(a){if(!a)return 0;for(var u=(a=a.toString()).length,l=a.length;l--;){var h=a.charCodeAt(l);56320<=h&&h<=57343&&l--,127<h&&h<=2047?u++:2047<h&&h<=65535&&(u+=2)}return u}},526:f=>{var s={utf8:{stringToBytes:function(a){return s.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(s.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var u=[],l=0;l<a.length;l++)u.push(255&a.charCodeAt(l));return u},bytesToString:function(a){for(var u=[],l=0;l<a.length;l++)u.push(String.fromCharCode(a[l]));return u.join("")}}};f.exports=s},298:f=>{var s,a;s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(u,l){return u<<l|u>>>32-l},rotr:function(u,l){return u<<32-l|u>>>l},endian:function(u){if(u.constructor==Number)return 16711935&a.rotl(u,8)|4278255360&a.rotl(u,24);for(var l=0;l<u.length;l++)u[l]=a.endian(u[l]);return u},randomBytes:function(u){for(var l=[];u>0;u--)l.push(Math.floor(256*Math.random()));return l},bytesToWords:function(u){for(var l=[],h=0,d=0;h<u.length;h++,d+=8)l[d>>>5]|=u[h]<<24-d%32;return l},wordsToBytes:function(u){for(var l=[],h=0;h<32*u.length;h+=8)l.push(u[h>>>5]>>>24-h%32&255);return l},bytesToHex:function(u){for(var l=[],h=0;h<u.length;h++)l.push((u[h]>>>4).toString(16)),l.push((15&u[h]).toString(16));return l.join("")},hexToBytes:function(u){for(var l=[],h=0;h<u.length;h+=2)l.push(parseInt(u.substr(h,2),16));return l},bytesToBase64:function(u){for(var l=[],h=0;h<u.length;h+=3)for(var d=u[h]<<16|u[h+1]<<8|u[h+2],p=0;p<4;p++)8*h+6*p<=8*u.length?l.push(s.charAt(d>>>6*(3-p)&63)):l.push("=");return l.join("")},base64ToBytes:function(u){u=u.replace(/[^A-Z0-9+\/]/gi,"");for(var l=[],h=0,d=0;h<u.length;d=++h%4)d!=0&&l.push((s.indexOf(u.charAt(h-1))&Math.pow(2,-2*d+8)-1)<<2*d|s.indexOf(u.charAt(h))>>>6-2*d);return l}},f.exports=a},635:(f,s,a)=>{const u=a(31),l=a(338),h=a(221);f.exports={XMLParser:l,XMLValidator:u,XMLBuilder:h}},705:(f,s)=>{const a=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",u="["+a+"]["+a+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",l=new RegExp("^"+u+"$");s.isExist=function(h){return h!==void 0},s.isEmptyObject=function(h){return Object.keys(h).length===0},s.merge=function(h,d,p){if(d){const x=Object.keys(d),m=x.length;for(let g=0;g<m;g++)h[x[g]]=p==="strict"?[d[x[g]]]:d[x[g]]}},s.getValue=function(h){return s.isExist(h)?h:""},s.isName=function(h){return l.exec(h)!=null},s.getAllMatches=function(h,d){const p=[];let x=d.exec(h);for(;x;){const m=[];m.startIndex=d.lastIndex-x[0].length;const g=x.length;for(let b=0;b<g;b++)m.push(x[b]);p.push(m),x=d.exec(h)}return p},s.nameRegexp=u},31:(f,s,a)=>{const u=a(705),l={allowBooleanAttributes:!1,unpairedTags:[]};function h(E){return E===" "||E==="	"||E===`
`||E==="\r"}function d(E,S){const B=S;for(;S<E.length;S++)if(!(E[S]!="?"&&E[S]!=" ")){const P=E.substr(B,S-B);if(S>5&&P==="xml")return C("InvalidXml","XML declaration allowed only at the start of the document.",_(E,S));if(E[S]=="?"&&E[S+1]==">"){S++;break}}return S}function p(E,S){if(E.length>S+5&&E[S+1]==="-"&&E[S+2]==="-"){for(S+=3;S<E.length;S++)if(E[S]==="-"&&E[S+1]==="-"&&E[S+2]===">"){S+=2;break}}else if(E.length>S+8&&E[S+1]==="D"&&E[S+2]==="O"&&E[S+3]==="C"&&E[S+4]==="T"&&E[S+5]==="Y"&&E[S+6]==="P"&&E[S+7]==="E"){let B=1;for(S+=8;S<E.length;S++)if(E[S]==="<")B++;else if(E[S]===">"&&(B--,B===0))break}else if(E.length>S+9&&E[S+1]==="["&&E[S+2]==="C"&&E[S+3]==="D"&&E[S+4]==="A"&&E[S+5]==="T"&&E[S+6]==="A"&&E[S+7]==="["){for(S+=8;S<E.length;S++)if(E[S]==="]"&&E[S+1]==="]"&&E[S+2]===">"){S+=2;break}}return S}s.validate=function(E,S){S=Object.assign({},l,S);const B=[];let P=!1,L=!1;E[0]==="\uFEFF"&&(E=E.substr(1));for(let q=0;q<E.length;q++)if(E[q]==="<"&&E[q+1]==="?"){if(q+=2,q=d(E,q),q.err)return q}else{if(E[q]!=="<"){if(h(E[q]))continue;return C("InvalidChar","char '"+E[q]+"' is not expected.",_(E,q))}{let K=q;if(q++,E[q]==="!"){q=p(E,q);continue}{let z=!1;E[q]==="/"&&(z=!0,q++);let G="";for(;q<E.length&&E[q]!==">"&&E[q]!==" "&&E[q]!=="	"&&E[q]!==`
`&&E[q]!=="\r";q++)G+=E[q];if(G=G.trim(),G[G.length-1]==="/"&&(G=G.substring(0,G.length-1),q--),U=G,!u.isName(U)){let F;return F=G.trim().length===0?"Invalid space after '<'.":"Tag '"+G+"' is an invalid name.",C("InvalidTag",F,_(E,q))}const N=g(E,q);if(N===!1)return C("InvalidAttr","Attributes for '"+G+"' have open quote.",_(E,q));let M=N.value;if(q=N.index,M[M.length-1]==="/"){const F=q-M.length;M=M.substring(0,M.length-1);const J=v(M,S);if(J!==!0)return C(J.err.code,J.err.msg,_(E,F+J.err.line));P=!0}else if(z){if(!N.tagClosed)return C("InvalidTag","Closing tag '"+G+"' doesn't have proper closing.",_(E,q));if(M.trim().length>0)return C("InvalidTag","Closing tag '"+G+"' can't have attributes or invalid starting.",_(E,K));{const F=B.pop();if(G!==F.tagName){let J=_(E,F.tagStartPos);return C("InvalidTag","Expected closing tag '"+F.tagName+"' (opened in line "+J.line+", col "+J.col+") instead of closing tag '"+G+"'.",_(E,K))}B.length==0&&(L=!0)}}else{const F=v(M,S);if(F!==!0)return C(F.err.code,F.err.msg,_(E,q-M.length+F.err.line));if(L===!0)return C("InvalidXml","Multiple possible root nodes found.",_(E,q));S.unpairedTags.indexOf(G)!==-1||B.push({tagName:G,tagStartPos:K}),P=!0}for(q++;q<E.length;q++)if(E[q]==="<"){if(E[q+1]==="!"){q++,q=p(E,q);continue}if(E[q+1]!=="?")break;if(q=d(E,++q),q.err)return q}else if(E[q]==="&"){const F=y(E,q);if(F==-1)return C("InvalidChar","char '&' is not expected.",_(E,q));q=F}else if(L===!0&&!h(E[q]))return C("InvalidXml","Extra text at the end",_(E,q));E[q]==="<"&&q--}}}var U;return P?B.length==1?C("InvalidTag","Unclosed tag '"+B[0].tagName+"'.",_(E,B[0].tagStartPos)):!(B.length>0)||C("InvalidXml","Invalid '"+JSON.stringify(B.map(q=>q.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):C("InvalidXml","Start tag expected.",1)};const x='"',m="'";function g(E,S){let B="",P="",L=!1;for(;S<E.length;S++){if(E[S]===x||E[S]===m)P===""?P=E[S]:P!==E[S]||(P="");else if(E[S]===">"&&P===""){L=!0;break}B+=E[S]}return P===""&&{value:B,index:S,tagClosed:L}}const b=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function v(E,S){const B=u.getAllMatches(E,b),P={};for(let L=0;L<B.length;L++){if(B[L][1].length===0)return C("InvalidAttr","Attribute '"+B[L][2]+"' has no space in starting.",k(B[L]));if(B[L][3]!==void 0&&B[L][4]===void 0)return C("InvalidAttr","Attribute '"+B[L][2]+"' is without value.",k(B[L]));if(B[L][3]===void 0&&!S.allowBooleanAttributes)return C("InvalidAttr","boolean attribute '"+B[L][2]+"' is not allowed.",k(B[L]));const U=B[L][2];if(!w(U))return C("InvalidAttr","Attribute '"+U+"' is an invalid name.",k(B[L]));if(P.hasOwnProperty(U))return C("InvalidAttr","Attribute '"+U+"' is repeated.",k(B[L]));P[U]=1}return!0}function y(E,S){if(E[++S]===";")return-1;if(E[S]==="#")return function(P,L){let U=/\d/;for(P[L]==="x"&&(L++,U=/[\da-fA-F]/);L<P.length;L++){if(P[L]===";")return L;if(!P[L].match(U))break}return-1}(E,++S);let B=0;for(;S<E.length;S++,B++)if(!(E[S].match(/\w/)&&B<20)){if(E[S]===";")break;return-1}return S}function C(E,S,B){return{err:{code:E,msg:S,line:B.line||B,col:B.col}}}function w(E){return u.isName(E)}function _(E,S){const B=E.substring(0,S).split(/\r?\n/);return{line:B.length,col:B[B.length-1].length+1}}function k(E){return E.startIndex+E[1].length}},221:(f,s,a)=>{const u=a(87),l={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(m,g){return g},attributeValueProcessor:function(m,g){return g},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function h(m){this.options=Object.assign({},l,m),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=x),this.processTextOrObjNode=d,this.options.format?(this.indentate=p,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function d(m,g,b){const v=this.j2x(m,b+1);return m[this.options.textNodeName]!==void 0&&Object.keys(m).length===1?this.buildTextValNode(m[this.options.textNodeName],g,v.attrStr,b):this.buildObjectNode(v.val,g,v.attrStr,b)}function p(m){return this.options.indentBy.repeat(m)}function x(m){return!(!m.startsWith(this.options.attributeNamePrefix)||m===this.options.textNodeName)&&m.substr(this.attrPrefixLen)}h.prototype.build=function(m){return this.options.preserveOrder?u(m,this.options):(Array.isArray(m)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(m={[this.options.arrayNodeName]:m}),this.j2x(m,0).val)},h.prototype.j2x=function(m,g){let b="",v="";for(let y in m)if(m[y]===void 0)this.isAttribute(y)&&(v+="");else if(m[y]===null)this.isAttribute(y)?v+="":y[0]==="?"?v+=this.indentate(g)+"<"+y+"?"+this.tagEndChar:v+=this.indentate(g)+"<"+y+"/"+this.tagEndChar;else if(m[y]instanceof Date)v+=this.buildTextValNode(m[y],y,"",g);else if(typeof m[y]!="object"){const C=this.isAttribute(y);if(C)b+=this.buildAttrPairStr(C,""+m[y]);else if(y===this.options.textNodeName){let w=this.options.tagValueProcessor(y,""+m[y]);v+=this.replaceEntitiesValue(w)}else v+=this.buildTextValNode(m[y],y,"",g)}else if(Array.isArray(m[y])){const C=m[y].length;let w="";for(let _=0;_<C;_++){const k=m[y][_];k===void 0||(k===null?y[0]==="?"?v+=this.indentate(g)+"<"+y+"?"+this.tagEndChar:v+=this.indentate(g)+"<"+y+"/"+this.tagEndChar:typeof k=="object"?this.options.oneListGroup?w+=this.j2x(k,g+1).val:w+=this.processTextOrObjNode(k,y,g):w+=this.buildTextValNode(k,y,"",g))}this.options.oneListGroup&&(w=this.buildObjectNode(w,y,"",g)),v+=w}else if(this.options.attributesGroupName&&y===this.options.attributesGroupName){const C=Object.keys(m[y]),w=C.length;for(let _=0;_<w;_++)b+=this.buildAttrPairStr(C[_],""+m[y][C[_]])}else v+=this.processTextOrObjNode(m[y],y,g);return{attrStr:b,val:v}},h.prototype.buildAttrPairStr=function(m,g){return g=this.options.attributeValueProcessor(m,""+g),g=this.replaceEntitiesValue(g),this.options.suppressBooleanAttributes&&g==="true"?" "+m:" "+m+'="'+g+'"'},h.prototype.buildObjectNode=function(m,g,b,v){if(m==="")return g[0]==="?"?this.indentate(v)+"<"+g+b+"?"+this.tagEndChar:this.indentate(v)+"<"+g+b+this.closeTag(g)+this.tagEndChar;{let y="</"+g+this.tagEndChar,C="";return g[0]==="?"&&(C="?",y=""),!b&&b!==""||m.indexOf("<")!==-1?this.options.commentPropName!==!1&&g===this.options.commentPropName&&C.length===0?this.indentate(v)+"<!--".concat(m,"-->")+this.newLine:this.indentate(v)+"<"+g+b+C+this.tagEndChar+m+this.indentate(v)+y:this.indentate(v)+"<"+g+b+C+">"+m+y}},h.prototype.closeTag=function(m){let g="";return this.options.unpairedTags.indexOf(m)!==-1?this.options.suppressUnpairedNode||(g="/"):g=this.options.suppressEmptyNode?"/":"></".concat(m),g},h.prototype.buildTextValNode=function(m,g,b,v){if(this.options.cdataPropName!==!1&&g===this.options.cdataPropName)return this.indentate(v)+"<![CDATA[".concat(m,"]]>")+this.newLine;if(this.options.commentPropName!==!1&&g===this.options.commentPropName)return this.indentate(v)+"<!--".concat(m,"-->")+this.newLine;if(g[0]==="?")return this.indentate(v)+"<"+g+b+"?"+this.tagEndChar;{let y=this.options.tagValueProcessor(g,m);return y=this.replaceEntitiesValue(y),y===""?this.indentate(v)+"<"+g+b+this.closeTag(g)+this.tagEndChar:this.indentate(v)+"<"+g+b+">"+y+"</"+g+this.tagEndChar}},h.prototype.replaceEntitiesValue=function(m){if(m&&m.length>0&&this.options.processEntities)for(let g=0;g<this.options.entities.length;g++){const b=this.options.entities[g];m=m.replace(b.regex,b.val)}return m},f.exports=h},87:f=>{function s(d,p,x,m){let g="",b=!1;for(let v=0;v<d.length;v++){const y=d[v],C=a(y);let w="";if(w=x.length===0?C:"".concat(x,".").concat(C),C===p.textNodeName){let B=y[C];l(w,p)||(B=p.tagValueProcessor(C,B),B=h(B,p)),b&&(g+=m),g+=B,b=!1;continue}if(C===p.cdataPropName){b&&(g+=m),g+="<![CDATA[".concat(y[C][0][p.textNodeName],"]]>"),b=!1;continue}if(C===p.commentPropName){g+=m+"<!--".concat(y[C][0][p.textNodeName],"-->"),b=!0;continue}if(C[0]==="?"){const B=u(y[":@"],p),P=C==="?xml"?"":m;let L=y[C][0][p.textNodeName];L=L.length!==0?" "+L:"",g+=P+"<".concat(C).concat(L).concat(B,"?>"),b=!0;continue}let _=m;_!==""&&(_+=p.indentBy);const k=u(y[":@"],p),E=m+"<".concat(C).concat(k),S=s(y[C],p,w,_);p.unpairedTags.indexOf(C)!==-1?p.suppressUnpairedNode?g+=E+">":g+=E+"/>":S&&S.length!==0||!p.suppressEmptyNode?S&&S.endsWith(">")?g+=E+">".concat(S).concat(m,"</").concat(C,">"):(g+=E+">",S&&m!==""&&(S.includes("/>")||S.includes("</"))?g+=m+p.indentBy+S+m:g+=S,g+="</".concat(C,">")):g+=E+"/>",b=!0}return g}function a(d){const p=Object.keys(d);for(let x=0;x<p.length;x++){const m=p[x];if(m!==":@")return m}}function u(d,p){let x="";if(d&&!p.ignoreAttributes)for(let m in d){let g=p.attributeValueProcessor(m,d[m]);g=h(g,p),g===!0&&p.suppressBooleanAttributes?x+=" ".concat(m.substr(p.attributeNamePrefix.length)):x+=" ".concat(m.substr(p.attributeNamePrefix.length),'="').concat(g,'"')}return x}function l(d,p){let x=(d=d.substr(0,d.length-p.textNodeName.length-1)).substr(d.lastIndexOf(".")+1);for(let m in p.stopNodes)if(p.stopNodes[m]===d||p.stopNodes[m]==="*."+x)return!0;return!1}function h(d,p){if(d&&d.length>0&&p.processEntities)for(let x=0;x<p.entities.length;x++){const m=p.entities[x];d=d.replace(m.regex,m.val)}return d}f.exports=function(d,p){let x="";return p.format&&p.indentBy.length>0&&(x=`
`),s(d,p,"",x)}},193:(f,s,a)=>{const u=a(705);function l(b,v){let y="";for(;v<b.length&&b[v]!=="'"&&b[v]!=='"';v++)y+=b[v];if(y=y.trim(),y.indexOf(" ")!==-1)throw new Error("External entites are not supported");const C=b[v++];let w="";for(;v<b.length&&b[v]!==C;v++)w+=b[v];return[y,w,v]}function h(b,v){return b[v+1]==="!"&&b[v+2]==="-"&&b[v+3]==="-"}function d(b,v){return b[v+1]==="!"&&b[v+2]==="E"&&b[v+3]==="N"&&b[v+4]==="T"&&b[v+5]==="I"&&b[v+6]==="T"&&b[v+7]==="Y"}function p(b,v){return b[v+1]==="!"&&b[v+2]==="E"&&b[v+3]==="L"&&b[v+4]==="E"&&b[v+5]==="M"&&b[v+6]==="E"&&b[v+7]==="N"&&b[v+8]==="T"}function x(b,v){return b[v+1]==="!"&&b[v+2]==="A"&&b[v+3]==="T"&&b[v+4]==="T"&&b[v+5]==="L"&&b[v+6]==="I"&&b[v+7]==="S"&&b[v+8]==="T"}function m(b,v){return b[v+1]==="!"&&b[v+2]==="N"&&b[v+3]==="O"&&b[v+4]==="T"&&b[v+5]==="A"&&b[v+6]==="T"&&b[v+7]==="I"&&b[v+8]==="O"&&b[v+9]==="N"}function g(b){if(u.isName(b))return b;throw new Error("Invalid entity name ".concat(b))}f.exports=function(b,v){const y={};if(b[v+3]!=="O"||b[v+4]!=="C"||b[v+5]!=="T"||b[v+6]!=="Y"||b[v+7]!=="P"||b[v+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{v+=9;let C=1,w=!1,_=!1,k="";for(;v<b.length;v++)if(b[v]!=="<"||_)if(b[v]===">"){if(_?b[v-1]==="-"&&b[v-2]==="-"&&(_=!1,C--):C--,C===0)break}else b[v]==="["?w=!0:k+=b[v];else{if(w&&d(b,v))v+=7,[entityName,val,v]=l(b,v+1),val.indexOf("&")===-1&&(y[g(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val});else if(w&&p(b,v))v+=8;else if(w&&x(b,v))v+=8;else if(w&&m(b,v))v+=9;else{if(!h)throw new Error("Invalid DOCTYPE");_=!0}C++,k=""}if(C!==0)throw new Error("Unclosed DOCTYPE")}return{entities:y,i:v}}},63:(f,s)=>{const a={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,l){return l},attributeValueProcessor:function(u,l){return l},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,l,h){return u}};s.buildOptions=function(u){return Object.assign({},a,u)},s.defaultOptions=a},299:(f,s,a)=>{const u=a(705),l=a(365),h=a(193),d=a(494);function p(P){const L=Object.keys(P);for(let U=0;U<L.length;U++){const q=L[U];this.lastEntities[q]={regex:new RegExp("&"+q+";","g"),val:P[q]}}}function x(P,L,U,q,K,z,G){if(P!==void 0&&(this.options.trimValues&&!q&&(P=P.trim()),P.length>0)){G||(P=this.replaceEntitiesValue(P));const N=this.options.tagValueProcessor(L,P,U,K,z);return N==null?P:typeof N!=typeof P||N!==P?N:this.options.trimValues||P.trim()===P?B(P,this.options.parseTagValue,this.options.numberParseOptions):P}}function m(P){if(this.options.removeNSPrefix){const L=P.split(":"),U=P.charAt(0)==="/"?"/":"";if(L[0]==="xmlns")return"";L.length===2&&(P=U+L[1])}return P}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,u.nameRegexp);const g=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function b(P,L,U){if(!this.options.ignoreAttributes&&typeof P=="string"){const q=u.getAllMatches(P,g),K=q.length,z={};for(let G=0;G<K;G++){const N=this.resolveNameSpace(q[G][1]);let M=q[G][4],F=this.options.attributeNamePrefix+N;if(N.length)if(this.options.transformAttributeName&&(F=this.options.transformAttributeName(F)),F==="__proto__"&&(F="#__proto__"),M!==void 0){this.options.trimValues&&(M=M.trim()),M=this.replaceEntitiesValue(M);const J=this.options.attributeValueProcessor(N,M,L);z[F]=J==null?M:typeof J!=typeof M||J!==M?J:B(M,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(z[F]=!0)}if(!Object.keys(z).length)return;if(this.options.attributesGroupName){const G={};return G[this.options.attributesGroupName]=z,G}return z}}const v=function(P){P=P.replace(/\r\n?/g,`
`);const L=new l("!xml");let U=L,q="",K="";for(let z=0;z<P.length;z++)if(P[z]==="<")if(P[z+1]==="/"){const G=k(P,">",z,"Closing Tag is not closed.");let N=P.substring(z+2,G).trim();if(this.options.removeNSPrefix){const J=N.indexOf(":");J!==-1&&(N=N.substr(J+1))}this.options.transformTagName&&(N=this.options.transformTagName(N)),U&&(q=this.saveTextToParentTag(q,U,K));const M=K.substring(K.lastIndexOf(".")+1);if(N&&this.options.unpairedTags.indexOf(N)!==-1)throw new Error("Unpaired tag can not be used as closing tag: </".concat(N,">"));let F=0;M&&this.options.unpairedTags.indexOf(M)!==-1?(F=K.lastIndexOf(".",K.lastIndexOf(".")-1),this.tagsNodeStack.pop()):F=K.lastIndexOf("."),K=K.substring(0,F),U=this.tagsNodeStack.pop(),q="",z=G}else if(P[z+1]==="?"){let G=E(P,z,!1,"?>");if(!G)throw new Error("Pi Tag is not closed.");if(q=this.saveTextToParentTag(q,U,K),!(this.options.ignoreDeclaration&&G.tagName==="?xml"||this.options.ignorePiTags)){const N=new l(G.tagName);N.add(this.options.textNodeName,""),G.tagName!==G.tagExp&&G.attrExpPresent&&(N[":@"]=this.buildAttributesMap(G.tagExp,K,G.tagName)),this.addChild(U,N,K)}z=G.closeIndex+1}else if(P.substr(z+1,3)==="!--"){const G=k(P,"-->",z+4,"Comment is not closed.");if(this.options.commentPropName){const N=P.substring(z+4,G-2);q=this.saveTextToParentTag(q,U,K),U.add(this.options.commentPropName,[{[this.options.textNodeName]:N}])}z=G}else if(P.substr(z+1,2)==="!D"){const G=h(P,z);this.docTypeEntities=G.entities,z=G.i}else if(P.substr(z+1,2)==="!["){const G=k(P,"]]>",z,"CDATA is not closed.")-2,N=P.substring(z+9,G);if(q=this.saveTextToParentTag(q,U,K),this.options.cdataPropName)U.add(this.options.cdataPropName,[{[this.options.textNodeName]:N}]);else{let M=this.parseTextData(N,U.tagname,K,!0,!1,!0);M==null&&(M=""),U.add(this.options.textNodeName,M)}z=G+2}else{let G=E(P,z,this.options.removeNSPrefix),N=G.tagName,M=G.tagExp,F=G.attrExpPresent,J=G.closeIndex;this.options.transformTagName&&(N=this.options.transformTagName(N)),U&&q&&U.tagname!=="!xml"&&(q=this.saveTextToParentTag(q,U,K,!1));const le=U;if(le&&this.options.unpairedTags.indexOf(le.tagname)!==-1&&(U=this.tagsNodeStack.pop(),K=K.substring(0,K.lastIndexOf("."))),N!==L.tagname&&(K+=K?"."+N:N),this.isItStopNode(this.options.stopNodes,K,N)){let te="";if(M.length>0&&M.lastIndexOf("/")===M.length-1)z=G.closeIndex;else if(this.options.unpairedTags.indexOf(N)!==-1)z=G.closeIndex;else{const ne=this.readStopNodeData(P,N,J+1);if(!ne)throw new Error("Unexpected end of ".concat(N));z=ne.i,te=ne.tagContent}const de=new l(N);N!==M&&F&&(de[":@"]=this.buildAttributesMap(M,K,N)),te&&(te=this.parseTextData(te,N,K,!0,F,!0,!0)),K=K.substr(0,K.lastIndexOf(".")),de.add(this.options.textNodeName,te),this.addChild(U,de,K)}else{if(M.length>0&&M.lastIndexOf("/")===M.length-1){N[N.length-1]==="/"?(N=N.substr(0,N.length-1),K=K.substr(0,K.length-1),M=N):M=M.substr(0,M.length-1),this.options.transformTagName&&(N=this.options.transformTagName(N));const te=new l(N);N!==M&&F&&(te[":@"]=this.buildAttributesMap(M,K,N)),this.addChild(U,te,K),K=K.substr(0,K.lastIndexOf("."))}else{const te=new l(N);this.tagsNodeStack.push(U),N!==M&&F&&(te[":@"]=this.buildAttributesMap(M,K,N)),this.addChild(U,te,K),U=te}q="",z=J}}else q+=P[z];return L.child};function y(P,L,U){const q=this.options.updateTag(L.tagname,U,L[":@"]);q===!1||(typeof q=="string"&&(L.tagname=q),P.addChild(L))}const C=function(P){if(this.options.processEntities){for(let L in this.docTypeEntities){const U=this.docTypeEntities[L];P=P.replace(U.regx,U.val)}for(let L in this.lastEntities){const U=this.lastEntities[L];P=P.replace(U.regex,U.val)}if(this.options.htmlEntities)for(let L in this.htmlEntities){const U=this.htmlEntities[L];P=P.replace(U.regex,U.val)}P=P.replace(this.ampEntity.regex,this.ampEntity.val)}return P};function w(P,L,U,q){return P&&(q===void 0&&(q=Object.keys(L.child).length===0),(P=this.parseTextData(P,L.tagname,U,!1,!!L[":@"]&&Object.keys(L[":@"]).length!==0,q))!==void 0&&P!==""&&L.add(this.options.textNodeName,P),P=""),P}function _(P,L,U){const q="*."+U;for(const K in P){const z=P[K];if(q===z||L===z)return!0}return!1}function k(P,L,U,q){const K=P.indexOf(L,U);if(K===-1)throw new Error(q);return K+L.length-1}function E(P,L,U){const q=function(F,J){let le,te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",de="";for(let ne=J;ne<F.length;ne++){let ge=F[ne];if(le)ge===le&&(le="");else if(ge==='"'||ge==="'")le=ge;else if(ge===te[0]){if(!te[1])return{data:de,index:ne};if(F[ne+1]===te[1])return{data:de,index:ne}}else ge==="	"&&(ge=" ");de+=ge}}(P,L+1,arguments.length>3&&arguments[3]!==void 0?arguments[3]:">");if(!q)return;let K=q.data;const z=q.index,G=K.search(/\s/);let N=K,M=!0;if(G!==-1&&(N=K.substr(0,G).replace(/\s\s*$/,""),K=K.substr(G+1)),U){const F=N.indexOf(":");F!==-1&&(N=N.substr(F+1),M=N!==q.data.substr(F+1))}return{tagName:N,tagExp:K,closeIndex:z,attrExpPresent:M}}function S(P,L,U){const q=U;let K=1;for(;U<P.length;U++)if(P[U]==="<")if(P[U+1]==="/"){const z=k(P,">",U,"".concat(L," is not closed"));if(P.substring(U+2,z).trim()===L&&(K--,K===0))return{tagContent:P.substring(q,U),i:z};U=z}else if(P[U+1]==="?")U=k(P,"?>",U+1,"StopNode is not closed.");else if(P.substr(U+1,3)==="!--")U=k(P,"-->",U+3,"StopNode is not closed.");else if(P.substr(U+1,2)==="![")U=k(P,"]]>",U,"StopNode is not closed.")-2;else{const z=E(P,U,">");z&&((z&&z.tagName)===L&&z.tagExp[z.tagExp.length-1]!=="/"&&K++,U=z.closeIndex)}}function B(P,L,U){if(L&&typeof P=="string"){const q=P.trim();return q==="true"||q!=="false"&&d(P,U)}return u.isExist(P)?P:""}f.exports=class{constructor(P){this.options=P,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=p,this.parseXml=v,this.parseTextData=x,this.resolveNameSpace=m,this.buildAttributesMap=b,this.isItStopNode=_,this.replaceEntitiesValue=C,this.readStopNodeData=S,this.saveTextToParentTag=w,this.addChild=y}}},338:(f,s,a)=>{const{buildOptions:u}=a(63),l=a(299),{prettify:h}=a(728),d=a(31);f.exports=class{constructor(p){this.externalEntities={},this.options=u(p)}parse(p,x){if(typeof p!="string"){if(!p.toString)throw new Error("XML data is accepted in String or Bytes[] form.");p=p.toString()}if(x){x===!0&&(x={});const b=d.validate(p,x);if(b!==!0)throw Error("".concat(b.err.msg,":").concat(b.err.line,":").concat(b.err.col))}const m=new l(this.options);m.addExternalEntities(this.externalEntities);const g=m.parseXml(p);return this.options.preserveOrder||g===void 0?g:h(g,this.options)}addEntity(p,x){if(x.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(p.indexOf("&")!==-1||p.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(x==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[p]=x}}},728:(f,s)=>{function a(d,p,x){let m;const g={};for(let b=0;b<d.length;b++){const v=d[b],y=u(v);let C="";if(C=x===void 0?y:x+"."+y,y===p.textNodeName)m===void 0?m=v[y]:m+=""+v[y];else{if(y===void 0)continue;if(v[y]){let w=a(v[y],p,C);const _=h(w,p);v[":@"]?l(w,v[":@"],C,p):Object.keys(w).length!==1||w[p.textNodeName]===void 0||p.alwaysCreateTextNode?Object.keys(w).length===0&&(p.alwaysCreateTextNode?w[p.textNodeName]="":w=""):w=w[p.textNodeName],g[y]!==void 0&&g.hasOwnProperty(y)?(Array.isArray(g[y])||(g[y]=[g[y]]),g[y].push(w)):p.isArray(y,C,_)?g[y]=[w]:g[y]=w}}}return typeof m=="string"?m.length>0&&(g[p.textNodeName]=m):m!==void 0&&(g[p.textNodeName]=m),g}function u(d){const p=Object.keys(d);for(let x=0;x<p.length;x++){const m=p[x];if(m!==":@")return m}}function l(d,p,x,m){if(p){const g=Object.keys(p),b=g.length;for(let v=0;v<b;v++){const y=g[v];m.isArray(y,x+"."+y,!0,!0)?d[y]=[p[y]]:d[y]=p[y]}}}function h(d,p){const{textNodeName:x}=p,m=Object.keys(d).length;return m===0||!(m!==1||!d[x]&&typeof d[x]!="boolean"&&d[x]!==0)}s.prettify=function(d,p){return a(d,p)}},365:f=>{f.exports=class{constructor(s){this.tagname=s,this.child=[],this[":@"]={}}add(s,a){s==="__proto__"&&(s="#__proto__"),this.child.push({[s]:a})}addChild(s){s.tagname==="__proto__"&&(s.tagname="#__proto__"),s[":@"]&&Object.keys(s[":@"]).length>0?this.child.push({[s.tagname]:s.child,":@":s[":@"]}):this.child.push({[s.tagname]:s.child})}}},135:f=>{function s(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}f.exports=function(a){return a!=null&&(s(a)||function(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&s(u.slice(0,0))}(a)||!!a._isBuffer)}},542:(f,s,a)=>{var u,l,h,d,p;u=a(298),l=a(526).utf8,h=a(135),d=a(526).bin,(p=function(x,m){x.constructor==String?x=m&&m.encoding==="binary"?d.stringToBytes(x):l.stringToBytes(x):h(x)?x=Array.prototype.slice.call(x,0):Array.isArray(x)||x.constructor===Uint8Array||(x=x.toString());for(var g=u.bytesToWords(x),b=8*x.length,v=1732584193,y=-271733879,C=-1732584194,w=271733878,_=0;_<g.length;_++)g[_]=16711935&(g[_]<<8|g[_]>>>24)|4278255360&(g[_]<<24|g[_]>>>8);g[b>>>5]|=128<<b%32,g[14+(b+64>>>9<<4)]=b;var k=p._ff,E=p._gg,S=p._hh,B=p._ii;for(_=0;_<g.length;_+=16){var P=v,L=y,U=C,q=w;v=k(v,y,C,w,g[_+0],7,-680876936),w=k(w,v,y,C,g[_+1],12,-389564586),C=k(C,w,v,y,g[_+2],17,606105819),y=k(y,C,w,v,g[_+3],22,-1044525330),v=k(v,y,C,w,g[_+4],7,-176418897),w=k(w,v,y,C,g[_+5],12,1200080426),C=k(C,w,v,y,g[_+6],17,-1473231341),y=k(y,C,w,v,g[_+7],22,-45705983),v=k(v,y,C,w,g[_+8],7,1770035416),w=k(w,v,y,C,g[_+9],12,-1958414417),C=k(C,w,v,y,g[_+10],17,-42063),y=k(y,C,w,v,g[_+11],22,-1990404162),v=k(v,y,C,w,g[_+12],7,1804603682),w=k(w,v,y,C,g[_+13],12,-40341101),C=k(C,w,v,y,g[_+14],17,-1502002290),v=E(v,y=k(y,C,w,v,g[_+15],22,1236535329),C,w,g[_+1],5,-165796510),w=E(w,v,y,C,g[_+6],9,-1069501632),C=E(C,w,v,y,g[_+11],14,643717713),y=E(y,C,w,v,g[_+0],20,-373897302),v=E(v,y,C,w,g[_+5],5,-701558691),w=E(w,v,y,C,g[_+10],9,38016083),C=E(C,w,v,y,g[_+15],14,-660478335),y=E(y,C,w,v,g[_+4],20,-405537848),v=E(v,y,C,w,g[_+9],5,568446438),w=E(w,v,y,C,g[_+14],9,-1019803690),C=E(C,w,v,y,g[_+3],14,-187363961),y=E(y,C,w,v,g[_+8],20,1163531501),v=E(v,y,C,w,g[_+13],5,-1444681467),w=E(w,v,y,C,g[_+2],9,-51403784),C=E(C,w,v,y,g[_+7],14,1735328473),v=S(v,y=E(y,C,w,v,g[_+12],20,-1926607734),C,w,g[_+5],4,-378558),w=S(w,v,y,C,g[_+8],11,-2022574463),C=S(C,w,v,y,g[_+11],16,1839030562),y=S(y,C,w,v,g[_+14],23,-35309556),v=S(v,y,C,w,g[_+1],4,-1530992060),w=S(w,v,y,C,g[_+4],11,1272893353),C=S(C,w,v,y,g[_+7],16,-155497632),y=S(y,C,w,v,g[_+10],23,-1094730640),v=S(v,y,C,w,g[_+13],4,681279174),w=S(w,v,y,C,g[_+0],11,-358537222),C=S(C,w,v,y,g[_+3],16,-722521979),y=S(y,C,w,v,g[_+6],23,76029189),v=S(v,y,C,w,g[_+9],4,-640364487),w=S(w,v,y,C,g[_+12],11,-421815835),C=S(C,w,v,y,g[_+15],16,530742520),v=B(v,y=S(y,C,w,v,g[_+2],23,-995338651),C,w,g[_+0],6,-198630844),w=B(w,v,y,C,g[_+7],10,1126891415),C=B(C,w,v,y,g[_+14],15,-1416354905),y=B(y,C,w,v,g[_+5],21,-57434055),v=B(v,y,C,w,g[_+12],6,1700485571),w=B(w,v,y,C,g[_+3],10,-1894986606),C=B(C,w,v,y,g[_+10],15,-1051523),y=B(y,C,w,v,g[_+1],21,-2054922799),v=B(v,y,C,w,g[_+8],6,1873313359),w=B(w,v,y,C,g[_+15],10,-30611744),C=B(C,w,v,y,g[_+6],15,-1560198380),y=B(y,C,w,v,g[_+13],21,1309151649),v=B(v,y,C,w,g[_+4],6,-145523070),w=B(w,v,y,C,g[_+11],10,-1120210379),C=B(C,w,v,y,g[_+2],15,718787259),y=B(y,C,w,v,g[_+9],21,-343485551),v=v+P>>>0,y=y+L>>>0,C=C+U>>>0,w=w+q>>>0}return u.endian([v,y,C,w])})._ff=function(x,m,g,b,v,y,C){var w=x+(m&g|~m&b)+(v>>>0)+C;return(w<<y|w>>>32-y)+m},p._gg=function(x,m,g,b,v,y,C){var w=x+(m&b|g&~b)+(v>>>0)+C;return(w<<y|w>>>32-y)+m},p._hh=function(x,m,g,b,v,y,C){var w=x+(m^g^b)+(v>>>0)+C;return(w<<y|w>>>32-y)+m},p._ii=function(x,m,g,b,v,y,C){var w=x+(g^(m|~b))+(v>>>0)+C;return(w<<y|w>>>32-y)+m},p._blocksize=16,p._digestsize=16,f.exports=function(x,m){if(x==null)throw new Error("Illegal argument "+x);var g=u.wordsToBytes(p(x,m));return m&&m.asBytes?g:m&&m.asString?d.bytesToString(g):u.bytesToHex(g)}},285:(f,s,a)=>{var u=a(2);f.exports=function(k){return k?(k.substr(0,2)==="{}"&&(k="\\{\\}"+k.substr(2)),_(function(E){return E.split("\\\\").join(l).split("\\{").join(h).split("\\}").join(d).split("\\,").join(p).split("\\.").join(x)}(k),!0).map(g)):[]};var l="\0SLASH"+Math.random()+"\0",h="\0OPEN"+Math.random()+"\0",d="\0CLOSE"+Math.random()+"\0",p="\0COMMA"+Math.random()+"\0",x="\0PERIOD"+Math.random()+"\0";function m(k){return parseInt(k,10)==k?parseInt(k,10):k.charCodeAt(0)}function g(k){return k.split(l).join("\\").split(h).join("{").split(d).join("}").split(p).join(",").split(x).join(".")}function b(k){if(!k)return[""];var E=[],S=u("{","}",k);if(!S)return k.split(",");var B=S.pre,P=S.body,L=S.post,U=B.split(",");U[U.length-1]+="{"+P+"}";var q=b(L);return L.length&&(U[U.length-1]+=q.shift(),U.push.apply(U,q)),E.push.apply(E,U),E}function v(k){return"{"+k+"}"}function y(k){return/^-?0\d/.test(k)}function C(k,E){return k<=E}function w(k,E){return k>=E}function _(k,E){var S=[],B=u("{","}",k);if(!B)return[k];var P=B.pre,L=B.post.length?_(B.post,!1):[""];if(/\$$/.test(B.pre))for(var U=0;U<L.length;U++){var q=P+"{"+B.body+"}"+L[U];S.push(q)}else{var K,z,G=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(B.body),N=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(B.body),M=G||N,F=B.body.indexOf(",")>=0;if(!M&&!F)return B.post.match(/,.*\}/)?_(k=B.pre+"{"+B.body+d+B.post):[k];if(M)K=B.body.split(/\.\./);else if((K=b(B.body)).length===1&&(K=_(K[0],!1).map(v)).length===1)return L.map(function(Pe){return B.pre+K[0]+Pe});if(M){var J=m(K[0]),le=m(K[1]),te=Math.max(K[0].length,K[1].length),de=K.length==3?Math.abs(m(K[2])):1,ne=C;le<J&&(de*=-1,ne=w);var ge=K.some(y);z=[];for(var V=J;ne(V,le);V+=de){var Y;if(N)(Y=String.fromCharCode(V))==="\\"&&(Y="");else if(Y=String(V),ge){var ce=te-Y.length;if(ce>0){var re=new Array(ce+1).join("0");Y=V<0?"-"+re+Y.slice(1):re+Y}}z.push(Y)}}else{z=[];for(var pe=0;pe<K.length;pe++)z.push.apply(z,_(K[pe],!1))}for(pe=0;pe<z.length;pe++)for(U=0;U<L.length;U++)q=P+z[pe]+L[U],(!E||M||q)&&S.push(q)}return S}},829:f=>{function s(m){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},s(m)}function a(m){var g=typeof Map=="function"?new Map:void 0;return a=function(b){if(b===null||(v=b,Function.toString.call(v).indexOf("[native code]")===-1))return b;var v;if(typeof b!="function")throw new TypeError("Super expression must either be null or a function");if(g!==void 0){if(g.has(b))return g.get(b);g.set(b,y)}function y(){return u(b,arguments,h(this).constructor)}return y.prototype=Object.create(b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),l(y,b)},a(m)}function u(m,g,b){return u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(v,y,C){var w=[null];w.push.apply(w,y);var _=new(Function.bind.apply(v,w));return C&&l(_,C.prototype),_},u.apply(null,arguments)}function l(m,g){return l=Object.setPrototypeOf||function(b,v){return b.__proto__=v,b},l(m,g)}function h(m){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},h(m)}var d=function(m){function g(b){var v;return function(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}(this,g),(v=function(y,C){return!C||s(C)!=="object"&&typeof C!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(y):C}(this,h(g).call(this,b))).name="ObjectPrototypeMutationError",v}return function(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),v&&l(b,v)}(g,m),g}(a(Error));function p(m,g){for(var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},v=g.split("."),y=v.length,C=function(k){var E=v[k];if(!m)return{v:void 0};if(E==="+"){if(Array.isArray(m))return{v:m.map(function(B,P){var L=v.slice(k+1);return L.length>0?p(B,L.join("."),b):b(m,P,v,k)})};var S=v.slice(0,k).join(".");throw new Error("Object at wildcard (".concat(S,") is not an array"))}m=b(m,E,v,k)},w=0;w<y;w++){var _=C(w);if(s(_)==="object")return _.v}return m}function x(m,g){return m.length===g+1}f.exports={set:function(m,g,b){if(s(m)!="object"||m===null||g===void 0)return m;if(typeof g=="number")return m[g]=b,m[g];try{return p(m,g,function(v,y,C,w){if(v===Reflect.getPrototypeOf({}))throw new d("Attempting to mutate Object.prototype");if(!v[y]){var _=Number.isInteger(Number(C[w+1])),k=C[w+1]==="+";v[y]=_||k?[]:{}}return x(C,w)&&(v[y]=b),v[y]})}catch(v){if(v instanceof d)throw v;return m}},get:function(m,g){if(s(m)!="object"||m===null||g===void 0)return m;if(typeof g=="number")return m[g];try{return p(m,g,function(b,v){return b[v]})}catch{return m}},has:function(m,g){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(s(m)!="object"||m===null||g===void 0)return!1;if(typeof g=="number")return g in m;try{var v=!1;return p(m,g,function(y,C,w,_){if(!x(w,_))return y&&y[C];v=b.own?y.hasOwnProperty(C):C in y}),v}catch{return!1}},hasOwn:function(m,g,b){return this.has(m,g,b||{own:!0})},isIn:function(m,g,b){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(s(m)!="object"||m===null||g===void 0)return!1;try{var y=!1,C=!1;return p(m,g,function(w,_,k,E){return y=y||w===b||!!w&&w[_]===b,C=x(k,E)&&s(w)==="object"&&_ in w,w&&w[_]}),v.validPath?y&&C:y}catch{return!1}},ObjectPrototypeMutationError:d}},47:(f,s,a)=>{var u=a(410),l=function(m){return typeof m=="string"};function h(m,g){for(var b=[],v=0;v<m.length;v++){var y=m[v];y&&y!=="."&&(y===".."?b.length&&b[b.length-1]!==".."?b.pop():g&&b.push(".."):b.push(y))}return b}var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,p={};function x(m){return d.exec(m).slice(1)}p.resolve=function(){for(var m="",g=!1,b=arguments.length-1;b>=-1&&!g;b--){var v=b>=0?arguments[b]:process$1.cwd();if(!l(v))throw new TypeError("Arguments to path.resolve must be strings");v&&(m=v+"/"+m,g=v.charAt(0)==="/")}return(g?"/":"")+(m=h(m.split("/"),!g).join("/"))||"."},p.normalize=function(m){var g=p.isAbsolute(m),b=m.substr(-1)==="/";return(m=h(m.split("/"),!g).join("/"))||g||(m="."),m&&b&&(m+="/"),(g?"/":"")+m},p.isAbsolute=function(m){return m.charAt(0)==="/"},p.join=function(){for(var m="",g=0;g<arguments.length;g++){var b=arguments[g];if(!l(b))throw new TypeError("Arguments to path.join must be strings");b&&(m+=m?"/"+b:b)}return p.normalize(m)},p.relative=function(m,g){function b(E){for(var S=0;S<E.length&&E[S]==="";S++);for(var B=E.length-1;B>=0&&E[B]==="";B--);return S>B?[]:E.slice(S,B+1)}m=p.resolve(m).substr(1),g=p.resolve(g).substr(1);for(var v=b(m.split("/")),y=b(g.split("/")),C=Math.min(v.length,y.length),w=C,_=0;_<C;_++)if(v[_]!==y[_]){w=_;break}var k=[];for(_=w;_<v.length;_++)k.push("..");return(k=k.concat(y.slice(w))).join("/")},p._makeLong=function(m){return m},p.dirname=function(m){var g=x(m),b=g[0],v=g[1];return b||v?(v&&(v=v.substr(0,v.length-1)),b+v):"."},p.basename=function(m,g){var b=x(m)[2];return g&&b.substr(-1*g.length)===g&&(b=b.substr(0,b.length-g.length)),b},p.extname=function(m){return x(m)[3]},p.format=function(m){if(!u.isObject(m))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof m);var g=m.root||"";if(!l(g))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof m.root);return(m.dir?m.dir+p.sep:"")+(m.base||"")},p.parse=function(m){if(!l(m))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof m);var g=x(m);if(!g||g.length!==4)throw new TypeError("Invalid path '"+m+"'");return g[1]=g[1]||"",g[2]=g[2]||"",g[3]=g[3]||"",{root:g[0],dir:g[0]+g[1].slice(0,g[1].length-1),base:g[2],ext:g[3],name:g[2].slice(0,g[2].length-g[3].length)}},p.sep="/",p.delimiter=":",f.exports=p},647:(f,s)=>{var a=Object.prototype.hasOwnProperty;function u(h){try{return decodeURIComponent(h.replace(/\+/g," "))}catch{return null}}function l(h){try{return encodeURIComponent(h)}catch{return null}}s.stringify=function(h,d){d=d||"";var p,x,m=[];for(x in typeof d!="string"&&(d="?"),h)if(a.call(h,x)){if((p=h[x])||p!=null&&!isNaN(p)||(p=""),x=l(x),p=l(p),x===null||p===null)continue;m.push(x+"="+p)}return m.length?d+m.join("&"):""},s.parse=function(h){for(var d,p=/([^=?#&]+)=?([^&]*)/g,x={};d=p.exec(h);){var m=u(d[1]),g=u(d[2]);m===null||g===null||m in x||(x[m]=g)}return x}},670:f=>{f.exports=function(s,a){if(a=a.split(":")[0],!(s=+s))return!1;switch(a){case"http":case"ws":return s!==80;case"https":case"wss":return s!==443;case"ftp":return s!==21;case"gopher":return s!==70;case"file":return!1}return s!==0}},494:f=>{const s=/^[-+]?0x[a-fA-F0-9]+$/,a=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};f.exports=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(h=Object.assign({},u,h),!l||typeof l!="string")return l;let d=l.trim();if(h.skipLike!==void 0&&h.skipLike.test(d))return l;if(h.hex&&s.test(d))return Number.parseInt(d,16);{const x=a.exec(d);if(x){const m=x[1],g=x[2];let b=((p=x[3])&&p.indexOf(".")!==-1&&((p=p.replace(/0+$/,""))==="."?p="0":p[0]==="."?p="0"+p:p[p.length-1]==="."&&(p=p.substr(0,p.length-1))),p);const v=x[4]||x[6];if(!h.leadingZeros&&g.length>0&&m&&d[2]!=="."||!h.leadingZeros&&g.length>0&&!m&&d[1]!==".")return l;{const y=Number(d),C=""+y;return C.search(/[eE]/)!==-1||v?h.eNotation?y:l:d.indexOf(".")!==-1?C==="0"&&b===""||C===b||m&&C==="-"+b?y:l:g?b===C||m+b===C?y:l:d===C||d===m+C?y:l}}return l}var p}},737:(f,s,a)=>{var u=a(670),l=a(647),h=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,d=/[\n\r\t]/g,p=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,x=/:\d+$/,m=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,g=/^[a-zA-Z]:/;function b(E){return(E||"").toString().replace(h,"")}var v=[["#","hash"],["?","query"],function(E,S){return w(S.protocol)?E.replace(/\\/g,"/"):E},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],y={hash:1,query:1};function C(E){var S,B=(typeof window<"u"?window:typeof global$1<"u"?global$1:typeof self<"u"?self:{}).location||{},P={},L=typeof(E=E||B);if(E.protocol==="blob:")P=new k(unescape(E.pathname),{});else if(L==="string")for(S in P=new k(E,{}),y)delete P[S];else if(L==="object"){for(S in E)S in y||(P[S]=E[S]);P.slashes===void 0&&(P.slashes=p.test(E.href))}return P}function w(E){return E==="file:"||E==="ftp:"||E==="http:"||E==="https:"||E==="ws:"||E==="wss:"}function _(E,S){E=(E=b(E)).replace(d,""),S=S||{};var B,P=m.exec(E),L=P[1]?P[1].toLowerCase():"",U=!!P[2],q=!!P[3],K=0;return U?q?(B=P[2]+P[3]+P[4],K=P[2].length+P[3].length):(B=P[2]+P[4],K=P[2].length):q?(B=P[3]+P[4],K=P[3].length):B=P[4],L==="file:"?K>=2&&(B=B.slice(2)):w(L)?B=P[4]:L?U&&(B=B.slice(2)):K>=2&&w(S.protocol)&&(B=P[4]),{protocol:L,slashes:U||w(L),slashesCount:K,rest:B}}function k(E,S,B){if(E=(E=b(E)).replace(d,""),!(this instanceof k))return new k(E,S,B);var P,L,U,q,K,z,G=v.slice(),N=typeof S,M=this,F=0;for(N!=="object"&&N!=="string"&&(B=S,S=null),B&&typeof B!="function"&&(B=l.parse),P=!(L=_(E||"",S=C(S))).protocol&&!L.slashes,M.slashes=L.slashes||P&&S.slashes,M.protocol=L.protocol||S.protocol||"",E=L.rest,(L.protocol==="file:"&&(L.slashesCount!==2||g.test(E))||!L.slashes&&(L.protocol||L.slashesCount<2||!w(M.protocol)))&&(G[3]=[/(.*)/,"pathname"]);F<G.length;F++)typeof(q=G[F])!="function"?(U=q[0],z=q[1],U!=U?M[z]=E:typeof U=="string"?~(K=U==="@"?E.lastIndexOf(U):E.indexOf(U))&&(typeof q[2]=="number"?(M[z]=E.slice(0,K),E=E.slice(K+q[2])):(M[z]=E.slice(K),E=E.slice(0,K))):(K=U.exec(E))&&(M[z]=K[1],E=E.slice(0,K.index)),M[z]=M[z]||P&&q[3]&&S[z]||"",q[4]&&(M[z]=M[z].toLowerCase())):E=q(E,M);B&&(M.query=B(M.query)),P&&S.slashes&&M.pathname.charAt(0)!=="/"&&(M.pathname!==""||S.pathname!=="")&&(M.pathname=function(J,le){if(J==="")return le;for(var te=(le||"/").split("/").slice(0,-1).concat(J.split("/")),de=te.length,ne=te[de-1],ge=!1,V=0;de--;)te[de]==="."?te.splice(de,1):te[de]===".."?(te.splice(de,1),V++):V&&(de===0&&(ge=!0),te.splice(de,1),V--);return ge&&te.unshift(""),ne!=="."&&ne!==".."||te.push(""),te.join("/")}(M.pathname,S.pathname)),M.pathname.charAt(0)!=="/"&&w(M.protocol)&&(M.pathname="/"+M.pathname),u(M.port,M.protocol)||(M.host=M.hostname,M.port=""),M.username=M.password="",M.auth&&(~(K=M.auth.indexOf(":"))?(M.username=M.auth.slice(0,K),M.username=encodeURIComponent(decodeURIComponent(M.username)),M.password=M.auth.slice(K+1),M.password=encodeURIComponent(decodeURIComponent(M.password))):M.username=encodeURIComponent(decodeURIComponent(M.auth)),M.auth=M.password?M.username+":"+M.password:M.username),M.origin=M.protocol!=="file:"&&w(M.protocol)&&M.host?M.protocol+"//"+M.host:"null",M.href=M.toString()}k.prototype={set:function(E,S,B){var P=this;switch(E){case"query":typeof S=="string"&&S.length&&(S=(B||l.parse)(S)),P[E]=S;break;case"port":P[E]=S,u(S,P.protocol)?S&&(P.host=P.hostname+":"+S):(P.host=P.hostname,P[E]="");break;case"hostname":P[E]=S,P.port&&(S+=":"+P.port),P.host=S;break;case"host":P[E]=S,x.test(S)?(S=S.split(":"),P.port=S.pop(),P.hostname=S.join(":")):(P.hostname=S,P.port="");break;case"protocol":P.protocol=S.toLowerCase(),P.slashes=!B;break;case"pathname":case"hash":if(S){var L=E==="pathname"?"/":"#";P[E]=S.charAt(0)!==L?L+S:S}else P[E]=S;break;case"username":case"password":P[E]=encodeURIComponent(S);break;case"auth":var U=S.indexOf(":");~U?(P.username=S.slice(0,U),P.username=encodeURIComponent(decodeURIComponent(P.username)),P.password=S.slice(U+1),P.password=encodeURIComponent(decodeURIComponent(P.password))):P.username=encodeURIComponent(decodeURIComponent(S))}for(var q=0;q<v.length;q++){var K=v[q];K[4]&&(P[K[1]]=P[K[1]].toLowerCase())}return P.auth=P.password?P.username+":"+P.password:P.username,P.origin=P.protocol!=="file:"&&w(P.protocol)&&P.host?P.protocol+"//"+P.host:"null",P.href=P.toString(),P},toString:function(E){E&&typeof E=="function"||(E=l.stringify);var S,B=this,P=B.host,L=B.protocol;L&&L.charAt(L.length-1)!==":"&&(L+=":");var U=L+(B.protocol&&B.slashes||w(B.protocol)?"//":"");return B.username?(U+=B.username,B.password&&(U+=":"+B.password),U+="@"):B.password?(U+=":"+B.password,U+="@"):B.protocol!=="file:"&&w(B.protocol)&&!P&&B.pathname!=="/"&&(U+="@"),(P[P.length-1]===":"||x.test(B.hostname)&&!B.port)&&(P+=":"),U+=P+B.pathname,(S=typeof B.query=="object"?E(B.query):B.query)&&(U+=S.charAt(0)!=="?"?"?"+S:S),B.hash&&(U+=B.hash),U}},k.extractProtocol=_,k.location=C,k.trimLeft=b,k.qs=l,f.exports=k},410:()=>{},388:()=>{},805:()=>{},345:()=>{},800:()=>{}},e={};function n(f){var s=e[f];if(s!==void 0)return s.exports;var a=e[f]={id:f,loaded:!1,exports:{}};return t[f].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=f=>{var s=f&&f.__esModule?()=>f.default:()=>f;return n.d(s,{a:s}),s},n.d=(f,s)=>{for(var a in s)n.o(s,a)&&!n.o(f,a)&&Object.defineProperty(f,a,{enumerable:!0,get:s[a]})},n.o=(f,s)=>Object.prototype.hasOwnProperty.call(f,s),n.nmd=f=>(f.paths=[],f.children||(f.children=[]),f);var r={};(()=>{n.d(r,{hT:()=>G,O4:()=>N,Kd:()=>K,YK:()=>z,UU:()=>Fr,Gu:()=>ne,ky:()=>Ht,h4:()=>yt,ch:()=>At,hq:()=>ft,i5:()=>Kt});var f=n(737),s=n.n(f);function a(R){if(!u(R))throw new Error("Parameter was not an error")}function u(R){return D=R,Object.prototype.toString.call(D)==="[object Error]"||R instanceof Error;var D}class l extends Error{constructor(D,O){const j=[...arguments],{options:ee,shortMessage:Z}=function(ue){let be,_e="";if(ue.length===0)be={};else if(u(ue[0]))be={cause:ue[0]},_e=ue.slice(1).join(" ")||"";else if(ue[0]&&typeof ue[0]=="object")be=Object.assign({},ue[0]),_e=ue.slice(1).join(" ")||"";else{if(typeof ue[0]!="string")throw new Error("Invalid arguments passed to Layerr");be={},_e=_e=ue.join(" ")||""}return{options:be,shortMessage:_e}}(j);let ie=Z;if(ee.cause&&(ie="".concat(ie,": ").concat(ee.cause.message)),super(ie),this.message=ie,ee.name&&typeof ee.name=="string"?this.name=ee.name:this.name="Layerr",ee.cause&&Object.defineProperty(this,"_cause",{value:ee.cause}),Object.defineProperty(this,"_info",{value:{}}),ee.info&&typeof ee.info=="object"&&Object.assign(this._info,ee.info),Error.captureStackTrace){const ue=ee.constructorOpt||this.constructor;Error.captureStackTrace(this,ue)}}static cause(D){return a(D),D._cause&&u(D._cause)?D._cause:null}static fullStack(D){a(D);const O=l.cause(D);return O?"".concat(D.stack,`
caused by: `).concat(l.fullStack(O)):D.stack}static info(D){a(D);const O={},j=l.cause(D);return j&&Object.assign(O,l.info(j)),D._info&&Object.assign(O,D._info),O}cause(){return l.cause(this)}toString(){let D=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(D="".concat(D,": ").concat(this.message)),D}}var h=n(47),d=n.n(h);const p="__PATH_SEPARATOR_POSIX__",x="__PATH_SEPARATOR_WINDOWS__";function m(R){try{const D=R.replace(/\//g,p).replace(/\\\\/g,x);return encodeURIComponent(D).split(x).join("\\\\").split(p).join("/")}catch(D){throw new l(D,"Failed encoding path")}}function g(R){return R.startsWith("/")?R:"/"+R}function b(R){let D=R;return D[0]!=="/"&&(D="/"+D),/^.+\/$/.test(D)&&(D=D.substr(0,D.length-1)),D}function v(R){let D=new(s())(R).pathname;return D.length<=0&&(D="/"),b(D)}function y(){for(var R=arguments.length,D=new Array(R),O=0;O<R;O++)D[O]=arguments[O];return function(){return function(j){var ee=[];if(j.length===0)return"";if(typeof j[0]!="string")throw new TypeError("Url must be a string. Received "+j[0]);if(j[0].match(/^[^/:]+:\/*$/)&&j.length>1){var Z=j.shift();j[0]=Z+j[0]}j[0].match(/^file:\/\/\//)?j[0]=j[0].replace(/^([^/:]+):\/*/,"$1:///"):j[0]=j[0].replace(/^([^/:]+):\/*/,"$1://");for(var ie=0;ie<j.length;ie++){var ue=j[ie];if(typeof ue!="string")throw new TypeError("Url must be a string. Received "+ue);ue!==""&&(ie>0&&(ue=ue.replace(/^[\/]+/,"")),ue=ie<j.length-1?ue.replace(/[\/]+$/,""):ue.replace(/[\/]+$/,"/"),ee.push(ue))}var be=ee.join("/"),_e=(be=be.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return _e.shift()+(_e.length>0?"?":"")+_e.join("&")}(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}(D.reduce((j,ee,Z)=>((Z===0||ee!=="/"||ee==="/"&&j[j.length-1]!=="/")&&j.push(ee),j),[]))}var C=n(542),w=n.n(C);const _="abcdef0123456789";function k(R,D){const O=R.url.replace("//",""),j=O.indexOf("/")==-1?"/":O.slice(O.indexOf("/")),ee=R.method?R.method.toUpperCase():"GET",Z=!!/(^|,)\s*auth\s*($|,)/.test(D.qop)&&"auth",ie="00000000".concat(D.nc).slice(-8),ue=function(je,Ze,Me,Be,De,He,We){const $e=We||w()("".concat(Ze,":").concat(Me,":").concat(Be));return je&&je.toLowerCase()==="md5-sess"?w()("".concat($e,":").concat(De,":").concat(He)):$e}(D.algorithm,D.username,D.realm,D.password,D.nonce,D.cnonce,D.ha1),be=w()("".concat(ee,":").concat(j)),_e=Z?w()("".concat(ue,":").concat(D.nonce,":").concat(ie,":").concat(D.cnonce,":").concat(Z,":").concat(be)):w()("".concat(ue,":").concat(D.nonce,":").concat(be)),Se={username:D.username,realm:D.realm,nonce:D.nonce,uri:j,qop:Z,response:_e,nc:ie,cnonce:D.cnonce,algorithm:D.algorithm,opaque:D.opaque},Re=[];for(const je in Se)Se[je]&&(je==="qop"||je==="nc"||je==="algorithm"?Re.push("".concat(je,"=").concat(Se[je])):Re.push("".concat(je,'="').concat(Se[je],'"')));return"Digest ".concat(Re.join(", "))}function E(R){return(R.headers&&R.headers.get("www-authenticate")||"").split(/\s/)[0].toLowerCase()==="digest"}var S=n(101),B=n.n(S);function P(R){return B().decode(R)}function L(R,D){const O=(j="".concat(R,":").concat(D),B().encode(j));var j;return"Basic ".concat(O)}const U=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:typeof window<"u"?window:globalThis,q=U.fetch.bind(U),K=U.Request,z=U.Response;let G=function(R){return R.Auto="auto",R.Digest="digest",R.None="none",R.Password="password",R.Token="token",R}({}),N=function(R){return R.DataTypeNoLength="data-type-no-length",R.InvalidAuthType="invalid-auth-type",R.InvalidOutputFormat="invalid-output-format",R.LinkUnsupportedAuthType="link-unsupported-auth",R.InvalidUpdateRange="invalid-update-range",R.NotSupported="not-supported",R}({});function M(R,D,O,j,ee){switch(R.authType){case G.Auto:D&&O&&(R.headers.Authorization=L(D,O));break;case G.Digest:R.digest=function(ie,ue,be){return{username:ie,password:ue,ha1:be,nc:0,algorithm:"md5",hasDigestAuth:!1}}(D,O,ee);break;case G.None:break;case G.Password:R.headers.Authorization=L(D,O);break;case G.Token:R.headers.Authorization="".concat((Z=j).token_type," ").concat(Z.access_token);break;default:throw new l({info:{code:N.InvalidAuthType}},"Invalid auth type: ".concat(R.authType))}var Z}n(345),n(800);const F="@@HOTPATCHER",J=()=>{};function le(R){return{original:R,methods:[R],final:!1}}class te{constructor(){this._configuration={registry:{},getEmptyAction:"null"},this.__type__=F}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(D){this.configuration.getEmptyAction=D}control(D){let O=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!D||D.__type__!==F)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(D.configuration.registry).forEach(j=>{this.configuration.registry.hasOwnProperty(j)?O&&(this.configuration.registry[j]=Object.assign({},D.configuration.registry[j])):this.configuration.registry[j]=Object.assign({},D.configuration.registry[j])}),D._configuration=this.configuration,this}execute(D){const O=this.get(D)||J;for(var j=arguments.length,ee=new Array(j>1?j-1:0),Z=1;Z<j;Z++)ee[Z-1]=arguments[Z];return O(...ee)}get(D){const O=this.configuration.registry[D];if(!O)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error("Failed handling method request: No method provided for override: ".concat(D));default:throw new Error("Failed handling request which resulted in an empty method: Invalid empty-action specified: ".concat(this.getEmptyAction))}return function(){for(var j=arguments.length,ee=new Array(j),Z=0;Z<j;Z++)ee[Z]=arguments[Z];if(ee.length===0)throw new Error("Failed creating sequence: No functions provided");return function(){for(var ie=arguments.length,ue=new Array(ie),be=0;be<ie;be++)ue[be]=arguments[be];let _e=ue;const Se=this;for(;ee.length>0;)_e=[ee.shift().apply(Se,_e)];return _e[0]}}(...O.methods)}isPatched(D){return!!this.configuration.registry[D]}patch(D,O){let j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{chain:ee=!1}=j;if(this.configuration.registry[D]&&this.configuration.registry[D].final)throw new Error("Failed patching '".concat(D,"': Method marked as being final"));if(typeof O!="function")throw new Error("Failed patching '".concat(D,"': Provided method is not a function"));if(ee)this.configuration.registry[D]?this.configuration.registry[D].methods.push(O):this.configuration.registry[D]=le(O);else if(this.isPatched(D)){const{original:Z}=this.configuration.registry[D];this.configuration.registry[D]=Object.assign(le(O),{original:Z})}else this.configuration.registry[D]=le(O);return this}patchInline(D,O){this.isPatched(D)||this.patch(D,O);for(var j=arguments.length,ee=new Array(j>2?j-2:0),Z=2;Z<j;Z++)ee[Z-2]=arguments[Z];return this.execute(D,...ee)}plugin(D){for(var O=arguments.length,j=new Array(O>1?O-1:0),ee=1;ee<O;ee++)j[ee-1]=arguments[ee];return j.forEach(Z=>{this.patch(D,Z,{chain:!0})}),this}restore(D){if(!this.isPatched(D))throw new Error("Failed restoring method: No method present for key: ".concat(D));if(typeof this.configuration.registry[D].original!="function")throw new Error("Failed restoring method: Original method not found or of invalid type for key: ".concat(D));return this.configuration.registry[D].methods=[this.configuration.registry[D].original],this}setFinal(D){if(!this.configuration.registry.hasOwnProperty(D))throw new Error("Failed marking '".concat(D,"' as final: No method found for key"));return this.configuration.registry[D].final=!0,this}}let de=null;function ne(){return de||(de=new te),de}function ge(R){return function(D){if(typeof D!="object"||D===null||Object.prototype.toString.call(D)!="[object Object]")return!1;if(Object.getPrototypeOf(D)===null)return!0;let O=D;for(;Object.getPrototypeOf(O)!==null;)O=Object.getPrototypeOf(O);return Object.getPrototypeOf(D)===O}(R)?Object.assign({},R):Object.setPrototypeOf(Object.assign({},R),Object.getPrototypeOf(R))}function V(){for(var R=arguments.length,D=new Array(R),O=0;O<R;O++)D[O]=arguments[O];let j=null,ee=[...D];for(;ee.length>0;){const Z=ee.shift();j=j?Y(j,Z):ge(Z)}return j}function Y(R,D){const O=ge(R);return Object.keys(D).forEach(j=>{O.hasOwnProperty(j)?Array.isArray(D[j])?O[j]=Array.isArray(O[j])?[...O[j],...D[j]]:[...D[j]]:typeof D[j]=="object"&&D[j]?O[j]=typeof O[j]=="object"&&O[j]?Y(O[j],D[j]):ge(D[j]):O[j]=D[j]:O[j]=D[j]}),O}function ce(R){const D={};for(const O of R.keys())D[O]=R.get(O);return D}function re(){for(var R=arguments.length,D=new Array(R),O=0;O<R;O++)D[O]=arguments[O];if(D.length===0)return{};const j={};return D.reduce((ee,Z)=>(Object.keys(Z).forEach(ie=>{const ue=ie.toLowerCase();j.hasOwnProperty(ue)?ee[j[ue]]=Z[ie]:(j[ue]=ie,ee[ie]=Z[ie])}),ee),{})}n(805);const pe=typeof ArrayBuffer=="function",{toString:Pe}=Object.prototype;function Oe(R){return pe&&(R instanceof ArrayBuffer||Pe.call(R)==="[object ArrayBuffer]")}function ke(R){return R!=null&&R.constructor!=null&&typeof R.constructor.isBuffer=="function"&&R.constructor.isBuffer(R)}function Te(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}function Le(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}const Ue=Te(function(R){const D=R._digest;return delete R._digest,D.hasDigestAuth&&(R=V(R,{headers:{Authorization:k(R,D)}})),Le(xe(R),function(O){let j=!1;return ee=function(ie){return j?ie:O},(Z=function(){if(O.status==401)return D.hasDigestAuth=function(ie,ue){if(!E(ie))return!1;const be=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){const _e=ie.headers&&ie.headers.get("www-authenticate")||"",Se=be.exec(_e);if(!Se)break;ue[Se[1]]=Se[2]||Se[3]}return ue.nc+=1,ue.cnonce=function(){let _e="";for(let Se=0;Se<32;++Se)_e="".concat(_e).concat(_[Math.floor(16*Math.random())]);return _e}(),!0}(O,D),function(){if(D.hasDigestAuth)return Le(xe(R=V(R,{headers:{Authorization:k(R,D)}})),function(ie){return ie.status==401?D.hasDigestAuth=!1:D.nc++,j=!0,ie})}();D.nc++}())&&Z.then?Z.then(ee):ee(Z);var ee,Z})}),Ke=Te(function(R,D){return Le(xe(R),function(O){return O.ok?(D.authType=G.Password,O):O.status==401&&E(O)?(D.authType=G.Digest,M(D,D.username,D.password,void 0,void 0),R._digest=D.digest,Ue(R)):O})}),Ie=Te(function(R,D){return D.authType===G.Auto?Ke(R,D):R._digest?Ue(R):xe(R)});function I(R,D,O){const j=ge(R);return j.headers=re(D.headers,j.headers||{},O.headers||{}),O.data!==void 0&&(j.data=O.data),O.signal&&(j.signal=O.signal),D.httpAgent&&(j.httpAgent=D.httpAgent),D.httpsAgent&&(j.httpsAgent=D.httpsAgent),D.digest&&(j._digest=D.digest),typeof D.withCredentials=="boolean"&&(j.withCredentials=D.withCredentials),j}function xe(R){const D=ne();return D.patchInline("request",O=>D.patchInline("fetch",q,O.url,function(j){let ee={};const Z={method:j.method};if(j.headers&&(ee=re(ee,j.headers)),j.data!==void 0){const[ie,ue]=function(be){if(typeof be=="string")return[be,{}];if(ke(be))return[be,{}];if(Oe(be))return[be,{}];if(be&&typeof be=="object")return[JSON.stringify(be),{"content-type":"application/json"}];throw new Error("Unable to convert request body: Unexpected body type: ".concat(typeof be))}(j.data);Z.body=ie,ee=re(ee,ue)}return j.signal&&(Z.signal=j.signal),j.withCredentials&&(Z.credentials="include"),Z.headers=ee,Z}(O)),R)}var he=n(285);const X={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Q=R=>R.replace(/[[\]\\-]/g,"\\$&"),oe=R=>R.join(""),Ce=(R,D)=>{const O=D;if(R.charAt(O)!=="[")throw new Error("not in a brace expression");const j=[],ee=[];let Z=O+1,ie=!1,ue=!1,be=!1,_e=!1,Se=O,Re="";e:for(;Z<R.length;){const Be=R.charAt(Z);if(Be!=="!"&&Be!=="^"||Z!==O+1){if(Be==="]"&&ie&&!be){Se=Z+1;break}if(ie=!0,Be!=="\\"||be){if(Be==="["&&!be){for(const[De,[He,We,$e]]of Object.entries(X))if(R.startsWith(De,Z)){if(Re)return["$.",!1,R.length-O,!0];Z+=De.length,$e?ee.push(He):j.push(He),ue=ue||We;continue e}}be=!1,Re?(Be>Re?j.push(Q(Re)+"-"+Q(Be)):Be===Re&&j.push(Q(Be)),Re="",Z++):R.startsWith("-]",Z+1)?(j.push(Q(Be+"-")),Z+=2):R.startsWith("-",Z+1)?(Re=Be,Z+=2):(j.push(Q(Be)),Z++)}else be=!0,Z++}else _e=!0,Z++}if(Se<Z)return["",!1,0,!1];if(!j.length&&!ee.length)return["$.",!1,R.length-O,!0];if(ee.length===0&&j.length===1&&/^\\?.$/.test(j[0])&&!_e)return[(je=j[0].length===2?j[0].slice(-1):j[0],je.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,Se-O,!1];var je;const Ze="["+(_e?"^":"")+oe(j)+"]",Me="["+(_e?"":"^")+oe(ee)+"]";return[j.length&&ee.length?"("+Ze+"|"+Me+")":j.length?Ze:Me,ue,Se-O,!0]};function me(R,D,O){var j;return(D=typeof(j=function(ee,Z){if(typeof ee!="object"||!ee)return ee;var ie=ee[Symbol.toPrimitive];if(ie!==void 0){var ue=ie.call(ee,"string");if(typeof ue!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ee)}(D))=="symbol"?j:String(j))in R?Object.defineProperty(R,D,{value:O,enumerable:!0,configurable:!0,writable:!0}):R[D]=O,R}const ae=function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ht(D),!(!O.nocomment&&D.charAt(0)==="#")&&new St(D,O).match(R)},ve=ae,Ee=/^\*+([^+@!?\*\[\(]*)$/,ye=R=>D=>!D.startsWith(".")&&D.endsWith(R),Ae=R=>D=>D.endsWith(R),Fe=R=>(R=R.toLowerCase(),D=>!D.startsWith(".")&&D.toLowerCase().endsWith(R)),Ne=R=>(R=R.toLowerCase(),D=>D.toLowerCase().endsWith(R)),qe=/^\*+\.\*+$/,H=R=>!R.startsWith(".")&&R.includes("."),A=R=>R!=="."&&R!==".."&&R.includes("."),T=/^\.\*+$/,W=R=>R!=="."&&R!==".."&&R.startsWith("."),se=/^\*+$/,fe=R=>R.length!==0&&!R.startsWith("."),we=R=>R.length!==0&&R!=="."&&R!=="..",ze=/^\?+([^+@!?\*\[\(]*)?$/,Qe=R=>{let[D,O=""]=R;const j=at([D]);return O?(O=O.toLowerCase(),ee=>j(ee)&&ee.toLowerCase().endsWith(O)):j},Ye=R=>{let[D,O=""]=R;const j=ut([D]);return O?(O=O.toLowerCase(),ee=>j(ee)&&ee.toLowerCase().endsWith(O)):j},Je=R=>{let[D,O=""]=R;const j=ut([D]);return O?ee=>j(ee)&&ee.endsWith(O):j},Ve=R=>{let[D,O=""]=R;const j=at([D]);return O?ee=>j(ee)&&ee.endsWith(O):j},at=R=>{let[D]=R;const O=D.length;return j=>j.length===O&&!j.startsWith(".")},ut=R=>{let[D]=R;const O=D.length;return j=>j.length===O&&j!=="."&&j!==".."},Ct=typeof process$1=="object"&&process$1?typeof process$1.env=="object"&&process$1.env&&process$1.env.__MINIMATCH_TESTING_PLATFORM__||process$1.platform:"posix";ae.sep=Ct==="win32"?"\\":"/";const ot=Symbol("globstar **");ae.GLOBSTAR=ot;const gt={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},mt="[^/]",xt=mt+"*?",vt=R=>R.split("").reduce((D,O)=>(D[O]=!0,D),{}),Dt=vt("().*{}+?[]^$\\!"),Et=vt("[.(");ae.filter=function(R){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return O=>ae(O,R,D)};const Xe=function(R){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.assign({},R,D)};ae.defaults=R=>{if(!R||typeof R!="object"||!Object.keys(R).length)return ae;const D=ae;return Object.assign(function(O,j){return D(O,j,Xe(R,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))},{Minimatch:class extends D.Minimatch{constructor(O){super(O,Xe(R,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}))}static defaults(O){return D.defaults(Xe(R,O)).Minimatch}},unescape:function(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.unescape(O,Xe(R,j))},escape:function(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.escape(O,Xe(R,j))},filter:function(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.filter(O,Xe(R,j))},defaults:O=>D.defaults(Xe(R,O)),makeRe:function(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.makeRe(O,Xe(R,j))},braceExpand:function(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.braceExpand(O,Xe(R,j))},match:function(O,j){let ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.match(O,j,Xe(R,ee))},sep:D.sep,GLOBSTAR:ot})};const ct=function(R){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ht(R),D.nobrace||!/\{(?:(?!\{).)*\}/.test(R)?[R]:he(R)};ae.braceExpand=ct;const ht=R=>{if(typeof R!="string")throw new TypeError("invalid pattern");if(R.length>65536)throw new TypeError("pattern is too long")};ae.makeRe=function(R){return new St(R,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).makeRe()},ae.match=function(R,D){const O=new St(D,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{});return R=R.filter(j=>O.match(j)),O.options.nonull&&!R.length&&R.push(D),R};const _t=/[?*]|[+@!]\(.*?\)|\[|\]/,qt=R=>R.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class St{constructor(D){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};me(this,"options",void 0),me(this,"set",void 0),me(this,"pattern",void 0),me(this,"windowsPathsNoEscape",void 0),me(this,"nonegate",void 0),me(this,"negate",void 0),me(this,"comment",void 0),me(this,"empty",void 0),me(this,"preserveMultipleSlashes",void 0),me(this,"partial",void 0),me(this,"globSet",void 0),me(this,"globParts",void 0),me(this,"nocase",void 0),me(this,"isWindows",void 0),me(this,"platform",void 0),me(this,"windowsNoMagicRoot",void 0),me(this,"regexp",void 0),ht(D),O=O||{},this.options=O,this.pattern=D,this.platform=O.platform||Ct,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!O.windowsPathsNoEscape||O.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!O.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!O.nonegate,this.comment=!1,this.empty=!1,this.partial=!!O.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=O.windowsNoMagicRoot!==void 0?O.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const D of this.set)for(const O of D)if(typeof O!="string")return!0;return!1}debug(){}make(){const D=this.pattern,O=this.options;if(!O.nocomment&&D.charAt(0)==="#")return void(this.comment=!0);if(!D)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],O.debug&&(this.debug=function(){return console.error(...arguments)}),this.debug(this.pattern,this.globSet);const j=this.globSet.map(Z=>this.slashSplit(Z));this.globParts=this.preprocess(j),this.debug(this.pattern,this.globParts);let ee=this.globParts.map((Z,ie,ue)=>{if(this.isWindows&&this.windowsNoMagicRoot){const be=!(Z[0]!==""||Z[1]!==""||Z[2]!=="?"&&_t.test(Z[2])||_t.test(Z[3])),_e=/^[a-z]:/i.test(Z[0]);if(be)return[...Z.slice(0,4),...Z.slice(4).map(Se=>this.parse(Se))];if(_e)return[Z[0],...Z.slice(1).map(Se=>this.parse(Se))]}return Z.map(be=>this.parse(be))});if(this.debug(this.pattern,ee),this.set=ee.filter(Z=>Z.indexOf(!1)===-1),this.isWindows)for(let Z=0;Z<this.set.length;Z++){const ie=this.set[Z];ie[0]===""&&ie[1]===""&&this.globParts[Z][2]==="?"&&typeof ie[3]=="string"&&/^[a-z]:$/i.test(ie[3])&&(ie[2]="?")}this.debug(this.pattern,this.set)}preprocess(D){if(this.options.noglobstar)for(let j=0;j<D.length;j++)for(let ee=0;ee<D[j].length;ee++)D[j][ee]==="**"&&(D[j][ee]="*");const{optimizationLevel:O=1}=this.options;return O>=2?(D=this.firstPhasePreProcess(D),D=this.secondPhasePreProcess(D)):D=O>=1?this.levelOneOptimize(D):this.adjascentGlobstarOptimize(D),D}adjascentGlobstarOptimize(D){return D.map(O=>{let j=-1;for(;(j=O.indexOf("**",j+1))!==-1;){let ee=j;for(;O[ee+1]==="**";)ee++;ee!==j&&O.splice(j,ee-j)}return O})}levelOneOptimize(D){return D.map(O=>(O=O.reduce((j,ee)=>{const Z=j[j.length-1];return ee==="**"&&Z==="**"?j:ee===".."&&Z&&Z!==".."&&Z!=="."&&Z!=="**"?(j.pop(),j):(j.push(ee),j)},[])).length===0?[""]:O)}levelTwoFileOptimize(D){Array.isArray(D)||(D=this.slashSplit(D));let O=!1;do{if(O=!1,!this.preserveMultipleSlashes){for(let ee=1;ee<D.length-1;ee++){const Z=D[ee];ee===1&&Z===""&&D[0]===""||Z!=="."&&Z!==""||(O=!0,D.splice(ee,1),ee--)}D[0]!=="."||D.length!==2||D[1]!=="."&&D[1]!==""||(O=!0,D.pop())}let j=0;for(;(j=D.indexOf("..",j+1))!==-1;){const ee=D[j-1];ee&&ee!=="."&&ee!==".."&&ee!=="**"&&(O=!0,D.splice(j-1,2),j-=2)}}while(O);return D.length===0?[""]:D}firstPhasePreProcess(D){let O=!1;do{O=!1;for(let j of D){let ee=-1;for(;(ee=j.indexOf("**",ee+1))!==-1;){let ie=ee;for(;j[ie+1]==="**";)ie++;ie>ee&&j.splice(ee+1,ie-ee);let ue=j[ee+1];const be=j[ee+2],_e=j[ee+3];if(ue!==".."||!be||be==="."||be===".."||!_e||_e==="."||_e==="..")continue;O=!0,j.splice(ee,1);const Se=j.slice(0);Se[ee]="**",D.push(Se),ee--}if(!this.preserveMultipleSlashes){for(let ie=1;ie<j.length-1;ie++){const ue=j[ie];ie===1&&ue===""&&j[0]===""||ue!=="."&&ue!==""||(O=!0,j.splice(ie,1),ie--)}j[0]!=="."||j.length!==2||j[1]!=="."&&j[1]!==""||(O=!0,j.pop())}let Z=0;for(;(Z=j.indexOf("..",Z+1))!==-1;){const ie=j[Z-1];if(ie&&ie!=="."&&ie!==".."&&ie!=="**"){O=!0;const ue=Z===1&&j[Z+1]==="**"?["."]:[];j.splice(Z-1,2,...ue),j.length===0&&j.push(""),Z-=2}}}}while(O);return D}secondPhasePreProcess(D){for(let O=0;O<D.length-1;O++)for(let j=O+1;j<D.length;j++){const ee=this.partsMatch(D[O],D[j],!this.preserveMultipleSlashes);ee&&(D[O]=ee,D[j]=[])}return D.filter(O=>O.length)}partsMatch(D,O){let j=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ee=0,Z=0,ie=[],ue="";for(;ee<D.length&&Z<O.length;)if(D[ee]===O[Z])ie.push(ue==="b"?O[Z]:D[ee]),ee++,Z++;else if(j&&D[ee]==="**"&&O[Z]===D[ee+1])ie.push(D[ee]),ee++;else if(j&&O[Z]==="**"&&D[ee]===O[Z+1])ie.push(O[Z]),Z++;else if(D[ee]!=="*"||!O[Z]||!this.options.dot&&O[Z].startsWith(".")||O[Z]==="**"){if(O[Z]!=="*"||!D[ee]||!this.options.dot&&D[ee].startsWith(".")||D[ee]==="**"||ue==="a")return!1;ue="b",ie.push(O[Z]),ee++,Z++}else{if(ue==="b")return!1;ue="a",ie.push(D[ee]),ee++,Z++}return D.length===O.length&&ie}parseNegate(){if(this.nonegate)return;const D=this.pattern;let O=!1,j=0;for(let ee=0;ee<D.length&&D.charAt(ee)==="!";ee++)O=!O,j++;j&&(this.pattern=D.slice(j)),this.negate=O}matchOne(D,O){let j=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const ee=this.options;if(this.isWindows){const Be=D[0]===""&&D[1]===""&&D[2]==="?"&&typeof D[3]=="string"&&/^[a-z]:$/i.test(D[3]),De=O[0]===""&&O[1]===""&&O[2]==="?"&&typeof O[3]=="string"&&/^[a-z]:$/i.test(O[3]);if(Be&&De){const He=D[3],We=O[3];He.toLowerCase()===We.toLowerCase()&&(D[3]=We)}else if(De&&typeof D[0]=="string"){const He=O[3],We=D[0];He.toLowerCase()===We.toLowerCase()&&(O[3]=We,O=O.slice(3))}else if(Be&&typeof O[0]=="string"){const He=D[3];He.toLowerCase()===O[0].toLowerCase()&&(O[0]=He,D=D.slice(3))}}const{optimizationLevel:Z=1}=this.options;Z>=2&&(D=this.levelTwoFileOptimize(D)),this.debug("matchOne",this,{file:D,pattern:O}),this.debug("matchOne",D.length,O.length);for(var ie=0,ue=0,be=D.length,_e=O.length;ie<be&&ue<_e;ie++,ue++){this.debug("matchOne loop");var Se=O[ue],Re=D[ie];if(this.debug(O,Se,Re),Se===!1)return!1;if(Se===ot){this.debug("GLOBSTAR",[O,Se,Re]);var je=ie,Ze=ue+1;if(Ze===_e){for(this.debug("** at the end");ie<be;ie++)if(D[ie]==="."||D[ie]===".."||!ee.dot&&D[ie].charAt(0)===".")return!1;return!0}for(;je<be;){var Me=D[je];if(this.debug(`
globstar while`,D,je,O,Ze,Me),this.matchOne(D.slice(je),O.slice(Ze),j))return this.debug("globstar found match!",je,be,Me),!0;if(Me==="."||Me===".."||!ee.dot&&Me.charAt(0)==="."){this.debug("dot detected!",D,je,O,Ze);break}this.debug("globstar swallow a segment, and continue"),je++}return!(!j||(this.debug(`
>>> no match, partial?`,D,je,O,Ze),je!==be))}let Be;if(typeof Se=="string"?(Be=Re===Se,this.debug("string match",Se,Re,Be)):(Be=Se.test(Re),this.debug("pattern match",Se,Re,Be)),!Be)return!1}if(ie===be&&ue===_e)return!0;if(ie===be)return j;if(ue===_e)return ie===be-1&&D[ie]==="";throw new Error("wtf?")}braceExpand(){return ct(this.pattern,this.options)}parse(D){ht(D);const O=this.options;if(D==="**")return ot;if(D==="")return"";let j,ee=null;(j=D.match(se))?ee=O.dot?we:fe:(j=D.match(Ee))?ee=(O.nocase?O.dot?Ne:Fe:O.dot?Ae:ye)(j[1]):(j=D.match(ze))?ee=(O.nocase?O.dot?Ye:Qe:O.dot?Je:Ve)(j):(j=D.match(qe))?ee=O.dot?A:H:(j=D.match(T))&&(ee=W);let Z="",ie=!1,ue=!1;const be=[],_e=[];let Se,Re=!1,je=!1,Ze=D.charAt(0)===".",Me=O.dot||Ze;const Be=$e=>$e.charAt(0)==="."?"":O.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",De=()=>{if(Re){switch(Re){case"*":Z+=xt,ie=!0;break;case"?":Z+=mt,ie=!0;break;default:Z+="\\"+Re}this.debug("clearStateChar %j %j",Re,Z),Re=!1}};for(let $e,Ge=0;Ge<D.length&&($e=D.charAt(Ge));Ge++)if(this.debug("%s	%s %s %j",D,Ge,Z,$e),ue){if($e==="/")return!1;Dt[$e]&&(Z+="\\"),Z+=$e,ue=!1}else switch($e){case"/":return!1;case"\\":De(),ue=!0;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",D,Ge,Z,$e),this.debug("call clearStateChar %j",Re),De(),Re=$e,O.noext&&De();continue;case"(":{if(!Re){Z+="\\(";continue}const et={type:Re,start:Ge-1,reStart:Z.length,open:gt[Re].open,close:gt[Re].close};this.debug(this.pattern,"	",et),be.push(et),Z+=et.open,et.start===0&&et.type!=="!"&&(Ze=!0,Z+=Be(D.slice(Ge+1))),this.debug("plType %j %j",Re,Z),Re=!1;continue}case")":{const et=be[be.length-1];if(!et){Z+="\\)";continue}be.pop(),De(),ie=!0,Se=et,Z+=Se.close,Se.type==="!"&&_e.push(Object.assign(Se,{reEnd:Z.length}));continue}case"|":{const et=be[be.length-1];if(!et){Z+="\\|";continue}De(),Z+="|",et.start===0&&et.type!=="!"&&(Ze=!0,Z+=Be(D.slice(Ge+1)));continue}case"[":De();const[it,rt,nt,wt]=Ce(D,Ge);nt?(Z+=it,je=je||rt,Ge+=nt-1,ie=ie||wt):Z+="\\[";continue;case"]":Z+="\\"+$e;continue;default:De(),Z+=qt($e)}for(Se=be.pop();Se;Se=be.pop()){let $e;$e=Z.slice(Se.reStart+Se.open.length),this.debug(this.pattern,"setting tail",Z,Se),$e=$e.replace(/((?:\\{2}){0,64})(\\?)\|/g,(it,rt,nt)=>(nt||(nt="\\"),rt+rt+nt+"|")),this.debug(`tail=%j
   %s`,$e,$e,Se,Z);const Ge=Se.type==="*"?xt:Se.type==="?"?mt:"\\"+Se.type;ie=!0,Z=Z.slice(0,Se.reStart)+Ge+"\\("+$e}De(),ue&&(Z+="\\\\");const He=Et[Z.charAt(0)];for(let $e=_e.length-1;$e>-1;$e--){const Ge=_e[$e],it=Z.slice(0,Ge.reStart),rt=Z.slice(Ge.reStart,Ge.reEnd-8);let nt=Z.slice(Ge.reEnd);const wt=Z.slice(Ge.reEnd-8,Ge.reEnd)+nt,et=it.split(")").length,Tr=it.split("(").length-et;let jt=nt;for(let rr=0;rr<Tr;rr++)jt=jt.replace(/\)[+*?]?/,"");nt=jt,Z=it+rt+nt+(nt===""?"(?:$|\\/)":"")+wt}if(Z!==""&&ie&&(Z="(?=.)"+Z),He&&(Z=(Ze?"":Me?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)")+Z),!O.nocase||ie||O.nocaseMagicOnly||(ie=D.toUpperCase()!==D.toLowerCase()),!ie)return Z.replace(/\\(.)/g,"$1");const We=(O.nocase?"i":"")+(je?"u":"");try{const $e=ee?{_glob:D,_src:Z,test:ee}:{_glob:D,_src:Z};return Object.assign(new RegExp("^"+Z+"$",We),$e)}catch($e){return this.debug("invalid regexp",$e),new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const D=this.set;if(!D.length)return this.regexp=!1,this.regexp;const O=this.options,j=O.noglobstar?xt:O.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",ee=O.nocase?"i":"";let Z=D.map(ie=>{const ue=ie.map(be=>typeof be=="string"?qt(be):be===ot?ot:be._src);return ue.forEach((be,_e)=>{const Se=ue[_e+1],Re=ue[_e-1];be===ot&&Re!==ot&&(Re===void 0?Se!==void 0&&Se!==ot?ue[_e+1]="(?:\\/|"+j+"\\/)?"+Se:ue[_e]=j:Se===void 0?ue[_e-1]=Re+"(?:\\/|"+j+")?":Se!==ot&&(ue[_e-1]=Re+"(?:\\/|\\/"+j+"\\/)"+Se,ue[_e+1]=ot))}),ue.filter(be=>be!==ot).join("/")}).join("|");Z="^(?:"+Z+")$",this.negate&&(Z="^(?!"+Z+").*$");try{this.regexp=new RegExp(Z,ee)}catch{this.regexp=!1}return this.regexp}slashSplit(D){return this.preserveMultipleSlashes?D.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(D)?["",...D.split(/\/+/)]:D.split(/\/+/)}match(D){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.partial;if(this.debug("match",D,this.pattern),this.comment)return!1;if(this.empty)return D==="";if(D==="/"&&O)return!0;const j=this.options;this.isWindows&&(D=D.split("\\").join("/"));const ee=this.slashSplit(D);this.debug(this.pattern,"split",ee);const Z=this.set;this.debug(this.pattern,"set",Z);let ie=ee[ee.length-1];if(!ie)for(let ue=ee.length-2;!ie&&ue>=0;ue--)ie=ee[ue];for(let ue=0;ue<Z.length;ue++){const be=Z[ue];let _e=ee;if(j.matchBase&&be.length===1&&(_e=[ie]),this.matchOne(_e,be,O))return!!j.flipNegate||!this.negate}return!j.flipNegate&&this.negate}static defaults(D){return ae.defaults(D).Minimatch}}function Pt(R){const D=new Error("".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"","Invalid response: ").concat(R.status," ").concat(R.statusText));return D.status=R.status,D.response=R,D}function tt(R,D){const{status:O}=D;if(O===401&&R.digest)return D;if(O>=400)throw Pt(D);return D}function ft(R,D){return arguments.length>2&&arguments[2]!==void 0&&arguments[2]?{data:D,headers:R.headers?ce(R.headers):{},status:R.status,statusText:R.statusText}:D}ae.Minimatch=St,ae.escape=function(R){let{windowsPathsNoEscape:D=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D?R.replace(/[?*()[\]]/g,"[$&]"):R.replace(/[?*()[\]\\]/g,"\\$&")},ae.unescape=function(R){let{windowsPathsNoEscape:D=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D?R.replace(/\[([^\/\\])\]/g,"$1"):R.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};const nr=(zt=function(R,D,O){let j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ee=I({url:y(R.remoteURL,m(D)),method:"COPY",headers:{Destination:y(R.remoteURL,m(O)),Overwrite:j.overwrite===!1?"F":"T",Depth:j.shallow?"0":"infinity"}},R,j);return ie=function(ue){tt(R,ue)},(Z=Ie(ee,R))&&Z.then||(Z=Promise.resolve(Z)),ie?Z.then(ie):Z;var Z,ie},function(){for(var R=[],D=0;D<arguments.length;D++)R[D]=arguments[D];try{return Promise.resolve(zt.apply(this,R))}catch(O){return Promise.reject(O)}});var zt,Ft=n(635),ir=n(829),lt=n.n(ir),dt=function(R){return R.Array="array",R.Object="object",R.Original="original",R}(dt||{});function kt(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dt.Original;const j=lt().get(R,D);return O==="array"&&Array.isArray(j)===!1?[j]:O==="object"&&Array.isArray(j)?j[0]:j}function yt(R){return new Promise(D=>{D(function(O){const{multistatus:j}=O;if(j==="")return{multistatus:{response:[]}};if(!j)throw new Error("Invalid response: No root multistatus found");const ee={multistatus:Array.isArray(j)?j[0]:j};return lt().set(ee,"multistatus.response",kt(ee,"multistatus.response",dt.Array)),lt().set(ee,"multistatus.response",lt().get(ee,"multistatus.response").map(Z=>function(ie){const ue=Object.assign({},ie);return ue.status?lt().set(ue,"status",kt(ue,"status",dt.Object)):(lt().set(ue,"propstat",kt(ue,"propstat",dt.Object)),lt().set(ue,"propstat.prop",kt(ue,"propstat.prop",dt.Object))),ue}(Z))),ee}(new Ft.XMLParser({removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1}}).parse(R)))})}function At(R,D){let O=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const{getlastmodified:j=null,getcontentlength:ee="0",resourcetype:Z=null,getcontenttype:ie=null,getetag:ue=null}=R,be=Z&&typeof Z=="object"&&Z.collection!==void 0?"directory":"file",_e={filename:D,basename:d().basename(D),lastmod:j,size:parseInt(ee,10),type:be,etag:typeof ue=="string"?ue.replace(/"/g,""):null};return be==="file"&&(_e.mime=ie&&typeof ie=="string"?ie.split(";")[0]:""),O&&(_e.props=R),_e}function Ht(R,D){let O=arguments.length>2&&arguments[2]!==void 0&&arguments[2],j=null;try{R.multistatus.response[0].propstat&&(j=R.multistatus.response[0])}catch{}if(!j)throw new Error("Failed getting item stat: bad response");const{propstat:{prop:ee,status:Z}}=j,[ie,ue,be]=Z.split(" ",3),_e=parseInt(ue,10);if(_e>=400){const Se=new Error("Invalid response: ".concat(_e," ").concat(be));throw Se.status=_e,Se}return At(ee,b(D),O)}function Kt(R){switch(R.toString()){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(R,10)}}function Tt(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}const Rt=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:j=!1}=O,ee=I({url:y(R.remoteURL,m(D)),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},R,O);return Tt(Ie(ee,R),function(Z){return tt(R,Z),Tt(Z.text(),function(ie){return Tt(yt(ie),function(ue){const be=Ht(ue,D,j);return ft(Z,be,j)})})})});function Wt(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}const sr=Gt(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const j=function(Z){if(!Z||Z==="/")return[];let ie=Z;const ue=[];do ue.push(ie),ie=d().dirname(ie);while(ie&&ie!=="/");return ue}(b(D));j.sort((Z,ie)=>Z.length>ie.length?1:ie.length>Z.length?-1:0);let ee=!1;return function(Z,ie,ue){if(typeof Z[Zt]=="function"){let Be=function(De){try{for(;!(be=Re.next()).done;)if((De=ie(be.value))&&De.then){if(!Yt(De))return void De.then(Be,Se||(Se=st.bind(null,_e=new pt,2)));De=De.v}_e?st(_e,1,De):_e=De}catch(He){st(_e||(_e=new pt),2,He)}};var be,_e,Se,Re=Z[Zt]();if(Be(),Re.return){var je=function(De){try{be.done||Re.return()}catch{}return De};if(_e&&_e.then)return _e.then(je,function(De){throw je(De)});je()}return _e}if(!("length"in Z))throw new TypeError("Object is not iterable");for(var Ze=[],Me=0;Me<Z.length;Me++)Ze.push(Z[Me]);return function(Be,De,He){var We,$e,Ge=-1;return function it(rt){try{for(;++Ge<Be.length&&(!He||!He());)if((rt=De(Ge))&&rt.then){if(!Yt(rt))return void rt.then(it,$e||($e=st.bind(null,We=new pt,2)));rt=rt.v}We?st(We,1,rt):We=rt}catch(nt){st(We||(We=new pt),2,nt)}}(),We}(Ze,function(Be){return ie(Ze[Be])},ue)}(j,function(Z){return ie=function(){return function(be,_e){try{var Se=Wt(Rt(R,Z),function(Re){if(Re.type!=="directory")throw new Error("Path includes a file: ".concat(D))})}catch(Re){return _e(Re)}return Se&&Se.then?Se.then(void 0,_e):Se}(0,function(be){const _e=be;return function(){if(_e.status===404)return ee=!0,Vt(Ot(R,Z,{...O,recursive:!1}));throw be}()})},(ue=function(){if(ee)return Vt(Ot(R,Z,{...O,recursive:!1}))}())&&ue.then?ue.then(ie):ie();var ie,ue},function(){return!1})});function Gt(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}function or(){}function Vt(R,D){if(!D)return R&&R.then?R.then(or):Promise.resolve()}const Zt=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function st(R,D,O){if(!R.s){if(O instanceof pt){if(!O.s)return void(O.o=st.bind(null,R,D));1&D&&(D=O.s),O=O.v}if(O&&O.then)return void O.then(st.bind(null,R,D),st.bind(null,R,2));R.s=D,R.v=O;const j=R.o;j&&j(R)}}const pt=function(){function R(){}return R.prototype.then=function(D,O){const j=new R,ee=this.s;if(ee){const Z=1&ee?D:O;if(Z){try{st(j,1,Z(this.v))}catch(ie){st(j,2,ie)}return j}return this}return this.o=function(Z){try{const ie=Z.v;1&Z.s?st(j,1,D?D(ie):ie):O?st(j,1,O(ie)):st(j,2,ie)}catch(ie){st(j,2,ie)}},j},R}();function Yt(R){return R instanceof pt&&1&R.s}const Ot=Gt(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(O.recursive===!0)return sr(R,D,O);const j=I({url:y(R.remoteURL,(ee=m(D),ee.endsWith("/")?ee:ee+"/")),method:"MKCOL"},R,O);var ee;return Wt(Ie(j,R),function(Z){tt(R,Z)})});var ar=n(388),Qt=n.n(ar);const cr=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const j={};if(typeof O.range=="object"&&typeof O.range.start=="number"){let ue="bytes=".concat(O.range.start,"-");typeof O.range.end=="number"&&(ue="".concat(ue).concat(O.range.end)),j.Range=ue}const ee=I({url:y(R.remoteURL,m(D)),method:"GET",headers:j},R,O);return ie=function(ue){if(tt(R,ue),j.Range&&ue.status!==206){const be=new Error("Invalid response code for partial request: ".concat(ue.status));throw be.status=ue.status,be}return O.callback&&setTimeout(()=>{O.callback(ue)},0),ue.body},(Z=Ie(ee,R))&&Z.then||(Z=Promise.resolve(Z)),ie?Z.then(ie):Z;var Z,ie}),ur=()=>{},lr=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D,O){O.url||(O.url=y(R.remoteURL,m(D)));const j=I(O,R,{});return Z=function(ie){return tt(R,ie),ie},(ee=Ie(j,R))&&ee.then||(ee=Promise.resolve(ee)),Z?ee.then(Z):ee;var ee,Z}),hr=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const j=I({url:y(R.remoteURL,m(D)),method:"DELETE"},R,O);return Z=function(ie){tt(R,ie)},(ee=Ie(j,R))&&ee.then||(ee=Promise.resolve(ee)),Z?ee.then(Z):ee;var ee,Z}),fr=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function(j,ee){try{var Z=(ie=Rt(R,D,O),ue=function(){return!0},be?ue?ue(ie):ie:(ie&&ie.then||(ie=Promise.resolve(ie)),ue?ie.then(ue):ie))}catch(_e){return ee(_e)}var ie,ue,be;return Z&&Z.then?Z.then(void 0,ee):Z}(0,function(j){if(j.status===404)return!1;throw j})});function It(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}const dr=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const j=I({url:y(R.remoteURL,m(D),"/"),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:O.deep?"infinity":"1"}},R,O);return It(Ie(j,R),function(ee){return tt(R,ee),It(ee.text(),function(Z){if(!Z)throw new Error("Failed parsing directory contents: Empty response");return It(yt(Z),function(ie){const ue=g(D);let be=function(_e,Se,Re){let je=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Ze=arguments.length>4&&arguments[4]!==void 0&&arguments[4];const Me=d().join(Se,"/"),{multistatus:{response:Be}}=_e,De=Be.map(He=>{const We=function(Ge){try{return Ge.replace(/^https?:\/\/[^\/]+/,"")}catch(it){throw new l(it,"Failed normalising HREF")}}(He.href),{propstat:{prop:$e}}=He;return At($e,Me==="/"?decodeURIComponent(b(We)):b(d().relative(decodeURIComponent(Me),decodeURIComponent(We))),je)});return Ze?De:De.filter(He=>He.basename&&(He.type==="file"||He.filename!==Re.replace(/\/$/,"")))}(ie,g(R.remoteBasePath||R.remotePath),ue,O.details,O.includeSelf);return O.glob&&(be=function(_e,Se){return _e.filter(Re=>ve(Re.filename,Se,{matchBase:!0}))}(be,O.glob)),ft(ee,be,O.details)})})})});function Lt(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}const pr=Lt(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const j=I({url:y(R.remoteURL,m(D)),method:"GET",headers:{Accept:"text/plain"},transformResponse:[xr]},R,O);return Bt(Ie(j,R),function(ee){return tt(R,ee),Bt(ee.text(),function(Z){return ft(ee,Z,O.details)})})});function Bt(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}const gr=Lt(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const j=I({url:y(R.remoteURL,m(D)),method:"GET"},R,O);return Bt(Ie(j,R),function(ee){let Z;return tt(R,ee),function(ie,ue){var be=ie();return be&&be.then?be.then(ue):ue()}(function(){return Bt(ee.arrayBuffer(),function(ie){Z=ie})},function(){return ft(ee,Z,O.details)})})}),mr=Lt(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{format:j="binary"}=O;if(j!=="binary"&&j!=="text")throw new l({info:{code:N.InvalidOutputFormat}},"Invalid output format: ".concat(j));return j==="text"?pr(R,D,O):gr(R,D,O)}),xr=R=>R;function vr(R){return new Ft.XMLBuilder({attributeNamePrefix:"@_",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build(Jt({lockinfo:{"@_xmlns:d":"DAV:",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:R}}},"d"))}function Jt(R,D){const O={...R};for(const j in O)O.hasOwnProperty(j)&&(O[j]&&typeof O[j]=="object"&&j.indexOf(":")===-1?(O["".concat(D,":").concat(j)]=Jt(O[j],D),delete O[j]):/^@_/.test(j)===!1&&(O["".concat(D,":").concat(j)]=O[j],delete O[j]));return O}function Ut(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}function Xt(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}const yr=Xt(function(R,D,O){let j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ee=I({url:y(R.remoteURL,m(D)),method:"UNLOCK",headers:{"Lock-Token":O}},R,j);return Ut(Ie(ee,R),function(Z){if(tt(R,Z),Z.status!==204&&Z.status!==200)throw Pt(Z)})}),br=Xt(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{refreshToken:j,timeout:ee=wr}=O,Z={Accept:"text/plain,application/xml",Timeout:ee};j&&(Z.If=j);const ie=I({url:y(R.remoteURL,m(D)),method:"LOCK",headers:Z,data:vr(R.contactHref)},R,O);return Ut(Ie(ie,R),function(ue){return tt(R,ue),Ut(ue.text(),function(be){const _e=(je=be,new Ft.XMLParser({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(je)),Se=lt().get(_e,"prop.lockdiscovery.activelock.locktoken.href"),Re=lt().get(_e,"prop.lockdiscovery.activelock.timeout");var je;if(!Se)throw Pt(ue,"No lock token received: ");return{token:Se,serverTimeout:Re}})})}),wr="Infinite, Second-4100000000";function Nt(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}const Cr=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const O=D.path||"/",j=I({url:y(R.remoteURL,O),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},R,D);return Nt(Ie(j,R),function(ee){return tt(R,ee),Nt(ee.text(),function(Z){return Nt(yt(Z),function(ie){const ue=function(be){try{const[_e]=be.multistatus.response,{propstat:{prop:{"quota-used-bytes":Se,"quota-available-bytes":Re}}}=_e;return Se!==void 0&&Re!==void 0?{used:parseInt(Se,10),available:Kt(Re)}:null}catch{}return null}(ie);return ft(ee,ue,D.details)})})})});function Mt(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}const Er=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:j=!1}=O,ee=I({url:y(R.remoteURL,m(D)),method:"SEARCH",headers:{Accept:"text/plain,application/xml","Content-Type":R.headers["Content-Type"]||"application/xml; charset=utf-8"}},R,O);return Mt(Ie(ee,R),function(Z){return tt(R,Z),Mt(Z.text(),function(ie){return Mt(yt(ie),function(ue){const be=function(_e,Se,Re){const je={truncated:!1,results:[]};return je.truncated=_e.multistatus.response.some(Ze=>{var Me,Be;return((Me=(Ze.status||((Be=Ze.propstat)===null||Be===void 0?void 0:Be.status)).split(" ",3))===null||Me===void 0?void 0:Me[1])==="507"&&Ze.href.replace(/\/$/,"").endsWith(m(Se).replace(/\/$/,""))}),_e.multistatus.response.forEach(Ze=>{if(Ze.propstat===void 0)return;const Me=Ze.href.split("/").map(decodeURIComponent).join("/");je.results.push(At(Ze.propstat.prop,Me,Re))}),je}(ue,D,j);return ft(Z,be,j)})})})}),_r=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D,O){let j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const ee=I({url:y(R.remoteURL,m(D)),method:"MOVE",headers:{Destination:y(R.remoteURL,m(O)),Overwrite:j.overwrite===!1?"F":"T"}},R,j);return ie=function(ue){tt(R,ue)},(Z=Ie(ee,R))&&Z.then||(Z=Promise.resolve(Z)),ie?Z.then(ie):Z;var Z,ie});var Sr=n(172);const kr=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D,O){let j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const{contentLength:ee=!0,overwrite:Z=!0}=j,ie={"Content-Type":"application/octet-stream"};ee===!1||(ie["Content-Length"]="".concat(typeof ee=="number"?ee:function(Se){if(Oe(Se))return Se.byteLength;if(ke(Se))return Se.length;if(typeof Se=="string")return(0,Sr.d)(Se);throw new l({info:{code:N.DataTypeNoLength}},"Cannot calculate data length: Invalid type")}(O))),Z||(ie["If-None-Match"]="*");const ue=I({url:y(R.remoteURL,m(D)),method:"PUT",headers:ie,data:O},R,j);return _e=function(Se){try{tt(R,Se)}catch(Re){const je=Re;if(je.status!==412||Z)throw je;return!1}return!0},(be=Ie(ue,R))&&be.then||(be=Promise.resolve(be)),_e?be.then(_e):be;var be,_e}),er=function(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}(function(R,D){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const j=I({url:y(R.remoteURL,m(D)),method:"OPTIONS"},R,O);return Z=function(ie){var ue,be;try{tt(R,ie)}catch(_e){throw _e}return{compliance:((ue=ie.headers.get("DAV"))!==null&&ue!==void 0?ue:"").split(",").map(_e=>_e.trim()),server:(be=ie.headers.get("Server"))!==null&&be!==void 0?be:""}},(ee=Ie(j,R))&&ee.then||(ee=Promise.resolve(ee)),Z?ee.then(Z):ee;var ee,Z});function bt(R,D,O){return O?D?D(R):R:(R&&R.then||(R=Promise.resolve(R)),D?R.then(D):R)}const Ar=$t(function(R,D,O,j,ee){let Z=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(O>j||O<0)throw new l({info:{code:N.InvalidUpdateRange}},"Invalid update range ".concat(O," for partial update"));const ie={"Content-Type":"application/octet-stream","Content-Length":"".concat(j-O+1),"Content-Range":"bytes ".concat(O,"-").concat(j,"/*")},ue=I({url:y(R.remoteURL,m(D)),method:"PUT",headers:ie,data:ee},R,Z);return bt(Ie(ue,R),function(be){tt(R,be)})});function tr(R,D){var O=R();return O&&O.then?O.then(D):D(O)}const Br=$t(function(R,D,O,j,ee){let Z=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(O>j||O<0)throw new l({info:{code:N.InvalidUpdateRange}},"Invalid update range ".concat(O," for partial update"));const ie={"Content-Type":"application/x-sabredav-partialupdate","Content-Length":"".concat(j-O+1),"X-Update-Range":"bytes=".concat(O,"-").concat(j)},ue=I({url:y(R.remoteURL,m(D)),method:"PATCH",headers:ie,data:ee},R,Z);return bt(Ie(ue,R),function(be){tt(R,be)})});function $t(R){return function(){for(var D=[],O=0;O<arguments.length;O++)D[O]=arguments[O];try{return Promise.resolve(R.apply(this,D))}catch(j){return Promise.reject(j)}}}const Dr=$t(function(R,D,O,j,ee){let Z=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};return bt(er(R,D,Z),function(ie){let ue=!1;return tr(function(){if(ie.compliance.includes("sabredav-partialupdate"))return bt(Br(R,D,O,j,ee,Z),function(be){return ue=!0,be})},function(be){let _e=!1;return ue?be:tr(function(){if(ie.server.includes("Apache")&&ie.compliance.includes("<http://apache.org/dav/propset/fs/1>"))return bt(Ar(R,D,O,j,ee,Z),function(Se){return _e=!0,Se})},function(Se){if(_e)return Se;throw new l({info:{code:N.NotSupported}},"Not supported")})})})}),Pr="https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md";function Fr(R){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{authType:O=null,remoteBasePath:j,contactHref:ee=Pr,ha1:Z,headers:ie={},httpAgent:ue,httpsAgent:be,password:_e,token:Se,username:Re,withCredentials:je}=D;let Ze=O;Ze||(Ze=Re||_e?G.Password:G.None);const Me={authType:Ze,remoteBasePath:j,contactHref:ee,ha1:Z,headers:Object.assign({},ie),httpAgent:ue,httpsAgent:be,password:_e,remotePath:v(R),remoteURL:R,token:Se,username:Re,withCredentials:je};return M(Me,Re,_e,Se,Z),{copyFile:(Be,De,He)=>nr(Me,Be,De,He),createDirectory:(Be,De)=>Ot(Me,Be,De),createReadStream:(Be,De)=>function(He,We){let $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Ge=new(Qt()).PassThrough;return cr(He,We,$e).then(it=>{it.pipe(Ge)}).catch(it=>{Ge.emit("error",it)}),Ge}(Me,Be,De),createWriteStream:(Be,De,He)=>function(We,$e){let Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ur;const rt=new(Qt()).PassThrough,nt={};Ge.overwrite===!1&&(nt["If-None-Match"]="*");const wt=I({url:y(We.remoteURL,m($e)),method:"PUT",headers:nt,data:rt,maxRedirects:0},We,Ge);return Ie(wt,We).then(et=>tt(We,et)).then(et=>{setTimeout(()=>{it(et)},0)}).catch(et=>{rt.emit("error",et)}),rt}(Me,Be,De,He),customRequest:(Be,De)=>lr(Me,Be,De),deleteFile:(Be,De)=>hr(Me,Be,De),exists:(Be,De)=>fr(Me,Be,De),getDirectoryContents:(Be,De)=>dr(Me,Be,De),getFileContents:(Be,De)=>mr(Me,Be,De),getFileDownloadLink:Be=>function(De,He){let We=y(De.remoteURL,m(He));const $e=/^https:/i.test(We)?"https":"http";switch(De.authType){case G.None:break;case G.Password:{const Ge=P(De.headers.Authorization.replace(/^Basic /i,"").trim());We=We.replace(/^https?:\/\//,"".concat($e,"://").concat(Ge,"@"));break}default:throw new l({info:{code:N.LinkUnsupportedAuthType}},"Unsupported auth type for file link: ".concat(De.authType))}return We}(Me,Be),getFileUploadLink:Be=>function(De,He){let We="".concat(y(De.remoteURL,m(He)),"?Content-Type=application/octet-stream");const $e=/^https:/i.test(We)?"https":"http";switch(De.authType){case G.None:break;case G.Password:{const Ge=P(De.headers.Authorization.replace(/^Basic /i,"").trim());We=We.replace(/^https?:\/\//,"".concat($e,"://").concat(Ge,"@"));break}default:throw new l({info:{code:N.LinkUnsupportedAuthType}},"Unsupported auth type for file link: ".concat(De.authType))}return We}(Me,Be),getHeaders:()=>Object.assign({},Me.headers),getQuota:Be=>Cr(Me,Be),lock:(Be,De)=>br(Me,Be,De),moveFile:(Be,De,He)=>_r(Me,Be,De,He),putFileContents:(Be,De,He)=>kr(Me,Be,De,He),partialUpdateFileContents:(Be,De,He,We,$e)=>Dr(Me,Be,De,He,We,$e),getDAVCompliance:Be=>er(Me,Be),search:(Be,De)=>Er(Me,Be,De),setHeaders:Be=>{Me.headers=Object.assign({},Be)},stat:(Be,De)=>Rt(Me,Be,De),unlock:(Be,De,He)=>yr(Me,Be,De,He)}}})();var o=r.hT;r.O4,r.Kd,r.YK;var c=r.UU;r.Gu,r.ky,r.h4,r.ch,r.hq,r.i5;class WebDAV{constructor(s){this.options=s,this.initServer()}initServer(){this.service=c(this.options.address,{authType:this.options.digest?o.Digest:o.Password,username:this.options.loginName,password:this.options.loginPwd})}list(s={}){return new Promise((a,u)=>{this.service.getDirectoryContents("/",{glob:"*.zip"}).then(l=>{console.log(l);let h=[],d=s.orderMode||EResourceOrderMode.desc;l&&l.length>0&&l.forEach(p=>{h.push({name:p.basename,size:p.size,type:p.type,time:new Date(p.lastmod).getTime()})}),a(h.sort((p,x)=>{let m,g;switch(s.orderBy){case EResourceOrderBy.name:m=p.name,g=x.name;break;case EResourceOrderBy.size:m=p.size,g=x.size;break;default:m=p.time,g=x.time;break}return d===EResourceOrderMode.desc?m.toString().localeCompare(g)==1?-1:1:m.toString().localeCompare(g)}))}).catch(l=>{u(l)})})}get(s){return new Promise((a,u)=>{this.service.getFileContents("/"+s).then(l=>{a(l)}).catch(l=>{u(l)})})}add(s){return new Promise((a,u)=>{s.get("data").arrayBuffer().then(l=>{this.service.putFileContents(s.get("name"),l).then(h=>{console.log(h),h?a(!0):u(!1)}).catch(h=>{console.log(h),u(h)})})})}delete(s){return new Promise((a,u)=>{this.service.deleteFile("/"+s).then(l=>{l?a(l.data):u(!1)}).catch(l=>{u(l)})})}ping(){return new Promise((s,a)=>{this.service.getDirectoryContents("/").then(()=>{s(!0)}).catch(u=>{a(u)})})}}var buffer={},base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i$1=0,len=code.length;i$1<len;++i$1)lookup$1[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup[45]=62,revLookup[95]=63;function getLens(f){var s=f.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=f.indexOf("=");a===-1&&(a=s);var u=a===s?0:4-a%4;return[a,u]}function byteLength(f){var s=getLens(f),a=s[0],u=s[1];return(a+u)*3/4-u}function _byteLength(f,s,a){return(s+a)*3/4-a}function toByteArray(f){var s,a=getLens(f),u=a[0],l=a[1],h=new Arr(_byteLength(f,u,l)),d=0,p=l>0?u-4:u,x;for(x=0;x<p;x+=4)s=revLookup[f.charCodeAt(x)]<<18|revLookup[f.charCodeAt(x+1)]<<12|revLookup[f.charCodeAt(x+2)]<<6|revLookup[f.charCodeAt(x+3)],h[d++]=s>>16&255,h[d++]=s>>8&255,h[d++]=s&255;return l===2&&(s=revLookup[f.charCodeAt(x)]<<2|revLookup[f.charCodeAt(x+1)]>>4,h[d++]=s&255),l===1&&(s=revLookup[f.charCodeAt(x)]<<10|revLookup[f.charCodeAt(x+1)]<<4|revLookup[f.charCodeAt(x+2)]>>2,h[d++]=s>>8&255,h[d++]=s&255),h}function tripletToBase64(f){return lookup$1[f>>18&63]+lookup$1[f>>12&63]+lookup$1[f>>6&63]+lookup$1[f&63]}function encodeChunk(f,s,a){for(var u,l=[],h=s;h<a;h+=3)u=(f[h]<<16&16711680)+(f[h+1]<<8&65280)+(f[h+2]&255),l.push(tripletToBase64(u));return l.join("")}function fromByteArray(f){for(var s,a=f.length,u=a%3,l=[],h=16383,d=0,p=a-u;d<p;d+=h)l.push(encodeChunk(f,d,d+h>p?p:d+h));return u===1?(s=f[a-1],l.push(lookup$1[s>>2]+lookup$1[s<<4&63]+"==")):u===2&&(s=(f[a-2]<<8)+f[a-1],l.push(lookup$1[s>>10]+lookup$1[s>>4&63]+lookup$1[s<<2&63]+"=")),l.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(f,s,a,u,l){var h,d,p=l*8-u-1,x=(1<<p)-1,m=x>>1,g=-7,b=a?l-1:0,v=a?-1:1,y=f[s+b];for(b+=v,h=y&(1<<-g)-1,y>>=-g,g+=p;g>0;h=h*256+f[s+b],b+=v,g-=8);for(d=h&(1<<-g)-1,h>>=-g,g+=u;g>0;d=d*256+f[s+b],b+=v,g-=8);if(h===0)h=1-m;else{if(h===x)return d?NaN:(y?-1:1)*(1/0);d=d+Math.pow(2,u),h=h-m}return(y?-1:1)*d*Math.pow(2,h-u)},ieee754.write=function(f,s,a,u,l,h){var d,p,x,m=h*8-l-1,g=(1<<m)-1,b=g>>1,v=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=u?0:h-1,C=u?1:-1,w=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(p=isNaN(s)?1:0,d=g):(d=Math.floor(Math.log(s)/Math.LN2),s*(x=Math.pow(2,-d))<1&&(d--,x*=2),d+b>=1?s+=v/x:s+=v*Math.pow(2,1-b),s*x>=2&&(d++,x/=2),d+b>=g?(p=0,d=g):d+b>=1?(p=(s*x-1)*Math.pow(2,l),d=d+b):(p=s*Math.pow(2,b-1)*Math.pow(2,l),d=0));l>=8;f[a+y]=p&255,y+=C,p/=256,l-=8);for(d=d<<l|p,m+=l;m>0;f[a+y]=d&255,y+=C,d/=256,m-=8);f[a+y-C]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(f){const s=base64Js,a=ieee754,u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;f.Buffer=g,f.SlowBuffer=P,f.INSPECT_MAX_BYTES=50;const l=2147483647;f.kMaxLength=l;const{Uint8Array:h,ArrayBuffer:d,SharedArrayBuffer:p}=globalThis;g.TYPED_ARRAY_SUPPORT=x(),!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function x(){try{const H=new h(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,h.prototype),Object.setPrototypeOf(H,A),H.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});function m(H){if(H>l)throw new RangeError('The value "'+H+'" is invalid for option "size"');const A=new h(H);return Object.setPrototypeOf(A,g.prototype),A}function g(H,A,T){if(typeof H=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(H)}return b(H,A,T)}g.poolSize=8192;function b(H,A,T){if(typeof H=="string")return w(H,A);if(d.isView(H))return k(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(ye(H,d)||H&&ye(H.buffer,d)||typeof p<"u"&&(ye(H,p)||H&&ye(H.buffer,p)))return E(H,A,T);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=H.valueOf&&H.valueOf();if(W!=null&&W!==H)return g.from(W,A,T);const se=S(H);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return g.from(H[Symbol.toPrimitive]("string"),A,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}g.from=function(H,A,T){return b(H,A,T)},Object.setPrototypeOf(g.prototype,h.prototype),Object.setPrototypeOf(g,h);function v(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function y(H,A,T){return v(H),H<=0?m(H):A!==void 0?typeof T=="string"?m(H).fill(A,T):m(H).fill(A):m(H)}g.alloc=function(H,A,T){return y(H,A,T)};function C(H){return v(H),m(H<0?0:B(H)|0)}g.allocUnsafe=function(H){return C(H)},g.allocUnsafeSlow=function(H){return C(H)};function w(H,A){if((typeof A!="string"||A==="")&&(A="utf8"),!g.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const T=L(H,A)|0;let W=m(T);const se=W.write(H,A);return se!==T&&(W=W.slice(0,se)),W}function _(H){const A=H.length<0?0:B(H.length)|0,T=m(A);for(let W=0;W<A;W+=1)T[W]=H[W]&255;return T}function k(H){if(ye(H,h)){const A=new h(H);return E(A.buffer,A.byteOffset,A.byteLength)}return _(H)}function E(H,A,T){if(A<0||H.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<A+(T||0))throw new RangeError('"length" is outside of buffer bounds');let W;return A===void 0&&T===void 0?W=new h(H):T===void 0?W=new h(H,A):W=new h(H,A,T),Object.setPrototypeOf(W,g.prototype),W}function S(H){if(g.isBuffer(H)){const A=B(H.length)|0,T=m(A);return T.length===0||H.copy(T,0,0,A),T}if(H.length!==void 0)return typeof H.length!="number"||Ae(H.length)?m(0):_(H);if(H.type==="Buffer"&&Array.isArray(H.data))return _(H.data)}function B(H){if(H>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return H|0}function P(H){return+H!=H&&(H=0),g.alloc(+H)}g.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==g.prototype},g.compare=function(A,T){if(ye(A,h)&&(A=g.from(A,A.offset,A.byteLength)),ye(T,h)&&(T=g.from(T,T.offset,T.byteLength)),!g.isBuffer(A)||!g.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===T)return 0;let W=A.length,se=T.length;for(let fe=0,we=Math.min(W,se);fe<we;++fe)if(A[fe]!==T[fe]){W=A[fe],se=T[fe];break}return W<se?-1:se<W?1:0},g.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(A,T){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return g.alloc(0);let W;if(T===void 0)for(T=0,W=0;W<A.length;++W)T+=A[W].length;const se=g.allocUnsafe(T);let fe=0;for(W=0;W<A.length;++W){let we=A[W];if(ye(we,h))fe+we.length>se.length?(g.isBuffer(we)||(we=g.from(we)),we.copy(se,fe)):h.prototype.set.call(se,we,fe);else if(g.isBuffer(we))we.copy(se,fe);else throw new TypeError('"list" argument must be an Array of Buffers');fe+=we.length}return se};function L(H,A){if(g.isBuffer(H))return H.length;if(d.isView(H)||ye(H,d))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const T=H.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&T===0)return 0;let se=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return Ce(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return ve(H).length;default:if(se)return W?-1:Ce(H).length;A=(""+A).toLowerCase(),se=!0}}g.byteLength=L;function U(H,A,T){let W=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,A>>>=0,T<=A))return"";for(H||(H="utf8");;)switch(H){case"hex":return Y(this,A,T);case"utf8":case"utf-8":return te(this,A,T);case"ascii":return ge(this,A,T);case"latin1":case"binary":return V(this,A,T);case"base64":return le(this,A,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,A,T);default:if(W)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),W=!0}}g.prototype._isBuffer=!0;function q(H,A,T){const W=H[A];H[A]=H[T],H[T]=W}g.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<A;T+=2)q(this,T,T+1);return this},g.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<A;T+=4)q(this,T,T+3),q(this,T+1,T+2);return this},g.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<A;T+=8)q(this,T,T+7),q(this,T+1,T+6),q(this,T+2,T+5),q(this,T+3,T+4);return this},g.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?te(this,0,A):U.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(A){if(!g.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:g.compare(this,A)===0},g.prototype.inspect=function(){let A="";const T=f.INSPECT_MAX_BYTES;return A=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(A+=" ... "),"<Buffer "+A+">"},u&&(g.prototype[u]=g.prototype.inspect),g.prototype.compare=function(A,T,W,se,fe){if(ye(A,h)&&(A=g.from(A,A.offset,A.byteLength)),!g.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(T===void 0&&(T=0),W===void 0&&(W=A?A.length:0),se===void 0&&(se=0),fe===void 0&&(fe=this.length),T<0||W>A.length||se<0||fe>this.length)throw new RangeError("out of range index");if(se>=fe&&T>=W)return 0;if(se>=fe)return-1;if(T>=W)return 1;if(T>>>=0,W>>>=0,se>>>=0,fe>>>=0,this===A)return 0;let we=fe-se,ze=W-T;const Qe=Math.min(we,ze),Ye=this.slice(se,fe),Je=A.slice(T,W);for(let Ve=0;Ve<Qe;++Ve)if(Ye[Ve]!==Je[Ve]){we=Ye[Ve],ze=Je[Ve];break}return we<ze?-1:ze<we?1:0};function K(H,A,T,W,se){if(H.length===0)return-1;if(typeof T=="string"?(W=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,Ae(T)&&(T=se?0:H.length-1),T<0&&(T=H.length+T),T>=H.length){if(se)return-1;T=H.length-1}else if(T<0)if(se)T=0;else return-1;if(typeof A=="string"&&(A=g.from(A,W)),g.isBuffer(A))return A.length===0?-1:z(H,A,T,W,se);if(typeof A=="number")return A=A&255,typeof h.prototype.indexOf=="function"?se?h.prototype.indexOf.call(H,A,T):h.prototype.lastIndexOf.call(H,A,T):z(H,[A],T,W,se);throw new TypeError("val must be string, number or Buffer")}function z(H,A,T,W,se){let fe=1,we=H.length,ze=A.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(H.length<2||A.length<2)return-1;fe=2,we/=2,ze/=2,T/=2}function Qe(Je,Ve){return fe===1?Je[Ve]:Je.readUInt16BE(Ve*fe)}let Ye;if(se){let Je=-1;for(Ye=T;Ye<we;Ye++)if(Qe(H,Ye)===Qe(A,Je===-1?0:Ye-Je)){if(Je===-1&&(Je=Ye),Ye-Je+1===ze)return Je*fe}else Je!==-1&&(Ye-=Ye-Je),Je=-1}else for(T+ze>we&&(T=we-ze),Ye=T;Ye>=0;Ye--){let Je=!0;for(let Ve=0;Ve<ze;Ve++)if(Qe(H,Ye+Ve)!==Qe(A,Ve)){Je=!1;break}if(Je)return Ye}return-1}g.prototype.includes=function(A,T,W){return this.indexOf(A,T,W)!==-1},g.prototype.indexOf=function(A,T,W){return K(this,A,T,W,!0)},g.prototype.lastIndexOf=function(A,T,W){return K(this,A,T,W,!1)};function G(H,A,T,W){T=Number(T)||0;const se=H.length-T;W?(W=Number(W),W>se&&(W=se)):W=se;const fe=A.length;W>fe/2&&(W=fe/2);let we;for(we=0;we<W;++we){const ze=parseInt(A.substr(we*2,2),16);if(Ae(ze))return we;H[T+we]=ze}return we}function N(H,A,T,W){return Ee(Ce(A,H.length-T),H,T,W)}function M(H,A,T,W){return Ee(me(A),H,T,W)}function F(H,A,T,W){return Ee(ve(A),H,T,W)}function J(H,A,T,W){return Ee(ae(A,H.length-T),H,T,W)}g.prototype.write=function(A,T,W,se){if(T===void 0)se="utf8",W=this.length,T=0;else if(W===void 0&&typeof T=="string")se=T,W=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(W)?(W=W>>>0,se===void 0&&(se="utf8")):(se=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const fe=this.length-T;if((W===void 0||W>fe)&&(W=fe),A.length>0&&(W<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");let we=!1;for(;;)switch(se){case"hex":return G(this,A,T,W);case"utf8":case"utf-8":return N(this,A,T,W);case"ascii":case"latin1":case"binary":return M(this,A,T,W);case"base64":return F(this,A,T,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,A,T,W);default:if(we)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),we=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function le(H,A,T){return A===0&&T===H.length?s.fromByteArray(H):s.fromByteArray(H.slice(A,T))}function te(H,A,T){T=Math.min(H.length,T);const W=[];let se=A;for(;se<T;){const fe=H[se];let we=null,ze=fe>239?4:fe>223?3:fe>191?2:1;if(se+ze<=T){let Qe,Ye,Je,Ve;switch(ze){case 1:fe<128&&(we=fe);break;case 2:Qe=H[se+1],(Qe&192)===128&&(Ve=(fe&31)<<6|Qe&63,Ve>127&&(we=Ve));break;case 3:Qe=H[se+1],Ye=H[se+2],(Qe&192)===128&&(Ye&192)===128&&(Ve=(fe&15)<<12|(Qe&63)<<6|Ye&63,Ve>2047&&(Ve<55296||Ve>57343)&&(we=Ve));break;case 4:Qe=H[se+1],Ye=H[se+2],Je=H[se+3],(Qe&192)===128&&(Ye&192)===128&&(Je&192)===128&&(Ve=(fe&15)<<18|(Qe&63)<<12|(Ye&63)<<6|Je&63,Ve>65535&&Ve<1114112&&(we=Ve))}}we===null?(we=65533,ze=1):we>65535&&(we-=65536,W.push(we>>>10&1023|55296),we=56320|we&1023),W.push(we),se+=ze}return ne(W)}const de=4096;function ne(H){const A=H.length;if(A<=de)return String.fromCharCode.apply(String,H);let T="",W=0;for(;W<A;)T+=String.fromCharCode.apply(String,H.slice(W,W+=de));return T}function ge(H,A,T){let W="";T=Math.min(H.length,T);for(let se=A;se<T;++se)W+=String.fromCharCode(H[se]&127);return W}function V(H,A,T){let W="";T=Math.min(H.length,T);for(let se=A;se<T;++se)W+=String.fromCharCode(H[se]);return W}function Y(H,A,T){const W=H.length;(!A||A<0)&&(A=0),(!T||T<0||T>W)&&(T=W);let se="";for(let fe=A;fe<T;++fe)se+=Fe[H[fe]];return se}function ce(H,A,T){const W=H.slice(A,T);let se="";for(let fe=0;fe<W.length-1;fe+=2)se+=String.fromCharCode(W[fe]+W[fe+1]*256);return se}g.prototype.slice=function(A,T){const W=this.length;A=~~A,T=T===void 0?W:~~T,A<0?(A+=W,A<0&&(A=0)):A>W&&(A=W),T<0?(T+=W,T<0&&(T=0)):T>W&&(T=W),T<A&&(T=A);const se=this.subarray(A,T);return Object.setPrototypeOf(se,g.prototype),se};function re(H,A,T){if(H%1!==0||H<0)throw new RangeError("offset is not uint");if(H+A>T)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(A,T,W){A=A>>>0,T=T>>>0,W||re(A,T,this.length);let se=this[A],fe=1,we=0;for(;++we<T&&(fe*=256);)se+=this[A+we]*fe;return se},g.prototype.readUintBE=g.prototype.readUIntBE=function(A,T,W){A=A>>>0,T=T>>>0,W||re(A,T,this.length);let se=this[A+--T],fe=1;for(;T>0&&(fe*=256);)se+=this[A+--T]*fe;return se},g.prototype.readUint8=g.prototype.readUInt8=function(A,T){return A=A>>>0,T||re(A,1,this.length),this[A]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(A,T){return A=A>>>0,T||re(A,2,this.length),this[A]|this[A+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(A,T){return A=A>>>0,T||re(A,2,this.length),this[A]<<8|this[A+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(A,T){return A=A>>>0,T||re(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(A,T){return A=A>>>0,T||re(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},g.prototype.readBigUInt64LE=Ne(function(A){A=A>>>0,he(A,"offset");const T=this[A],W=this[A+7];(T===void 0||W===void 0)&&X(A,this.length-8);const se=T+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,fe=this[++A]+this[++A]*2**8+this[++A]*2**16+W*2**24;return BigInt(se)+(BigInt(fe)<<BigInt(32))}),g.prototype.readBigUInt64BE=Ne(function(A){A=A>>>0,he(A,"offset");const T=this[A],W=this[A+7];(T===void 0||W===void 0)&&X(A,this.length-8);const se=T*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],fe=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+W;return(BigInt(se)<<BigInt(32))+BigInt(fe)}),g.prototype.readIntLE=function(A,T,W){A=A>>>0,T=T>>>0,W||re(A,T,this.length);let se=this[A],fe=1,we=0;for(;++we<T&&(fe*=256);)se+=this[A+we]*fe;return fe*=128,se>=fe&&(se-=Math.pow(2,8*T)),se},g.prototype.readIntBE=function(A,T,W){A=A>>>0,T=T>>>0,W||re(A,T,this.length);let se=T,fe=1,we=this[A+--se];for(;se>0&&(fe*=256);)we+=this[A+--se]*fe;return fe*=128,we>=fe&&(we-=Math.pow(2,8*T)),we},g.prototype.readInt8=function(A,T){return A=A>>>0,T||re(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},g.prototype.readInt16LE=function(A,T){A=A>>>0,T||re(A,2,this.length);const W=this[A]|this[A+1]<<8;return W&32768?W|4294901760:W},g.prototype.readInt16BE=function(A,T){A=A>>>0,T||re(A,2,this.length);const W=this[A+1]|this[A]<<8;return W&32768?W|4294901760:W},g.prototype.readInt32LE=function(A,T){return A=A>>>0,T||re(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},g.prototype.readInt32BE=function(A,T){return A=A>>>0,T||re(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},g.prototype.readBigInt64LE=Ne(function(A){A=A>>>0,he(A,"offset");const T=this[A],W=this[A+7];(T===void 0||W===void 0)&&X(A,this.length-8);const se=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(W<<24);return(BigInt(se)<<BigInt(32))+BigInt(T+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),g.prototype.readBigInt64BE=Ne(function(A){A=A>>>0,he(A,"offset");const T=this[A],W=this[A+7];(T===void 0||W===void 0)&&X(A,this.length-8);const se=(T<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(se)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+W)}),g.prototype.readFloatLE=function(A,T){return A=A>>>0,T||re(A,4,this.length),a.read(this,A,!0,23,4)},g.prototype.readFloatBE=function(A,T){return A=A>>>0,T||re(A,4,this.length),a.read(this,A,!1,23,4)},g.prototype.readDoubleLE=function(A,T){return A=A>>>0,T||re(A,8,this.length),a.read(this,A,!0,52,8)},g.prototype.readDoubleBE=function(A,T){return A=A>>>0,T||re(A,8,this.length),a.read(this,A,!1,52,8)};function pe(H,A,T,W,se,fe){if(!g.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>se||A<fe)throw new RangeError('"value" argument is out of bounds');if(T+W>H.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(A,T,W,se){if(A=+A,T=T>>>0,W=W>>>0,!se){const ze=Math.pow(2,8*W)-1;pe(this,A,T,W,ze,0)}let fe=1,we=0;for(this[T]=A&255;++we<W&&(fe*=256);)this[T+we]=A/fe&255;return T+W},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(A,T,W,se){if(A=+A,T=T>>>0,W=W>>>0,!se){const ze=Math.pow(2,8*W)-1;pe(this,A,T,W,ze,0)}let fe=W-1,we=1;for(this[T+fe]=A&255;--fe>=0&&(we*=256);)this[T+fe]=A/we&255;return T+W},g.prototype.writeUint8=g.prototype.writeUInt8=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,1,255,0),this[T]=A&255,T+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,2,65535,0),this[T]=A&255,this[T+1]=A>>>8,T+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,2,65535,0),this[T]=A>>>8,this[T+1]=A&255,T+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,4,4294967295,0),this[T+3]=A>>>24,this[T+2]=A>>>16,this[T+1]=A>>>8,this[T]=A&255,T+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,4,4294967295,0),this[T]=A>>>24,this[T+1]=A>>>16,this[T+2]=A>>>8,this[T+3]=A&255,T+4};function Pe(H,A,T,W,se){xe(A,W,se,H,T,7);let fe=Number(A&BigInt(4294967295));H[T++]=fe,fe=fe>>8,H[T++]=fe,fe=fe>>8,H[T++]=fe,fe=fe>>8,H[T++]=fe;let we=Number(A>>BigInt(32)&BigInt(4294967295));return H[T++]=we,we=we>>8,H[T++]=we,we=we>>8,H[T++]=we,we=we>>8,H[T++]=we,T}function Oe(H,A,T,W,se){xe(A,W,se,H,T,7);let fe=Number(A&BigInt(4294967295));H[T+7]=fe,fe=fe>>8,H[T+6]=fe,fe=fe>>8,H[T+5]=fe,fe=fe>>8,H[T+4]=fe;let we=Number(A>>BigInt(32)&BigInt(4294967295));return H[T+3]=we,we=we>>8,H[T+2]=we,we=we>>8,H[T+1]=we,we=we>>8,H[T]=we,T+8}g.prototype.writeBigUInt64LE=Ne(function(A,T=0){return Pe(this,A,T,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=Ne(function(A,T=0){return Oe(this,A,T,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(A,T,W,se){if(A=+A,T=T>>>0,!se){const Qe=Math.pow(2,8*W-1);pe(this,A,T,W,Qe-1,-Qe)}let fe=0,we=1,ze=0;for(this[T]=A&255;++fe<W&&(we*=256);)A<0&&ze===0&&this[T+fe-1]!==0&&(ze=1),this[T+fe]=(A/we>>0)-ze&255;return T+W},g.prototype.writeIntBE=function(A,T,W,se){if(A=+A,T=T>>>0,!se){const Qe=Math.pow(2,8*W-1);pe(this,A,T,W,Qe-1,-Qe)}let fe=W-1,we=1,ze=0;for(this[T+fe]=A&255;--fe>=0&&(we*=256);)A<0&&ze===0&&this[T+fe+1]!==0&&(ze=1),this[T+fe]=(A/we>>0)-ze&255;return T+W},g.prototype.writeInt8=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,1,127,-128),A<0&&(A=255+A+1),this[T]=A&255,T+1},g.prototype.writeInt16LE=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,2,32767,-32768),this[T]=A&255,this[T+1]=A>>>8,T+2},g.prototype.writeInt16BE=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,2,32767,-32768),this[T]=A>>>8,this[T+1]=A&255,T+2},g.prototype.writeInt32LE=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,4,2147483647,-2147483648),this[T]=A&255,this[T+1]=A>>>8,this[T+2]=A>>>16,this[T+3]=A>>>24,T+4},g.prototype.writeInt32BE=function(A,T,W){return A=+A,T=T>>>0,W||pe(this,A,T,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[T]=A>>>24,this[T+1]=A>>>16,this[T+2]=A>>>8,this[T+3]=A&255,T+4},g.prototype.writeBigInt64LE=Ne(function(A,T=0){return Pe(this,A,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=Ne(function(A,T=0){return Oe(this,A,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ke(H,A,T,W,se,fe){if(T+W>H.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function Te(H,A,T,W,se){return A=+A,T=T>>>0,se||ke(H,A,T,4),a.write(H,A,T,W,23,4),T+4}g.prototype.writeFloatLE=function(A,T,W){return Te(this,A,T,!0,W)},g.prototype.writeFloatBE=function(A,T,W){return Te(this,A,T,!1,W)};function Le(H,A,T,W,se){return A=+A,T=T>>>0,se||ke(H,A,T,8),a.write(H,A,T,W,52,8),T+8}g.prototype.writeDoubleLE=function(A,T,W){return Le(this,A,T,!0,W)},g.prototype.writeDoubleBE=function(A,T,W){return Le(this,A,T,!1,W)},g.prototype.copy=function(A,T,W,se){if(!g.isBuffer(A))throw new TypeError("argument should be a Buffer");if(W||(W=0),!se&&se!==0&&(se=this.length),T>=A.length&&(T=A.length),T||(T=0),se>0&&se<W&&(se=W),se===W||A.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),A.length-T<se-W&&(se=A.length-T+W);const fe=se-W;return this===A&&typeof h.prototype.copyWithin=="function"?this.copyWithin(T,W,se):h.prototype.set.call(A,this.subarray(W,se),T),fe},g.prototype.fill=function(A,T,W,se){if(typeof A=="string"){if(typeof T=="string"?(se=T,T=0,W=this.length):typeof W=="string"&&(se=W,W=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!g.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(A.length===1){const we=A.charCodeAt(0);(se==="utf8"&&we<128||se==="latin1")&&(A=we)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(T<0||this.length<T||this.length<W)throw new RangeError("Out of range index");if(W<=T)return this;T=T>>>0,W=W===void 0?this.length:W>>>0,A||(A=0);let fe;if(typeof A=="number")for(fe=T;fe<W;++fe)this[fe]=A;else{const we=g.isBuffer(A)?A:g.from(A,se),ze=we.length;if(ze===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(fe=0;fe<W-T;++fe)this[fe+T]=we[fe%ze]}return this};const Ue={};function Ke(H,A,T){Ue[H]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:se,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}Ke("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ke("ERR_INVALID_ARG_TYPE",function(H,A){return`The "${H}" argument must be of type number. Received type ${typeof A}`},TypeError),Ke("ERR_OUT_OF_RANGE",function(H,A,T){let W=`The value of "${H}" is out of range.`,se=T;return Number.isInteger(T)&&Math.abs(T)>2**32?se=Ie(String(T)):typeof T=="bigint"&&(se=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(se=Ie(se)),se+="n"),W+=` It must be ${A}. Received ${se}`,W},RangeError);function Ie(H){let A="",T=H.length;const W=H[0]==="-"?1:0;for(;T>=W+4;T-=3)A=`_${H.slice(T-3,T)}${A}`;return`${H.slice(0,T)}${A}`}function I(H,A,T){he(A,"offset"),(H[A]===void 0||H[A+T]===void 0)&&X(A,H.length-(T+1))}function xe(H,A,T,W,se,fe){if(H>T||H<A){const we=typeof A=="bigint"?"n":"";let ze;throw fe>3?A===0||A===BigInt(0)?ze=`>= 0${we} and < 2${we} ** ${(fe+1)*8}${we}`:ze=`>= -(2${we} ** ${(fe+1)*8-1}${we}) and < 2 ** ${(fe+1)*8-1}${we}`:ze=`>= ${A}${we} and <= ${T}${we}`,new Ue.ERR_OUT_OF_RANGE("value",ze,H)}I(W,se,fe)}function he(H,A){if(typeof H!="number")throw new Ue.ERR_INVALID_ARG_TYPE(A,"number",H)}function X(H,A,T){throw Math.floor(H)!==H?(he(H,T),new Ue.ERR_OUT_OF_RANGE(T||"offset","an integer",H)):A<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE(T||"offset",`>= ${T?1:0} and <= ${A}`,H)}const Q=/[^+/0-9A-Za-z-_]/g;function oe(H){if(H=H.split("=")[0],H=H.trim().replace(Q,""),H.length<2)return"";for(;H.length%4!==0;)H=H+"=";return H}function Ce(H,A){A=A||1/0;let T;const W=H.length;let se=null;const fe=[];for(let we=0;we<W;++we){if(T=H.charCodeAt(we),T>55295&&T<57344){if(!se){if(T>56319){(A-=3)>-1&&fe.push(239,191,189);continue}else if(we+1===W){(A-=3)>-1&&fe.push(239,191,189);continue}se=T;continue}if(T<56320){(A-=3)>-1&&fe.push(239,191,189),se=T;continue}T=(se-55296<<10|T-56320)+65536}else se&&(A-=3)>-1&&fe.push(239,191,189);if(se=null,T<128){if((A-=1)<0)break;fe.push(T)}else if(T<2048){if((A-=2)<0)break;fe.push(T>>6|192,T&63|128)}else if(T<65536){if((A-=3)<0)break;fe.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((A-=4)<0)break;fe.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return fe}function me(H){const A=[];for(let T=0;T<H.length;++T)A.push(H.charCodeAt(T)&255);return A}function ae(H,A){let T,W,se;const fe=[];for(let we=0;we<H.length&&!((A-=2)<0);++we)T=H.charCodeAt(we),W=T>>8,se=T%256,fe.push(se),fe.push(W);return fe}function ve(H){return s.toByteArray(oe(H))}function Ee(H,A,T,W){let se;for(se=0;se<W&&!(se+T>=A.length||se>=H.length);++se)A[se+T]=H[se];return se}function ye(H,A){return H instanceof A||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===A.name}function Ae(H){return H!==H}const Fe=function(){const H="0123456789abcdef",A=new Array(256);for(let T=0;T<16;++T){const W=T*16;for(let se=0;se<16;++se)A[W+se]=H[T]+H[se]}return A}();function Ne(H){return typeof BigInt>"u"?qe:H}function qe(){throw new Error("BigInt not supported")}})(buffer);const Buffer=buffer.Buffer;var jszip_min={exports:{}};(function(f,s){(function(a){f.exports=a()})(function(){return function a(u,l,h){function d(m,g){if(!l[m]){if(!u[m]){var b=typeof commonjsRequire=="function"&&commonjsRequire;if(!g&&b)return b(m,!0);if(p)return p(m,!0);var v=new Error("Cannot find module '"+m+"'");throw v.code="MODULE_NOT_FOUND",v}var y=l[m]={exports:{}};u[m][0].call(y.exports,function(C){var w=u[m][1][C];return d(w||C)},y,y.exports,a,u,l,h)}return l[m].exports}for(var p=typeof commonjsRequire=="function"&&commonjsRequire,x=0;x<h.length;x++)d(h[x]);return d}({1:[function(a,u,l){var h=a("./utils"),d=a("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l.encode=function(x){for(var m,g,b,v,y,C,w,_=[],k=0,E=x.length,S=E,B=h.getTypeOf(x)!=="string";k<x.length;)S=E-k,b=B?(m=x[k++],g=k<E?x[k++]:0,k<E?x[k++]:0):(m=x.charCodeAt(k++),g=k<E?x.charCodeAt(k++):0,k<E?x.charCodeAt(k++):0),v=m>>2,y=(3&m)<<4|g>>4,C=1<S?(15&g)<<2|b>>6:64,w=2<S?63&b:64,_.push(p.charAt(v)+p.charAt(y)+p.charAt(C)+p.charAt(w));return _.join("")},l.decode=function(x){var m,g,b,v,y,C,w=0,_=0,k="data:";if(x.substr(0,k.length)===k)throw new Error("Invalid base64 input, it looks like a data url.");var E,S=3*(x=x.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(x.charAt(x.length-1)===p.charAt(64)&&S--,x.charAt(x.length-2)===p.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=d.uint8array?new Uint8Array(0|S):new Array(0|S);w<x.length;)m=p.indexOf(x.charAt(w++))<<2|(v=p.indexOf(x.charAt(w++)))>>4,g=(15&v)<<4|(y=p.indexOf(x.charAt(w++)))>>2,b=(3&y)<<6|(C=p.indexOf(x.charAt(w++))),E[_++]=m,y!==64&&(E[_++]=g),C!==64&&(E[_++]=b);return E}},{"./support":30,"./utils":32}],2:[function(a,u,l){var h=a("./external"),d=a("./stream/DataWorker"),p=a("./stream/Crc32Probe"),x=a("./stream/DataLengthProbe");function m(g,b,v,y,C){this.compressedSize=g,this.uncompressedSize=b,this.crc32=v,this.compression=y,this.compressedContent=C}m.prototype={getContentWorker:function(){var g=new d(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new x("data_length")),b=this;return g.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new d(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(g,b,v){return g.pipe(new p).pipe(new x("uncompressedSize")).pipe(b.compressWorker(v)).pipe(new x("compressedSize")).withStreamInfo("compression",b)},u.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,u,l){var h=a("./stream/GenericWorker");l.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},l.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,u,l){var h=a("./utils"),d=function(){for(var p,x=[],m=0;m<256;m++){p=m;for(var g=0;g<8;g++)p=1&p?3988292384^p>>>1:p>>>1;x[m]=p}return x}();u.exports=function(p,x){return p!==void 0&&p.length?h.getTypeOf(p)!=="string"?function(m,g,b,v){var y=d,C=v+b;m^=-1;for(var w=v;w<C;w++)m=m>>>8^y[255&(m^g[w])];return-1^m}(0|x,p,p.length,0):function(m,g,b,v){var y=d,C=v+b;m^=-1;for(var w=v;w<C;w++)m=m>>>8^y[255&(m^g.charCodeAt(w))];return-1^m}(0|x,p,p.length,0):0}},{"./utils":32}],5:[function(a,u,l){l.base64=!1,l.binary=!1,l.dir=!1,l.createFolders=!0,l.date=null,l.compression=null,l.compressionOptions=null,l.comment=null,l.unixPermissions=null,l.dosPermissions=null},{}],6:[function(a,u,l){var h=null;h=typeof Promise<"u"?Promise:a("lie"),u.exports={Promise:h}},{lie:37}],7:[function(a,u,l){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",d=a("pako"),p=a("./utils"),x=a("./stream/GenericWorker"),m=h?"uint8array":"array";function g(b,v){x.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=v,this.meta={}}l.magic="\b\0",p.inherits(g,x),g.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(p.transformTo(m,b.data),!1)},g.prototype.flush=function(){x.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(v){b.push({data:v,meta:b.meta})}},l.compressWorker=function(b){return new g("Deflate",b)},l.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,u,l){function h(y,C){var w,_="";for(w=0;w<C;w++)_+=String.fromCharCode(255&y),y>>>=8;return _}function d(y,C,w,_,k,E){var S,B,P=y.file,L=y.compression,U=E!==m.utf8encode,q=p.transformTo("string",E(P.name)),K=p.transformTo("string",m.utf8encode(P.name)),z=P.comment,G=p.transformTo("string",E(z)),N=p.transformTo("string",m.utf8encode(z)),M=K.length!==P.name.length,F=N.length!==z.length,J="",le="",te="",de=P.dir,ne=P.date,ge={crc32:0,compressedSize:0,uncompressedSize:0};C&&!w||(ge.crc32=y.crc32,ge.compressedSize=y.compressedSize,ge.uncompressedSize=y.uncompressedSize);var V=0;C&&(V|=8),U||!M&&!F||(V|=2048);var Y=0,ce=0;de&&(Y|=16),k==="UNIX"?(ce=798,Y|=function(pe,Pe){var Oe=pe;return pe||(Oe=Pe?16893:33204),(65535&Oe)<<16}(P.unixPermissions,de)):(ce=20,Y|=function(pe){return 63&(pe||0)}(P.dosPermissions)),S=ne.getUTCHours(),S<<=6,S|=ne.getUTCMinutes(),S<<=5,S|=ne.getUTCSeconds()/2,B=ne.getUTCFullYear()-1980,B<<=4,B|=ne.getUTCMonth()+1,B<<=5,B|=ne.getUTCDate(),M&&(le=h(1,1)+h(g(q),4)+K,J+="up"+h(le.length,2)+le),F&&(te=h(1,1)+h(g(G),4)+N,J+="uc"+h(te.length,2)+te);var re="";return re+=`
\0`,re+=h(V,2),re+=L.magic,re+=h(S,2),re+=h(B,2),re+=h(ge.crc32,4),re+=h(ge.compressedSize,4),re+=h(ge.uncompressedSize,4),re+=h(q.length,2),re+=h(J.length,2),{fileRecord:b.LOCAL_FILE_HEADER+re+q+J,dirRecord:b.CENTRAL_FILE_HEADER+h(ce,2)+re+h(G.length,2)+"\0\0\0\0"+h(Y,4)+h(_,4)+q+J+G}}var p=a("../utils"),x=a("../stream/GenericWorker"),m=a("../utf8"),g=a("../crc32"),b=a("../signature");function v(y,C,w,_){x.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=C,this.zipPlatform=w,this.encodeFileName=_,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.inherits(v,x),v.prototype.push=function(y){var C=y.meta.percent||0,w=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,x.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:w?(C+100*(w-_-1))/w:100}}))},v.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var C=this.streamFiles&&!y.file.dir;if(C){var w=d(y,C,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(y){this.accumulate=!1;var C=this.streamFiles&&!y.file.dir,w=d(y,C,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),C)this.push({data:function(_){return b.DATA_DESCRIPTOR+h(_.crc32,4)+h(_.compressedSize,4)+h(_.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var y=this.bytesWritten,C=0;C<this.dirRecords.length;C++)this.push({data:this.dirRecords[C],meta:{percent:100}});var w=this.bytesWritten-y,_=function(k,E,S,B,P){var L=p.transformTo("string",P(B));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+h(k,2)+h(k,2)+h(E,4)+h(S,4)+h(L.length,2)+L}(this.dirRecords.length,w,y,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(y){this._sources.push(y);var C=this;return y.on("data",function(w){C.processChunk(w)}),y.on("end",function(){C.closedSource(C.previous.streamInfo),C._sources.length?C.prepareNextSource():C.end()}),y.on("error",function(w){C.error(w)}),this},v.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(y){var C=this._sources;if(!x.prototype.error.call(this,y))return!1;for(var w=0;w<C.length;w++)try{C[w].error(y)}catch{}return!0},v.prototype.lock=function(){x.prototype.lock.call(this);for(var y=this._sources,C=0;C<y.length;C++)y[C].lock()},u.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,u,l){var h=a("../compressions"),d=a("./ZipFileWorker");l.generateWorker=function(p,x,m){var g=new d(x.streamFiles,m,x.platform,x.encodeFileName),b=0;try{p.forEach(function(v,y){b++;var C=function(E,S){var B=E||S,P=h[B];if(!P)throw new Error(B+" is not a valid compression method !");return P}(y.options.compression,x.compression),w=y.options.compressionOptions||x.compressionOptions||{},_=y.dir,k=y.date;y._compressWorker(C,w).withStreamInfo("file",{name:v,dir:_,date:k,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(g)}),g.entriesCount=b}catch(v){g.error(v)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,u,l){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var d=new h;for(var p in this)typeof this[p]!="function"&&(d[p]=this[p]);return d}}(h.prototype=a("./object")).loadAsync=a("./load"),h.support=a("./support"),h.defaults=a("./defaults"),h.version="3.10.1",h.loadAsync=function(d,p){return new h().loadAsync(d,p)},h.external=a("./external"),u.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,u,l){var h=a("./utils"),d=a("./external"),p=a("./utf8"),x=a("./zipEntries"),m=a("./stream/Crc32Probe"),g=a("./nodejsUtils");function b(v){return new d.Promise(function(y,C){var w=v.decompressed.getContentWorker().pipe(new m);w.on("error",function(_){C(_)}).on("end",function(){w.streamInfo.crc32!==v.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}u.exports=function(v,y){var C=this;return y=h.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:p.utf8decode}),g.isNode&&g.isStream(v)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",v,!0,y.optimizedBinaryString,y.base64).then(function(w){var _=new x(y);return _.load(w),_}).then(function(w){var _=[d.Promise.resolve(w)],k=w.files;if(y.checkCRC32)for(var E=0;E<k.length;E++)_.push(b(k[E]));return d.Promise.all(_)}).then(function(w){for(var _=w.shift(),k=_.files,E=0;E<k.length;E++){var S=k[E],B=S.fileNameStr,P=h.resolve(S.fileNameStr);C.file(P,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:y.createFolders}),S.dir||(C.file(P).unsafeOriginalName=B)}return _.zipComment.length&&(C.comment=_.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,u,l){var h=a("../utils"),d=a("../stream/GenericWorker");function p(x,m){d.call(this,"Nodejs stream input adapter for "+x),this._upstreamEnded=!1,this._bindStream(m)}h.inherits(p,d),p.prototype._bindStream=function(x){var m=this;(this._stream=x).pause(),x.on("data",function(g){m.push({data:g,meta:{percent:0}})}).on("error",function(g){m.isPaused?this.generatedError=g:m.error(g)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},p.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},p.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},u.exports=p},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,u,l){var h=a("readable-stream").Readable;function d(p,x,m){h.call(this,x),this._helper=p;var g=this;p.on("data",function(b,v){g.push(b)||g._helper.pause(),m&&m(v)}).on("error",function(b){g.emit("error",b)}).on("end",function(){g.push(null)})}a("../utils").inherits(d,h),d.prototype._read=function(){this._helper.resume()},u.exports=d},{"../utils":32,"readable-stream":16}],14:[function(a,u,l){u.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,d);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,d)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var d=new Buffer(h);return d.fill(0),d},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(a,u,l){function h(P,L,U){var q,K=p.getTypeOf(L),z=p.extend(U||{},g);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(P=k(P)),z.createFolders&&(q=_(P))&&E.call(this,q,!0);var G=K==="string"&&z.binary===!1&&z.base64===!1;U&&U.binary!==void 0||(z.binary=!G),(L instanceof b&&L.uncompressedSize===0||z.dir||!L||L.length===0)&&(z.base64=!1,z.binary=!0,L="",z.compression="STORE",K="string");var N=null;N=L instanceof b||L instanceof x?L:C.isNode&&C.isStream(L)?new w(P,L):p.prepareContent(P,L,z.binary,z.optimizedBinaryString,z.base64);var M=new v(P,N,z);this.files[P]=M}var d=a("./utf8"),p=a("./utils"),x=a("./stream/GenericWorker"),m=a("./stream/StreamHelper"),g=a("./defaults"),b=a("./compressedObject"),v=a("./zipObject"),y=a("./generate"),C=a("./nodejsUtils"),w=a("./nodejs/NodejsStreamInputAdapter"),_=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var L=P.lastIndexOf("/");return 0<L?P.substring(0,L):""},k=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},E=function(P,L){return L=L!==void 0?L:g.createFolders,P=k(P),this.files[P]||h.call(this,P,null,{dir:!0,createFolders:L}),this.files[P]};function S(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var B={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var L,U,q;for(L in this.files)q=this.files[L],(U=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&P(U,q)},filter:function(P){var L=[];return this.forEach(function(U,q){P(U,q)&&L.push(q)}),L},file:function(P,L,U){if(arguments.length!==1)return P=this.root+P,h.call(this,P,L,U),this;if(S(P)){var q=P;return this.filter(function(z,G){return!G.dir&&q.test(z)})}var K=this.files[this.root+P];return K&&!K.dir?K:null},folder:function(P){if(!P)return this;if(S(P))return this.filter(function(K,z){return z.dir&&P.test(K)});var L=this.root+P,U=E.call(this,L),q=this.clone();return q.root=U.name,q},remove:function(P){P=this.root+P;var L=this.files[P];if(L||(P.slice(-1)!=="/"&&(P+="/"),L=this.files[P]),L&&!L.dir)delete this.files[P];else for(var U=this.filter(function(K,z){return z.name.slice(0,P.length)===P}),q=0;q<U.length;q++)delete this.files[U[q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var L,U={};try{if((U=p.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");p.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var q=U.comment||this.comment||"";L=y.generateWorker(this,U,q)}catch(K){(L=new x("error")).error(K)}return new m(L,U.type||"string",U.mimeType)},generateAsync:function(P,L){return this.generateInternalStream(P).accumulate(L)},generateNodeStream:function(P,L){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(L)}};u.exports=B},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,u,l){u.exports=a("stream")},{stream:void 0}],17:[function(a,u,l){var h=a("./DataReader");function d(p){h.call(this,p);for(var x=0;x<this.data.length;x++)p[x]=255&p[x]}a("../utils").inherits(d,h),d.prototype.byteAt=function(p){return this.data[this.zero+p]},d.prototype.lastIndexOfSignature=function(p){for(var x=p.charCodeAt(0),m=p.charCodeAt(1),g=p.charCodeAt(2),b=p.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===x&&this.data[v+1]===m&&this.data[v+2]===g&&this.data[v+3]===b)return v-this.zero;return-1},d.prototype.readAndCheckSignature=function(p){var x=p.charCodeAt(0),m=p.charCodeAt(1),g=p.charCodeAt(2),b=p.charCodeAt(3),v=this.readData(4);return x===v[0]&&m===v[1]&&g===v[2]&&b===v[3]},d.prototype.readData=function(p){if(this.checkOffset(p),p===0)return[];var x=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,x},u.exports=d},{"../utils":32,"./DataReader":18}],18:[function(a,u,l){var h=a("../utils");function d(p){this.data=p,this.length=p.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(p){this.checkIndex(this.index+p)},checkIndex:function(p){if(this.length<this.zero+p||p<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+p+"). Corrupted zip ?")},setIndex:function(p){this.checkIndex(p),this.index=p},skip:function(p){this.setIndex(this.index+p)},byteAt:function(){},readInt:function(p){var x,m=0;for(this.checkOffset(p),x=this.index+p-1;x>=this.index;x--)m=(m<<8)+this.byteAt(x);return this.index+=p,m},readString:function(p){return h.transformTo("string",this.readData(p))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var p=this.readInt(4);return new Date(Date.UTC(1980+(p>>25&127),(p>>21&15)-1,p>>16&31,p>>11&31,p>>5&63,(31&p)<<1))}},u.exports=d},{"../utils":32}],19:[function(a,u,l){var h=a("./Uint8ArrayReader");function d(p){h.call(this,p)}a("../utils").inherits(d,h),d.prototype.readData=function(p){this.checkOffset(p);var x=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,x},u.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,u,l){var h=a("./DataReader");function d(p){h.call(this,p)}a("../utils").inherits(d,h),d.prototype.byteAt=function(p){return this.data.charCodeAt(this.zero+p)},d.prototype.lastIndexOfSignature=function(p){return this.data.lastIndexOf(p)-this.zero},d.prototype.readAndCheckSignature=function(p){return p===this.readData(4)},d.prototype.readData=function(p){this.checkOffset(p);var x=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,x},u.exports=d},{"../utils":32,"./DataReader":18}],21:[function(a,u,l){var h=a("./ArrayReader");function d(p){h.call(this,p)}a("../utils").inherits(d,h),d.prototype.readData=function(p){if(this.checkOffset(p),p===0)return new Uint8Array(0);var x=this.data.subarray(this.zero+this.index,this.zero+this.index+p);return this.index+=p,x},u.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(a,u,l){var h=a("../utils"),d=a("../support"),p=a("./ArrayReader"),x=a("./StringReader"),m=a("./NodeBufferReader"),g=a("./Uint8ArrayReader");u.exports=function(b){var v=h.getTypeOf(b);return h.checkSupport(v),v!=="string"||d.uint8array?v==="nodebuffer"?new m(b):d.uint8array?new g(h.transformTo("uint8array",b)):new p(h.transformTo("array",b)):new x(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,u,l){l.LOCAL_FILE_HEADER="PK",l.CENTRAL_FILE_HEADER="PK",l.CENTRAL_DIRECTORY_END="PK",l.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",l.ZIP64_CENTRAL_DIRECTORY_END="PK",l.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,u,l){var h=a("./GenericWorker"),d=a("../utils");function p(x){h.call(this,"ConvertWorker to "+x),this.destType=x}d.inherits(p,h),p.prototype.processChunk=function(x){this.push({data:d.transformTo(this.destType,x.data),meta:x.meta})},u.exports=p},{"../utils":32,"./GenericWorker":28}],25:[function(a,u,l){var h=a("./GenericWorker"),d=a("../crc32");function p(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(p,h),p.prototype.processChunk=function(x){this.streamInfo.crc32=d(x.data,this.streamInfo.crc32||0),this.push(x)},u.exports=p},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,u,l){var h=a("../utils"),d=a("./GenericWorker");function p(x){d.call(this,"DataLengthProbe for "+x),this.propName=x,this.withStreamInfo(x,0)}h.inherits(p,d),p.prototype.processChunk=function(x){if(x){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+x.data.length}d.prototype.processChunk.call(this,x)},u.exports=p},{"../utils":32,"./GenericWorker":28}],27:[function(a,u,l){var h=a("../utils"),d=a("./GenericWorker");function p(x){d.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,x.then(function(g){m.dataIsReady=!0,m.data=g,m.max=g&&g.length||0,m.type=h.getTypeOf(g),m.isPaused||m._tickAndRepeat()},function(g){m.error(g)})}h.inherits(p,d),p.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},p.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)},p.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},p.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var x=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":x=this.data.substring(this.index,m);break;case"uint8array":x=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":x=this.data.slice(this.index,m)}return this.index=m,this.push({data:x,meta:{percent:this.max?this.index/this.max*100:0}})},u.exports=p},{"../utils":32,"./GenericWorker":28}],28:[function(a,u,l){function h(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,p){return this._listeners[d].push(p),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,p){if(this._listeners[d])for(var x=0;x<this._listeners[d].length;x++)this._listeners[d][x].call(this,p)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var p=this;return d.on("data",function(x){p.processChunk(x)}),d.on("end",function(){p.end()}),d.on("error",function(x){p.error(x)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,p){return this.extraStreamInfo[d]=p,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},u.exports=h},{}],29:[function(a,u,l){var h=a("../utils"),d=a("./ConvertWorker"),p=a("./GenericWorker"),x=a("../base64"),m=a("../support"),g=a("../external"),b=null;if(m.nodestream)try{b=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(C,w){return new g.Promise(function(_,k){var E=[],S=C._internalType,B=C._outputType,P=C._mimeType;C.on("data",function(L,U){E.push(L),w&&w(U)}).on("error",function(L){E=[],k(L)}).on("end",function(){try{var L=function(U,q,K){switch(U){case"blob":return h.newBlob(h.transformTo("arraybuffer",q),K);case"base64":return x.encode(q);default:return h.transformTo(U,q)}}(B,function(U,q){var K,z=0,G=null,N=0;for(K=0;K<q.length;K++)N+=q[K].length;switch(U){case"string":return q.join("");case"array":return Array.prototype.concat.apply([],q);case"uint8array":for(G=new Uint8Array(N),K=0;K<q.length;K++)G.set(q[K],z),z+=q[K].length;return G;case"nodebuffer":return Buffer.concat(q);default:throw new Error("concat : unsupported type '"+U+"'")}}(S,E),P);_(L)}catch(U){k(U)}E=[]}).resume()})}function y(C,w,_){var k=w;switch(w){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=w,this._mimeType=_,h.checkSupport(k),this._worker=C.pipe(new d(k)),C.lock()}catch(E){this._worker=new p("error"),this._worker.error(E)}}y.prototype={accumulate:function(C){return v(this,C)},on:function(C,w){var _=this;return C==="data"?this._worker.on(C,function(k){w.call(_,k.data,k.meta)}):this._worker.on(C,function(){h.delay(w,arguments,_)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(C){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},C)}},u.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,u,l){if(l.base64=!0,l.array=!0,l.string=!0,l.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l.nodebuffer=typeof Buffer<"u",l.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")l.blob=!1;else{var h=new ArrayBuffer(0);try{l.blob=new Blob([h],{type:"application/zip"}).size===0}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(h),l.blob=d.getBlob("application/zip").size===0}catch{l.blob=!1}}}try{l.nodestream=!!a("readable-stream").Readable}catch{l.nodestream=!1}},{"readable-stream":16}],31:[function(a,u,l){for(var h=a("./utils"),d=a("./support"),p=a("./nodejsUtils"),x=a("./stream/GenericWorker"),m=new Array(256),g=0;g<256;g++)m[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;m[254]=m[254]=1;function b(){x.call(this,"utf-8 decode"),this.leftOver=null}function v(){x.call(this,"utf-8 encode")}l.utf8encode=function(y){return d.nodebuffer?p.newBufferFrom(y,"utf-8"):function(C){var w,_,k,E,S,B=C.length,P=0;for(E=0;E<B;E++)(64512&(_=C.charCodeAt(E)))==55296&&E+1<B&&(64512&(k=C.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(k-56320),E++),P+=_<128?1:_<2048?2:_<65536?3:4;for(w=d.uint8array?new Uint8Array(P):new Array(P),E=S=0;S<P;E++)(64512&(_=C.charCodeAt(E)))==55296&&E+1<B&&(64512&(k=C.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(k-56320),E++),_<128?w[S++]=_:(_<2048?w[S++]=192|_>>>6:(_<65536?w[S++]=224|_>>>12:(w[S++]=240|_>>>18,w[S++]=128|_>>>12&63),w[S++]=128|_>>>6&63),w[S++]=128|63&_);return w}(y)},l.utf8decode=function(y){return d.nodebuffer?h.transformTo("nodebuffer",y).toString("utf-8"):function(C){var w,_,k,E,S=C.length,B=new Array(2*S);for(w=_=0;w<S;)if((k=C[w++])<128)B[_++]=k;else if(4<(E=m[k]))B[_++]=65533,w+=E-1;else{for(k&=E===2?31:E===3?15:7;1<E&&w<S;)k=k<<6|63&C[w++],E--;1<E?B[_++]=65533:k<65536?B[_++]=k:(k-=65536,B[_++]=55296|k>>10&1023,B[_++]=56320|1023&k)}return B.length!==_&&(B.subarray?B=B.subarray(0,_):B.length=_),h.applyFromCharCode(B)}(y=h.transformTo(d.uint8array?"uint8array":"array",y))},h.inherits(b,x),b.prototype.processChunk=function(y){var C=h.transformTo(d.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var w=C;(C=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),C.set(w,this.leftOver.length)}else C=this.leftOver.concat(C);this.leftOver=null}var _=function(E,S){var B;for((S=S||E.length)>E.length&&(S=E.length),B=S-1;0<=B&&(192&E[B])==128;)B--;return B<0||B===0?S:B+m[E[B]]>S?B:S}(C),k=C;_!==C.length&&(d.uint8array?(k=C.subarray(0,_),this.leftOver=C.subarray(_,C.length)):(k=C.slice(0,_),this.leftOver=C.slice(_,C.length))),this.push({data:l.utf8decode(k),meta:y.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:l.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},l.Utf8DecodeWorker=b,h.inherits(v,x),v.prototype.processChunk=function(y){this.push({data:l.utf8encode(y.data),meta:y.meta})},l.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,u,l){var h=a("./support"),d=a("./base64"),p=a("./nodejsUtils"),x=a("./external");function m(w){return w}function g(w,_){for(var k=0;k<w.length;++k)_[k]=255&w.charCodeAt(k);return _}a("setimmediate"),l.newBlob=function(w,_){l.checkSupport("blob");try{return new Blob([w],{type:_})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(w),k.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(w,_,k){var E=[],S=0,B=w.length;if(B<=k)return String.fromCharCode.apply(null,w);for(;S<B;)_==="array"||_==="nodebuffer"?E.push(String.fromCharCode.apply(null,w.slice(S,Math.min(S+k,B)))):E.push(String.fromCharCode.apply(null,w.subarray(S,Math.min(S+k,B)))),S+=k;return E.join("")},stringifyByChar:function(w){for(var _="",k=0;k<w.length;k++)_+=String.fromCharCode(w[k]);return _},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,p.allocBuffer(1)).length===1}catch{return!1}}()}};function v(w){var _=65536,k=l.getTypeOf(w),E=!0;if(k==="uint8array"?E=b.applyCanBeUsed.uint8array:k==="nodebuffer"&&(E=b.applyCanBeUsed.nodebuffer),E)for(;1<_;)try{return b.stringifyByChunk(w,k,_)}catch{_=Math.floor(_/2)}return b.stringifyByChar(w)}function y(w,_){for(var k=0;k<w.length;k++)_[k]=w[k];return _}l.applyFromCharCode=v;var C={};C.string={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return C.string.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:function(w){return g(w,p.allocBuffer(w.length))}},C.array={string:v,array:m,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return p.newBufferFrom(w)}},C.arraybuffer={string:function(w){return v(new Uint8Array(w))},array:function(w){return y(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:m,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return p.newBufferFrom(new Uint8Array(w))}},C.uint8array={string:v,array:function(w){return y(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:m,nodebuffer:function(w){return p.newBufferFrom(w)}},C.nodebuffer={string:v,array:function(w){return y(w,new Array(w.length))},arraybuffer:function(w){return C.nodebuffer.uint8array(w).buffer},uint8array:function(w){return y(w,new Uint8Array(w.length))},nodebuffer:m},l.transformTo=function(w,_){if(_=_||"",!w)return _;l.checkSupport(w);var k=l.getTypeOf(_);return C[k][w](_)},l.resolve=function(w){for(var _=w.split("/"),k=[],E=0;E<_.length;E++){var S=_[E];S==="."||S===""&&E!==0&&E!==_.length-1||(S===".."?k.pop():k.push(S))}return k.join("/")},l.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":h.nodebuffer&&p.isBuffer(w)?"nodebuffer":h.uint8array&&w instanceof Uint8Array?"uint8array":h.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(w){if(!h[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(w){var _,k,E="";for(k=0;k<(w||"").length;k++)E+="\\x"+((_=w.charCodeAt(k))<16?"0":"")+_.toString(16).toUpperCase();return E},l.delay=function(w,_,k){setImmediate(function(){w.apply(k||null,_||[])})},l.inherits=function(w,_){function k(){}k.prototype=_.prototype,w.prototype=new k},l.extend=function(){var w,_,k={};for(w=0;w<arguments.length;w++)for(_ in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],_)&&k[_]===void 0&&(k[_]=arguments[w][_]);return k},l.prepareContent=function(w,_,k,E,S){return x.Promise.resolve(_).then(function(B){return h.blob&&(B instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(B))!==-1)&&typeof FileReader<"u"?new x.Promise(function(P,L){var U=new FileReader;U.onload=function(q){P(q.target.result)},U.onerror=function(q){L(q.target.error)},U.readAsArrayBuffer(B)}):B}).then(function(B){var P=l.getTypeOf(B);return P?(P==="arraybuffer"?B=l.transformTo("uint8array",B):P==="string"&&(S?B=d.decode(B):k&&E!==!0&&(B=function(L){return g(L,h.uint8array?new Uint8Array(L.length):new Array(L.length))}(B))),B):x.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,u,l){var h=a("./reader/readerFor"),d=a("./utils"),p=a("./signature"),x=a("./zipEntry"),m=a("./support");function g(b){this.files=[],this.loadOptions=b}g.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(v)+", expected "+d.pretty(b)+")")}},isSignature:function(b,v){var y=this.reader.index;this.reader.setIndex(b);var C=this.reader.readString(4)===v;return this.reader.setIndex(y),C},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),v=m.uint8array?"uint8array":"array",y=d.transformTo(v,b);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,v,y,C=this.zip64EndOfCentralSize-44;0<C;)b=this.reader.readInt(2),v=this.reader.readInt(4),y=this.reader.readData(v),this.zip64ExtensibleData[b]={id:b,length:v,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,v;for(b=0;b<this.files.length;b++)v=this.files[b],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(p.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER);)(b=new x({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,p.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var v=b;if(this.checkSignature(p.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var C=v-y;if(0<C)this.isSignature(v,p.CENTRAL_FILE_HEADER)||(this.reader.zero=C);else if(C<0)throw new Error("Corrupted zip: missing "+Math.abs(C)+" bytes.")},prepareReader:function(b){this.reader=h(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},u.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,u,l){var h=a("./reader/readerFor"),d=a("./utils"),p=a("./compressedObject"),x=a("./crc32"),m=a("./utf8"),g=a("./compressions"),b=a("./support");function v(y,C){this.options=y,this.loadOptions=C}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var C,w;if(y.skip(22),this.fileNameLength=y.readInt(2),w=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((C=function(_){for(var k in g)if(Object.prototype.hasOwnProperty.call(g,k)&&g[k].magic===_)return g[k];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new p(this.compressedSize,this.uncompressedSize,this.crc32,C,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var C=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(C),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=h(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var C,w,_,k=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<k;)C=y.readInt(2),w=y.readInt(2),_=y.readData(w),this.extraFields[C]={id:C,length:w,value:_};y.setIndex(k)},handleUTF8:function(){var y=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var C=this.findExtraFieldUnicodePath();if(C!==null)this.fileNameStr=C;else{var w=d.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var k=d.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var C=h(y.value);return C.readInt(1)!==1||x(this.fileName)!==C.readInt(4)?null:m.utf8decode(C.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var C=h(y.value);return C.readInt(1)!==1||x(this.fileComment)!==C.readInt(4)?null:m.utf8decode(C.readData(y.length-5))}return null}},u.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,u,l){function h(C,w,_){this.name=C,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=w,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var d=a("./stream/StreamHelper"),p=a("./stream/DataWorker"),x=a("./utf8"),m=a("./compressedObject"),g=a("./stream/GenericWorker");h.prototype={internalStream:function(C){var w=null,_="string";try{if(!C)throw new Error("No output type specified.");var k=(_=C.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),w=this._decompressWorker();var E=!this._dataBinary;E&&!k&&(w=w.pipe(new x.Utf8EncodeWorker)),!E&&k&&(w=w.pipe(new x.Utf8DecodeWorker))}catch(S){(w=new g("error")).error(S)}return new d(w,_,"")},async:function(C,w){return this.internalStream(C).accumulate(w)},nodeStream:function(C,w){return this.internalStream(C||"nodebuffer").toNodejsStream(w)},_compressWorker:function(C,w){if(this._data instanceof m&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new x.Utf8EncodeWorker)),m.createWorkerFrom(_,C,w)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof g?this._data:new p(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<b.length;y++)h.prototype[b[y]]=v;u.exports=h},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,u,l){(function(h){var d,p,x=h.MutationObserver||h.WebKitMutationObserver;if(x){var m=0,g=new x(C),b=h.document.createTextNode("");g.observe(b,{characterData:!0}),d=function(){b.data=m=++m%2}}else if(h.setImmediate||h.MessageChannel===void 0)d="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var w=h.document.createElement("script");w.onreadystatechange=function(){C(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},h.document.documentElement.appendChild(w)}:function(){setTimeout(C,0)};else{var v=new h.MessageChannel;v.port1.onmessage=C,d=function(){v.port2.postMessage(0)}}var y=[];function C(){var w,_;p=!0;for(var k=y.length;k;){for(_=y,y=[],w=-1;++w<k;)_[w]();k=y.length}p=!1}u.exports=function(w){y.push(w)!==1||p||d()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,u,l){var h=a("immediate");function d(){}var p={},x=["REJECTED"],m=["FULFILLED"],g=["PENDING"];function b(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,k!==d&&w(this,k)}function v(k,E,S){this.promise=k,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function y(k,E,S){h(function(){var B;try{B=E(S)}catch(P){return p.reject(k,P)}B===k?p.reject(k,new TypeError("Cannot resolve promise with itself")):p.resolve(k,B)})}function C(k){var E=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof E=="function")return function(){E.apply(k,arguments)}}function w(k,E){var S=!1;function B(U){S||(S=!0,p.reject(k,U))}function P(U){S||(S=!0,p.resolve(k,U))}var L=_(function(){E(P,B)});L.status==="error"&&B(L.value)}function _(k,E){var S={};try{S.value=k(E),S.status="success"}catch(B){S.status="error",S.value=B}return S}(u.exports=b).prototype.finally=function(k){if(typeof k!="function")return this;var E=this.constructor;return this.then(function(S){return E.resolve(k()).then(function(){return S})},function(S){return E.resolve(k()).then(function(){throw S})})},b.prototype.catch=function(k){return this.then(null,k)},b.prototype.then=function(k,E){if(typeof k!="function"&&this.state===m||typeof E!="function"&&this.state===x)return this;var S=new this.constructor(d);return this.state!==g?y(S,this.state===m?k:E,this.outcome):this.queue.push(new v(S,k,E)),S},v.prototype.callFulfilled=function(k){p.resolve(this.promise,k)},v.prototype.otherCallFulfilled=function(k){y(this.promise,this.onFulfilled,k)},v.prototype.callRejected=function(k){p.reject(this.promise,k)},v.prototype.otherCallRejected=function(k){y(this.promise,this.onRejected,k)},p.resolve=function(k,E){var S=_(C,E);if(S.status==="error")return p.reject(k,S.value);var B=S.value;if(B)w(k,B);else{k.state=m,k.outcome=E;for(var P=-1,L=k.queue.length;++P<L;)k.queue[P].callFulfilled(E)}return k},p.reject=function(k,E){k.state=x,k.outcome=E;for(var S=-1,B=k.queue.length;++S<B;)k.queue[S].callRejected(E);return k},b.resolve=function(k){return k instanceof this?k:p.resolve(new this(d),k)},b.reject=function(k){var E=new this(d);return p.reject(E,k)},b.all=function(k){var E=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=k.length,B=!1;if(!S)return this.resolve([]);for(var P=new Array(S),L=0,U=-1,q=new this(d);++U<S;)K(k[U],U);return q;function K(z,G){E.resolve(z).then(function(N){P[G]=N,++L!==S||B||(B=!0,p.resolve(q,P))},function(N){B||(B=!0,p.reject(q,N))})}},b.race=function(k){var E=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=k.length,B=!1;if(!S)return this.resolve([]);for(var P=-1,L=new this(d);++P<S;)U=k[P],E.resolve(U).then(function(q){B||(B=!0,p.resolve(L,q))},function(q){B||(B=!0,p.reject(L,q))});var U;return L}},{immediate:36}],38:[function(a,u,l){var h={};(0,a("./lib/utils/common").assign)(h,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),u.exports=h},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,u,l){var h=a("./zlib/deflate"),d=a("./utils/common"),p=a("./utils/strings"),x=a("./zlib/messages"),m=a("./zlib/zstream"),g=Object.prototype.toString,b=0,v=-1,y=0,C=8;function w(k){if(!(this instanceof w))return new w(k);this.options=d.assign({level:v,method:C,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},k||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var S=h.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(S!==b)throw new Error(x[S]);if(E.header&&h.deflateSetHeader(this.strm,E.header),E.dictionary){var B;if(B=typeof E.dictionary=="string"?p.string2buf(E.dictionary):g.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(S=h.deflateSetDictionary(this.strm,B))!==b)throw new Error(x[S]);this._dict_set=!0}}function _(k,E){var S=new w(E);if(S.push(k,!0),S.err)throw S.msg||x[S.err];return S.result}w.prototype.push=function(k,E){var S,B,P=this.strm,L=this.options.chunkSize;if(this.ended)return!1;B=E===~~E?E:E===!0?4:0,typeof k=="string"?P.input=p.string2buf(k):g.call(k)==="[object ArrayBuffer]"?P.input=new Uint8Array(k):P.input=k,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new d.Buf8(L),P.next_out=0,P.avail_out=L),(S=h.deflate(P,B))!==1&&S!==b)return this.onEnd(S),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||B!==4&&B!==2)||(this.options.to==="string"?this.onData(p.buf2binstring(d.shrinkBuf(P.output,P.next_out))):this.onData(d.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&S!==1);return B===4?(S=h.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===b):B!==2||(this.onEnd(b),!(P.avail_out=0))},w.prototype.onData=function(k){this.chunks.push(k)},w.prototype.onEnd=function(k){k===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},l.Deflate=w,l.deflate=_,l.deflateRaw=function(k,E){return(E=E||{}).raw=!0,_(k,E)},l.gzip=function(k,E){return(E=E||{}).gzip=!0,_(k,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,u,l){var h=a("./zlib/inflate"),d=a("./utils/common"),p=a("./utils/strings"),x=a("./zlib/constants"),m=a("./zlib/messages"),g=a("./zlib/zstream"),b=a("./zlib/gzheader"),v=Object.prototype.toString;function y(w){if(!(this instanceof y))return new y(w);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},w||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||w&&w.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var k=h.inflateInit2(this.strm,_.windowBits);if(k!==x.Z_OK)throw new Error(m[k]);this.header=new b,h.inflateGetHeader(this.strm,this.header)}function C(w,_){var k=new y(_);if(k.push(w,!0),k.err)throw k.msg||m[k.err];return k.result}y.prototype.push=function(w,_){var k,E,S,B,P,L,U=this.strm,q=this.options.chunkSize,K=this.options.dictionary,z=!1;if(this.ended)return!1;E=_===~~_?_:_===!0?x.Z_FINISH:x.Z_NO_FLUSH,typeof w=="string"?U.input=p.binstring2buf(w):v.call(w)==="[object ArrayBuffer]"?U.input=new Uint8Array(w):U.input=w,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new d.Buf8(q),U.next_out=0,U.avail_out=q),(k=h.inflate(U,x.Z_NO_FLUSH))===x.Z_NEED_DICT&&K&&(L=typeof K=="string"?p.string2buf(K):v.call(K)==="[object ArrayBuffer]"?new Uint8Array(K):K,k=h.inflateSetDictionary(this.strm,L)),k===x.Z_BUF_ERROR&&z===!0&&(k=x.Z_OK,z=!1),k!==x.Z_STREAM_END&&k!==x.Z_OK)return this.onEnd(k),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&k!==x.Z_STREAM_END&&(U.avail_in!==0||E!==x.Z_FINISH&&E!==x.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=p.utf8border(U.output,U.next_out),B=U.next_out-S,P=p.buf2string(U.output,S),U.next_out=B,U.avail_out=q-B,B&&d.arraySet(U.output,U.output,S,B,0),this.onData(P)):this.onData(d.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&(z=!0)}while((0<U.avail_in||U.avail_out===0)&&k!==x.Z_STREAM_END);return k===x.Z_STREAM_END&&(E=x.Z_FINISH),E===x.Z_FINISH?(k=h.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===x.Z_OK):E!==x.Z_SYNC_FLUSH||(this.onEnd(x.Z_OK),!(U.avail_out=0))},y.prototype.onData=function(w){this.chunks.push(w)},y.prototype.onEnd=function(w){w===x.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},l.Inflate=y,l.inflate=C,l.inflateRaw=function(w,_){return(_=_||{}).raw=!0,C(w,_)},l.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,u,l){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";l.assign=function(x){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var g=m.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var b in g)g.hasOwnProperty(b)&&(x[b]=g[b])}}return x},l.shrinkBuf=function(x,m){return x.length===m?x:x.subarray?x.subarray(0,m):(x.length=m,x)};var d={arraySet:function(x,m,g,b,v){if(m.subarray&&x.subarray)x.set(m.subarray(g,g+b),v);else for(var y=0;y<b;y++)x[v+y]=m[g+y]},flattenChunks:function(x){var m,g,b,v,y,C;for(m=b=0,g=x.length;m<g;m++)b+=x[m].length;for(C=new Uint8Array(b),m=v=0,g=x.length;m<g;m++)y=x[m],C.set(y,v),v+=y.length;return C}},p={arraySet:function(x,m,g,b,v){for(var y=0;y<b;y++)x[v+y]=m[g+y]},flattenChunks:function(x){return[].concat.apply([],x)}};l.setTyped=function(x){x?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,d)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,p))},l.setTyped(h)},{}],42:[function(a,u,l){var h=a("./common"),d=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var x=new h.Buf8(256),m=0;m<256;m++)x[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function g(b,v){if(v<65537&&(b.subarray&&p||!b.subarray&&d))return String.fromCharCode.apply(null,h.shrinkBuf(b,v));for(var y="",C=0;C<v;C++)y+=String.fromCharCode(b[C]);return y}x[254]=x[254]=1,l.string2buf=function(b){var v,y,C,w,_,k=b.length,E=0;for(w=0;w<k;w++)(64512&(y=b.charCodeAt(w)))==55296&&w+1<k&&(64512&(C=b.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(C-56320),w++),E+=y<128?1:y<2048?2:y<65536?3:4;for(v=new h.Buf8(E),w=_=0;_<E;w++)(64512&(y=b.charCodeAt(w)))==55296&&w+1<k&&(64512&(C=b.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(C-56320),w++),y<128?v[_++]=y:(y<2048?v[_++]=192|y>>>6:(y<65536?v[_++]=224|y>>>12:(v[_++]=240|y>>>18,v[_++]=128|y>>>12&63),v[_++]=128|y>>>6&63),v[_++]=128|63&y);return v},l.buf2binstring=function(b){return g(b,b.length)},l.binstring2buf=function(b){for(var v=new h.Buf8(b.length),y=0,C=v.length;y<C;y++)v[y]=b.charCodeAt(y);return v},l.buf2string=function(b,v){var y,C,w,_,k=v||b.length,E=new Array(2*k);for(y=C=0;y<k;)if((w=b[y++])<128)E[C++]=w;else if(4<(_=x[w]))E[C++]=65533,y+=_-1;else{for(w&=_===2?31:_===3?15:7;1<_&&y<k;)w=w<<6|63&b[y++],_--;1<_?E[C++]=65533:w<65536?E[C++]=w:(w-=65536,E[C++]=55296|w>>10&1023,E[C++]=56320|1023&w)}return g(E,C)},l.utf8border=function(b,v){var y;for((v=v||b.length)>b.length&&(v=b.length),y=v-1;0<=y&&(192&b[y])==128;)y--;return y<0||y===0?v:y+x[b[y]]>v?y:v}},{"./common":41}],43:[function(a,u,l){u.exports=function(h,d,p,x){for(var m=65535&h|0,g=h>>>16&65535|0,b=0;p!==0;){for(p-=b=2e3<p?2e3:p;g=g+(m=m+d[x++]|0)|0,--b;);m%=65521,g%=65521}return m|g<<16|0}},{}],44:[function(a,u,l){u.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,u,l){var h=function(){for(var d,p=[],x=0;x<256;x++){d=x;for(var m=0;m<8;m++)d=1&d?3988292384^d>>>1:d>>>1;p[x]=d}return p}();u.exports=function(d,p,x,m){var g=h,b=m+x;d^=-1;for(var v=m;v<b;v++)d=d>>>8^g[255&(d^p[v])];return-1^d}},{}],46:[function(a,u,l){var h,d=a("../utils/common"),p=a("./trees"),x=a("./adler32"),m=a("./crc32"),g=a("./messages"),b=0,v=4,y=0,C=-2,w=-1,_=4,k=2,E=8,S=9,B=286,P=30,L=19,U=2*B+1,q=15,K=3,z=258,G=z+K+1,N=42,M=113,F=1,J=2,le=3,te=4;function de(I,xe){return I.msg=g[xe],xe}function ne(I){return(I<<1)-(4<I?9:0)}function ge(I){for(var xe=I.length;0<=--xe;)I[xe]=0}function V(I){var xe=I.state,he=xe.pending;he>I.avail_out&&(he=I.avail_out),he!==0&&(d.arraySet(I.output,xe.pending_buf,xe.pending_out,he,I.next_out),I.next_out+=he,xe.pending_out+=he,I.total_out+=he,I.avail_out-=he,xe.pending-=he,xe.pending===0&&(xe.pending_out=0))}function Y(I,xe){p._tr_flush_block(I,0<=I.block_start?I.block_start:-1,I.strstart-I.block_start,xe),I.block_start=I.strstart,V(I.strm)}function ce(I,xe){I.pending_buf[I.pending++]=xe}function re(I,xe){I.pending_buf[I.pending++]=xe>>>8&255,I.pending_buf[I.pending++]=255&xe}function pe(I,xe){var he,X,Q=I.max_chain_length,oe=I.strstart,Ce=I.prev_length,me=I.nice_match,ae=I.strstart>I.w_size-G?I.strstart-(I.w_size-G):0,ve=I.window,Ee=I.w_mask,ye=I.prev,Ae=I.strstart+z,Fe=ve[oe+Ce-1],Ne=ve[oe+Ce];I.prev_length>=I.good_match&&(Q>>=2),me>I.lookahead&&(me=I.lookahead);do if(ve[(he=xe)+Ce]===Ne&&ve[he+Ce-1]===Fe&&ve[he]===ve[oe]&&ve[++he]===ve[oe+1]){oe+=2,he++;do;while(ve[++oe]===ve[++he]&&ve[++oe]===ve[++he]&&ve[++oe]===ve[++he]&&ve[++oe]===ve[++he]&&ve[++oe]===ve[++he]&&ve[++oe]===ve[++he]&&ve[++oe]===ve[++he]&&ve[++oe]===ve[++he]&&oe<Ae);if(X=z-(Ae-oe),oe=Ae-z,Ce<X){if(I.match_start=xe,me<=(Ce=X))break;Fe=ve[oe+Ce-1],Ne=ve[oe+Ce]}}while((xe=ye[xe&Ee])>ae&&--Q!=0);return Ce<=I.lookahead?Ce:I.lookahead}function Pe(I){var xe,he,X,Q,oe,Ce,me,ae,ve,Ee,ye=I.w_size;do{if(Q=I.window_size-I.lookahead-I.strstart,I.strstart>=ye+(ye-G)){for(d.arraySet(I.window,I.window,ye,ye,0),I.match_start-=ye,I.strstart-=ye,I.block_start-=ye,xe=he=I.hash_size;X=I.head[--xe],I.head[xe]=ye<=X?X-ye:0,--he;);for(xe=he=ye;X=I.prev[--xe],I.prev[xe]=ye<=X?X-ye:0,--he;);Q+=ye}if(I.strm.avail_in===0)break;if(Ce=I.strm,me=I.window,ae=I.strstart+I.lookahead,ve=Q,Ee=void 0,Ee=Ce.avail_in,ve<Ee&&(Ee=ve),he=Ee===0?0:(Ce.avail_in-=Ee,d.arraySet(me,Ce.input,Ce.next_in,Ee,ae),Ce.state.wrap===1?Ce.adler=x(Ce.adler,me,Ee,ae):Ce.state.wrap===2&&(Ce.adler=m(Ce.adler,me,Ee,ae)),Ce.next_in+=Ee,Ce.total_in+=Ee,Ee),I.lookahead+=he,I.lookahead+I.insert>=K)for(oe=I.strstart-I.insert,I.ins_h=I.window[oe],I.ins_h=(I.ins_h<<I.hash_shift^I.window[oe+1])&I.hash_mask;I.insert&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[oe+K-1])&I.hash_mask,I.prev[oe&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=oe,oe++,I.insert--,!(I.lookahead+I.insert<K)););}while(I.lookahead<G&&I.strm.avail_in!==0)}function Oe(I,xe){for(var he,X;;){if(I.lookahead<G){if(Pe(I),I.lookahead<G&&xe===b)return F;if(I.lookahead===0)break}if(he=0,I.lookahead>=K&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+K-1])&I.hash_mask,he=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),he!==0&&I.strstart-he<=I.w_size-G&&(I.match_length=pe(I,he)),I.match_length>=K)if(X=p._tr_tally(I,I.strstart-I.match_start,I.match_length-K),I.lookahead-=I.match_length,I.match_length<=I.max_lazy_match&&I.lookahead>=K){for(I.match_length--;I.strstart++,I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+K-1])&I.hash_mask,he=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart,--I.match_length!=0;);I.strstart++}else I.strstart+=I.match_length,I.match_length=0,I.ins_h=I.window[I.strstart],I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+1])&I.hash_mask;else X=p._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++;if(X&&(Y(I,!1),I.strm.avail_out===0))return F}return I.insert=I.strstart<K-1?I.strstart:K-1,xe===v?(Y(I,!0),I.strm.avail_out===0?le:te):I.last_lit&&(Y(I,!1),I.strm.avail_out===0)?F:J}function ke(I,xe){for(var he,X,Q;;){if(I.lookahead<G){if(Pe(I),I.lookahead<G&&xe===b)return F;if(I.lookahead===0)break}if(he=0,I.lookahead>=K&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+K-1])&I.hash_mask,he=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),I.prev_length=I.match_length,I.prev_match=I.match_start,I.match_length=K-1,he!==0&&I.prev_length<I.max_lazy_match&&I.strstart-he<=I.w_size-G&&(I.match_length=pe(I,he),I.match_length<=5&&(I.strategy===1||I.match_length===K&&4096<I.strstart-I.match_start)&&(I.match_length=K-1)),I.prev_length>=K&&I.match_length<=I.prev_length){for(Q=I.strstart+I.lookahead-K,X=p._tr_tally(I,I.strstart-1-I.prev_match,I.prev_length-K),I.lookahead-=I.prev_length-1,I.prev_length-=2;++I.strstart<=Q&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+K-1])&I.hash_mask,he=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),--I.prev_length!=0;);if(I.match_available=0,I.match_length=K-1,I.strstart++,X&&(Y(I,!1),I.strm.avail_out===0))return F}else if(I.match_available){if((X=p._tr_tally(I,0,I.window[I.strstart-1]))&&Y(I,!1),I.strstart++,I.lookahead--,I.strm.avail_out===0)return F}else I.match_available=1,I.strstart++,I.lookahead--}return I.match_available&&(X=p._tr_tally(I,0,I.window[I.strstart-1]),I.match_available=0),I.insert=I.strstart<K-1?I.strstart:K-1,xe===v?(Y(I,!0),I.strm.avail_out===0?le:te):I.last_lit&&(Y(I,!1),I.strm.avail_out===0)?F:J}function Te(I,xe,he,X,Q){this.good_length=I,this.max_lazy=xe,this.nice_length=he,this.max_chain=X,this.func=Q}function Le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*U),this.dyn_dtree=new d.Buf16(2*(2*P+1)),this.bl_tree=new d.Buf16(2*(2*L+1)),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(q+1),this.heap=new d.Buf16(2*B+1),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*B+1),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ue(I){var xe;return I&&I.state?(I.total_in=I.total_out=0,I.data_type=k,(xe=I.state).pending=0,xe.pending_out=0,xe.wrap<0&&(xe.wrap=-xe.wrap),xe.status=xe.wrap?N:M,I.adler=xe.wrap===2?0:1,xe.last_flush=b,p._tr_init(xe),y):de(I,C)}function Ke(I){var xe=Ue(I);return xe===y&&function(he){he.window_size=2*he.w_size,ge(he.head),he.max_lazy_match=h[he.level].max_lazy,he.good_match=h[he.level].good_length,he.nice_match=h[he.level].nice_length,he.max_chain_length=h[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=K-1,he.match_available=0,he.ins_h=0}(I.state),xe}function Ie(I,xe,he,X,Q,oe){if(!I)return C;var Ce=1;if(xe===w&&(xe=6),X<0?(Ce=0,X=-X):15<X&&(Ce=2,X-=16),Q<1||S<Q||he!==E||X<8||15<X||xe<0||9<xe||oe<0||_<oe)return de(I,C);X===8&&(X=9);var me=new Le;return(I.state=me).strm=I,me.wrap=Ce,me.gzhead=null,me.w_bits=X,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=Q+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+K-1)/K),me.window=new d.Buf8(2*me.w_size),me.head=new d.Buf16(me.hash_size),me.prev=new d.Buf16(me.w_size),me.lit_bufsize=1<<Q+6,me.pending_buf_size=4*me.lit_bufsize,me.pending_buf=new d.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=xe,me.strategy=oe,me.method=he,Ke(I)}h=[new Te(0,0,0,0,function(I,xe){var he=65535;for(he>I.pending_buf_size-5&&(he=I.pending_buf_size-5);;){if(I.lookahead<=1){if(Pe(I),I.lookahead===0&&xe===b)return F;if(I.lookahead===0)break}I.strstart+=I.lookahead,I.lookahead=0;var X=I.block_start+he;if((I.strstart===0||I.strstart>=X)&&(I.lookahead=I.strstart-X,I.strstart=X,Y(I,!1),I.strm.avail_out===0)||I.strstart-I.block_start>=I.w_size-G&&(Y(I,!1),I.strm.avail_out===0))return F}return I.insert=0,xe===v?(Y(I,!0),I.strm.avail_out===0?le:te):(I.strstart>I.block_start&&(Y(I,!1),I.strm.avail_out),F)}),new Te(4,4,8,4,Oe),new Te(4,5,16,8,Oe),new Te(4,6,32,32,Oe),new Te(4,4,16,16,ke),new Te(8,16,32,32,ke),new Te(8,16,128,128,ke),new Te(8,32,128,256,ke),new Te(32,128,258,1024,ke),new Te(32,258,258,4096,ke)],l.deflateInit=function(I,xe){return Ie(I,xe,E,15,8,0)},l.deflateInit2=Ie,l.deflateReset=Ke,l.deflateResetKeep=Ue,l.deflateSetHeader=function(I,xe){return I&&I.state?I.state.wrap!==2?C:(I.state.gzhead=xe,y):C},l.deflate=function(I,xe){var he,X,Q,oe;if(!I||!I.state||5<xe||xe<0)return I?de(I,C):C;if(X=I.state,!I.output||!I.input&&I.avail_in!==0||X.status===666&&xe!==v)return de(I,I.avail_out===0?-5:C);if(X.strm=I,he=X.last_flush,X.last_flush=xe,X.status===N)if(X.wrap===2)I.adler=0,ce(X,31),ce(X,139),ce(X,8),X.gzhead?(ce(X,(X.gzhead.text?1:0)+(X.gzhead.hcrc?2:0)+(X.gzhead.extra?4:0)+(X.gzhead.name?8:0)+(X.gzhead.comment?16:0)),ce(X,255&X.gzhead.time),ce(X,X.gzhead.time>>8&255),ce(X,X.gzhead.time>>16&255),ce(X,X.gzhead.time>>24&255),ce(X,X.level===9?2:2<=X.strategy||X.level<2?4:0),ce(X,255&X.gzhead.os),X.gzhead.extra&&X.gzhead.extra.length&&(ce(X,255&X.gzhead.extra.length),ce(X,X.gzhead.extra.length>>8&255)),X.gzhead.hcrc&&(I.adler=m(I.adler,X.pending_buf,X.pending,0)),X.gzindex=0,X.status=69):(ce(X,0),ce(X,0),ce(X,0),ce(X,0),ce(X,0),ce(X,X.level===9?2:2<=X.strategy||X.level<2?4:0),ce(X,3),X.status=M);else{var Ce=E+(X.w_bits-8<<4)<<8;Ce|=(2<=X.strategy||X.level<2?0:X.level<6?1:X.level===6?2:3)<<6,X.strstart!==0&&(Ce|=32),Ce+=31-Ce%31,X.status=M,re(X,Ce),X.strstart!==0&&(re(X,I.adler>>>16),re(X,65535&I.adler)),I.adler=1}if(X.status===69)if(X.gzhead.extra){for(Q=X.pending;X.gzindex<(65535&X.gzhead.extra.length)&&(X.pending!==X.pending_buf_size||(X.gzhead.hcrc&&X.pending>Q&&(I.adler=m(I.adler,X.pending_buf,X.pending-Q,Q)),V(I),Q=X.pending,X.pending!==X.pending_buf_size));)ce(X,255&X.gzhead.extra[X.gzindex]),X.gzindex++;X.gzhead.hcrc&&X.pending>Q&&(I.adler=m(I.adler,X.pending_buf,X.pending-Q,Q)),X.gzindex===X.gzhead.extra.length&&(X.gzindex=0,X.status=73)}else X.status=73;if(X.status===73)if(X.gzhead.name){Q=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>Q&&(I.adler=m(I.adler,X.pending_buf,X.pending-Q,Q)),V(I),Q=X.pending,X.pending===X.pending_buf_size)){oe=1;break}oe=X.gzindex<X.gzhead.name.length?255&X.gzhead.name.charCodeAt(X.gzindex++):0,ce(X,oe)}while(oe!==0);X.gzhead.hcrc&&X.pending>Q&&(I.adler=m(I.adler,X.pending_buf,X.pending-Q,Q)),oe===0&&(X.gzindex=0,X.status=91)}else X.status=91;if(X.status===91)if(X.gzhead.comment){Q=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>Q&&(I.adler=m(I.adler,X.pending_buf,X.pending-Q,Q)),V(I),Q=X.pending,X.pending===X.pending_buf_size)){oe=1;break}oe=X.gzindex<X.gzhead.comment.length?255&X.gzhead.comment.charCodeAt(X.gzindex++):0,ce(X,oe)}while(oe!==0);X.gzhead.hcrc&&X.pending>Q&&(I.adler=m(I.adler,X.pending_buf,X.pending-Q,Q)),oe===0&&(X.status=103)}else X.status=103;if(X.status===103&&(X.gzhead.hcrc?(X.pending+2>X.pending_buf_size&&V(I),X.pending+2<=X.pending_buf_size&&(ce(X,255&I.adler),ce(X,I.adler>>8&255),I.adler=0,X.status=M)):X.status=M),X.pending!==0){if(V(I),I.avail_out===0)return X.last_flush=-1,y}else if(I.avail_in===0&&ne(xe)<=ne(he)&&xe!==v)return de(I,-5);if(X.status===666&&I.avail_in!==0)return de(I,-5);if(I.avail_in!==0||X.lookahead!==0||xe!==b&&X.status!==666){var me=X.strategy===2?function(ae,ve){for(var Ee;;){if(ae.lookahead===0&&(Pe(ae),ae.lookahead===0)){if(ve===b)return F;break}if(ae.match_length=0,Ee=p._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++,Ee&&(Y(ae,!1),ae.strm.avail_out===0))return F}return ae.insert=0,ve===v?(Y(ae,!0),ae.strm.avail_out===0?le:te):ae.last_lit&&(Y(ae,!1),ae.strm.avail_out===0)?F:J}(X,xe):X.strategy===3?function(ae,ve){for(var Ee,ye,Ae,Fe,Ne=ae.window;;){if(ae.lookahead<=z){if(Pe(ae),ae.lookahead<=z&&ve===b)return F;if(ae.lookahead===0)break}if(ae.match_length=0,ae.lookahead>=K&&0<ae.strstart&&(ye=Ne[Ae=ae.strstart-1])===Ne[++Ae]&&ye===Ne[++Ae]&&ye===Ne[++Ae]){Fe=ae.strstart+z;do;while(ye===Ne[++Ae]&&ye===Ne[++Ae]&&ye===Ne[++Ae]&&ye===Ne[++Ae]&&ye===Ne[++Ae]&&ye===Ne[++Ae]&&ye===Ne[++Ae]&&ye===Ne[++Ae]&&Ae<Fe);ae.match_length=z-(Fe-Ae),ae.match_length>ae.lookahead&&(ae.match_length=ae.lookahead)}if(ae.match_length>=K?(Ee=p._tr_tally(ae,1,ae.match_length-K),ae.lookahead-=ae.match_length,ae.strstart+=ae.match_length,ae.match_length=0):(Ee=p._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++),Ee&&(Y(ae,!1),ae.strm.avail_out===0))return F}return ae.insert=0,ve===v?(Y(ae,!0),ae.strm.avail_out===0?le:te):ae.last_lit&&(Y(ae,!1),ae.strm.avail_out===0)?F:J}(X,xe):h[X.level].func(X,xe);if(me!==le&&me!==te||(X.status=666),me===F||me===le)return I.avail_out===0&&(X.last_flush=-1),y;if(me===J&&(xe===1?p._tr_align(X):xe!==5&&(p._tr_stored_block(X,0,0,!1),xe===3&&(ge(X.head),X.lookahead===0&&(X.strstart=0,X.block_start=0,X.insert=0))),V(I),I.avail_out===0))return X.last_flush=-1,y}return xe!==v?y:X.wrap<=0?1:(X.wrap===2?(ce(X,255&I.adler),ce(X,I.adler>>8&255),ce(X,I.adler>>16&255),ce(X,I.adler>>24&255),ce(X,255&I.total_in),ce(X,I.total_in>>8&255),ce(X,I.total_in>>16&255),ce(X,I.total_in>>24&255)):(re(X,I.adler>>>16),re(X,65535&I.adler)),V(I),0<X.wrap&&(X.wrap=-X.wrap),X.pending!==0?y:1)},l.deflateEnd=function(I){var xe;return I&&I.state?(xe=I.state.status)!==N&&xe!==69&&xe!==73&&xe!==91&&xe!==103&&xe!==M&&xe!==666?de(I,C):(I.state=null,xe===M?de(I,-3):y):C},l.deflateSetDictionary=function(I,xe){var he,X,Q,oe,Ce,me,ae,ve,Ee=xe.length;if(!I||!I.state||(oe=(he=I.state).wrap)===2||oe===1&&he.status!==N||he.lookahead)return C;for(oe===1&&(I.adler=x(I.adler,xe,Ee,0)),he.wrap=0,Ee>=he.w_size&&(oe===0&&(ge(he.head),he.strstart=0,he.block_start=0,he.insert=0),ve=new d.Buf8(he.w_size),d.arraySet(ve,xe,Ee-he.w_size,he.w_size,0),xe=ve,Ee=he.w_size),Ce=I.avail_in,me=I.next_in,ae=I.input,I.avail_in=Ee,I.next_in=0,I.input=xe,Pe(he);he.lookahead>=K;){for(X=he.strstart,Q=he.lookahead-(K-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[X+K-1])&he.hash_mask,he.prev[X&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=X,X++,--Q;);he.strstart=X,he.lookahead=K-1,Pe(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=K-1,he.match_available=0,I.next_in=me,I.input=ae,I.avail_in=Ce,he.wrap=oe,y},l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,u,l){u.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,u,l){u.exports=function(h,d){var p,x,m,g,b,v,y,C,w,_,k,E,S,B,P,L,U,q,K,z,G,N,M,F,J;p=h.state,x=h.next_in,F=h.input,m=x+(h.avail_in-5),g=h.next_out,J=h.output,b=g-(d-h.avail_out),v=g+(h.avail_out-257),y=p.dmax,C=p.wsize,w=p.whave,_=p.wnext,k=p.window,E=p.hold,S=p.bits,B=p.lencode,P=p.distcode,L=(1<<p.lenbits)-1,U=(1<<p.distbits)-1;e:do{S<15&&(E+=F[x++]<<S,S+=8,E+=F[x++]<<S,S+=8),q=B[E&L];t:for(;;){if(E>>>=K=q>>>24,S-=K,(K=q>>>16&255)===0)J[g++]=65535&q;else{if(!(16&K)){if(!(64&K)){q=B[(65535&q)+(E&(1<<K)-1)];continue t}if(32&K){p.mode=12;break e}h.msg="invalid literal/length code",p.mode=30;break e}z=65535&q,(K&=15)&&(S<K&&(E+=F[x++]<<S,S+=8),z+=E&(1<<K)-1,E>>>=K,S-=K),S<15&&(E+=F[x++]<<S,S+=8,E+=F[x++]<<S,S+=8),q=P[E&U];r:for(;;){if(E>>>=K=q>>>24,S-=K,!(16&(K=q>>>16&255))){if(!(64&K)){q=P[(65535&q)+(E&(1<<K)-1)];continue r}h.msg="invalid distance code",p.mode=30;break e}if(G=65535&q,S<(K&=15)&&(E+=F[x++]<<S,(S+=8)<K&&(E+=F[x++]<<S,S+=8)),y<(G+=E&(1<<K)-1)){h.msg="invalid distance too far back",p.mode=30;break e}if(E>>>=K,S-=K,(K=g-b)<G){if(w<(K=G-K)&&p.sane){h.msg="invalid distance too far back",p.mode=30;break e}if(M=k,(N=0)===_){if(N+=C-K,K<z){for(z-=K;J[g++]=k[N++],--K;);N=g-G,M=J}}else if(_<K){if(N+=C+_-K,(K-=_)<z){for(z-=K;J[g++]=k[N++],--K;);if(N=0,_<z){for(z-=K=_;J[g++]=k[N++],--K;);N=g-G,M=J}}}else if(N+=_-K,K<z){for(z-=K;J[g++]=k[N++],--K;);N=g-G,M=J}for(;2<z;)J[g++]=M[N++],J[g++]=M[N++],J[g++]=M[N++],z-=3;z&&(J[g++]=M[N++],1<z&&(J[g++]=M[N++]))}else{for(N=g-G;J[g++]=J[N++],J[g++]=J[N++],J[g++]=J[N++],2<(z-=3););z&&(J[g++]=J[N++],1<z&&(J[g++]=J[N++]))}break}}break}}while(x<m&&g<v);x-=z=S>>3,E&=(1<<(S-=z<<3))-1,h.next_in=x,h.next_out=g,h.avail_in=x<m?m-x+5:5-(x-m),h.avail_out=g<v?v-g+257:257-(g-v),p.hold=E,p.bits=S}},{}],49:[function(a,u,l){var h=a("../utils/common"),d=a("./adler32"),p=a("./crc32"),x=a("./inffast"),m=a("./inftrees"),g=1,b=2,v=0,y=-2,C=1,w=852,_=592;function k(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(N){var M;return N&&N.state?(M=N.state,N.total_in=N.total_out=M.total=0,N.msg="",M.wrap&&(N.adler=1&M.wrap),M.mode=C,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new h.Buf32(w),M.distcode=M.distdyn=new h.Buf32(_),M.sane=1,M.back=-1,v):y}function B(N){var M;return N&&N.state?((M=N.state).wsize=0,M.whave=0,M.wnext=0,S(N)):y}function P(N,M){var F,J;return N&&N.state?(J=N.state,M<0?(F=0,M=-M):(F=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?y:(J.window!==null&&J.wbits!==M&&(J.window=null),J.wrap=F,J.wbits=M,B(N))):y}function L(N,M){var F,J;return N?(J=new E,(N.state=J).window=null,(F=P(N,M))!==v&&(N.state=null),F):y}var U,q,K=!0;function z(N){if(K){var M;for(U=new h.Buf32(512),q=new h.Buf32(32),M=0;M<144;)N.lens[M++]=8;for(;M<256;)N.lens[M++]=9;for(;M<280;)N.lens[M++]=7;for(;M<288;)N.lens[M++]=8;for(m(g,N.lens,0,288,U,0,N.work,{bits:9}),M=0;M<32;)N.lens[M++]=5;m(b,N.lens,0,32,q,0,N.work,{bits:5}),K=!1}N.lencode=U,N.lenbits=9,N.distcode=q,N.distbits=5}function G(N,M,F,J){var le,te=N.state;return te.window===null&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new h.Buf8(te.wsize)),J>=te.wsize?(h.arraySet(te.window,M,F-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(J<(le=te.wsize-te.wnext)&&(le=J),h.arraySet(te.window,M,F-J,le,te.wnext),(J-=le)?(h.arraySet(te.window,M,F-J,J,0),te.wnext=J,te.whave=te.wsize):(te.wnext+=le,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=le))),0}l.inflateReset=B,l.inflateReset2=P,l.inflateResetKeep=S,l.inflateInit=function(N){return L(N,15)},l.inflateInit2=L,l.inflate=function(N,M){var F,J,le,te,de,ne,ge,V,Y,ce,re,pe,Pe,Oe,ke,Te,Le,Ue,Ke,Ie,I,xe,he,X,Q=0,oe=new h.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return y;(F=N.state).mode===12&&(F.mode=13),de=N.next_out,le=N.output,ge=N.avail_out,te=N.next_in,J=N.input,ne=N.avail_in,V=F.hold,Y=F.bits,ce=ne,re=ge,xe=v;e:for(;;)switch(F.mode){case C:if(F.wrap===0){F.mode=13;break}for(;Y<16;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(2&F.wrap&&V===35615){oe[F.check=0]=255&V,oe[1]=V>>>8&255,F.check=p(F.check,oe,2,0),Y=V=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&V)<<8)+(V>>8))%31){N.msg="incorrect header check",F.mode=30;break}if((15&V)!=8){N.msg="unknown compression method",F.mode=30;break}if(Y-=4,I=8+(15&(V>>>=4)),F.wbits===0)F.wbits=I;else if(I>F.wbits){N.msg="invalid window size",F.mode=30;break}F.dmax=1<<I,N.adler=F.check=1,F.mode=512&V?10:12,Y=V=0;break;case 2:for(;Y<16;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(F.flags=V,(255&F.flags)!=8){N.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){N.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=V>>8&1),512&F.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,F.check=p(F.check,oe,2,0)),Y=V=0,F.mode=3;case 3:for(;Y<32;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}F.head&&(F.head.time=V),512&F.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,oe[2]=V>>>16&255,oe[3]=V>>>24&255,F.check=p(F.check,oe,4,0)),Y=V=0,F.mode=4;case 4:for(;Y<16;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}F.head&&(F.head.xflags=255&V,F.head.os=V>>8),512&F.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,F.check=p(F.check,oe,2,0)),Y=V=0,F.mode=5;case 5:if(1024&F.flags){for(;Y<16;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}F.length=V,F.head&&(F.head.extra_len=V),512&F.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,F.check=p(F.check,oe,2,0)),Y=V=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(ne<(pe=F.length)&&(pe=ne),pe&&(F.head&&(I=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),h.arraySet(F.head.extra,J,te,pe,I)),512&F.flags&&(F.check=p(F.check,J,pe,te)),ne-=pe,te+=pe,F.length-=pe),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(ne===0)break e;for(pe=0;I=J[te+pe++],F.head&&I&&F.length<65536&&(F.head.name+=String.fromCharCode(I)),I&&pe<ne;);if(512&F.flags&&(F.check=p(F.check,J,pe,te)),ne-=pe,te+=pe,I)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(ne===0)break e;for(pe=0;I=J[te+pe++],F.head&&I&&F.length<65536&&(F.head.comment+=String.fromCharCode(I)),I&&pe<ne;);if(512&F.flags&&(F.check=p(F.check,J,pe,te)),ne-=pe,te+=pe,I)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;Y<16;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(V!==(65535&F.check)){N.msg="header crc mismatch",F.mode=30;break}Y=V=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),N.adler=F.check=0,F.mode=12;break;case 10:for(;Y<32;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}N.adler=F.check=k(V),Y=V=0,F.mode=11;case 11:if(F.havedict===0)return N.next_out=de,N.avail_out=ge,N.next_in=te,N.avail_in=ne,F.hold=V,F.bits=Y,2;N.adler=F.check=1,F.mode=12;case 12:if(M===5||M===6)break e;case 13:if(F.last){V>>>=7&Y,Y-=7&Y,F.mode=27;break}for(;Y<3;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}switch(F.last=1&V,Y-=1,3&(V>>>=1)){case 0:F.mode=14;break;case 1:if(z(F),F.mode=20,M!==6)break;V>>>=2,Y-=2;break e;case 2:F.mode=17;break;case 3:N.msg="invalid block type",F.mode=30}V>>>=2,Y-=2;break;case 14:for(V>>>=7&Y,Y-=7&Y;Y<32;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if((65535&V)!=(V>>>16^65535)){N.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&V,Y=V=0,F.mode=15,M===6)break e;case 15:F.mode=16;case 16:if(pe=F.length){if(ne<pe&&(pe=ne),ge<pe&&(pe=ge),pe===0)break e;h.arraySet(le,J,te,pe,de),ne-=pe,te+=pe,ge-=pe,de+=pe,F.length-=pe;break}F.mode=12;break;case 17:for(;Y<14;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(F.nlen=257+(31&V),V>>>=5,Y-=5,F.ndist=1+(31&V),V>>>=5,Y-=5,F.ncode=4+(15&V),V>>>=4,Y-=4,286<F.nlen||30<F.ndist){N.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;Y<3;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}F.lens[Ce[F.have++]]=7&V,V>>>=3,Y-=3}for(;F.have<19;)F.lens[Ce[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,he={bits:F.lenbits},xe=m(0,F.lens,0,19,F.lencode,0,F.work,he),F.lenbits=he.bits,xe){N.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;Te=(Q=F.lencode[V&(1<<F.lenbits)-1])>>>16&255,Le=65535&Q,!((ke=Q>>>24)<=Y);){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(Le<16)V>>>=ke,Y-=ke,F.lens[F.have++]=Le;else{if(Le===16){for(X=ke+2;Y<X;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(V>>>=ke,Y-=ke,F.have===0){N.msg="invalid bit length repeat",F.mode=30;break}I=F.lens[F.have-1],pe=3+(3&V),V>>>=2,Y-=2}else if(Le===17){for(X=ke+3;Y<X;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}Y-=ke,I=0,pe=3+(7&(V>>>=ke)),V>>>=3,Y-=3}else{for(X=ke+7;Y<X;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}Y-=ke,I=0,pe=11+(127&(V>>>=ke)),V>>>=7,Y-=7}if(F.have+pe>F.nlen+F.ndist){N.msg="invalid bit length repeat",F.mode=30;break}for(;pe--;)F.lens[F.have++]=I}}if(F.mode===30)break;if(F.lens[256]===0){N.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,he={bits:F.lenbits},xe=m(g,F.lens,0,F.nlen,F.lencode,0,F.work,he),F.lenbits=he.bits,xe){N.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,he={bits:F.distbits},xe=m(b,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,he),F.distbits=he.bits,xe){N.msg="invalid distances set",F.mode=30;break}if(F.mode=20,M===6)break e;case 20:F.mode=21;case 21:if(6<=ne&&258<=ge){N.next_out=de,N.avail_out=ge,N.next_in=te,N.avail_in=ne,F.hold=V,F.bits=Y,x(N,re),de=N.next_out,le=N.output,ge=N.avail_out,te=N.next_in,J=N.input,ne=N.avail_in,V=F.hold,Y=F.bits,F.mode===12&&(F.back=-1);break}for(F.back=0;Te=(Q=F.lencode[V&(1<<F.lenbits)-1])>>>16&255,Le=65535&Q,!((ke=Q>>>24)<=Y);){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(Te&&!(240&Te)){for(Ue=ke,Ke=Te,Ie=Le;Te=(Q=F.lencode[Ie+((V&(1<<Ue+Ke)-1)>>Ue)])>>>16&255,Le=65535&Q,!(Ue+(ke=Q>>>24)<=Y);){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}V>>>=Ue,Y-=Ue,F.back+=Ue}if(V>>>=ke,Y-=ke,F.back+=ke,F.length=Le,Te===0){F.mode=26;break}if(32&Te){F.back=-1,F.mode=12;break}if(64&Te){N.msg="invalid literal/length code",F.mode=30;break}F.extra=15&Te,F.mode=22;case 22:if(F.extra){for(X=F.extra;Y<X;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}F.length+=V&(1<<F.extra)-1,V>>>=F.extra,Y-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;Te=(Q=F.distcode[V&(1<<F.distbits)-1])>>>16&255,Le=65535&Q,!((ke=Q>>>24)<=Y);){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(!(240&Te)){for(Ue=ke,Ke=Te,Ie=Le;Te=(Q=F.distcode[Ie+((V&(1<<Ue+Ke)-1)>>Ue)])>>>16&255,Le=65535&Q,!(Ue+(ke=Q>>>24)<=Y);){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}V>>>=Ue,Y-=Ue,F.back+=Ue}if(V>>>=ke,Y-=ke,F.back+=ke,64&Te){N.msg="invalid distance code",F.mode=30;break}F.offset=Le,F.extra=15&Te,F.mode=24;case 24:if(F.extra){for(X=F.extra;Y<X;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}F.offset+=V&(1<<F.extra)-1,V>>>=F.extra,Y-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){N.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(ge===0)break e;if(pe=re-ge,F.offset>pe){if((pe=F.offset-pe)>F.whave&&F.sane){N.msg="invalid distance too far back",F.mode=30;break}Pe=pe>F.wnext?(pe-=F.wnext,F.wsize-pe):F.wnext-pe,pe>F.length&&(pe=F.length),Oe=F.window}else Oe=le,Pe=de-F.offset,pe=F.length;for(ge<pe&&(pe=ge),ge-=pe,F.length-=pe;le[de++]=Oe[Pe++],--pe;);F.length===0&&(F.mode=21);break;case 26:if(ge===0)break e;le[de++]=F.length,ge--,F.mode=21;break;case 27:if(F.wrap){for(;Y<32;){if(ne===0)break e;ne--,V|=J[te++]<<Y,Y+=8}if(re-=ge,N.total_out+=re,F.total+=re,re&&(N.adler=F.check=F.flags?p(F.check,le,re,de-re):d(F.check,le,re,de-re)),re=ge,(F.flags?V:k(V))!==F.check){N.msg="incorrect data check",F.mode=30;break}Y=V=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;Y<32;){if(ne===0)break e;ne--,V+=J[te++]<<Y,Y+=8}if(V!==(4294967295&F.total)){N.msg="incorrect length check",F.mode=30;break}Y=V=0}F.mode=29;case 29:xe=1;break e;case 30:xe=-3;break e;case 31:return-4;case 32:default:return y}return N.next_out=de,N.avail_out=ge,N.next_in=te,N.avail_in=ne,F.hold=V,F.bits=Y,(F.wsize||re!==N.avail_out&&F.mode<30&&(F.mode<27||M!==4))&&G(N,N.output,N.next_out,re-N.avail_out)?(F.mode=31,-4):(ce-=N.avail_in,re-=N.avail_out,N.total_in+=ce,N.total_out+=re,F.total+=re,F.wrap&&re&&(N.adler=F.check=F.flags?p(F.check,le,re,N.next_out-re):d(F.check,le,re,N.next_out-re)),N.data_type=F.bits+(F.last?64:0)+(F.mode===12?128:0)+(F.mode===20||F.mode===15?256:0),(ce==0&&re===0||M===4)&&xe===v&&(xe=-5),xe)},l.inflateEnd=function(N){if(!N||!N.state)return y;var M=N.state;return M.window&&(M.window=null),N.state=null,v},l.inflateGetHeader=function(N,M){var F;return N&&N.state&&2&(F=N.state).wrap?((F.head=M).done=!1,v):y},l.inflateSetDictionary=function(N,M){var F,J=M.length;return N&&N.state?(F=N.state).wrap!==0&&F.mode!==11?y:F.mode===11&&d(1,M,J,0)!==F.check?-3:G(N,M,J,J)?(F.mode=31,-4):(F.havedict=1,v):y},l.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,u,l){var h=a("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];u.exports=function(g,b,v,y,C,w,_,k){var E,S,B,P,L,U,q,K,z,G=k.bits,N=0,M=0,F=0,J=0,le=0,te=0,de=0,ne=0,ge=0,V=0,Y=null,ce=0,re=new h.Buf16(16),pe=new h.Buf16(16),Pe=null,Oe=0;for(N=0;N<=15;N++)re[N]=0;for(M=0;M<y;M++)re[b[v+M]]++;for(le=G,J=15;1<=J&&re[J]===0;J--);if(J<le&&(le=J),J===0)return C[w++]=20971520,C[w++]=20971520,k.bits=1,0;for(F=1;F<J&&re[F]===0;F++);for(le<F&&(le=F),N=ne=1;N<=15;N++)if(ne<<=1,(ne-=re[N])<0)return-1;if(0<ne&&(g===0||J!==1))return-1;for(pe[1]=0,N=1;N<15;N++)pe[N+1]=pe[N]+re[N];for(M=0;M<y;M++)b[v+M]!==0&&(_[pe[b[v+M]]++]=M);if(U=g===0?(Y=Pe=_,19):g===1?(Y=d,ce-=257,Pe=p,Oe-=257,256):(Y=x,Pe=m,-1),N=F,L=w,de=M=V=0,B=-1,P=(ge=1<<(te=le))-1,g===1&&852<ge||g===2&&592<ge)return 1;for(;;){for(q=N-de,z=_[M]<U?(K=0,_[M]):_[M]>U?(K=Pe[Oe+_[M]],Y[ce+_[M]]):(K=96,0),E=1<<N-de,F=S=1<<te;C[L+(V>>de)+(S-=E)]=q<<24|K<<16|z|0,S!==0;);for(E=1<<N-1;V&E;)E>>=1;if(E!==0?(V&=E-1,V+=E):V=0,M++,--re[N]==0){if(N===J)break;N=b[v+_[M]]}if(le<N&&(V&P)!==B){for(de===0&&(de=le),L+=F,ne=1<<(te=N-de);te+de<J&&!((ne-=re[te+de])<=0);)te++,ne<<=1;if(ge+=1<<te,g===1&&852<ge||g===2&&592<ge)return 1;C[B=V&P]=le<<24|te<<16|L-w|0}}return V!==0&&(C[L+V]=N-de<<24|64<<16|0),k.bits=le,0}},{"../utils/common":41}],51:[function(a,u,l){u.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,u,l){var h=a("../utils/common"),d=0,p=1;function x(Q){for(var oe=Q.length;0<=--oe;)Q[oe]=0}var m=0,g=29,b=256,v=b+1+g,y=30,C=19,w=2*v+1,_=15,k=16,E=7,S=256,B=16,P=17,L=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(v+2));x(G);var N=new Array(2*y);x(N);var M=new Array(512);x(M);var F=new Array(256);x(F);var J=new Array(g);x(J);var le,te,de,ne=new Array(y);function ge(Q,oe,Ce,me,ae){this.static_tree=Q,this.extra_bits=oe,this.extra_base=Ce,this.elems=me,this.max_length=ae,this.has_stree=Q&&Q.length}function V(Q,oe){this.dyn_tree=Q,this.max_code=0,this.stat_desc=oe}function Y(Q){return Q<256?M[Q]:M[256+(Q>>>7)]}function ce(Q,oe){Q.pending_buf[Q.pending++]=255&oe,Q.pending_buf[Q.pending++]=oe>>>8&255}function re(Q,oe,Ce){Q.bi_valid>k-Ce?(Q.bi_buf|=oe<<Q.bi_valid&65535,ce(Q,Q.bi_buf),Q.bi_buf=oe>>k-Q.bi_valid,Q.bi_valid+=Ce-k):(Q.bi_buf|=oe<<Q.bi_valid&65535,Q.bi_valid+=Ce)}function pe(Q,oe,Ce){re(Q,Ce[2*oe],Ce[2*oe+1])}function Pe(Q,oe){for(var Ce=0;Ce|=1&Q,Q>>>=1,Ce<<=1,0<--oe;);return Ce>>>1}function Oe(Q,oe,Ce){var me,ae,ve=new Array(_+1),Ee=0;for(me=1;me<=_;me++)ve[me]=Ee=Ee+Ce[me-1]<<1;for(ae=0;ae<=oe;ae++){var ye=Q[2*ae+1];ye!==0&&(Q[2*ae]=Pe(ve[ye]++,ye))}}function ke(Q){var oe;for(oe=0;oe<v;oe++)Q.dyn_ltree[2*oe]=0;for(oe=0;oe<y;oe++)Q.dyn_dtree[2*oe]=0;for(oe=0;oe<C;oe++)Q.bl_tree[2*oe]=0;Q.dyn_ltree[2*S]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0}function Te(Q){8<Q.bi_valid?ce(Q,Q.bi_buf):0<Q.bi_valid&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0}function Le(Q,oe,Ce,me){var ae=2*oe,ve=2*Ce;return Q[ae]<Q[ve]||Q[ae]===Q[ve]&&me[oe]<=me[Ce]}function Ue(Q,oe,Ce){for(var me=Q.heap[Ce],ae=Ce<<1;ae<=Q.heap_len&&(ae<Q.heap_len&&Le(oe,Q.heap[ae+1],Q.heap[ae],Q.depth)&&ae++,!Le(oe,me,Q.heap[ae],Q.depth));)Q.heap[Ce]=Q.heap[ae],Ce=ae,ae<<=1;Q.heap[Ce]=me}function Ke(Q,oe,Ce){var me,ae,ve,Ee,ye=0;if(Q.last_lit!==0)for(;me=Q.pending_buf[Q.d_buf+2*ye]<<8|Q.pending_buf[Q.d_buf+2*ye+1],ae=Q.pending_buf[Q.l_buf+ye],ye++,me===0?pe(Q,ae,oe):(pe(Q,(ve=F[ae])+b+1,oe),(Ee=U[ve])!==0&&re(Q,ae-=J[ve],Ee),pe(Q,ve=Y(--me),Ce),(Ee=q[ve])!==0&&re(Q,me-=ne[ve],Ee)),ye<Q.last_lit;);pe(Q,S,oe)}function Ie(Q,oe){var Ce,me,ae,ve=oe.dyn_tree,Ee=oe.stat_desc.static_tree,ye=oe.stat_desc.has_stree,Ae=oe.stat_desc.elems,Fe=-1;for(Q.heap_len=0,Q.heap_max=w,Ce=0;Ce<Ae;Ce++)ve[2*Ce]!==0?(Q.heap[++Q.heap_len]=Fe=Ce,Q.depth[Ce]=0):ve[2*Ce+1]=0;for(;Q.heap_len<2;)ve[2*(ae=Q.heap[++Q.heap_len]=Fe<2?++Fe:0)]=1,Q.depth[ae]=0,Q.opt_len--,ye&&(Q.static_len-=Ee[2*ae+1]);for(oe.max_code=Fe,Ce=Q.heap_len>>1;1<=Ce;Ce--)Ue(Q,ve,Ce);for(ae=Ae;Ce=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],Ue(Q,ve,1),me=Q.heap[1],Q.heap[--Q.heap_max]=Ce,Q.heap[--Q.heap_max]=me,ve[2*ae]=ve[2*Ce]+ve[2*me],Q.depth[ae]=(Q.depth[Ce]>=Q.depth[me]?Q.depth[Ce]:Q.depth[me])+1,ve[2*Ce+1]=ve[2*me+1]=ae,Q.heap[1]=ae++,Ue(Q,ve,1),2<=Q.heap_len;);Q.heap[--Q.heap_max]=Q.heap[1],function(Ne,qe){var H,A,T,W,se,fe,we=qe.dyn_tree,ze=qe.max_code,Qe=qe.stat_desc.static_tree,Ye=qe.stat_desc.has_stree,Je=qe.stat_desc.extra_bits,Ve=qe.stat_desc.extra_base,at=qe.stat_desc.max_length,ut=0;for(W=0;W<=_;W++)Ne.bl_count[W]=0;for(we[2*Ne.heap[Ne.heap_max]+1]=0,H=Ne.heap_max+1;H<w;H++)at<(W=we[2*we[2*(A=Ne.heap[H])+1]+1]+1)&&(W=at,ut++),we[2*A+1]=W,ze<A||(Ne.bl_count[W]++,se=0,Ve<=A&&(se=Je[A-Ve]),fe=we[2*A],Ne.opt_len+=fe*(W+se),Ye&&(Ne.static_len+=fe*(Qe[2*A+1]+se)));if(ut!==0){do{for(W=at-1;Ne.bl_count[W]===0;)W--;Ne.bl_count[W]--,Ne.bl_count[W+1]+=2,Ne.bl_count[at]--,ut-=2}while(0<ut);for(W=at;W!==0;W--)for(A=Ne.bl_count[W];A!==0;)ze<(T=Ne.heap[--H])||(we[2*T+1]!==W&&(Ne.opt_len+=(W-we[2*T+1])*we[2*T],we[2*T+1]=W),A--)}}(Q,oe),Oe(ve,Fe,Q.bl_count)}function I(Q,oe,Ce){var me,ae,ve=-1,Ee=oe[1],ye=0,Ae=7,Fe=4;for(Ee===0&&(Ae=138,Fe=3),oe[2*(Ce+1)+1]=65535,me=0;me<=Ce;me++)ae=Ee,Ee=oe[2*(me+1)+1],++ye<Ae&&ae===Ee||(ye<Fe?Q.bl_tree[2*ae]+=ye:ae!==0?(ae!==ve&&Q.bl_tree[2*ae]++,Q.bl_tree[2*B]++):ye<=10?Q.bl_tree[2*P]++:Q.bl_tree[2*L]++,ve=ae,Fe=(ye=0)===Ee?(Ae=138,3):ae===Ee?(Ae=6,3):(Ae=7,4))}function xe(Q,oe,Ce){var me,ae,ve=-1,Ee=oe[1],ye=0,Ae=7,Fe=4;for(Ee===0&&(Ae=138,Fe=3),me=0;me<=Ce;me++)if(ae=Ee,Ee=oe[2*(me+1)+1],!(++ye<Ae&&ae===Ee)){if(ye<Fe)for(;pe(Q,ae,Q.bl_tree),--ye!=0;);else ae!==0?(ae!==ve&&(pe(Q,ae,Q.bl_tree),ye--),pe(Q,B,Q.bl_tree),re(Q,ye-3,2)):ye<=10?(pe(Q,P,Q.bl_tree),re(Q,ye-3,3)):(pe(Q,L,Q.bl_tree),re(Q,ye-11,7));ve=ae,Fe=(ye=0)===Ee?(Ae=138,3):ae===Ee?(Ae=6,3):(Ae=7,4)}}x(ne);var he=!1;function X(Q,oe,Ce,me){re(Q,(m<<1)+(me?1:0),3),function(ae,ve,Ee,ye){Te(ae),ye&&(ce(ae,Ee),ce(ae,~Ee)),h.arraySet(ae.pending_buf,ae.window,ve,Ee,ae.pending),ae.pending+=Ee}(Q,oe,Ce,!0)}l._tr_init=function(Q){he||(function(){var oe,Ce,me,ae,ve,Ee=new Array(_+1);for(ae=me=0;ae<g-1;ae++)for(J[ae]=me,oe=0;oe<1<<U[ae];oe++)F[me++]=ae;for(F[me-1]=ae,ae=ve=0;ae<16;ae++)for(ne[ae]=ve,oe=0;oe<1<<q[ae];oe++)M[ve++]=ae;for(ve>>=7;ae<y;ae++)for(ne[ae]=ve<<7,oe=0;oe<1<<q[ae]-7;oe++)M[256+ve++]=ae;for(Ce=0;Ce<=_;Ce++)Ee[Ce]=0;for(oe=0;oe<=143;)G[2*oe+1]=8,oe++,Ee[8]++;for(;oe<=255;)G[2*oe+1]=9,oe++,Ee[9]++;for(;oe<=279;)G[2*oe+1]=7,oe++,Ee[7]++;for(;oe<=287;)G[2*oe+1]=8,oe++,Ee[8]++;for(Oe(G,v+1,Ee),oe=0;oe<y;oe++)N[2*oe+1]=5,N[2*oe]=Pe(oe,5);le=new ge(G,U,b+1,v,_),te=new ge(N,q,0,y,_),de=new ge(new Array(0),K,0,C,E)}(),he=!0),Q.l_desc=new V(Q.dyn_ltree,le),Q.d_desc=new V(Q.dyn_dtree,te),Q.bl_desc=new V(Q.bl_tree,de),Q.bi_buf=0,Q.bi_valid=0,ke(Q)},l._tr_stored_block=X,l._tr_flush_block=function(Q,oe,Ce,me){var ae,ve,Ee=0;0<Q.level?(Q.strm.data_type===2&&(Q.strm.data_type=function(ye){var Ae,Fe=4093624447;for(Ae=0;Ae<=31;Ae++,Fe>>>=1)if(1&Fe&&ye.dyn_ltree[2*Ae]!==0)return d;if(ye.dyn_ltree[18]!==0||ye.dyn_ltree[20]!==0||ye.dyn_ltree[26]!==0)return p;for(Ae=32;Ae<b;Ae++)if(ye.dyn_ltree[2*Ae]!==0)return p;return d}(Q)),Ie(Q,Q.l_desc),Ie(Q,Q.d_desc),Ee=function(ye){var Ae;for(I(ye,ye.dyn_ltree,ye.l_desc.max_code),I(ye,ye.dyn_dtree,ye.d_desc.max_code),Ie(ye,ye.bl_desc),Ae=C-1;3<=Ae&&ye.bl_tree[2*z[Ae]+1]===0;Ae--);return ye.opt_len+=3*(Ae+1)+5+5+4,Ae}(Q),ae=Q.opt_len+3+7>>>3,(ve=Q.static_len+3+7>>>3)<=ae&&(ae=ve)):ae=ve=Ce+5,Ce+4<=ae&&oe!==-1?X(Q,oe,Ce,me):Q.strategy===4||ve===ae?(re(Q,2+(me?1:0),3),Ke(Q,G,N)):(re(Q,4+(me?1:0),3),function(ye,Ae,Fe,Ne){var qe;for(re(ye,Ae-257,5),re(ye,Fe-1,5),re(ye,Ne-4,4),qe=0;qe<Ne;qe++)re(ye,ye.bl_tree[2*z[qe]+1],3);xe(ye,ye.dyn_ltree,Ae-1),xe(ye,ye.dyn_dtree,Fe-1)}(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,Ee+1),Ke(Q,Q.dyn_ltree,Q.dyn_dtree)),ke(Q),me&&Te(Q)},l._tr_tally=function(Q,oe,Ce){return Q.pending_buf[Q.d_buf+2*Q.last_lit]=oe>>>8&255,Q.pending_buf[Q.d_buf+2*Q.last_lit+1]=255&oe,Q.pending_buf[Q.l_buf+Q.last_lit]=255&Ce,Q.last_lit++,oe===0?Q.dyn_ltree[2*Ce]++:(Q.matches++,oe--,Q.dyn_ltree[2*(F[Ce]+b+1)]++,Q.dyn_dtree[2*Y(oe)]++),Q.last_lit===Q.lit_bufsize-1},l._tr_align=function(Q){re(Q,2,3),pe(Q,S,G),function(oe){oe.bi_valid===16?(ce(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)}(Q)}},{"../utils/common":41}],53:[function(a,u,l){u.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,u,l){(function(h){(function(d,p){if(!d.setImmediate){var x,m,g,b,v=1,y={},C=!1,w=d.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(d);_=_&&_.setTimeout?_:d,x={}.toString.call(d.process)==="[object process]"?function(B){process$1.nextTick(function(){E(B)})}:function(){if(d.postMessage&&!d.importScripts){var B=!0,P=d.onmessage;return d.onmessage=function(){B=!1},d.postMessage("","*"),d.onmessage=P,B}}()?(b="setImmediate$"+Math.random()+"$",d.addEventListener?d.addEventListener("message",S,!1):d.attachEvent("onmessage",S),function(B){d.postMessage(b+B,"*")}):d.MessageChannel?((g=new MessageChannel).port1.onmessage=function(B){E(B.data)},function(B){g.port2.postMessage(B)}):w&&"onreadystatechange"in w.createElement("script")?(m=w.documentElement,function(B){var P=w.createElement("script");P.onreadystatechange=function(){E(B),P.onreadystatechange=null,m.removeChild(P),P=null},m.appendChild(P)}):function(B){setTimeout(E,0,B)},_.setImmediate=function(B){typeof B!="function"&&(B=new Function(""+B));for(var P=new Array(arguments.length-1),L=0;L<P.length;L++)P[L]=arguments[L+1];var U={callback:B,args:P};return y[v]=U,x(v),v++},_.clearImmediate=k}function k(B){delete y[B]}function E(B){if(C)setTimeout(E,0,B);else{var P=y[B];if(P){C=!0;try{(function(L){var U=L.callback,q=L.args;switch(q.length){case 0:U();break;case 1:U(q[0]);break;case 2:U(q[0],q[1]);break;case 3:U(q[0],q[1],q[2]);break;default:U.apply(p,q)}})(P)}finally{k(B),C=!1}}}}function S(B){B.source===d&&typeof B.data=="string"&&B.data.indexOf(b)===0&&E(+B.data.slice(b.length))}})(typeof self>"u"?h===void 0?this:h:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports);class BackupFileParser{createHash(s){const a=s.length,u=[];let l={hash:"",keyMap:[],length:a};for(let h=0;h<32;h++){let d=Math.round(a*Math.random());u.push(s.substr(d,1)),l.keyMap.push(d)}return l.hash=cryptoJsExports.MD5(u.join("")).toString(),l}createBackupFileBlob(s){return new Promise((a,u)=>{try{const l=new JSZip;s.options.system&&delete s.options.system;const h=s.options,d=h.encryptBackupData?h.encryptSecretKey:"";h.encryptSecretKey&&delete s.options.encryptSecretKey;const p=this.encryptData(s.options,d),x=this.encryptData(s.userData,d);l.file("options.json",p),l.file("userdatas.json",x);const m={checkInfo:this.createHash(p+x),version:PPF.getVersion(),time:new Date().getTime(),encryptMode:d?EEncryptMode.AES:""};l.file("manifest.json",JSON.stringify(m)),s.collection&&l.file("collection.json",this.encryptData(s.collection,d)),s.cookies&&l.file("cookies.json",this.encryptData(s.cookies,d)),s.searchResultSnapshot&&l.file("searchResultSnapshot.json",this.encryptData(s.searchResultSnapshot,d)),s.keepUploadTask&&l.file("keepUploadTask.json",this.encryptData(s.keepUploadTask,d)),s.downloadHistory&&l.file("downloadHistory.json",this.encryptData(s.downloadHistory,d)),l.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}).then(g=>{a(g)})}catch(l){u(l)}})}loadZipData(s,a="请输入密钥：",u=""){return new Promise((l,h)=>{JSZip.loadAsync(s).then(d=>{let p=[];return p.push(d.file("manifest.json").async("text")),p.push(d.file("options.json").async("text")),p.push(d.file("userdatas.json").async("text")),d.file("collection.json")&&p.push(d.file("collection.json").async("text")),d.file("cookies.json")&&p.push(d.file("cookies.json").async("text")),d.file("searchResultSnapshot.json")&&p.push(d.file("searchResultSnapshot.json").async("text")),d.file("keepUploadTask.json")&&p.push(d.file("keepUploadTask.json").async("text")),d.file("downloadHistory.json")&&p.push(d.file("downloadHistory.json").async("text")),Promise.all(p)}).then(d=>{const p=JSON.parse(d[0]);if(console.log(p),p.encryptMode){if(u&&this.decryptData(d[1],u)===null&&(u=""),!u){let m=window.prompt(a);if(!m){h(ERestoreError.needSecretKey);return}if(u=m,this.decryptData(d[1],u)===null){h(ERestoreError.errorSecretKey);return}}}else u="";const x={manifest:p,options:this.decryptData(d[1],u),datas:this.decryptData(d[2],u)};d.length>3&&(x.collection=this.decryptData(d[3],u)),d.length>4&&PPF.checkOptionalPermission("cookies")&&(x.cookies=this.decryptData(d[4],u)),d.length>5&&(x.searchResultSnapshot=this.decryptData(d[5],u)),d.length>6&&(x.keepUploadTask=this.decryptData(d[6],u)),d.length>7&&(x.downloadHistory=this.decryptData(d[7],u)),this.checkData(x.manifest,d[1]+d[2])?l(x):h("error")}).catch(d=>{console.log(d),h(d)})})}checkData(s,a){if(!s||!s.checkInfo)return!1;const u=s.checkInfo;if(a.length!==u.length)return!1;const h=[];try{if(u.keyMap.length!==32)return!1;for(let d=0;d<32;d++){let p=u.keyMap[d];h.push(a.substr(p,1))}if(cryptoJsExports.MD5(h.join("")).toString()===u.hash)return!0}catch{}return!1}encryptData(s,a=""){return a?this.encrypt(JSON.stringify(s),a):JSON.stringify(s)}decryptData(s,a=""){if(!a)return JSON.parse(s);try{return JSON.parse(this.decrypt(s,a))}catch{return null}}encrypt(s,a=""){return cryptoJsExports.AES.encrypt(s,a).toString()}decrypt(s,a=""){return cryptoJsExports.AES.decrypt(s,a).toString(cryptoJsExports.enc.Utf8)}}class Config{constructor(s){this.service=s,this.name=EConfigKey.default,this.localStorage=new localStorage,this.syncStorage=new SyncStorage,this.favicon=new Favicon(this.service),this.schemas=[],this.sites=[],this.clients=[],this.publicSites=[],this.requestCount=0,this.backupFileParser=new BackupFileParser,this.options={exceedSizeUnit:ESizeUnit.GiB,sites:[],clients:[],backupServers:[],system:{},allowDropToSend:!0,allowSelectionTextSearch:!0,needConfirmWhenExceedSize:!0,exceedSize:10,search:{rows:50,timeout:3e4,saveKey:!0},connectClientTimeout:3e4,rowsPerPageItems:[10,20,50,100,200,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],searchSolutions:[],navBarIsOpen:!0,showMovieInfoCardOnSearch:!0,beforeSearchingOptions:{getMovieInformation:!0,maxMovieInformationCount:5,searchModeForItem:EBeforeSearchingItemSearchMode.id},showToolbarOnContentPage:!0,downloadFailedRetry:!1,downloadFailedFailedRetryCount:3,downloadFailedFailedRetryInterval:5,batchDownloadInterval:0,enableBackgroundDownload:!1,position:EPluginPosition.right,encryptBackupData:!1,allowSaveSnapshot:!0},this.uiOptions={},this.reload()}reload(){APP.cache.clear(),this.getSystemConfig()}save(s){s&&(this.options=s),this.localStorage.set(this.name,this.cleaningOptions(this.options))}getFavicons(){return new Promise((s,a)=>{let u=[];this.sites.forEach(l=>{u.push(l.activeURL||l.url||"")}),this.options.sites&&this.options.sites.forEach(l=>{u.push(l.activeURL||l.url||"")}),u=[...new Set(u)],this.favicon.gets(u).then(l=>{l.forEach(h=>{let d=this.options.sites.find(p=>{var m;let x=[p.url].concat(p.cdn);return x=x.concat((m=p.formerHosts)==null?void 0:m.map(g=>`//${g}`)).filter(g=>!!g),p.host==h.host||x.join("").indexOf(`//${h.host}`)>-1});d&&(d.icon=h.data)}),this.save(),this.service.options=this.options,s(this.options)}).catch(l=>{this.service.debug(l),a(l)})})}getFavicon(s,a=!1){return new Promise((u,l)=>{this.favicon.get(s,a).then(h=>{let d=this.options.sites.find(p=>{var m;let x=[p.url].concat(p.cdn,(m=p.formerHosts)==null?void 0:m.map(g=>`//${g}`));return p.host==h.host||x.join("").indexOf(`//${h.host}`)>-1});d&&(d.icon=h.data,this.save(),this.service.options=this.options),u(h)}).catch(h=>{this.service.debug(h),l(h)})})}cleaningOptions(s){let a=JSON.parse(JSON.stringify(s));return a.sites&&a.sites.forEach(u=>{this.sites.find(h=>h.host==u.host)&&(["categories","selectors","patterns","torrentTagSelectors","icon","activeURL","searchEntryConfig","schema","supportedFeatures","mergeSchemaTagSelectors"].forEach(h=>{let d=u;d[h]&&delete d[h]}),u.searchEntry&&u.searchEntry.forEach((h,d)=>{h.isCustom||(u.searchEntry[d]={name:h.name,enabled:h.enabled})})),PPF.isExtensionMode&&u.icon&&u.icon.substr(0,10)==="data:image"&&delete u.icon}),a.clients&&a.clients.forEach(u=>{["pathDescription","description","warning","scripts","ver","icon"].forEach(l=>{u[l]&&delete u[l]})}),a}read(){return new Promise((s,a)=>{this.localStorage.get(EConfigKey.uiOptions,u=>{if(u){let l=Object.assign({},this.uiOptions);this.uiOptions=Object.assign(l,u)}}),this.loadConfig(s)})}loadConfig(s){if(this.requestCount>0){setTimeout(()=>{this.loadConfig(s)},100);return}this.localStorage.get(this.name,a=>{this.resetRunTimeOptions(a),s&&s(this.options)})}resetRunTimeOptions(s){if(s){s.system&&delete s.system;let a=Object.assign({},this.options);this.options=Object.assign(a,s)}this.options.locale||(this.options.locale=navigator.language||"zh-CN"),this.options.system={schemas:this.schemas,sites:this.sites,clients:this.clients,publicSites:this.publicSites},this.upgradeSites(),this.options.sites&&this.options.sites.length&&this.sites.forEach(a=>{let u=this.options.sites.findIndex(l=>l.host===a.host);if(u>-1){let l=Object.assign(Object.assign({},a),this.options.sites[u]);a.categories&&(l.categories=a.categories),a.schema&&(l.schema=a.schema),!a.torrentTagSelectors&&l.torrentTagSelectors?delete l.torrentTagSelectors:l.torrentTagSelectors=a.torrentTagSelectors,!a.patterns&&l.patterns?delete l.patterns:l.patterns=a.patterns,!a.levelRequirements&&l.levelRequirements?delete l.levelRequirements:l.levelRequirements=a.levelRequirements,l.searchEntry&&a.searchEntry?a.searchEntry.forEach(h=>{if(l.searchEntry){let d=l.searchEntry&&l.searchEntry.findIndex(p=>p.name==h.name&&!p.isCustom);d!=null&&d>-1?l.searchEntry[d]=Object.assign(Object.assign({},h),{enabled:l.searchEntry[d].enabled}):l.searchEntry.push(Object.assign({},h))}}):a.searchEntry&&(l.searchEntry=a.searchEntry),!a.icon&&!l.icon&&(l.icon=l.url+"/favicon.ico"),this.options.sites[u]=l}}),this.options.sites.forEach(a=>{a.cdn&&a.cdn.length>0?(a.activeURL=a.cdn[0],a.cdn=this.arrayUnique(a.cdn)):a.activeURL=a.url,a.priority==null&&(a.priority=100)}),this.options.clients&&this.options.clients.length&&this.options.clients.forEach((a,u)=>{let l=this.clients.find(h=>h.type===a.type);l&&(this.options.clients[u]=Object.assign(Object.assign({},l),this.options.clients[u]))}),PPF.isExtensionMode&&this.getFavicons(),console.log(this.options)}arrayUnique(s){let a=[],u={};return s.forEach(l=>{u[l]||(a.push(l),u[l]=1)}),a}upgradeSites(){this.sites.forEach(s=>{if(!s.host)return;let a=s.formerHosts,u=s.host;a&&a.length>0&&a.forEach(l=>{let h=this.options.sites.find(d=>d.host===l);h&&(console.log("upgradeSites.site",h,u),h.host=u,h.url=s.url,!s.icon&&!h.icon?h.icon=h.url+"/favicon.ico":h.icon=s.icon),this.options.searchSolutions&&this.options.searchSolutions.forEach(d=>{d.range.forEach(p=>{p.host==l&&(console.log("upgradeSites.searchSolutions",p.host,u),p.host=u)})}),this.options.clients&&this.options.clients.length>0&&this.options.clients.forEach(d=>{let p=d.paths;if(p){for(const x in p)if(x==l&&p.hasOwnProperty(x)){console.log("upgradeSites.client.paths",d.name,x,u);const m=p[x];p[u]=Object.assign([],m),delete p[x]}}})})})}readUIOptions(){return new Promise((s,a)=>{this.localStorage.get(EConfigKey.uiOptions,u=>{if(u){let l=Object.assign({},this.uiOptions);this.uiOptions=Object.assign(l,u)}s(this.uiOptions)})})}saveUIOptions(s){return new Promise((a,u)=>{this.localStorage.set(EConfigKey.uiOptions,s||this.uiOptions),a()})}getSystemConfig(){this.schemas=[],this.sites=[],this.clients=[],this.publicSites=[],this.getContentFromApi(`${API.systemConfig}`).then(s=>{s&&(this.schemas=s.schemas,this.sites=s.sites,this.clients=s.clients,this.publicSites=s.publicSites)})}getSchemas(){this.schemas=[],this.getContentFromApi(`${API.schemas}`).then(s=>{s.length&&s.forEach(a=>{a.type==="dir"&&this.addSchema(API.schemaConfig.replace(/\{\$schema\}/g,a.name))})})}addSchema(s){this.getContentFromApi(s).then(a=>{a&&a.name&&this.schemas.push(a)})}getSites(){this.sites=[],this.getContentFromApi(API.sites).then(s=>{s.length&&s.forEach(a=>{a.type==="dir"&&this.addSite(API.siteConfig.replace(/\{\$site\}/g,a.name))})})}addSite(s){this.getContentFromApi(s).then(a=>{a&&a.name&&this.sites.push(a)})}getClients(){this.clients=[],this.getContentFromApi(API.clients).then(s=>{s.length&&s.forEach(a=>{a.type==="dir"&&this.addClient(API.clientConfig.replace(/\{\$client\}/g,a.name))})})}addClient(s){this.getContentFromApi(s).then(a=>{a&&a.name&&this.clients.push(a)})}getContentFromApi(s){return PPF.updateBadge(++this.requestCount),new Promise((a,u)=>{let l=APP.cache.get(s);if(l){a(l),PPF.updateBadge(--this.requestCount);return}$.getJSON(s).done(h=>{APP.cache.set(s,h),PPF.updateBadge(--this.requestCount),a(h)}).fail(h=>{PPF.updateBadge(--this.requestCount),u&&u(h)})})}backupToGoogle(){return new Promise((s,a)=>{if(chrome.storage&&chrome.storage.sync){let u=this.cleaningOptions(this.options);u.system&&delete u.system;let l=Object.assign([],u.clients),h=Object.assign([],u.sites);delete u.clients,delete u.sites,this.syncStorage.set(this.name,u).then(()=>{this.syncStorage.set(this.name+".clients",l).then(()=>{this.syncStorage.set(this.name+".sites",h).then(()=>{s(this.options)}).catch(d=>{a(APP.createErrorMessage(d))})}).catch(d=>{a(APP.createErrorMessage(d))})}).catch(d=>{a(APP.createErrorMessage(d))})}else a(APP.createErrorMessage("chrome.storage 不存在"))})}restoreFromGoogle(){return new Promise((s,a)=>{chrome.storage&&chrome.storage.sync?this.syncStorage.get(this.name).then(u=>{let l=Object.assign({},this.options.system),h=u;h.system=l,this.syncStorage.get(this.name+".clients").then(d=>{h.clients=d,this.syncStorage.get(this.name+".sites").then(p=>{h.sites=p,this.resetRunTimeOptions(h),this.save(),setTimeout(()=>{s(this.options)},300)}).catch(p=>{a(APP.createErrorMessage(p))})}).catch(d=>{a(APP.createErrorMessage(d))})}).catch(u=>{a(APP.createErrorMessage(u))}):a(APP.createErrorMessage("chrome.storage 不存在"))})}getBackupRawData(){return new Promise((s,a)=>{try{const u=this.service.userData.get("",EUserDataRange.all),l=this.cleaningOptions(this.service.options);delete l.system;let h={options:l,userData:u,collection:{items:this.service.collection.items,groups:this.service.collection.groups},cookies:void 0,searchResultSnapshot:this.service.searchResultSnapshot.items,keepUploadTask:this.service.keepUploadTask.items,downloadHistory:void 0};const d=[];d.push(this.service.controller.downloadHistory.load()),this.service.options.allowBackupCookies&&PPF.checkOptionalPermission("cookies")&&d.push(this.getAllSiteCookies()),Promise.all(d).then(p=>{h.downloadHistory=p[0],p.length>1&&(h.cookies=p[1]),s(h)}).catch(()=>{s(h)})}catch(u){a(u)}})}createBackupFile(s){return new Promise((a,u)=>{this.getBackupFileBlob().then(l=>{FileSaver.saveAs(l,s||this.getNewBackupFileName()),a(!0)}).catch(l=>{u(l)})})}getBackupFileBlob(){return new Promise((s,a)=>{try{this.getBackupRawData().then(u=>{this.backupFileParser.createBackupFileBlob(u).then(l=>{s(l)})}).catch(u=>{a(u)})}catch(u){a(u)}})}getAllSiteCookies(){return new Promise((s,a)=>{PPF.checkPermissions(["cookies"]).then(()=>{const u=this.options.sites;if(u&&u.length>0){const l=[];u.forEach(h=>{l.push(this.getCookiesFromSite(h))}),Promise.all(l).then(h=>{s(h)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}getCookiesFromSite(s){return new Promise((a,u)=>{const l=s.activeURL||s.url;chrome.cookies.getAll({url:l},h=>{if(chrome.runtime.lastError){u(chrome.runtime.lastError.message);return}a({host:s.host,url:l,cookies:h}),console.log(h)})})}restoreCookies(s){return new Promise((a,u)=>{let l=[];const h=["name","value","domain","path","secure","httpOnly","expirationDate"];s.forEach(d=>{d.cookies.forEach(p=>{let x=PPF.clone(p);for(const m in x)x.hasOwnProperty(m)&&!h.includes(m)&&delete x[m];x.url=d.url,l.push(this.setCookies(x,d.host))})}),Promise.all(l).then(()=>{a()}).catch(()=>{a()})})}setCookies(s,a){return new Promise((u,l)=>{let h=PPF.getSiteFromHost(a,this.service.options);chrome.cookies.get({url:(h.activeURL||h.url)+"",name:s.name+""},d=>{let p=!1;const x=new Date().getTime()/1e3;(d===null||d.expirationDate&&d.expirationDate<x)&&(p=!0),p?(s.expirationDate&&s.expirationDate<x&&(s.expirationDate=x+60*60*24),chrome.cookies.set(s,m=>{if(chrome.runtime.lastError){l(chrome.runtime.lastError.message);return}u(m),console.log(m)})):(console.log("跳过 %s: %s",a,s.name),u())})})}getNewBackupFileName(){return PPF.getNewBackupFileName()}backupToServer(s){return console.log("backupToServer",s,this.options.backupServers),new Promise((a,u)=>{const l=dayjs().valueOf(),h=this.getNewBackupFileName();let d=null;this.getBackupFileBlob().then(p=>{const x=new FormData;switch(x.append("name",h),x.append("data",p),s.type){case EBackupServerType.OWSS:d=new OWSS(s);break;case EBackupServerType.WebDAV:d=new WebDAV(s);break;default:u("暂不支持");break}d&&d.add(x).then(m=>{a({time:l,fileName:h})}).catch(m=>{u(m)})}).catch(p=>{u(p)})})}restoreFromServer(s,a){return new Promise((u,l)=>{let h=null;switch(s.type){case EBackupServerType.OWSS:h=new OWSS(s);break;case EBackupServerType.WebDAV:h=new WebDAV(s);break;default:l("暂不支持");break}h&&h.get(a).then(d=>{this.backupFileParser.loadZipData(d,this.service.i18n.t("settings.backup.enterSecretKey"),this.service.options.encryptSecretKey).then(p=>{u(p)}).catch(p=>{l(p)})}).catch(d=>{l(d)})})}getBackupListFromServer(s,a={}){return new Promise((u,l)=>{let h=null;switch(s.type){case EBackupServerType.OWSS:h=new OWSS(s);break;case EBackupServerType.WebDAV:h=new WebDAV(s);break;default:l("暂不支持");break}h&&h.list(a).then(d=>{u(d)}).catch(d=>{l(d)})})}deleteFileFromBackupServer(s,a){return new Promise((u,l)=>{let h=null;switch(s.type){case EBackupServerType.OWSS:h=new OWSS(s);break;case EBackupServerType.WebDAV:h=new WebDAV(s);break;default:l("暂不支持");break}h&&h.delete(a).then(d=>{u(d)}).catch(d=>{l(d)})})}testBackupServerConnectivity(s){return new Promise((a,u)=>{let l=null;switch(s.type){case EBackupServerType.OWSS:l=new OWSS(s);break;case EBackupServerType.WebDAV:l=new WebDAV(s);break;default:u("暂不支持");break}l&&l.ping().then(h=>{a(h)}).catch(h=>{u(h)})})}}const Config$1=Config;class ClientController{constructor(){this.options={sites:[],clients:[]},this.clients={}}init(f){this.options=f,this.cleanUpClients()}cleanUpClients(){this.clients={}}getClient(clientOptions){return new Promise((resolve,reject)=>{if(typeof clientOptions=="string"){let f=clientOptions;clientOptions=this.options.clients.find(a=>a.id===f);let s=this.clients[f];if(s){resolve({client:s,options:clientOptions});return}}if(window[clientOptions.type]===void 0)APP.execScript({type:"file",content:`clients/${clientOptions.type}/init.js`}).then(()=>{let client;eval(`client = new ${clientOptions.type}()`),client.init({loginName:clientOptions.loginName,loginPwd:clientOptions.loginPwd,address:clientOptions.address,name:clientOptions.name}),this.clients[clientOptions.id]=client,resolve({client,options:clientOptions})}).catch(f=>{console.log(f),reject({initFailed:!0,msg:f})});else{let client;eval(`client = new ${clientOptions.type}()`),client.init({loginName:clientOptions.loginName,loginPwd:clientOptions.loginPwd,address:clientOptions.address,name:clientOptions.name}),this.clients[clientOptions.id]=client,resolve({client,options:clientOptions})}})}testClientConnectivity(f){return new Promise((s,a)=>{let u={type:EDataResultType.unknown,success:!1};this.getClient(f).then(l=>{l.client.call(EAction.testClientConnectivity,f).then(h=>{u.success=h,h&&(u.type=EDataResultType.success),s(u)}).catch(h=>{u.data=h,u.type=EDataResultType.error,a(u)})}).catch(l=>{u.data=l,u.type=EDataResultType.error,a(u)})})}}class DownloadHistory{constructor(){this.items=[],this.storage=new localStorage,this.load()}load(){return new Promise((s,a)=>{this.storage.get(EConfigKey.downloadHistory,u=>{this.items=u||[],s(this.items)})})}add(s,a="",u="",l=!0){let h={data:s,clientId:u,host:a,success:l,time:new Date().getTime()};this.items?this.items.findIndex(p=>p.data.url===s.url)===-1&&(this.items.push(h),this.updateData()):this.load().then(()=>{this.items.push(h),this.updateData()})}remove(s){return new Promise((a,u)=>{this.load().then(()=>{for(let l=this.items.length-1;l>=0;l--){let h=this.items[l];s.findIndex(p=>p.data.url===h.data.url)>=0&&this.items.splice(l,1)}this.updateData(),a(this.items)})})}clear(){return new Promise((s,a)=>{this.items=[],this.updateData(),s(this.items)})}reset(s){return new Promise((a,u)=>{if(!s){u(!1);return}if(!Array.isArray(s)){u(!1);return}this.items=s,this.updateData(),a(this.items)})}updateData(){this.storage.set(EConfigKey.downloadHistory,this.items)}}var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray=function f(s){return typeof Array.isArray=="function"?Array.isArray(s):toStr.call(s)==="[object Array]"},isPlainObject=function f(s){if(!s||toStr.call(s)!=="[object Object]")return!1;var a=hasOwn.call(s,"constructor"),u=s.constructor&&s.constructor.prototype&&hasOwn.call(s.constructor.prototype,"isPrototypeOf");if(s.constructor&&!a&&!u)return!1;var l;for(l in s);return typeof l>"u"||hasOwn.call(s,l)},setProperty=function f(s,a){defineProperty&&a.name==="__proto__"?defineProperty(s,a.name,{enumerable:!0,configurable:!0,value:a.newValue,writable:!0}):s[a.name]=a.newValue},getProperty=function f(s,a){if(a==="__proto__")if(hasOwn.call(s,a)){if(gOPD)return gOPD(s,a).value}else return;return s[a]},extend=function f(){var s,a,u,l,h,d,p=arguments[0],x=1,m=arguments.length,g=!1;for(typeof p=="boolean"&&(g=p,p=arguments[1]||{},x=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});x<m;++x)if(s=arguments[x],s!=null)for(a in s)u=getProperty(p,a),l=getProperty(s,a),p!==l&&(g&&l&&(isPlainObject(l)||(h=isArray(l)))?(h?(h=!1,d=u&&isArray(u)?u:[]):d=u&&isPlainObject(u)?u:{},setProperty(p,{name:a,newValue:f(g,d,l)})):typeof l<"u"&&setProperty(p,{name:a,newValue:l}));return p};const extend$1=getDefaultExportFromCjs(extend);class SiteService{constructor(s,a){this.options=s,this.systemOptions=a,this.isLogin=!1,this._schema={},this.mergeOptions()}get schema(){if(this._schema.name)return this._schema;let s={};return typeof this.options.schema=="string"&&(s=this.systemOptions.system&&this.systemOptions.system.schemas&&this.systemOptions.system.schemas.find(a=>a.name==this.options.schema)),this._schema=s,s}mergeOptions(){let s=this.systemOptions.system&&this.systemOptions.system.sites&&this.systemOptions.system.sites.find(a=>a.host==this.options.host);if(s){let a=[];if(this.options.searchEntry)for(let u=this.options.searchEntry.length-1;u>=0;u--){const l=this.options.searchEntry[u];l.isCustom&&(a.push(l),this.options.searchEntry.splice(u,1))}this.options=extend$1(!0,{},s,this.options),this.options.searchEntry&&a.length>0&&this.options.searchEntry.push(...a)}console.log(this.options)}}class PageParser{constructor(f,s,a=3e4,u){this.options=f,this.site=s,this.timeout=a,this.commonDatas=u,this.infoParserCache={},this.cacheKey="",this.url="";let l=s.url+"";s.cdn&&s.cdn.length>0&&(l=s.cdn[0]),(l+"").substr(-1)!="/"&&(l+="/");let h=this.options.page;if((h+"").substr(0,1)=="/"&&(h=(h+"").substr(1)),this.url=(l+h).replace("://","****").replace(/\/\//g,"/").replace("****","://"),this.requestData=this.options.requestData,this.requestData&&this.commonDatas)try{for(const d in this.requestData)if(this.requestData.hasOwnProperty(d)){const p=this.requestData[d];for(const x in this.commonDatas)this.commonDatas.hasOwnProperty(x)&&(this.requestData[d]=PPF.replaceKeys(p,this.commonDatas[x],x))}}catch(d){console.log(d)}this.cacheKey=cryptoJsExports.MD5(this.url+JSON.stringify(this.requestData||{})).toString()}getCache(){let f=window.localStorage.getItem(this.cacheKey);if(f){let s=JSON.parse(f);if(s.data&&s.time){let a=new Date().getTime();return s.time<a?(window.localStorage.removeItem(this.cacheKey),null):s.data}}return null}setCache(){if(this.options.dataCacheTime&&this.options.dataCacheTime>0){let f={data:this.resultData,time:new Date().getTime()+this.options.dataCacheTime*1e3};window.localStorage.setItem(this.cacheKey,JSON.stringify(f))}}getInfos(){return new Promise((f,s)=>{let a=this.getCache();if(a){f(a);return}this.options.parser&&this.site&&this.runParser(f,s)||$.ajax({url:this.url,method:this.options.requestMethod||ERequestMethod.GET,dataType:"text",headers:this.options.headers,data:this.requestData,timeout:this.timeout}).done(u=>{let l;try{if(this.options.dataType!==ERequestResultType.JSON){let h=new DOMParser().parseFromString(u,"text/html"),d=this.options.topElement||"body";l=$(h).find(d)}else l=JSON.parse(u)}catch(h){s(h);return}if(l&&this.options)try{let h=new InfoParser().getResult(l,this.options);this.resultData=h,this.setCache(),f(h)}catch(h){s(h)}}).fail(u=>{s(u)})})}runParser(resolve,reject){if(!this.site||!this.options.parser)return!1;let siteConfigPath=this.site.schema=="publicSite"?"publicSites":"sites";this.site.path?siteConfigPath+=`/${this.site.path}`:siteConfigPath+=`/${this.site.host}`;let path=this.options.parser;path.substr(0,1)!=="/"&&path.substr(0,4)!=="http"&&(path=`${siteConfigPath}/${path}`),this.site,this.options,this.commonDatas;let script=this.infoParserCache[path];return script?eval(script):APP.getScriptContent(path).done(script=>{this.infoParserCache[path]=script,eval(script)}),!0}}var ESearchResultParseStatus=(f=>(f.success="success",f.needLogin="needLogin",f.noTorrents="noTorrents",f.torrentTableIsEmpty="torrentTableIsEmpty",f.parseError="parseError",f))(ESearchResultParseStatus||{});Object.assign(window,{ESearchResultParseStatus});class Searcher{constructor(f){this.service=f,this.searchConfigs={},this.parseScriptCache={},this.options={sites:[],clients:[]},this.searchRequestQueue={}}searchTorrent(site,key="",payload){return this.service.debug("searchTorrent: start",key,payload),new Promise((resolve,reject)=>{let result={success:!1},siteService=new SiteService(PPF.clone(site),PPF.clone(this.options)),searchConfig={},schema=this.getSiteSchema(site),host=site.host,siteSearchPage="",searchEntryConfig=extend$1(!0,{torrentTagSelectors:[]},schema&&schema.searchEntryConfig?schema.searchEntryConfig:{},siteService.options.searchEntryConfig),searchEntryConfigQueryString="",searchEntryConfigRequestData;if(siteService.options.searchEntry?(searchConfig.rootPath=`sites/${host}/`,searchConfig.entry=siteService.options.searchEntry):schema&&schema.searchEntry&&(searchConfig.rootPath=`schemas/${schema.name}/`,searchConfig.entry=schema.searchEntry),schema&&schema.torrentTagSelectors&&(searchConfig.torrentTagSelectors=schema.torrentTagSelectors),siteService.options.torrentTagSelectors&&(siteService.options.mergeSchemaTagSelectors?searchConfig.torrentTagSelectors=siteService.options.torrentTagSelectors.concat(searchConfig.torrentTagSelectors):searchConfig.torrentTagSelectors=siteService.options.torrentTagSelectors),!searchConfig.entry){result.msg=this.service.i18n.t("service.searcher.siteSearchConfigEntryIsEmpty",{site}),result.type=EDataResultType.error,reject(result),this.service.debug("searchTorrent: tip");return}let isImdbSearch=!1,imdb=key.match(/(tt\d+)/),autoMatched=!1;imdb&&imdb.length>=2&&(key=imdb[1],isImdbSearch=!0);let skipSearch=!1;if(searchEntryConfig&&searchEntryConfig.page&&(siteSearchPage=searchEntryConfig.page,searchEntryConfigQueryString=searchEntryConfig.queryString+"",searchEntryConfig.area&&searchEntryConfig.area.some(area=>{if(area.keyAutoMatch&&new RegExp(area.keyAutoMatch,"").test(key)){if(area.page&&(siteSearchPage=area.page),autoMatched=!0,area.queryString&&(searchEntryConfigQueryString=area.queryString),area.requestData&&(searchEntryConfigRequestData=area.requestData),area.appendQueryString&&(searchEntryConfigQueryString+=area.appendQueryString),area.name=="IMDB"&&area.replaceKeyByTVDB)try{$.ajax({url:"https://thetvdb.com/api/GetSeriesByRemoteID.php?imdbid="+key,cache:!0,dataType:"text",contentType:"text/plain",timeout:this.options.connectClientTimeout||3e4,method:ERequestMethod.GET,async:!1}).done(f=>{let s=new DOMParser().parseFromString(f,"text/html");for(var a of area.replaceKeyByTVDB)switch(a){case"year":let u="",l=$(s).find("FirstAired").text();l!=""&&(u=new Date(l).getFullYear().toString()),searchEntryConfigQueryString=searchEntryConfigQueryString.replace("$year$",u);break;case"name":let h=$(s).find("SeriesName").text();if(h!="")searchEntryConfigQueryString=searchEntryConfigQueryString.replace("$name$",h);else{skipSearch=!0;return}break;default:break}}).fail((f,s,a)=>{skipSearch=!0,result.type=EDataResultType.unknown,reject(result)})}catch{skipSearch=!0,result.type=EDataResultType.unknown,reject(result);return}if(area.name=="IMDB"&&area.convertToANIDB)try{$.ajax({url:"https://raw.githubusercontent.com/Anime-Lists/anime-lists/master/anime-list.xml",cache:!0,dataType:"text",contentType:"text/plain",timeout:this.options.connectClientTimeout||3e4,method:ERequestMethod.GET,async:!1}).done(f=>{let s=$.parseHTML(f),a="anime[imdbid*='"+key+"']:first",u=$(a,s);if(u.length>0&&key.length>=9){let l=u.attr("anidbid");l&&(searchEntryConfigQueryString=searchEntryConfigQueryString.replace("$anidb$",l))}else skipSearch=!0}).fail((f,s,a)=>{skipSearch=!0,result.type=EDataResultType.unknown,reject(result)})}catch{skipSearch=!0,result.type=EDataResultType.unknown,reject(result);return}if(area.replaceKey&&(key=key.replace(new RegExp(area.replaceKey[0],"g"),area.replaceKey[1])),area.parseScript)try{key=eval(area.parseScript)}catch(f){}return!0}return!1})),skipSearch){resolve({status:"success",success:!0,msg:this.getErrorMessage(site,"noTorrents",""),data:{},type:EDataResultType.success});return}this.searchConfigs[host]=searchConfig;let results=[],entryCount=0,doneCount=0;const KEY="$key$";searchEntryConfig.keepOriginKey||(key=encodeURIComponent(key)),searchConfig.entry.forEach(f=>{if(f.skipIMDbId&&isImdbSearch)return;let s=f.entry||siteSearchPage;autoMatched&&s.indexOf(KEY)!==-1&&searchEntryConfigQueryString.indexOf(KEY)!==-1&&(s=PPF.removeQueryStringFromValue(s,KEY));let a=f.queryString;if(searchEntryConfigQueryString&&(a?a&&a.indexOf(KEY)===-1&&(a=searchEntryConfigQueryString+"&"+a):a=searchEntryConfigQueryString),f.appendQueryString&&(a+=f.appendQueryString),searchEntryConfig&&(f.parseScriptFile=searchEntryConfig.parseScriptFile||f.parseScriptFile,f.resultType=searchEntryConfig.resultType||f.resultType,f.requestDataType=searchEntryConfig.requestDataType||f.requestDataType,f.resultSelector=searchEntryConfig.resultSelector||f.resultSelector,f.headers=searchEntryConfig.headers||f.headers,f.asyncParse=searchEntryConfig.asyncParse||f.asyncParse,f.requestData=searchEntryConfigRequestData||searchEntryConfig.requestData||f.requestData),s&&f.parseScriptFile&&f.enabled!==!1){let u=this.options.search&&this.options.search.rows?this.options.search.rows:10;site.cdn&&site.cdn.length>0&&(site.url=site.cdn[0]),(site.url+"").substr(-1)!="/"&&(site.url+="/"),(s+"").substr(0,1)=="/"&&(s=(s+"").substr(1));let l=site.url+s;a&&(s.indexOf("?")!==-1?l+="&"+a:l+="?"+a),l=PPF.removeDuplicateQueryString(l);let h=key+(f.appendToSearchKeyString?` ${f.appendToSearchKeyString}`:"");if(l=this.replaceKeys(l,{key:h,rows:u,passkey:site.passkey?site.passkey:""}),f.requestData)try{for(const p in f.requestData)if(f.requestData.hasOwnProperty(p)){const x=f.requestData[p];if(typeof x!="string")continue;f.requestData[p]=PPF.replaceKeys(x,{key:h,passkey:site.passkey?site.passkey:""}),site.user&&(f.requestData[p]=PPF.replaceKeys(f.requestData[p],site.user,"user"))}}catch(p){this.service.writeErrorLog(p),this.service.debug(p)}if(f.headers){for(const p in f.headers)if(f.headers.hasOwnProperty(p)){const x=f.headers[p];f.headers[p]=PPF.replaceKeys(x,{key:h,passkey:site.passkey?site.passkey:""}),site.user&&(f.headers[p]=PPF.replaceKeys(f.headers[p],site.user,"user")),f.headers[p]=PPF.replaceKeys(f.headers[p],site,"site")}}site.user&&(l=this.replaceKeys(l,site.user,"user")),entryCount++;let d=f.parseScriptFile;d.substr(0,1)!=="/"&&(d=`${searchConfig.rootPath}${d}`),f.parseScript=this.parseScriptCache[d],f.parseScript?this.getSearchResult(l,site,Object.assign(PPF.clone(searchEntryConfig),PPF.clone(f)),searchConfig.torrentTagSelectors).then(p=>{p&&p.length&&results.push(...p),doneCount++,(doneCount===entryCount||results.length>=u)&&resolve(results.slice(0,u))}).catch(p=>{doneCount++,doneCount===entryCount&&(results.length>0?resolve(results.slice(0,u)):reject(p))}):(this.service.debug("searchTorrent: getScriptContent",d),APP.getScriptContent(d).done(p=>{this.service.debug("searchTorrent: getScriptContent done",d),this.parseScriptCache[d]=p,f.parseScript=p,this.getSearchResult(l,site,Object.assign(PPF.clone(searchEntryConfig),PPF.clone(f)),searchConfig.torrentTagSelectors).then(x=>{this.service.debug("searchTorrent: getSearchResult done",l),x&&x.length&&results.push(...x),doneCount++,(doneCount===entryCount||results.length>=u)&&resolve(results.slice(0,u))}).catch(x=>{this.service.debug("searchTorrent: getSearchResult catch",l,x),doneCount++,doneCount===entryCount&&(results.length>0?resolve(results.slice(0,u)):reject(x))})}).fail(p=>{this.service.debug("searchTorrent: getScriptContent fail",p)}))}}),entryCount==0&&(result.msg=this.service.i18n.t("service.searcher.siteSearchEntryIsEmpty",{site}),result.type=EDataResultType.error,reject(result)),this.service.debug("searchTorrent: queue done")})}getSearchResult(f,s,a,u){return new Promise((l,h)=>{a.beforeSearch?new PageParser(a.beforeSearch,s,this.service.options.connectClientTimeout).getInfos().then(p=>{this.addSearchRequestQueue(f,s,a,u,p).then(x=>{l(x)}).catch(x=>{h(x)})}).catch(p=>{this.service.writeErrorLog(p),this.addSearchRequestQueue(f,s,a,u).then(x=>{l(x)}).catch(x=>{h(x)})}):this.addSearchRequestQueue(f,s,a,u).then(d=>{l(d)}).catch(d=>{h(d)})})}addSearchRequestQueue(url,site,entry,torrentTagSelectors,beforeSearchData){let _entry=PPF.clone(entry);if(_entry.parseScript&&delete _entry.parseScript,beforeSearchData&&(this.service.debug("beforeSearchData",beforeSearchData),url=this.replaceKeys(url,beforeSearchData,"beforeSearchData"),entry.requestData))try{for(const f in entry.requestData)if(entry.requestData.hasOwnProperty(f)){const s=entry.requestData[f];entry.requestData[f]=PPF.replaceKeys(s,beforeSearchData,"beforeSearchData")}}catch(f){this.service.writeErrorLog(f),this.service.debug(f)}this.service.debug("getSearchResult.start",{url,site:site.host,entry:_entry});let logId="",contentType="text/plain",data=entry.requestData;switch(entry.requestDataType){case ERequestType.JSON:contentType="application/json",data&&(data=JSON.stringify(data));case ERequestType.TEXT:}return new Promise((resolve,reject)=>{this.searchRequestQueue[url]=$.ajax({url,cache:!0,dataType:"text",contentType,timeout:this.options.connectClientTimeout||3e4,headers:entry.headers,method:entry.requestMethod||ERequestMethod.GET,data}).done(result=>{var f;if(this.service.debug("getSearchResult.done",url),delete this.searchRequestQueue[url],result&&typeof result=="string"&&result.length>100||typeof result=="object"||result&&entry.resultType==ERequestResultType.JSON&&result.toLowerCase().includes("success")){let page,doc;try{switch(entry.resultType){case ERequestResultType.JSON:page=JSON.parse(result);break;default:doc=new DOMParser().parseFromString(result,"text/html"),page=$(doc).find("body");break}}catch(s){logId=this.service.logger.add({module:EModule.background,event:"service.searcher.getSearchResult.siteSearchResultParseFailed",msg:s}),reject({success:!1,msg:this.service.i18n.t("service.searcher.siteSearchResultParseFailed",{site}),data:{logId},type:EDataResultType.error});return}let options={results:[],responseText:result,site,resultSelector:entry.resultSelector,page,entry,torrentTagSelectors,errorMsg:"",isLogged:!1,status:"success",searcher:this,url};try{if(console.log("entry.parseScript ",(f=entry.parseScript)==null?void 0:f.length),entry.parseScript)if(entry.asyncParse){options=Object.assign({reject,resolve},options),eval(entry.parseScript);return}else eval(entry.parseScript);options.errorMsg||options.status!="success"?reject({success:!1,msg:this.getErrorMessage(site,options.status,options.errorMsg),data:{site,isLogged:options.isLogged}}):resolve(PPF.clone(options.results))}catch(s){console.error(s),logId=this.service.logger.add({module:EModule.background,event:"service.searcher.getSearchResult.siteEvalScriptFailed",msg:s}),reject({success:!1,msg:this.service.i18n.t("service.searcher.siteEvalScriptFailed",{site}),data:{logId}})}}else logId=this.service.logger.add({module:EModule.background,event:"service.searcher.getSearchResult.siteSearchResultError",msg:result}),reject({success:!1,msg:this.service.i18n.t("service.searcher.siteSearchResultError",{site}),data:{logId},type:EDataResultType.error})}).fail((f,s,a)=>{delete this.searchRequestQueue[url],this.service.debug({title:"getSearchResult.fail",url,entry,textStatus:s,errorThrown:a}),logId=this.service.logger.add({module:EModule.background,event:"service.searcher.getSearchResult.fail",msg:a,data:{url,entry,code:f.status,textStatus:s,errorThrown:a,responseText:f.responseText}}),reject({data:{logId,textStatus:s},msg:this.service.i18n.t("service.searcher.siteNetworkFailed",{site,msg:`${f.status} ${a}, ${s}`}),success:!1,type:EDataResultType.error})})})}getErrorMessage(f,s="success",a=""){return s!="success"?this.service.i18n.t(`contentPage.search.${s}`,{siteName:f.name,msg:a}):a}abortSearch(f,s=""){return new Promise((a,u)=>{let l=f.host+"",h=this.searchConfigs[l];h.entry&&(this.service.logger.add({module:EModule.background,event:"searcher.abortSearch",msg:this.service.i18n.t("service.searcher.siteAbortSearch",{site:f}),data:{site:f.host,key:s}}),h.entry.forEach(d=>{if(d.entry&&d.parseScriptFile&&d.enabled!==!1){f.cdn&&f.cdn.length>0&&(f.url=f.cdn[0]);let p=this.options.search&&this.options.search.rows?this.options.search.rows:10,x=f.url+d.entry;x=this.replaceKeys(x,{key:s,rows:p,passkey:f.passkey?f.passkey:""});let m=this.searchRequestQueue[x];if(m)try{m.abort(),a()}catch(g){this.service.logger.add({module:EModule.background,event:"searcher.abortSearch.error",msg:this.service.i18n.t("service.searcher.siteAbortSearchError",{site:f}),data:{site:f.host,key:s,error:g}}),u(g)}else a()}else a()}))})}getSiteSchema(f){let s={};return typeof f.schema=="string"&&(s=this.options.system&&this.options.system.schemas&&this.options.system.schemas.find(a=>a.name==f.schema),s===void 0)?s:PPF.clone(s)}replaceKeys(f,s,a=""){let u=f;for(const l in s)if(s.hasOwnProperty(l)){const h=s[l];let d="$"+l+"$";a&&(d=`$${a}.${l}$`),u=u.replace(d,h)}return u}getFieldValue(f,s,a=""){let u;if(f.searchEntryConfig&&f.searchEntryConfig.fieldSelector){if(u=f.searchEntryConfig.fieldSelector[a],!u)return null}else return null;return new InfoParser(this.service).getFieldData(s,u,f.searchEntryConfig.fieldSelector)}getCategoryById(f,s,a){let u={};return f.categories&&f.categories.forEach(l=>{if(l.category&&(l.entry=="*"||s.indexOf(l.entry))){let h=l.category.find(d=>d.id==a);h&&(u=h)}}),u}cfDecodeEmail(f){let s="",a=parseInt(f.substr(0,2),16),u,l;for(u=2;f.length-u;u+=2)l=parseInt(f.substr(u,2),16)^a,s+=String.fromCharCode(l);return s}getRowTags(f,s){let a=[];if(f&&f.host){let l=this.searchConfigs[f.host].torrentTagSelectors;l&&l.length>0&&l.forEach(h=>{if(h.selector){let d=s.find(h.selector);if(d.length){let p=h.color||BASE_TAG_COLORS[h.name]||"",x={name:h.name,color:p};h.title&&d.attr(h.title)&&(x.title=d.attr(h.title)),a.push(x)}}})}return a}}var requiresPort=function f(s,a){if(a=a.split(":")[0],s=+s,!s)return!1;switch(a){case"http":case"ws":return s!==80;case"https":case"wss":return s!==443;case"ftp":return s!==21;case"gopher":return s!==70;case"file":return!1}return s!==0},querystringify$1={},has=Object.prototype.hasOwnProperty,undef;function decode$2(f){try{return decodeURIComponent(f.replace(/\+/g," "))}catch{return null}}function encode$2(f){try{return encodeURIComponent(f)}catch{return null}}function querystring(f){for(var s=/([^=?#&]+)=?([^&]*)/g,a={},u;u=s.exec(f);){var l=decode$2(u[1]),h=decode$2(u[2]);l===null||h===null||l in a||(a[l]=h)}return a}function querystringify(f,s){s=s||"";var a=[],u,l;typeof s!="string"&&(s="?");for(l in f)if(has.call(f,l)){if(u=f[l],!u&&(u===null||u===undef||isNaN(u))&&(u=""),l=encode$2(l),u=encode$2(u),l===null||u===null)continue;a.push(l+"="+u)}return a.length?s+a.join("&"):""}querystringify$1.stringify=querystringify,querystringify$1.parse=querystring;var required=requiresPort,qs=querystringify$1,controlOrWhitespace=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,CRHTLF=/[\n\r\t]/g,slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,port=/:\d+$/,protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,windowsDriveLetter=/^[a-zA-Z]:/;function trimLeft(f){return(f||"").toString().replace(controlOrWhitespace,"")}var rules=[["#","hash"],["?","query"],function f(s,a){return isSpecial(a.protocol)?s.replace(/\\/g,"/"):s},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ignore={hash:1,query:1};function lolcation(f){var s;typeof window<"u"?s=window:typeof commonjsGlobal<"u"?s=commonjsGlobal:typeof self<"u"?s=self:s={};var a=s.location||{};f=f||a;var u={},l=typeof f,h;if(f.protocol==="blob:")u=new Url(unescape(f.pathname),{});else if(l==="string"){u=new Url(f,{});for(h in ignore)delete u[h]}else if(l==="object"){for(h in f)h in ignore||(u[h]=f[h]);u.slashes===void 0&&(u.slashes=slashes.test(f.href))}return u}function isSpecial(f){return f==="file:"||f==="ftp:"||f==="http:"||f==="https:"||f==="ws:"||f==="wss:"}function extractProtocol(f,s){f=trimLeft(f),f=f.replace(CRHTLF,""),s=s||{};var a=protocolre.exec(f),u=a[1]?a[1].toLowerCase():"",l=!!a[2],h=!!a[3],d=0,p;return l?h?(p=a[2]+a[3]+a[4],d=a[2].length+a[3].length):(p=a[2]+a[4],d=a[2].length):h?(p=a[3]+a[4],d=a[3].length):p=a[4],u==="file:"?d>=2&&(p=p.slice(2)):isSpecial(u)?p=a[4]:u?l&&(p=p.slice(2)):d>=2&&isSpecial(s.protocol)&&(p=a[4]),{protocol:u,slashes:l||isSpecial(u),slashesCount:d,rest:p}}function resolve(f,s){if(f==="")return s;for(var a=(s||"/").split("/").slice(0,-1).concat(f.split("/")),u=a.length,l=a[u-1],h=!1,d=0;u--;)a[u]==="."?a.splice(u,1):a[u]===".."?(a.splice(u,1),d++):d&&(u===0&&(h=!0),a.splice(u,1),d--);return h&&a.unshift(""),(l==="."||l==="..")&&a.push(""),a.join("/")}function Url(f,s,a){if(f=trimLeft(f),f=f.replace(CRHTLF,""),!(this instanceof Url))return new Url(f,s,a);var u,l,h,d,p,x,m=rules.slice(),g=typeof s,b=this,v=0;for(g!=="object"&&g!=="string"&&(a=s,s=null),a&&typeof a!="function"&&(a=qs.parse),s=lolcation(s),l=extractProtocol(f||"",s),u=!l.protocol&&!l.slashes,b.slashes=l.slashes||u&&s.slashes,b.protocol=l.protocol||s.protocol||"",f=l.rest,(l.protocol==="file:"&&(l.slashesCount!==2||windowsDriveLetter.test(f))||!l.slashes&&(l.protocol||l.slashesCount<2||!isSpecial(b.protocol)))&&(m[3]=[/(.*)/,"pathname"]);v<m.length;v++){if(d=m[v],typeof d=="function"){f=d(f,b);continue}h=d[0],x=d[1],h!==h?b[x]=f:typeof h=="string"?(p=h==="@"?f.lastIndexOf(h):f.indexOf(h),~p&&(typeof d[2]=="number"?(b[x]=f.slice(0,p),f=f.slice(p+d[2])):(b[x]=f.slice(p),f=f.slice(0,p)))):(p=h.exec(f))&&(b[x]=p[1],f=f.slice(0,p.index)),b[x]=b[x]||u&&d[3]&&s[x]||"",d[4]&&(b[x]=b[x].toLowerCase())}a&&(b.query=a(b.query)),u&&s.slashes&&b.pathname.charAt(0)!=="/"&&(b.pathname!==""||s.pathname!=="")&&(b.pathname=resolve(b.pathname,s.pathname)),b.pathname.charAt(0)!=="/"&&isSpecial(b.protocol)&&(b.pathname="/"+b.pathname),required(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(p=b.auth.indexOf(":"),~p?(b.username=b.auth.slice(0,p),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(p+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin=b.protocol!=="file:"&&isSpecial(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}function set(f,s,a){var u=this;switch(f){case"query":typeof s=="string"&&s.length&&(s=(a||qs.parse)(s)),u[f]=s;break;case"port":u[f]=s,required(s,u.protocol)?s&&(u.host=u.hostname+":"+s):(u.host=u.hostname,u[f]="");break;case"hostname":u[f]=s,u.port&&(s+=":"+u.port),u.host=s;break;case"host":u[f]=s,port.test(s)?(s=s.split(":"),u.port=s.pop(),u.hostname=s.join(":")):(u.hostname=s,u.port="");break;case"protocol":u.protocol=s.toLowerCase(),u.slashes=!a;break;case"pathname":case"hash":if(s){var l=f==="pathname"?"/":"#";u[f]=s.charAt(0)!==l?l+s:s}else u[f]=s;break;case"username":case"password":u[f]=encodeURIComponent(s);break;case"auth":var h=s.indexOf(":");~h?(u.username=s.slice(0,h),u.username=encodeURIComponent(decodeURIComponent(u.username)),u.password=s.slice(h+1),u.password=encodeURIComponent(decodeURIComponent(u.password))):u.username=encodeURIComponent(decodeURIComponent(s))}for(var d=0;d<rules.length;d++){var p=rules[d];p[4]&&(u[p[1]]=u[p[1]].toLowerCase())}return u.auth=u.password?u.username+":"+u.password:u.username,u.origin=u.protocol!=="file:"&&isSpecial(u.protocol)&&u.host?u.protocol+"//"+u.host:"null",u.href=u.toString(),u}function toString(f){(!f||typeof f!="function")&&(f=qs.stringify);var s,a=this,u=a.host,l=a.protocol;l&&l.charAt(l.length-1)!==":"&&(l+=":");var h=l+(a.protocol&&a.slashes||isSpecial(a.protocol)?"//":"");return a.username?(h+=a.username,a.password&&(h+=":"+a.password),h+="@"):a.password?(h+=":"+a.password,h+="@"):a.protocol!=="file:"&&isSpecial(a.protocol)&&!u&&a.pathname!=="/"&&(h+="@"),(u[u.length-1]===":"||port.test(a.hostname)&&!a.port)&&(u+=":"),h+=u+a.pathname,s=typeof a.query=="object"?f(a.query):a.query,s&&(h+=s.charAt(0)!=="?"?"?"+s:s),a.hash&&(h+=a.hash),h}Url.prototype={set,toString},Url.extractProtocol=extractProtocol,Url.location=lolcation,Url.trimLeft=trimLeft,Url.qs=qs;var urlParse=Url;const URLParse=getDefaultExportFromCjs(urlParse);class User{constructor(f){this.service=f,this.requestQueue={},this.requestQueueCount=0,this.infoParserCache={},this.InfoParser=InfoParser}refreshUserData(f=!1){return new Promise((s,a)=>{let u=[];this.service.options.sites.forEach(l=>{if(!l.allowGetUserInfo||l.offline)return!1;if(!f)u.push(this.getUserInfo(l,!0));else if(l.user){let d=[EUserDataRequestStatus.needLogin,EUserDataRequestStatus.unknown].includes(l.user.lastUpdateStatus);(l.user.lastUpdateStatus&&d||!l.user.lastUpdateStatus)&&u.push(this.getUserInfo(l,!0))}}),Promise.all(u).then(l=>{s(l)})})}updateStatus(f,s){s.lastUpdateTime=new Date().getTime(),this.service.userData.update(f,s)}getSiteURL(f){return f.cdn&&f.cdn.length>0?f.cdn[0]:f.url}getUserInfo(f,s=!1){return this.service.options.autoRefreshUserDataLastTime=new Date().getTime(),this.service.saveConfig(),new Promise((a,u)=>{let l=s?a:u;if(!f){l(null);return}let h=this.service.userData.get(f.host)||{},d=this.service.getSiteSelector(f,"userBaseInfo");if(!d){h.lastUpdateStatus=EUserDataRequestStatus.notSupported,this.updateStatus(f,h),l(APP.createErrorMessage({status:EUserDataRequestStatus.notSupported,msg:this.service.i18n.t("service.user.notSupported")}));return}let p=`${this.getSiteURL(f)}${d.page}`,x=f.host;if(this.checkQueue(x,p)){a(h);return}this.getInfos(x,p,d,f).then(m=>{if(console.log("userBaseInfo",x,m),h=Object.assign({},m),d&&d.fields&&d.fields.isLogged?h.isLogged&&(h.name||h.id)?h.isLogged=!0:h.isLogged=!1:(h.name||h.id)&&(h.isLogged=!0),!h.isLogged){h.lastUpdateStatus=EUserDataRequestStatus.needLogin,l(APP.createErrorMessage({msg:this.service.i18n.t("service.user.notLogged"),status:EUserDataRequestStatus.needLogin}));return}if(d=this.service.getSiteSelector(f,"userExtendInfo"),!d){this.updateStatus(f,h),h.lastUpdateStatus=EUserDataRequestStatus.success,a(h);return}if(h.name||h.id){let g=`${this.getSiteURL(f)}${d.page.replace("$user.id$",h.id).replace("$user.name$",h.name).replace("$user.bonusPage$",h.bonusPage).replace("$user.unsatisfiedsPage$",h.unsatisfiedsPage)}`;if(this.checkQueue(x,g)){a(h);return}this.getInfos(x,g,d,f,h).then(b=>{h=Object.assign(h,b),h.lastUpdateStatus=EUserDataRequestStatus.success,this.updateStatus(f,h),this.getMoreInfos(f,h).then(()=>{a(h)})}).catch(b=>{h.lastUpdateStatus=EUserDataRequestStatus.unknown,l(APP.createErrorMessage(b))})}else h.lastUpdateStatus=EUserDataRequestStatus.unknown,l(APP.createErrorMessage({status:EUserDataRequestStatus.unknown,msg:this.service.i18n.t("service.user.getUserInfoFailed")}))}).catch(m=>{h.lastUpdateStatus=EUserDataRequestStatus.unknown,console.log("getInfos Error :",m),l(APP.createErrorMessage(m))})})}getMoreInfos(site,userInfo){return new Promise((resolve,reject)=>{let requests=[],selectors=["userSeedingTorrents","bonusExtendInfo","hnrExtendInfo","levelExtendInfo","userUploadedTorrents"];selectors.forEach(name=>{let host=site.host,rule=this.service.getSiteSelector(site,name);if(rule&&rule.page){let url=`${this.getSiteURL(site)}${rule.page.replace("$user.id$",userInfo.id).replace("$user.name$",userInfo.name).replace("$user.bonusPage$",userInfo.bonusPage).replace("$user.unsatisfiedsPage$",userInfo.unsatisfiedsPage)}`;if(this.checkQueue(host,url))return;if(rule.prerequisites)try{let result=eval(rule.prerequisites);if(result!==!0)return}catch(f){console.log(f);return}requests.push(this.getInfos(host,url,rule,site,userInfo))}}),requests.length?Promise.all(requests).then(f=>{f.forEach(s=>{userInfo=Object.assign(userInfo,s),console.log(userInfo),userInfo.lastUpdateStatus=EUserDataRequestStatus.success,this.updateStatus(site,userInfo)}),resolve(userInfo)}).catch(f=>{resolve(userInfo)}):resolve(userInfo)})}getInfos(f,s,a,u,l){return new Promise((h,d)=>{s=s.replace("://","****").replace(/\/\//g,"/").replace("****","://");let p=a.requestData;if(p&&l)try{for(const g in p)if(p.hasOwnProperty(g)){const b=p[g];p[g]=PPF.replaceKeys(b,l,"user")}}catch(g){console.log(g)}let x=a.headers;if(x&&l)try{for(const g in x)if(x.hasOwnProperty(g)){const b=x[g];x[g]=PPF.replaceKeys(b,l,"user")}}catch(g){console.log(g)}if(x&&u)try{for(const g in x)if(x.hasOwnProperty(g)){const b=x[g];x[g]=PPF.replaceKeys(b,u,"site")}}catch(g){console.log(g)}if(a.parser&&u){this.runParser(a,u,l,h,d);return}PPF.updateBadge(++this.requestQueueCount);let m=$.ajax({url:s,method:a.requestMethod||ERequestMethod.GET,dataType:"text",data:a.requestContentType=="application/json"?JSON.stringify(p):p,contentType:a.requestContentType=="application/json"?"application/json":"application/x-www-form-urlencoded",headers:a.headers,timeout:this.service.options.connectClientTimeout||3e4,cache:!(a.dataType&&a.dataType!==ERequestResultType.JSON)}).done(g=>{this.removeQueue(f,s),PPF.updateBadge(--this.requestQueueCount);let b;try{if(a.dataType!==ERequestResultType.JSON){let v=new DOMParser().parseFromString(g,"text/html"),y=a.topElement||"body";b=$(v).find(y)}else b=JSON.parse(g)}catch(v){this.service.debug("getInfos.error",f,s,v),d(v);return}if(b&&a)try{let v=new InfoParser().getResult(b,a);h(v)}catch(v){this.service.debug(v),d(v)}}).fail((g,b,v)=>{this.removeQueue(f,s),PPF.updateBadge(--this.requestQueueCount);let y=this.service.i18n.t("service.searcher.siteNetworkFailed",{site:u,msg:`${g.status} ${v}, ${b}`});this.service.debug(y,f,s,g.responseText),d(y)});this.addQueue(f,s,m)})}runParser(rule,site,userInfo,resolve,reject){let siteConfigPath=site.schema=="publicSite"?"publicSites":"sites";site.path?siteConfigPath+=`/${site.path}`:siteConfigPath+=`/${site.host}`;let path=rule.parser;path.substr(0,1)!=="/"&&path.substr(0,4)!=="http"&&(path=`${siteConfigPath}/${path}`);let script=this.infoParserCache[path];script?eval(script):APP.getScriptContent(path).done(script=>{this.infoParserCache[path]=script,eval(script)})}addQueue(f,s,a){let u=this.requestQueue[f]||{};u[s]=a,this.requestQueue[f]=u}checkQueue(f,s){return!!(this.requestQueue[f]||{})[s]}removeQueue(f,s){let a=this.requestQueue[f]||{};a[s]&&delete a[s],this.requestQueue[f]=a}abortGetUserInfo(f){return new Promise((s,a)=>{let u=f.host,l=this.requestQueue[u],h=[];if(l){for(const d in l)if(l.hasOwnProperty(d)){const p=l[d];try{p.abort()}catch(x){this.service.logger.add({module:EModule.background,event:"user.abortGetUserInfo.error",msg:this.service.i18n.t("service.user.abortGetUserInfoFailed"),data:{site:f.host,error:x}}),h.push(x)}}delete this.requestQueue[u]}h.length>0?a(h):s(!0)})}getCookie(f,s){return new Promise((a,u)=>{PPF.checkPermissions(["cookies"]).then(()=>{this.service.config.getCookiesFromSite(f).then(l=>{for(const h of l.cookies)h.name===s&&a(h.value);a("")}).catch(l=>{u(l)})}).catch(l=>{u(l)})})}}class MovieInfoService{constructor(){this.doubanApiURL="https://api.douban.com/v2",this.doubanFrodoApi="https://frodo.douban.com/api/v2",this.douban={frodo:{apiKeys:["054022eaeae0b00e0fc068c0c0a2102a"],entApiKeys:["054022eaeae0b00e0fc068c0c0a2102a"],methods:{movie:{search:`${this.doubanFrodoApi}/search?q=$key$&count=$count$&apiKey=$apikey$`,imdb:"https://omit.mkrobot.org/movie/infos/$imdbid$",subject:"https://omit.mkrobot.org/movie/infos/douban$id$"}}},common:{apiKeys:["02646d3fb69a52ff072d47bf23cef8fd","0b2bdeda43b5688921839c8ecb20399b","0dad551ec0f84ed02907ff5c42e8ec70","0df993c66c0c636e29ecbb5344252a4a"],entApiKeys:["0dad551ec0f84ed02907ff5c42e8ec70","02646d3fb69a52ff072d47bf23cef8fd"],methods:{movie:{search:`${this.doubanApiURL}/movie/search?q=$key$&count=$count$&apikey=$apikey$`,imdb:`${this.doubanApiURL}/movie/imdb/$imdbid$?apikey=$apikey$`,subject:`${this.doubanApiURL}/movie/subject/$id$?apikey=$apikey$`}}}},this.omdbApiURL="https://www.omdbapi.com",this.omitApiURL="https://omit.mkrobot.org",this.omdbApiKeys=["e0d3039d","a67d9bce","6be019fc","4ee790e0","d82cb888","d58193b6","15c0aa3f","53acf36d","3a864b75","2892ab46","b507af90","7cf67120","85b2a90c","2896ff0a","aa4b9983","c4e08870","5d5c0049","79a462f2","e4c3fce8","918d70df","e94cb667","eb84d6d7","e192b5a","d62b4cf5","5e6442a3","9b1468c6"],this.doubanApiKeys=["02646d3fb69a52ff072d47bf23cef8fd","0b2bdeda43b5688921839c8ecb20399b","0dad551ec0f84ed02907ff5c42e8ec70","0df993c66c0c636e29ecbb5344252a4a"],this.doubanEntApiKeys=["0dad551ec0f84ed02907ff5c42e8ec70","02646d3fb69a52ff072d47bf23cef8fd"],this.omitApiKeys=["kiqMY6MC"],this.cache={base:{},ratings:{},doubanToIMDb:{},search:{}},this.timeout=3e3,this.doubanApi=this.douban.frodo,this.requsetQueue={}}getInfos(s){return/(douban\d+)/.test(s)?this.getInfoFromDoubanId(s.replace("douban","")):/^(tt\d+)$/.test(s)?this.getInfoFromIMDb(s):new Promise((a,u)=>{u("暂未实现")})}isIMDbId(s){return/^(tt\d+)$/.test(s)}getInfoFromIMDb(s){return new Promise((a,u)=>{if(this.isIMDbId(s)){let l=this.cache.base[s];if(l){a(l);return}let h=PPF.replaceKeys(this.doubanApi.methods.movie.imdb,{imdbid:s,apikey:this.getDoubanApiKey()});$.ajax({url:h,timeout:this.timeout}).done(d=>{let p;d&&(p=d.data||d),this.cache.base[s]=p,a(p)}).fail(d=>{u(d)})}else u("error IMDbId")})}getInfoFromDoubanId(s){return new Promise((a,u)=>{if(/^(\d+)$/.test(s)){let l=this.cache.base[s];if(l){a(l);return}let h=PPF.replaceKeys(this.doubanApi.methods.movie.subject,{id:s,apikey:this.getDoubanApiKey()});$.ajax({url:h,timeout:this.timeout}).done(d=>{let p;d&&(p=d.data||d),this.cache.base[s]=p,a(p)}).fail(d=>{u(d)})}else u("error douban id")})}getRatings(s){return new Promise((a,u)=>{if(this.isIMDbId(s)){let l=this.cache.ratings[s];if(l){a(l);return}let h=0;const d=()=>{let p=this.getOmdbApiKey(),x=`${this.omdbApiURL}/?i=${s}&apikey=${p}&tomatoes=true`;$.ajax({url:x,timeout:this.timeout}).done(m=>{if(m&&m.Error){if(h++,h>=5){u(m);return}this.removeApiKey("omdb",p),d();return}this.cache.ratings[s]=m,a(m)}).fail(m=>{u(m)})};d()}else u("error IMDbId")})}getOmdbApiKey(){return this.omdbApiKeys[Math.floor(Math.random()*this.omdbApiKeys.length)]}getDoubanApiKey(){return this.doubanApi.apiKeys[Math.floor(Math.random()*this.doubanApi.apiKeys.length)]}getDoubanEntApiKey(){return this.doubanApi.entApiKeys[Math.floor(Math.random()*this.doubanApi.entApiKeys.length)]}getIMDbIdFromDouban(s){return new Promise((a,u)=>{let l=this.cache.doubanToIMDb[s];if(l){a(l);return}let h=`${this.omitApiURL}/movie/${s}/douban/imdb`;if(this.requsetQueue[h]){u();return}this.requsetQueue[h]=!0,$.ajax({url:h,timeout:this.timeout}).done(d=>{console.log("getIMDbIdFromDouban",d),d.data?(this.cache.doubanToIMDb[s]=d.data,a(d.data)):u(d)}).fail(d=>{u(d)}).always(()=>{delete this.requsetQueue[h]})})}queryMovieInfoFromDouban(s,a=5){return this.isIMDbId(s)?this.getInfoFromIMDb(s):new Promise((u,l)=>{let h=this.cache.search[s];if(h){u(h);return}let d=`${this.omitApiURL}/movie/search/${s}`;if(this.requsetQueue[d]){l();return}this.requsetQueue[d]=!0,$.ajax({url:d,timeout:this.timeout}).done(p=>{console.log("queryMovieInfoFromDouban",p),p.data?(this.cache.search[s]=p.data,u(p.data)):l(p)}).fail(p=>{l(p)}).always(()=>{delete this.requsetQueue[d]})})}appendApiKey(s="",a){let u;switch(s){case"omdb":u=this.omdbApiKeys;break;case"douban":u=this.doubanApiKeys;break}a.forEach(l=>{l&&!u.includes(l)&&u.push(l)})}removeApiKey(s="",a){let u=[];switch(s){case"omdb":u=this.omdbApiKeys;break;case"douban":u=this.doubanApiKeys;break}let l=u.findIndex(h=>{if(h===a)return!0});l!==-1&&u.splice(l,1)}verifyOmdbApiKey(s){return new Promise((a,u)=>{let l=`${this.omdbApiURL}/?i=tt0111161&apikey=${s}&tomatoes=true`;$.ajax({url:l,timeout:this.timeout}).done(h=>{if(h&&h.Error){u(h.Error);return}a()}).fail(h=>{u(h)})})}verifyDoubanApiKey(s){return new Promise((a,u)=>{let l=`${this.doubanApiURL}/movie/imdb/tt0111161?apikey=${s}`;$.ajax({url:l,timeout:this.timeout}).done(h=>{h&&h.title?a():u(h.Error)}).fail(h=>{u(h)})})}getTopSearches(s=9){return new Promise((a,u)=>{$.ajax({url:`${this.omitApiURL}/movie/top/${s}?apikey=${this.omitApiKeys[0]}`,timeout:this.timeout}).then(l=>{l&&l.data?a(l.data):u()}).catch(l=>{u(l)})})}}/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/const alphabet="0123456789abcdef",encodeLookup=[],decodeLookup=[];for(let f=0;f<256;f++)encodeLookup[f]=alphabet[f>>4&15]+alphabet[f&15],f<16&&(f<10?decodeLookup[48+f]=f:decodeLookup[87+f]=f);const arr2hex=f=>{const s=f.length;let a="",u=0;for(;u<s;)a+=encodeLookup[f[u++]];return a},hex2arr=f=>{const s=f.length>>1,a=s<<1,u=new Uint8Array(s);let l=0,h=0;for(;h<a;)u[l++]=decodeLookup[f.charCodeAt(h++)]<<4|decodeLookup[f.charCodeAt(h++)];return u},concat=(f,s=0)=>{const a=f.length||0;if(!s){let d=a;for(;d--;)s+=f[d].length}const u=new Uint8Array(s);let l=s,h=a;for(;h--;)l-=f[h].length,u.set(f[h],l);return u};for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var encode$1=function(f){var s=new Uint8Array(f),a,u=s.length,l="";for(a=0;a<u;a+=3)l+=chars[s[a]>>2],l+=chars[(s[a]&3)<<4|s[a+1]>>4],l+=chars[(s[a+1]&15)<<2|s[a+2]>>6],l+=chars[s[a+2]&63];return u%3===2?l=l.substring(0,l.length-1)+"=":u%3===1&&(l=l.substring(0,l.length-2)+"=="),l};const decoder=new TextDecoder,arr2text=(f,s)=>s?new TextDecoder(s).decode(f):decoder.decode(f),encoder=new TextEncoder,text2arr=f=>encoder.encode(f),arr2base=f=>encode$1(f),scope=typeof window<"u"?window:self,crypto=scope.crypto||scope.msCrypto||{},subtle=crypto.subtle||crypto.webkitSubtle,formatMap={hex:arr2hex,base64:arr2base},hash=async(f,s,a="sha-1")=>{if(!subtle)throw new Error("no web crypto support");typeof f=="string"&&(f=text2arr(f));const u=new Uint8Array(await subtle.digest(a,f));return s?formatMap[s](u):u};function digitCount(f){const s=f<0?1:0;return f=Math.abs(Number(f||1)),Math.floor(Math.log10(f))+1+s}function getType(f){return ArrayBuffer.isView(f)?"arraybufferview":Array.isArray(f)?"array":f instanceof Number?"number":f instanceof Boolean?"boolean":f instanceof Set?"set":f instanceof Map?"map":f instanceof String?"string":f instanceof ArrayBuffer?"arraybuffer":typeof f}function encode(f,s,a){const u=[];let l=null;return encode._encode(u,f),l=concat(u),encode.bytes=l.length,ArrayBuffer.isView(s)?(s.set(l,a),s):l}encode.bytes=-1,encode._floatConversionDetected=!1,encode._encode=function(f,s){if(s!=null)switch(getType(s)){case"object":encode.dict(f,s);break;case"map":encode.dictMap(f,s);break;case"array":encode.list(f,s);break;case"set":encode.listSet(f,s);break;case"string":encode.string(f,s);break;case"number":encode.number(f,s);break;case"boolean":encode.number(f,s);break;case"arraybufferview":encode.buffer(f,new Uint8Array(s.buffer,s.byteOffset,s.byteLength));break;case"arraybuffer":encode.buffer(f,new Uint8Array(s));break}};const buffE=new Uint8Array([101]),buffD=new Uint8Array([100]),buffL=new Uint8Array([108]);encode.buffer=function(f,s){f.push(text2arr(s.length+":"),s)},encode.string=function(f,s){f.push(text2arr(text2arr(s).byteLength+":"+s))},encode.number=function(f,s){if(Number.isInteger(s))return f.push(text2arr("i"+BigInt(s)+"e"));const a=2147483648,u=s/a<<0,l=s%a<<0,h=u*a+l;f.push(text2arr("i"+h+"e")),h!==s&&!encode._floatConversionDetected&&(encode._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+s+'":','Bencoding only defines support for integers, value was converted to "'+h+'"'),console.trace())},encode.dict=function(f,s){f.push(buffD);let a=0,u;const l=Object.keys(s).sort(),h=l.length;for(;a<h;a++)u=l[a],s[u]!=null&&(encode.string(f,u),encode._encode(f,s[u]));f.push(buffE)},encode.dictMap=function(f,s){f.push(buffD);const a=Array.from(s.keys()).sort();for(const u of a)s.get(u)!=null&&(ArrayBuffer.isView(u)?encode._encode(f,u):encode.string(f,String(u)),encode._encode(f,s.get(u)));f.push(buffE)},encode.list=function(f,s){let a=0;const u=s.length;for(f.push(buffL);a<u;a++)s[a]!=null&&encode._encode(f,s[a]);f.push(buffE)},encode.listSet=function(f,s){f.push(buffL);for(const a of s)a!=null&&encode._encode(f,a);f.push(buffE)};const INTEGER_START=105,STRING_DELIM=58,DICTIONARY_START=100,LIST_START=108,END_OF_TYPE=101;function getIntFromBuffer(f,s,a){let u=0,l=1;for(let h=s;h<a;h++){const d=f[h];if(d<58&&d>=48){u=u*10+(d-48);continue}if(!(h===s&&d===43)){if(h===s&&d===45){l=-1;continue}if(d===46)break;throw new Error("not a number: buffer["+h+"] = "+d)}}return u*l}function decode$1(f,s,a,u){return f==null||f.length===0?null:(typeof s!="number"&&u==null&&(u=s,s=void 0),typeof a!="number"&&u==null&&(u=a,a=void 0),decode$1.position=0,decode$1.encoding=u||null,decode$1.data=ArrayBuffer.isView(f)?new Uint8Array(f.slice(s,a)):text2arr(f),decode$1.bytes=decode$1.data.length,decode$1.next())}decode$1.bytes=0,decode$1.position=0,decode$1.data=null,decode$1.encoding=null,decode$1.next=function(){switch(decode$1.data[decode$1.position]){case DICTIONARY_START:return decode$1.dictionary();case LIST_START:return decode$1.list();case INTEGER_START:return decode$1.integer();default:return decode$1.buffer()}},decode$1.find=function(f){let s=decode$1.position;const a=decode$1.data.length,u=decode$1.data;for(;s<a;){if(u[s]===f)return s;s++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(f)+'" [0x'+f.toString(16)+"]")},decode$1.dictionary=function(){decode$1.position++;const f={};for(;decode$1.data[decode$1.position]!==END_OF_TYPE;){const s=decode$1.buffer();let a=arr2text(s);a.includes("�")&&(a=arr2hex(s)),f[a]=decode$1.next()}return decode$1.position++,f},decode$1.list=function(){decode$1.position++;const f=[];for(;decode$1.data[decode$1.position]!==END_OF_TYPE;)f.push(decode$1.next());return decode$1.position++,f},decode$1.integer=function(){const f=decode$1.find(END_OF_TYPE),s=getIntFromBuffer(decode$1.data,decode$1.position+1,f);return decode$1.position+=f+1-decode$1.position,s},decode$1.buffer=function(){let f=decode$1.find(STRING_DELIM);const s=getIntFromBuffer(decode$1.data,decode$1.position,f),a=++f+s;return decode$1.position=a,decode$1.encoding?arr2text(decode$1.data.slice(f,a)):decode$1.data.slice(f,a)};function listLength(f){let s=2;for(const a of f)s+=encodingLength$1(a);return s}function mapLength(f){let s=2;for(const[a,u]of f){const l=text2arr(a).byteLength;s+=digitCount(l)+1+l,s+=encodingLength$1(u)}return s}function objectLength(f){let s=2;const a=Object.keys(f);for(let u=0;u<a.length;u++){const l=text2arr(a[u]).byteLength;s+=digitCount(l)+1+l,s+=encodingLength$1(f[a[u]])}return s}function stringLength(f){const s=text2arr(f).byteLength;return digitCount(s)+1+s}function arrayBufferLength(f){const s=f.byteLength-f.byteOffset;return digitCount(s)+1+s}function encodingLength$1(f){if(f==null)return 0;const a=getType(f);switch(a){case"arraybufferview":return arrayBufferLength(f);case"string":return stringLength(f);case"array":case"set":return listLength(f);case"number":return 1+digitCount(Math.floor(f))+1;case"bigint":return 1+f.toString().length+1;case"object":return objectLength(f);case"map":return mapLength(f);default:throw new TypeError(`Unsupported value of type "${a}"`)}}const encodingLength=encodingLength$1,bencode={encode,decode:decode$1,byteLength:encodingLength$1,encodingLength},fetch=self.fetch||(()=>{throw new Error("global fetch is not available!")}),byteTable=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255],decode=function(f){if(!ArrayBuffer.isView(f)&&typeof f!="string")throw new TypeError("base32.decode only takes Buffer or string as parameter");let s=0,a=0,u,l=0;ArrayBuffer.isView(f)||(f=text2arr(f));const h=new Uint8Array(Math.ceil(f.length*5/8));for(let d=0;d<f.length&&f[d]!==61;d++){const p=f[d]-48;if(p<byteTable.length)a=byteTable[p],s<=3?(s=(s+5)%8,s===0?(u|=a,h[l]=u,l++,u=0):u|=255&a<<8-s):(s=(s+5)%8,u|=255&a>>>s,h[l]=u,l++,u=255&a<<8-s);else throw new Error("Invalid input - it is not base32 encoded string")}return h.subarray(0,l)};function parseRange(f){const s=(a,u=a)=>Array.from({length:u-a+1},(l,h)=>h+a);return f.reduce((a,u,l,h)=>{const d=u.split("-").map(p=>parseInt(p));return a.concat(s(...d))},[])}/*! magnet-uri. MIT License. WebTorrent LLC <https://webtorrent.io/opensource> */function magnetURIDecode(f){const s={},a=f.split("magnet:?")[1];(a&&a.length>=0?a.split("&"):[]).forEach(h=>{const d=h.split("=");if(d.length!==2)return;const p=d[0];let x=d[1];p==="dn"&&(x=decodeURIComponent(x).replace(/\+/g," ")),(p==="tr"||p==="xs"||p==="as"||p==="ws")&&(x=decodeURIComponent(x)),p==="kt"&&(x=decodeURIComponent(x).split("+")),p==="ix"&&(x=Number(x)),p==="so"&&(x=parseRange(decodeURIComponent(x).split(","))),s[p]?(Array.isArray(s[p])||(s[p]=[s[p]]),s[p].push(x)):s[p]=x});let l;return s.xt&&(Array.isArray(s.xt)?s.xt:[s.xt]).forEach(d=>{(l=d.match(/^urn:btih:(.{40})/))?s.infoHash=l[1].toLowerCase():(l=d.match(/^urn:btih:(.{32})/))?s.infoHash=arr2hex(decode(l[1])):(l=d.match(/^urn:btmh:1220(.{64})/))&&(s.infoHashV2=l[1].toLowerCase())}),s.xs&&(Array.isArray(s.xs)?s.xs:[s.xs]).forEach(d=>{(l=d.match(/^urn:btpk:(.{64})/))&&(s.publicKey=l[1].toLowerCase())}),s.infoHash&&(s.infoHashBuffer=hex2arr(s.infoHash)),s.infoHashV2&&(s.infoHashV2Buffer=hex2arr(s.infoHashV2)),s.publicKey&&(s.publicKeyBuffer=hex2arr(s.publicKey)),s.dn&&(s.name=s.dn),s.kt&&(s.keywords=s.kt),s.announce=[],(typeof s.tr=="string"||Array.isArray(s.tr))&&(s.announce=s.announce.concat(s.tr)),s.urlList=[],(typeof s.as=="string"||Array.isArray(s.as))&&(s.urlList=s.urlList.concat(s.as)),(typeof s.ws=="string"||Array.isArray(s.ws))&&(s.urlList=s.urlList.concat(s.ws)),s.peerAddresses=[],(typeof s["x.pe"]=="string"||Array.isArray(s["x.pe"]))&&(s.peerAddresses=s.peerAddresses.concat(s["x.pe"])),s.announce=Array.from(new Set(s.announce)),s.urlList=Array.from(new Set(s.urlList)),s.peerAddresses=Array.from(new Set(s.peerAddresses)),s}function assertPath(f){if(typeof f!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(f))}function normalizeStringPosix(f,s){for(var a="",u=0,l=-1,h=0,d,p=0;p<=f.length;++p){if(p<f.length)d=f.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(l===p-1||h===1))if(l!==p-1&&h===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var x=a.lastIndexOf("/");if(x!==a.length-1){x===-1?(a="",u=0):(a=a.slice(0,x),u=a.length-1-a.lastIndexOf("/")),l=p,h=0;continue}}else if(a.length===2||a.length===1){a="",u=0,l=p,h=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+f.slice(l+1,p):a=f.slice(l+1,p),u=p-l-1;l=p,h=0}else d===46&&h!==-1?++h:h=-1}return a}function _format(f,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+f+u:u}var posix={resolve:function f(){for(var s="",a=!1,u,l=arguments.length-1;l>=-1&&!a;l--){var h;l>=0?h=arguments[l]:(u===void 0&&(u=process$1.cwd()),h=u),assertPath(h),h.length!==0&&(s=h+"/"+s,a=h.charCodeAt(0)===47)}return s=normalizeStringPosix(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function f(s){if(assertPath(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=normalizeStringPosix(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function f(s){return assertPath(s),s.length>0&&s.charCodeAt(0)===47},join:function f(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];assertPath(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":posix.normalize(s)},relative:function f(s,a){if(assertPath(s),assertPath(a),s===a||(s=posix.resolve(s),a=posix.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var l=s.length,h=l-u,d=1;d<a.length&&a.charCodeAt(d)===47;++d);for(var p=a.length,x=p-d,m=h<x?h:x,g=-1,b=0;b<=m;++b){if(b===m){if(x>m){if(a.charCodeAt(d+b)===47)return a.slice(d+b+1);if(b===0)return a.slice(d+b)}else h>m&&(s.charCodeAt(u+b)===47?g=b:b===0&&(g=0));break}var v=s.charCodeAt(u+b),y=a.charCodeAt(d+b);if(v!==y)break;v===47&&(g=b)}var C="";for(b=u+g+1;b<=l;++b)(b===l||s.charCodeAt(b)===47)&&(C.length===0?C+="..":C+="/..");return C.length>0?C+a.slice(d+g):(d+=g,a.charCodeAt(d)===47&&++d,a.slice(d))},_makeLong:function f(s){return s},dirname:function f(s){if(assertPath(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,l=-1,h=!0,d=s.length-1;d>=1;--d)if(a=s.charCodeAt(d),a===47){if(!h){l=d;break}}else h=!1;return l===-1?u?"/":".":u&&l===1?"//":s.slice(0,l)},basename:function f(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');assertPath(s);var u=0,l=-1,h=!0,d;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var p=a.length-1,x=-1;for(d=s.length-1;d>=0;--d){var m=s.charCodeAt(d);if(m===47){if(!h){u=d+1;break}}else x===-1&&(h=!1,x=d+1),p>=0&&(m===a.charCodeAt(p)?--p===-1&&(l=d):(p=-1,l=x))}return u===l?l=x:l===-1&&(l=s.length),s.slice(u,l)}else{for(d=s.length-1;d>=0;--d)if(s.charCodeAt(d)===47){if(!h){u=d+1;break}}else l===-1&&(h=!1,l=d+1);return l===-1?"":s.slice(u,l)}},extname:function f(s){assertPath(s);for(var a=-1,u=0,l=-1,h=!0,d=0,p=s.length-1;p>=0;--p){var x=s.charCodeAt(p);if(x===47){if(!h){u=p+1;break}continue}l===-1&&(h=!1,l=p+1),x===46?a===-1?a=p:d!==1&&(d=1):a!==-1&&(d=-1)}return a===-1||l===-1||d===0||d===1&&a===l-1&&a===u+1?"":s.slice(a,l)},format:function f(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return _format("/",s)},parse:function f(s){assertPath(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),l=u===47,h;l?(a.root="/",h=1):h=0;for(var d=-1,p=0,x=-1,m=!0,g=s.length-1,b=0;g>=h;--g){if(u=s.charCodeAt(g),u===47){if(!m){p=g+1;break}continue}x===-1&&(m=!1,x=g+1),u===46?d===-1?d=g:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||x===-1||b===0||b===1&&d===x-1&&d===p+1?x!==-1&&(p===0&&l?a.base=a.name=s.slice(1,x):a.base=a.name=s.slice(p,x)):(p===0&&l?(a.name=s.slice(1,d),a.base=s.slice(1,x)):(a.name=s.slice(p,d),a.base=s.slice(p,x)),a.ext=s.slice(d,x)),p>0?a.dir=s.slice(0,p-1):l&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;var pathBrowserify=posix;const path=getDefaultExportFromCjs(pathBrowserify);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):f=>(promise||(promise=Promise.resolve())).then(f).catch(s=>setTimeout(()=>{throw s},0));const queueMicrotask$1=getDefaultExportFromCjs(queueMicrotask_1);/*! parse-torrent. MIT License. WebTorrent LLC <https://webtorrent.io/opensource> */async function parseTorrent(f){if(typeof f=="string"&&/^(stream-)?magnet:/.test(f)){const s=magnetURIDecode(f);if(!s.infoHash)throw new Error("Invalid torrent identifier");return s}else{if(typeof f=="string"&&(/^[a-f0-9]{40}$/i.test(f)||/^[a-z2-7]{32}$/i.test(f)))return magnetURIDecode(`magnet:?xt=urn:btih:${f}`);if(ArrayBuffer.isView(f)&&f.length===20)return magnetURIDecode(`magnet:?xt=urn:btih:${arr2hex(f)}`);if(ArrayBuffer.isView(f))return await decodeTorrentFile(f);if(f&&f.infoHash)return f.infoHash=f.infoHash.toLowerCase(),f.announce||(f.announce=[]),typeof f.announce=="string"&&(f.announce=[f.announce]),f.urlList||(f.urlList=[]),f;throw new Error("Invalid torrent identifier")}}async function parseTorrentRemote(f,s,a){if(typeof s=="function")return parseTorrentRemote(f,{},s);if(typeof a!="function")throw new Error("second argument must be a Function");let u;try{u=await parseTorrent(f)}catch{}if(u&&u.infoHash)queueMicrotask$1(()=>{a(null,u)});else if(isBlob(f))try{const h=new Uint8Array(await f.arrayBuffer());l(h)}catch(h){return a(new Error(`Error converting Blob: ${h.message}`))}else if(/^https?:/.test(f))try{const h=await fetch(f,{headers:{"user-agent":"WebTorrent (https://webtorrent.io)"},signal:AbortSignal.timeout(3e4),...s}),d=new Uint8Array(await h.arrayBuffer());l(d)}catch(h){return a(new Error(`Error downloading torrent: ${h.message}`))}else typeof fs.readFile=="function"&&typeof f=="string"?fs.readFile(f,(h,d)=>{if(h)return a(new Error("Invalid torrent identifier"));l(d)}):queueMicrotask$1(()=>{a(new Error("Invalid torrent identifier"))});async function l(h){try{u=await parseTorrent(h)}catch(d){return a(d)}u&&u.infoHash?a(null,u):a(new Error("Invalid torrent identifier"))}}async function decodeTorrentFile(f){ArrayBuffer.isView(f)&&(f=bencode.decode(f)),ensure(f.info,"info"),ensure(f.info["name.utf-8"]||f.info.name,"info.name"),ensure(f.info["piece length"],"info['piece length']"),ensure(f.info.pieces,"info.pieces"),f.info.files?f.info.files.forEach(l=>{ensure(typeof l.length=="number","info.files[0].length"),ensure(l["path.utf-8"]||l.path,"info.files[0].path")}):ensure(typeof f.info.length=="number","info.length");const s={info:f.info,infoBuffer:bencode.encode(f.info),name:arr2text(f.info["name.utf-8"]||f.info.name),announce:[]};s.infoHashBuffer=await hash(s.infoBuffer),s.infoHash=arr2hex(s.infoHashBuffer),f.info.private!==void 0&&(s.private=!!f.info.private),f["creation date"]&&(s.created=new Date(f["creation date"]*1e3)),f["created by"]&&(s.createdBy=arr2text(f["created by"])),ArrayBuffer.isView(f.comment)&&(s.comment=arr2text(f.comment)),Array.isArray(f["announce-list"])&&f["announce-list"].length>0?f["announce-list"].forEach(l=>{l.forEach(h=>{s.announce.push(arr2text(h))})}):f.announce&&s.announce.push(arr2text(f.announce)),ArrayBuffer.isView(f["url-list"])&&(f["url-list"]=f["url-list"].length>0?[f["url-list"]]:[]),s.urlList=(f["url-list"]||[]).map(l=>arr2text(l)),s.announce=Array.from(new Set(s.announce)),s.urlList=Array.from(new Set(s.urlList));const a=f.info.files||[f.info];s.files=a.map((l,h)=>{const d=[].concat(s.name,l["path.utf-8"]||l.path||[]).map(p=>ArrayBuffer.isView(p)?arr2text(p):p);return{path:path.join.apply(null,[path.sep].concat(d)).slice(1),name:d[d.length-1],length:l.length,offset:a.slice(0,h).reduce(sumLength,0)}}),s.length=a.reduce(sumLength,0);const u=s.files[s.files.length-1];return s.pieceLength=f.info["piece length"],s.lastPieceLength=(u.offset+u.length)%s.pieceLength||s.pieceLength,s.pieces=splitPieces(f.info.pieces),s}function isBlob(f){return typeof Blob<"u"&&f instanceof Blob}function sumLength(f,s){return f+s.length}function splitPieces(f){const s=[];for(let a=0;a<f.length;a+=20)s.push(arr2hex(f.slice(a,a+20)));return s}function ensure(f,s){if(!f)throw new Error(`Torrent is missing required field: ${s}`)}class Controller{constructor(s){this.service=s,this.options={sites:[],clients:[]},this.defaultClientOptions={},this.siteDefaultClients={},this.optionsTabId=0,this.downloadHistory=new DownloadHistory,this.clients={},this.searcher=new Searcher(this.service),this.userService=new User(this.service),this.movieInfoService=new MovieInfoService,this.clientController=new ClientController,this.isInitialized=!1,this.contentPages=[],this.debuggerTabId=0,this.imageBase64Cache={},this.downloadFailedRetriesCache={},this.torrentInfosCache={}}init(s){this.reset(s),this.isInitialized=!0}reset(s){this.options=s,this.clientController.init(s),this.searcher.options=s,this.initDefaultClient(),this.siteDefaultClients={},s.connectClientTimeout&&(this.movieInfoService.timeout=s.connectClientTimeout),this.options.apiKey&&(this.options.apiKey.omdb&&this.options.apiKey.omdb.length>0&&this.movieInfoService.appendApiKey("omdb",this.options.apiKey.omdb),this.options.apiKey.douban&&this.options.apiKey.douban.length>0&&this.movieInfoService.appendApiKey("douban",this.options.apiKey.douban))}getSearchResult(s){return this.searcher.searchTorrent(s.site,s.key,s.payload)}abortSearch(s){return this.searcher.abortSearch(s.site,s.key)}getDownloadHistory(){return this.downloadHistory.load()}saveDownloadHistory(s,a="",u="",l=!0){this.options.saveDownloadHistory&&this.downloadHistory.add(s,a,u,l)}removeDownloadHistory(s){return this.downloadHistory.remove(s)}clearDownloadHistory(){return this.downloadHistory.clear()}resetDownloadHistory(s){return this.downloadHistory.reset(s)}sendTorrentToClient(s){return new Promise((a,u)=>{if(!s.url){u({msg:this.service.i18n.t("service.controller.invalidAddress")});return}let h=filters.parseURL(s.url).host,d=this.options.clients.find(p=>p.id===s.clientId);if(!d){u({msg:this.service.i18n.t("service.controller.invalidDownloadServer")});return}this.getClient(d).then(p=>{this.doDownload(p,s,h).then(x=>{a(x)}).catch(x=>{u(x)})})})}sendTorrentToDefaultClient(s){return new Promise((a,u)=>{let h=filters.parseURL(s.url).host,d=this.getSiteFromHost(h);h=d.host+"";let p=this.getSiteDefaultPath(d),x=this.siteDefaultClients[h];!s.savePath&&p&&(s.savePath=p),x?this.doDownload(x,s,h).then(m=>{a(m)}).catch(m=>{u(m)}):this.initSiteDefaultClient(h).then(m=>{this.siteDefaultClients[h]=m,this.doDownload(m,s,h).then(g=>{a(g)}).catch(g=>{u(g)})})})}doDownload(s,a,u=""){let h=filters.parseURL(a.url).host,d=this.getSiteFromHost(h);return console.log("doDownload",s,a,u,d),new Promise((p,x)=>{s.client.call(EAction.addTorrentFromURL,{url:a.url,savePath:a.savePath!==void 0&&a.savePath.includes(",")?a.savePath.split(",")[0]:a.savePath,autoStart:a.autoStart===void 0?!1:a.autoStart,category:a.savePath!==void 0&&a.savePath.includes(",")?a.savePath.split(",")[1]:null,imdbId:a.tagIMDb?a.imdbId:null,upLoadLimit:d!==void 0?d.upLoadLimit:null,clientOptions:s.options,siteConfig:d}).then(m=>{if(this.service.logger.add({module:EModule.background,event:"service.controller.doDownload.finished",msg:this.service.i18n.t("service.controller.downloadFinished",{name:s.options.name,action:EAction.addTorrentFromURL}),data:m}),!a.title&&this.torrentInfosCache[a.url]&&(a.title=this.torrentInfosCache[a.url]),m&&(m.code===0||m.success===!1)){if(this.downloadFailedRetry(s,a,u,m,p,x))return;switch(m.msg){case"timeout":x({success:!1,msg:this.service.i18n.t("service.controller.downloadTimeout"),status:"error"});break;default:x({success:!1,msg:m.msg,status:"error"});break}this.saveDownloadHistory(a,u,s.options.id,!1);return}this.saveDownloadHistory(a,u,s.options.id,!0),this.formatSendResult(m,s.options,a).then(g=>{p(g)}).catch(g=>{x(g)}),this.downloadFailedRetriesCache[a.url]&&delete this.downloadFailedRetriesCache[a.url]}).catch(m=>{this.downloadFailedRetry(s,a,u,m,p,x)||(this.service.logger.add({module:EModule.background,event:"service.controller.doDownload.error",msg:this.service.i18n.t("service.controller.downloadError",{name:s.options.name,action:EAction.addTorrentFromURL}),data:m}),this.saveDownloadHistory(a,u,s.options.id,!1),x(m))})})}downloadFailedRetry(s,a,u="",l,h,d){if(this.options.downloadFailedRetry){let p=this.options.downloadFailedFailedRetryCount;p===void 0&&(p=0);let x=this.downloadFailedRetriesCache[a.url];if(x===void 0&&(x=0),x<p)return x++,this.service.logger.add({module:EModule.background,event:"service.controller.downloadFailedRetries",msg:this.service.i18n.t("service.controller.downloadError",{name:s.options.name,action:EAction.addTorrentFromURL})+" ("+x+")",data:l}),this.downloadFailedRetriesCache[a.url]=x,this.options.downloadFailedFailedRetryInterval&&this.options.downloadFailedFailedRetryInterval>0?setTimeout(()=>{this.doDownload(s,a,u).then(m=>{h(m)}).catch(m=>{d(m)})},this.options.downloadFailedFailedRetryInterval*1e3):this.doDownload(s,a,u).then(m=>{h(m)}).catch(m=>{d(m)}),!0;delete this.downloadFailedRetriesCache[a.url]}return!1}getSiteFromHost(s){return this.options.sites.find(a=>{let u=[a.url].concat(a.cdn);return a.host==s||u.join("").indexOf(s)>-1})}getSiteDefaultPath(s,a=""){a||(a=s.defaultClientId||this.options.defaultClientId);let u=this.options.clients.find(h=>h.id===a),l="";if(u&&u.paths){for(const h in u.paths)if(s.host===h){l=u.paths[h][0];break}}return l}formatSendResult(s,a,u){return new Promise((l,h)=>{let d={type:EDataResultType.success,msg:this.service.i18n.t("service.controller.torrentAdded",{title:u.title})+(u.savePath?this.service.i18n.t("service.controller.torrentSavePath",{path:u.savePath,interpolation:{escapeValue:!1}}):""),success:!0,data:s};switch(a.type){case EDownloadClientType.transmission:if(s.id!=null)d.msg=this.service.i18n.t("service.controller.transmissionSuccess",{data:s}),u.savePath&&(d.msg+=this.service.i18n.t("service.controller.torrentSavePath",{path:u.savePath,interpolation:{escapeValue:!1}}));else if(s.status)switch(s.status){case"duplicate":d.type=EDataResultType.error,d.success=!1,d.msg=this.service.i18n.t("service.controller.transmissionDuplicate",{name:s.torrent.name,id:s.torrent.id});break;case"error":d.type=EDataResultType.error,d.success=!1,d.msg=this.service.i18n.t("service.controller.transmissionError");break;default:d.msg=s.msg;break}else d.msg=s;break}l(d)})}getClient(s){return this.clientController.getClient(s)}initDefaultClient(){if(!this.options.clients)return;let s=this.options.clients.find(a=>a.id===this.options.defaultClientId);s&&this.getClient(s).then(a=>{this.defaultClient=a.client,this.defaultClientOptions=a.options})}initSiteDefaultClient(s){let a=this.options.sites.find(l=>l.host==s),u=this.options.clients.find(l=>l.id===a.defaultClientId);return u?this.getClient(u):new Promise((l,h)=>{l({client:this.defaultClient,options:this.defaultClientOptions})})}copyTextToClipboard(s=""){if(!s)return!1;var a=$("<textarea/>");return a.text(s),$("body").append(a),a.select(),document.execCommand("copy"),a.remove(),!0}getFreeSpace(s){return s.clientId?new Promise((a,u)=>{let l=this.options.clients.find(h=>h.id===s.clientId);l&&this.getClient(l).then(h=>{h.client.call(EAction.getFreeSpace,s).then(d=>{a(d)})})}):this.getDefaultClientFreeSpace(s)}getDefaultClientFreeSpace(s){return new Promise((a,u)=>{this.defaultClient.call(EAction.getFreeSpace,s).then(l=>{a(l)})})}updateOptionsTabId(s){this.optionsTabId=s}searchTorrent(s="",a=""){let u="";s&&(u=`search-torrent/${s}`),a&&(u+=`/${a}`),this.openOptions(u)}openOptions(s=""){let a="/";s&&(a+=s),this.optionsTabId==0?this.openURL(a):chrome.tabs.get(this.optionsTabId,u=>{!chrome.runtime.lastError&&u?chrome.tabs.update(u.id,{active:!0,url:"index.html#"+a}):this.openURL(a)})}openURL(s=""){s&&(s.substr(0,1)==="/"&&(s="index.html#"+s),chrome.tabs.create({url:s},a=>{this.optionsTabId=a.id}))}getSiteSchema(s){let a={};if(typeof s.schema=="string")a=this.options.system&&this.options.system.schemas&&this.options.system.schemas.find(u=>u.name==s.schema);else{let u=this.options.system&&this.options.system.sites&&this.options.system.sites.find(l=>l.host==u.host);u&&u.schema&&(a=u.schema,a.siteOnly=!0)}return a}replaceKeys(s,a){let u=s;for(const l in a)if(a.hasOwnProperty(l)){const h=a[l];u=u.replace("$"+l+"$",h)}return u}call(s,a){return new Promise((u,l)=>{let h=this;console.log("contorller.call",s.action),h[s.action](s.data,a).then(d=>{u(d)}).catch(d=>{l(d)})})}addContentPage(s,a){return new Promise((u,l)=>{try{a.tab&&this.contentPages.push(a.tab.id),u()}catch(h){l(h)}})}backupToGoogle(){return this.service.config.backupToGoogle()}restoreFromGoogle(){return this.service.config.restoreFromGoogle()}clearFromGoogle(){return this.service.config.syncStorage.clear()}reloadConfig(){return new Promise((s,a)=>{this.service.config.reload(),s()})}getTorrentDataFromURL(s){return console.log("getTorrentDataFromURL",s),new Promise((a,u)=>{let l="";typeof s=="string"?(l=s,s={url:l,parseTorrent:!1}):l=s.url;let h=this.getSiteOptionsFromURL(l),d=ERequestMethod.GET;if(h)switch(d=h.downloadMethod||ERequestMethod.GET,h.name){case"M-Team":let x=PPF.getIdFromMTURL(l);if(console.log(`getTorrentDataFromURL.M-Team ${l} -> ${x}`,s),x)if(parseInt(x)){let m=PPF.resolveMTDownloadURL(x,h);console.log(`getTorrentDataFromURL.M-Team1 ${l} -> ${m}`,s),l=m}else console.log(`getTorrentDataFromURL.M-Team2 ${l}, id 链接可能已是直链, 不进行转换...`,s);else u(APP.createErrorMessage(this.service.i18n.t("service.controller.invalidTorrent",{link:EWikiLink.faq})));break}let p=new FileDownloader({url:l,getDataOnly:!0,timeout:this.service.options.connectClientTimeout});p.requestMethod=d,p.onCompleted=()=>{console.log("getTorrentDataFromURL.completed",l),p.content&&/octet-stream|x-bittorrent/gi.test(p.content.type)?parseTorrentRemote(p.content,(x,m)=>{x?(console.log("parse.error",x),s.parseTorrent?u(x):a(p.content)):(m&&(this.torrentInfosCache[l]=m.name),s.parseTorrent?a({url:l,torrent:m,content:p.content}):a(p.content))}):u(APP.createErrorMessage(this.service.i18n.t("service.controller.invalidTorrent",{link:EWikiLink.faq})))},p.onError=x=>{u(APP.createErrorMessage(x))},p.start()})}getSiteOptionsFromURL(s){let a=new URLParse(s).host;return this.options.system&&this.options.system.sites&&this.options.system.sites.find(l=>l.host==a)}getUserInfoForAllSite(){return new Promise((s,a)=>{let u=0,l=0,h=[];this.options.sites.forEach(d=>{d.allowGetUserInfo&&(u++,this.getUserInfo(d).then(p=>{p&&h.push({site:d,user:p}),l++,l>=u&&s(h)}).catch(()=>{l++,l>=u&&s(h)}))}),l==u&&l==0&&a(this.service.i18n.t("service.controller.getUserInfoSiteIsEmpty"))})}getUserInfo(s){return this.userService.getUserInfo(s)}abortGetUserInfo(s){return this.userService.abortGetUserInfo(s)}getBase64FromImageUrl(s){return new Promise((a,u)=>{let l=this.imageBase64Cache[s];if(l){a(l);return}let h=new FileDownloader({url:s,getDataOnly:!0,timeout:this.service.options.connectClientTimeout});h.onCompleted=()=>{if(console.log("getBase64FromImageUrl.completed",s),h.content&&/image/gi.test(h.content.type)){var d=new FileReader;d.onloadend=()=>{this.imageBase64Cache[s]=d.result,a(d.result)},d.readAsDataURL(h.content)}else u(APP.createErrorMessage(this.service.i18n.t("service.controller.invalidImage")))},h.onError=d=>{u(APP.createErrorMessage(d))},h.start()})}getUserHistoryData(s){return new Promise((a,u)=>{let l=this.service.userData.get(s,EUserDataRange.all);a(l)})}resetUserDatas(s){return new Promise((a,u)=>{this.service.userData.reset(s),setTimeout(()=>{this.service.userData.upgrade().then(l=>{console.log("升级站点数据完成")}).catch(l=>{console.error("升级站点数据失败",l)})},1e3),a()})}getMovieInfos(s){return this.movieInfoService.getInfos(s)}getMovieRatings(s){return this.movieInfoService.getRatings(s)}getIMDbIdFromDouban(s){return this.movieInfoService.getIMDbIdFromDouban(s)}queryMovieInfoFromDouban(s){return this.movieInfoService.queryMovieInfoFromDouban(s.key,s.count)}addBrowserDownloads(s){return new Promise((a,u)=>{this.service.checkPermissions(["downloads"]).then(()=>{let l=[];Array.isArray(s)?l=s:l.push(s),l.forEach(h=>{chrome.downloads.download(h,function(d){console.log(d)})}),a(l.length)}).catch(()=>{u({success:!1,msg:this.service.i18n.t("service.controller.noPermission")})})})}getCurrentLanguageResource(s){return new Promise((a,u)=>{let l=this.service.options.locale||"en",h=this.service.i18n.i18next.getResourceBundle(l,"translation");h?s&&h[s]?a(h[s]):a(h):u()})}addLanguage(s){return this.service.i18n.add(s)}replaceLanguage(s){return this.service.i18n.replace(s)}backupToServer(s){return this.service.config.backupToServer(s)}getBackupListFromServer(s={}){const a=s.server;return delete s.server,this.service.config.getBackupListFromServer(a,s)}restoreFromServer(s={}){return this.service.config.restoreFromServer(s.server,s.path)}deleteFileFromBackupServer(s={}){return this.service.config.deleteFileFromBackupServer(s.server,s.path)}sendTorrentsInBackground(s=[]){return new Promise((a,u)=>{this.service.downloadQuene.add(s).run(),a(this.service.i18n.t("service.controller.downloadTaskIsCreated",{count:s.length}))})}createBackupFile(s){return this.service.config.createBackupFile(s)}addTorrentToCollection(s){return this.options.defaultCollectionGroupId&&(s.groups=[this.options.defaultCollectionGroupId]),this.service.collection.add(s)}getTorrentCollections(s){return this.service.collection.load(s)}deleteTorrentFromCollention(s){return Array.isArray(s)?this.service.collection.remove(s):this.service.collection.delete(s)}clearTorrentCollention(){return this.service.collection.clear()}getTorrentCollention(s){return this.service.collection.get(s)}getSiteSelectorConfig(s){return new Promise((a,u)=>{const l=this.service.getSiteSelector(s.host,s.name);l?a(l):u(!1)})}resetTorrentCollections(s){return this.service.collection.reset(s)}getTorrentCollectionGroups(){return this.service.collection.getGroups()}addTorrentCollectionGroup(s){return this.service.collection.addGroup(s)}addTorrentCollectionToGroup(s){return this.service.collection.addToGroup(s.item,s.groupId)}updateTorrentCollectionGroup(s){return this.service.collection.updateGroup(s)}removeTorrentCollectionFromGroup(s){return this.service.collection.removeFromGroup(s.item,s.groupId)}removeTorrentCollectionGroup(s){return this.service.collection.removeGroup(s)}updateTorrentCollention(s){return this.service.collection.update(s)}getAllTorrentCollectionLinks(){return new Promise((s,a)=>{const u=this.service.collection.getAllLinks();u?s(u):a(!1)})}restoreCookies(s){return this.service.config.restoreCookies(s)}resetFavicons(){return this.service.config.favicon.clear(),this.service.config.getFavicons()}resetFavicon(s){return this.service.config.getFavicon(s,!0)}getBackupRawData(){return this.service.config.getBackupRawData()}testBackupServerConnectivity(s){return this.service.config.testBackupServerConnectivity(s)}createSearchResultSnapshot(s){return this.service.searchResultSnapshot.add(s)}getSearchResultSnapshot(s){return this.service.searchResultSnapshot.get(s)}loadSearchResultSnapshot(){return this.service.searchResultSnapshot.load()}removeSearchResultSnapshot(s){return this.service.searchResultSnapshot.remove(s)}clearSearchResultSnapshot(){return this.service.searchResultSnapshot.clear()}resetSearchResultSnapshot(s){return this.service.searchResultSnapshot.reset(s)}createKeepUploadTask(s){return this.service.keepUploadTask.add(s)}getKeepUploadTask(s){return this.service.keepUploadTask.get(s)}loadKeepUploadTask(){return this.service.keepUploadTask.load()}removeKeepUploadTask(s){return this.service.keepUploadTask.remove(s)}clearKeepUploadTask(){return this.service.keepUploadTask.clear()}resetKeepUploadTask(s){return this.service.keepUploadTask.reset(s)}updateKeepUploadTask(s){return this.service.keepUploadTask.update(s)}updateDebuggerTabId(s){return new Promise((a,u)=>{this.debuggerTabId=s,this.debuggerPort=chrome.tabs.connect(s,{name:EModule.debugger}),a()})}pushDebugMsg(s){return new Promise((a,u)=>{console.log(s),this.debuggerTabId&&chrome.tabs.get(this.debuggerTabId,l=>{l&&this.debuggerPort&&this.debuggerPort.postMessage({action:EAction.pushDebugMsg,data:s}),chrome.runtime.lastError&&(console.log(chrome.runtime.lastError.message),this.debuggerTabId=0,this.debuggerPort=void 0)}),a()})}getTopSearches(s=9){return this.movieInfoService.getTopSearches(s)}}class Logger{constructor(){this.maxLength=1e3,this.items=[],this.storage=new localStorage,this.configKey=EConfigKey.systemLogs,this.load()}load(){return new Promise((s,a)=>{this.storage.get(this.configKey,u=>{this.items=u||[],s(this.items)})})}add(s){let a=new Date().getTime(),u=Object.assign({module:"",time:a,id:PPF.getNewId()},s);return this.items?(this.items.length>=this.maxLength&&this.items.splice(0,1),this.items.push(u),this.storage.set(this.configKey,this.items)):this.load().then(()=>{this.items.push(u),this.storage.set(this.configKey,this.items)}),u.id}remove(s){return new Promise((a,u)=>{this.load().then(()=>{for(let l=this.items.length-1;l>=0;l--){let h=this.items[l];s.findIndex(p=>p.id===h.id)>=0&&this.items.splice(l,1)}this.storage.set(this.configKey,this.items),a(this.items)})})}clear(){return new Promise((s,a)=>{this.items=[],this.storage.set(this.configKey,this.items),s(this.items)})}}class ContextMenus{constructor(f){this.service=f,this.options={sites:[],clients:[]},this.rootId="PT-Plugin-Plugin-Content-Menu",this.currentTabId=0,this.siteMenus=[],this.pathHandler=new PathHandler,chrome&&chrome.tabs&&this.initBrowserEvent()}initBrowserEvent(){chrome.tabs.onActivated.addListener(f=>{chrome.tabs.get(f.tabId,s=>{if(this.clearSiteMenus(),s.url){let a=new URLParse(s.url).host;this.createSiteMenus(a)}})}),chrome.tabs.onUpdated.addListener((f,s,a)=>{if(this.clearSiteMenus(),a.url){let u=new URLParse(a.url).host;this.createSiteMenus(u)}}),chrome.browserAction.onClicked.addListener(()=>{this.service.controller.openOptions()})}init(f){this.options=f,this.clear(),this.createSearchMenus(),this.createClientMenus(),this.createPluginIconPopupMenus()}createPluginIconPopupMenus(){this.add({title:this.service.i18n.t("service.contextMenus.history"),contexts:["browser_action"],onclick:()=>{chrome.tabs.create({url:"index.html#/history"})}}),this.add({title:this.service.i18n.t("service.contextMenus.systemLog"),contexts:["browser_action"],onclick:()=>{chrome.tabs.create({url:"index.html#/system-logs"})}}),this.add({type:"separator",contexts:["browser_action"]}),this.add({title:this.service.i18n.t("service.contextMenus.issues"),contexts:["browser_action"],onclick:()=>{chrome.tabs.create({url:"https://github.com/pt-plugins/PT-Plugin-Plus/issues/new"})}})}clear(){chrome&&chrome.contextMenus&&chrome.contextMenus.removeAll()}clearSiteMenus(){this.siteMenus.forEach(f=>{this.remove(f)}),this.siteMenus=[]}getSiteDocumentUrlPatterns(f){let s=f.url+"";s.substr(-1)!="/"&&(s+="/");let a=[`*://${f.host}/*`,`${s}`];if(f.cdn&&f.cdn.length>0)for(let u=0;u<f.cdn.length;u++){const l=f.cdn[u];a.push(`${l}${l.substr(-1)!="/"?"/*":"*"}`,l)}return a}createPathMenus(f,s,a,u){f.forEach((l,h)=>{let d=`${a.id}**${s.host}**${l}**${h}`;this.add({id:d,title:this.pathHandler.replacePathKey(l,s),parentId:u,contexts:["link"],documentUrlPatterns:this.getSiteDocumentUrlPatterns(s),targetUrlPatterns:this.getSiteUrlPatterns(s),onclick:(p,x)=>{let m=p.menuItemId.split("**"),g={clientId:m[0],url:p.linkUrl,savePath:m[2]};this.sendTorrentToClient(x.id,g)}})})}createSiteMenus(f){let s=this.options.sites.find(a=>{let u=[a.url].concat(a.cdn);return a.host===f||u.join("|").indexOf(f)>-1});if(s){if(this.options.allowSelectionTextSearch){let a=s.host;this.siteMenus.push(a),this.add({id:a,title:this.service.i18n.t("service.contextMenus.searchSelectionTextOnThisSite"),contexts:["selection"],documentUrlPatterns:this.getSiteDocumentUrlPatterns(s),onclick:(u,l)=>{this.service.controller.searchTorrent(u.selectionText,f)}})}this.options.clients.forEach(a=>{if(a.paths){let u=`${a.id}-path`,l=0;this.add({id:u,title:this.service.i18n.t("service.contextMenus.downloadClientPath",{clientName:a.name}),contexts:["link"],documentUrlPatterns:this.getSiteDocumentUrlPatterns(s),targetUrlPatterns:this.getSiteUrlPatterns(s)});for(const d in a.paths){let p=a.paths[d];d===s.host&&(l++,this.createPathMenus(p,s,a,u))}let h=a.paths[ECommonKey.allSite];h&&(l++,this.createPathMenus(h,s,a,u)),l>0?this.siteMenus.push(u):this.remove(u)}})}}getSiteUrlPatterns(f){let s=[];if(f.patterns&&f.patterns.torrentLinks)s=f.patterns.torrentLinks;else{let a=this.getSiteSchema(f);a&&a.patterns&&a.patterns.torrentLinks?s=a.patterns.torrentLinks:s.push("*://*/*")}return s}getSiteSchema(f){let s={};return typeof f.schema=="string"&&(s=this.options.system&&this.options.system.schemas&&this.options.system.schemas.find(a=>a.name==f.schema)),s}sendTorrentToClient(f=0,s){console.log("sendTorrentToClient",s);let a=this.getSiteFromURL(s.url);if(a&&s.savePath){let d=this.pathHandler.getSavePath(s.savePath,a);if(d===!1){APP.showNotifications({message:this.service.i18n.t("service.contextMenus.userCanceled")});return}s.savePath=d}let u;try{chrome.tabs.sendMessage(f,{action:EAction.showMessage,data:{type:EDataResultType.info,msg:this.service.i18n.t("service.contextMenus.sendingLink"),timeout:2,indeterminate:!0}},d=>{if(chrome.runtime.lastError){(chrome.runtime.lastError.message||"").match(/Could not establish connection/)?APP.showNotifications({message:this.service.i18n.t("service.contextMenus.pluginStatusIsUnknown")}):APP.showNotifications({message:chrome.runtime.lastError.message});return}u=d})}catch(d){APP.showNotifications({message:d});return}this.service.logger.add({module:EModule.background,event:"contextMenus.sendTorrentToClient.begin",msg:this.service.i18n.t("service.contextMenus.sendingLink"),data:s});let l=this.options.clients.find(d=>d.id===s.clientId);if(!l){chrome.tabs.sendMessage(f,{action:EAction.showMessage,data:{type:EDataResultType.error,msg:this.service.i18n.t("service.contextMenus.downloadClientGetFailed")}}),this.service.logger.add({module:EModule.background,event:"contextMenus.sendTorrentToClient.getClientError",msg:this.service.i18n.t("service.contextMenus.downloadClientGetFailed"),data:s}),this.hideNotice(f,u);return}s.autoStart=l.autoStart,console.log(s);let h=this.getParsedURL(s.url);if(typeof h!="string"){chrome.tabs.sendMessage(f,{action:EAction.showMessage,data:h}),this.hideNotice(f,u);return}s.url=h,this.service.controller.sendTorrentToClient(s).then(d=>{this.service.logger.add({module:EModule.background,event:"contextMenus.sendTorrentToClient.done",msg:this.service.i18n.t("service.contextMenus.sendTorrentToClientDone"),data:d}),chrome.tabs.sendMessage(f,{action:EAction.showMessage,data:d})}).catch(d=>{this.service.logger.add({module:EModule.background,event:"contextMenus.sendTorrentToClient.error",msg:this.service.i18n.t("service.contextMenus.sendTorrentToClientError"),data:d}),chrome.tabs.sendMessage(f,{action:EAction.showMessage,data:d.status==""?this.service.i18n.t("service.contextMenus.sendTorrentToClientError"):d})}).finally(()=>{this.hideNotice(f,u)})}hideNotice(f=0,s){s&&(s.id?chrome.tabs.sendMessage(f,{action:EAction.hideMessage,data:s.id}):s.hide&&s.hide())}createSearchMenus(){this.options.allowSelectionTextSearch&&(this.add({title:this.service.i18n.t("service.contextMenus.searchSelectionText"),contexts:["selection"],onclick:(a,u)=>{this.service.controller.searchTorrent(a.selectionText)}}),this.pushMoreSearchMenus());let f="searchWithIMDb";this.add({id:f,title:this.service.i18n.t("service.contextMenus.searchByIMDb"),contexts:["link"],targetUrlPatterns:["*://www.imdb.com/title/tt*"]}),this.add({parentId:f,title:this.service.i18n.t("service.contextMenus.searchByDefault"),contexts:["link"],targetUrlPatterns:["*://www.imdb.com/title/tt*"],onclick:(a,u)=>{if(a.linkUrl){let l=a.linkUrl.match(/(tt\d+)/);l&&l.length>=2&&this.service.controller.searchTorrent(l[1])}}}),this.pushMoreSearchMenus(f,["link"],["*://www.imdb.com/title/tt*"],/(tt\d+)/);let s="searchWithDouban";this.add({id:s,title:this.service.i18n.t("service.contextMenus.searchByDouban"),contexts:["link"],targetUrlPatterns:["*://movie.douban.com/subject/*"]}),this.add({parentId:s,title:this.service.i18n.t("service.contextMenus.searchByDefault"),contexts:["link"],targetUrlPatterns:["*://movie.douban.com/subject/*"],onclick:(a,u)=>{if(a.linkUrl){let l=a.linkUrl.match(/subject\/(\d+)/);l&&l.length>=2&&this.service.controller.searchTorrent("douban"+l[1])}}}),this.pushMoreSearchMenus(s,["link"],["*://movie.douban.com/subject/*"],/subject\/(\d+)/,"douban")}pushMoreSearchMenus(f=void 0,s=["selection"],a=void 0,u=/(tt\d+)/,l=""){const h=this.options.sites;if(h&&h.length>0){let p=`${f}searchInSite`;this.add({id:p,title:this.service.i18n.t("service.contextMenus.searchInSite"),contexts:s,parentId:f,targetUrlPatterns:a}),h.forEach(x=>{let m=`${p}**${x.host}`;this.add({id:m,title:`${x.name} - ${x.host}`,parentId:p,contexts:s,targetUrlPatterns:a,onclick:(g,b)=>{let v=g.menuItemId.split("**");if(this.service.debug(this.service.i18n.t("service.contextMenus.searchInSite"),g),s.includes("link")&&g.linkUrl){let y=g.linkUrl.match(u);y&&y.length>=2&&this.service.controller.searchTorrent(l+y[1],v[1])}else this.service.controller.searchTorrent(g.selectionText,v[1])}})})}const d=this.options.searchSolutions;if(d&&d.length>0){let p=`${f}searchInSolution`;this.add({id:p,title:this.service.i18n.t("service.contextMenus.searchInSolution"),contexts:s,parentId:f,targetUrlPatterns:a}),d.forEach(x=>{let m=`${p}**${x.id}`;this.add({id:m,title:`${x.name}`,parentId:p,contexts:s,targetUrlPatterns:a,onclick:(g,b)=>{this.service.debug(this.service.i18n.t("service.contextMenus.searchInSolution"),g);let v=g.menuItemId.split("**");if(s.includes("link")&&g.linkUrl){let y=g.linkUrl.match(u);y&&y.length>=2&&this.service.controller.searchTorrent(l+y[1],v[1])}else this.service.controller.searchTorrent(g.selectionText,v[1])}})})}this.add({title:this.service.i18n.t("service.contextMenus.searchInAllSite"),parentId:f,contexts:s,targetUrlPatterns:a,onclick:(p,x)=>{if(p.linkUrl){let m=p.linkUrl.match(u);s.includes("link")&&m&&m.length>=2&&this.service.controller.searchTorrent(l+m[1],"all")}else this.service.controller.searchTorrent(p.selectionText,"all")}})}createClientMenus(){let f=this.options.clients.filter(s=>s.enabled!==!1);if(console.log("createClientMenus",this.options.clients),console.log("createClientMenus",f),this.options.defaultClientId){let s=this.options.clients.find(a=>a.id===this.options.defaultClientId);s&&this.add({id:s.id,title:this.service.i18n.t("service.contextMenus.sendTorrentToDefaultClient",{client:s}),contexts:["link"],onclick:(a,u)=>{this.sendTorrentToClient(u.id,{clientId:a.menuItemId,url:a.linkUrl})}})}f.length>1&&(this.add({id:this.rootId,title:this.service.i18n.t("service.contextMenus.sendTorrentToClient"),contexts:["link"]}),f.forEach(s=>{s.id!==this.options.defaultClientId&&this.add({id:s.id,title:`${s.name} -> ${s.address}`,parentId:this.rootId,contexts:["link"],onclick:(a,u)=>{this.sendTorrentToClient(u.id,{clientId:a.menuItemId,url:a.linkUrl})}})}))}add(f,s){f.id||(f.id=this.getRandomString()),chrome&&chrome.contextMenus&&chrome.contextMenus.create(f,s)}remove(f,s){try{chrome.contextMenus.remove(f,s),chrome.runtime.lastError&&console.log(chrome.runtime.lastError)}catch(a){console.log(a)}}getRandomString(f=16,s=!0){let a=s?"abcdefhijkmnprstwxyz2345678ABCDEFGHJKMNPQRSTWXYZ":"abcdefghijkmnopqrstuvwxyz0123456789ABCDEFGHIJKMNOPQRSTUVWXYZ",u=a.length,l=[];for(let h=0;h<f;h++)l.push(a.charAt(Math.floor(Math.random()*u)));return l.join("")}getParsedURL(source){let url=new URLParse(source),site=this.getSiteFromURL(source);if(!site)return source;let options={url,site,result:source,error:{}},parser=this.getSiteParser(site.host,"downloadURL");if(parser)try{eval(parser)}catch(f){console.error(f)}return options.error&&options.error.msg?options.error:options.result}getSiteParser(f,s){let a=this.options.system&&this.options.system.sites&&this.options.system.sites.find(l=>l.host===f);if(!a)return"";let u=a.parser&&a.parser[s];if(!u){let l=this.options.system&&this.options.system.schemas&&this.options.system.schemas.find(h=>h.name===a.schema);l&&l.parser&&(u=l.parser[s])}return u}getSiteFromURL(f){let s=new URLParse(f);if(!s.host)return null;let a=this.options.sites.find(u=>{let l=[u.url].concat(u.cdn);return u.host==s.host||l.join("").indexOf(s.host)>-1});return a||null}}class UserData{constructor(s){this.service=s,this.items=null,this.storage=new localStorage,this.configKey=EConfigKey.userDatas,this.load()}load(){return new Promise((s,a)=>{this.storage.get(this.configKey,u=>{console.log("UserData.load",u),this.items=u||{},s(this.items)})})}get(s,a=EUserDataRange.latest){if(!this.items)return null;if(!s)return this.items;let u=this.items[s];if(!u)return null;switch(a){case EUserDataRange.all:return u;case EUserDataRange.today:return u[PPF.getToDay()]}return u[EUserDataRange.latest]}update(s,a){let u=s.host;if(!u)return;let l=Object.assign({},a);if(this.items==null)this.load().then(()=>{this.update(s,a)});else{let h=this.items[u],d=PPF.getToDay();h||(h={}),h[d]=l,h[EUserDataRange.latest]=l,this.items[u]=h,this.storage.set(this.configKey,this.items).then(()=>{this.service.saveUserData()})}}clear(){return new Promise((s,a)=>{this.items={},this.storage.set(this.configKey,this.items).then(()=>{this.service.saveUserData(),s(this.items)})})}upgrade(){return new Promise((s,a)=>{if(this.service.options&&this.service.options.system&&this.service.options.system.sites){let u=this.service.options.system.sites;this.load().then(l=>{l?(u.forEach(h=>{if(!h.host)return;let d=h.formerHosts,p=h.host;d&&d.length>0&&d.forEach(x=>{for(const m in l)if(m==x&&l.hasOwnProperty(m)){const g=l[m];l[p]=Object.assign({},g),delete l[m]}})}),this.items=l,this.storage.set(this.configKey,l),this.service.saveUserData(),s(l)):a(null)})}else a(null)})}reset(s){this.items=s,this.storage.set(this.configKey,this.items).then(()=>{this.service.saveUserData()})}}class OmniBox{constructor(s){this.service=s,this.splitString=" → ",this.initEvents()}init(){}initEvents(){chrome&&chrome.omnibox&&(chrome.omnibox.onInputChanged.addListener((s,a)=>{if(s&&this.service.options.searchSolutions){let u=[];this.service.options.searchSolutions.forEach(l=>{u.push({content:`${l.name}${this.splitString}${s}`,description:this.service.i18n.t("service.omnibox.search",{solutionName:l.name,text:s})})}),u.length>0&&a(u)}}),chrome.omnibox.onInputEntered.addListener(s=>{let a="",u="",l="";if(s.indexOf(this.splitString)!=-1){if([a,l]=s.split(this.splitString),a&&this.service.options.searchSolutions){let h=this.service.options.searchSolutions.find(d=>d.name==a);h&&(u=h.id)}}else l=s;chrome.tabs.create({url:"index.html#/search-torrent/"+l+(u?`/${u}`:"")})}))}}class i18nService{constructor(s){this.service=s,this.loadedLanguages=[],this.i18next=instance}init(){return instance.init({interpolation:{prefix:"{",suffix:"}"}}),this.reset(this.service.options.locale||"en")}reset(s){return new Promise((a,u)=>{if(console.log(instance.language),instance.language!==s){if(!this.loadedLanguages.includes(s)){$.getJSON(`${API.host}/i18n/${s}.json`).done(l=>{instance.addResourceBundle(s,"translation",l.words,!0,!0),this.loadedLanguages.push(s),instance.changeLanguage(s).then(()=>{a(s)})}).fail(l=>{if(s!="en"){this.reset("en").then(()=>{a(s)});return}u(l)});return}instance.changeLanguage(s).then(()=>{a(s)});return}a(s)})}t(s,a){return instance.t(s,a)}add(s){return new Promise((a,u)=>{s.name&&s.code?this.loadedLanguages.includes(s.code)?u():(instance.addResourceBundle(s.code,"translation",s.words,!0,!0),this.loadedLanguages.push(s.code),instance.changeLanguage(s.code).then(()=>{a(s.code)})):u()})}replace(s){return new Promise((a,u)=>{s.name&&s.code?this.loadedLanguages.includes(s.code)&&(instance.addResourceBundle(s.code,"translation",s.words,!0,!0),instance.changeLanguage(s.code).then(()=>{a(s.code)})):u()})}}class DownloadQuene{constructor(s){this.service=s,this.queues=[],this.isRunning=!1,this.timer=void 0,this.successCount=0,this.failedCount=0}add(s){return Array.isArray(s)?this.queues.push(...s):this.queues.push(s),this}run(){if(this.isRunning)return this;clearTimeout(this.timer);const s=this.queues.shift();if(s){this.isRunning=!0;const a=(this.service.options.batchDownloadInterval||0)*1e3;(s.clientId?this.service.controller.sendTorrentToClient:this.service.controller.sendTorrentToDefaultClient).call(this.service.controller,s).then(()=>{this.successCount++}).catch(l=>{console.log(l),this.failedCount++}).finally(()=>{this.isRunning=!1,a>0?this.timer=window.setTimeout(()=>{this.run()},a):this.run()})}else PPF.showNotifications({message:this.service.i18n.t("service.controller.downloadTaskIsCompleted",{success:this.successCount,failed:this.failedCount})},1e4),this.successCount=0,this.failedCount=0;return this}}class Collection{constructor(){this.items=[],this.groups=[],this.storage=new localStorage,this.movieInfoService=new MovieInfoService,this.configKey=EConfigKey.collection,this.load()}load(s){return new Promise((a,u)=>{this.storage.get(this.configKey,l=>{let h={groups:[],items:[]};Array.isArray(l)?h.items=l:l&&(h=Object.assign(h,l)),this.groups=h.groups||[],this.items=h.items||[];let d=[];s?this.items.forEach(p=>{p.groups&&p.groups.includes(s)&&d.push(p)}):d=this.items,this.updateGroupCount(),a(d)})})}updateGroupCount(){this.groups.forEach(s=>{s.count=0,this.items.forEach(a=>{a.groups&&s.id&&a.groups.includes(s.id)&&(s.count||(s.count=0),s.count++)})})}add(s){return new Promise((a,u)=>{let l=Object.assign({time:new Date().getTime(),site:null},s),h=Object.assign({},l.movieInfo);l.site&&delete l.site,l.link=PPF.getCleaningURL(l.link),h.imdbId||h.doubanId?this.getMoviceInfo(h.imdbId,h.doubanId).then(d=>{l.movieInfo=d,this.push(l),a(this.items)}).catch(d=>{console.log(d),this.push(l),a(this.items)}):(this.push(l),a(this.items))})}getMoviceInfo(s="",a=""){return new Promise((u,l)=>{let h=s,d=this.movieInfoService.getInfoFromIMDb;a&&(h=a,d=this.movieInfoService.getInfoFromDoubanId),d.call(this.movieInfoService,h).then(p=>{let x={imdbId:s,doubanId:p.id.toString().replace(/(\D)/g,""),image:p.image||(p.images?p.images.small:void 0),title:p.title,link:p.mobile_link||p.share_url,alt_title:p.alt_title||p.original_title,year:p.year};!p.year&&p.attrs&&(x.year=p.attrs.year[0]),u(x)}).catch(p=>{l()})})}push(s){this.items.findIndex(u=>u.link===s.link)===-1&&(this.items.push(s),this.updateGroupCount(),this.storage.set(this.configKey,{groups:this.groups,items:this.items}))}update(s){return new Promise((a,u)=>{this.load().then(()=>{s.link=PPF.getCleaningURL(s.link);let l=this.items.findIndex(h=>h.link===s.link);if(l>=0){this.items[l]=s;let h=Object.assign({},s.movieInfo);if(s.site&&delete s.site,h.imdbId||h.doubanId){this.getMoviceInfo(h.imdbId,h.doubanId).then(d=>{s.movieInfo=d,this.items[l]=s,this.updateData(),a(this.items)}).catch(d=>{console.log(d),this.updateData(),a(this.items)});return}}this.updateData(),a(this.items)})})}updateData(){this.updateGroupCount(),this.storage.set(this.configKey,{groups:this.groups,items:this.items})}delete(s){return this.remove([s])}remove(s){return new Promise((a,u)=>{this.load().then(()=>{for(let l=this.items.length-1;l>=0;l--){let h=this.items[l];s.findIndex(p=>p.link===h.link)>=0&&this.items.splice(l,1)}this.updateGroupCount(),this.storage.set(this.configKey,{groups:this.groups,items:this.items}),a(this.items)})})}clear(){return new Promise((s,a)=>{this.items=[],this.groups=[],this.storage.set(this.configKey,{}),s({})})}get(s){return new Promise((a,u)=>{s=PPF.getCleaningURL(s),this.load().then(()=>{let l=this.items.find(h=>h.link===s);l?a(l):u(!1)})})}reset(s){return new Promise((a,u)=>{if(!s){u(!1);return}Array.isArray(s)?this.items=s:(this.groups=s.groups||this.groups,this.items=s.items||this.items),this.storage.set(this.configKey,{groups:this.groups,items:this.items}),a({groups:this.groups,items:this.items})})}addGroup(s){return new Promise((a,u)=>{let l=Object.assign({id:PPF.getNewId().substr(0,8),update:new Date().getTime()},s);this.groups.push(l),this.storage.set(this.configKey,{groups:this.groups,items:this.items}),a(this.groups)})}removeGroup(s){return new Promise((a,u)=>{let l=[];Array.isArray(s)?l=s:l.push(s),this.load().then(()=>{for(let h=this.groups.length-1;h>=0;h--){let d=this.groups[h];l.findIndex(x=>x.id===d.id)>=0&&(this.items.forEach(x=>{if(!x.groups)return;let m=x.groups.findIndex(g=>g===d.id);m!==-1&&x.groups.splice(m,1)}),this.groups.splice(h,1))}this.updateGroupCount(),this.storage.set(this.configKey,{groups:this.groups,items:this.items}),a(this.groups)})})}updateGroup(s){return new Promise((a,u)=>{this.load().then(()=>{let l=this.groups.findIndex(h=>h.id===s.id);l>=0&&(this.groups[l]=s),this.storage.set(this.configKey,{groups:this.groups,items:this.items}),a(this.groups)})})}getGroups(){return new Promise((s,a)=>{this.load().then(()=>{s(this.groups)})})}addToGroup(s,a){return new Promise((u,l)=>{s.groups||(s.groups=[]),s.groups.findIndex(d=>d===a)===-1?(s.groups.push(a),this.update(s).then(()=>{u(!0)})):l(!1)})}removeFromGroup(s,a){return new Promise((u,l)=>{if(s.groups){let h=s.groups.findIndex(d=>d===a);h!==-1?(s.groups.splice(h,1),this.update(s).then(()=>{u(!0)})):l(!1)}})}getAllLinks(){let s=[];return this.items.forEach(a=>{s.push(PPF.getCleaningURL(a.link))}),s}}class SearchResultSnapshot{constructor(){this.items=[],this.storage=new localStorage,this.configKey=EConfigKey.searchResultSnapshot,this.load()}load(){return new Promise((s,a)=>{this.storage.get(this.configKey,u=>{let l={items:[]};Array.isArray(u)?l.items=u:u&&(l=Object.assign(l,u)),this.items=l.items||[],console.log(u),s(this.items)})})}add(s){return new Promise((a,u)=>{let l=Object.assign({time:new Date().getTime(),id:PPF.getNewId()},s);this.items.push(l),this.updateData(),a(this.items)})}updateData(){this.storage.set(this.configKey,{items:this.items})}get(s){return new Promise((a,u)=>{this.load().then(()=>{let l=this.items.find(h=>h.id===s);l?a(l):u(!1)})})}delete(s){return this.remove([s])}remove(s){return new Promise((a,u)=>{this.load().then(()=>{for(let l=this.items.length-1;l>=0;l--){let h=this.items[l];s.findIndex(p=>p.id===h.id)>=0&&this.items.splice(l,1)}this.updateData(),a(this.items)})})}clear(){return new Promise((s,a)=>{this.items=[],this.updateData(),s([])})}reset(s){return new Promise((a,u)=>{if(!s){u(!1);return}if(!Array.isArray(s)){u(!1);return}this.items=s,this.updateData(),a(this.items)})}}class KeepUploadTask{constructor(){this.items=[],this.storage=new localStorage,this.configKey=EConfigKey.keepUploadTask,this.load()}load(){return new Promise((s,a)=>{this.storage.get(this.configKey,u=>{let l={items:[]};Array.isArray(u)?l.items=u:u&&(l=Object.assign(l,u)),this.items=l.items||[],console.log(u),s(this.items)})})}add(s){return new Promise((a,u)=>{let l=Object.assign({time:new Date().getTime(),id:PPF.getNewId()},s);this.items.push(l),this.updateData(),a(this.items)})}update(s){return new Promise((a,u)=>{this.load().then(()=>{let l=this.items.findIndex(h=>h.id===s.id);l>=0&&(this.items[l]=s),this.updateData(),a(this.items)})})}updateData(){this.storage.set(this.configKey,{items:this.items})}get(s){return new Promise((a,u)=>{this.load().then(()=>{let l=this.items.find(h=>h.id===s);l?a(l):u(!1)})})}delete(s){return this.remove([s])}remove(s){return new Promise((a,u)=>{this.load().then(()=>{for(let l=this.items.length-1;l>=0;l--){let h=this.items[l];s.findIndex(p=>p.id===h.id)>=0&&this.items.splice(l,1)}this.updateData(),a(this.items)})})}clear(){return new Promise((s,a)=>{this.items=[],this.updateData(),s([])})}reset(s){return new Promise((a,u)=>{if(!s){u(!1);return}if(!Array.isArray(s)){u(!1);return}this.items=s,this.updateData(),a(this.items)})}}class PTPlugin{constructor(s=!1){this.config=new Config$1(this),this.options={sites:[],clients:[]},this.localMode=!1,this.controller=new Controller(this),this.logger=new Logger,this.contentMenus=new ContextMenus(this),this.userData=new UserData(this),this.omniBox=new OmniBox(this),this.i18n=new i18nService(this),this.downloadQuene=new DownloadQuene(this),this.collection=new Collection,this.searchResultSnapshot=new SearchResultSnapshot,this.keepUploadTask=new KeepUploadTask,this.reloadCount=0,this.autoRefreshUserDataTimer=0,this.autoRefreshUserDataIsWorking=!1,this.autoRefreshUserDataFailedCount=0,this.gDummyHeaderPrefix="Overwrite-",s||this.initBrowserEvent(),this.logger.add({module:EModule.background,event:ELogEvent.init}),this.localMode=s,this.initConfig()}requestMessage(s,a){return this.debug(`${ELogEvent.requestMessage}.${s.action}`),new Promise((u,l)=>{let h;try{switch(s.action){case EAction.readConfig:this.localMode?this.readConfig().then(()=>{u(this.options)}):u(this.options);break;case EAction.saveConfig:s.data.locale&&s.data.locale!=this.options.locale&&this.i18n.reset(s.data.locale),this.config.save(s.data),this.options=s.data,this.controller.isInitialized&&this.controller.reset(this.options),setTimeout(()=>{this.contentMenus.init(this.options)},100),this.resetTimer(),u(this.options);break;case EAction.getClearedOptions:u(this.config.cleaningOptions(this.options));break;case EAction.resetRunTimeOptions:this.config.resetRunTimeOptions(s.data),this.options=this.config.options,u(this.options);break;case EAction.copyTextToClipboard:h=this.controller.copyTextToClipboard(s.data),h?u(h):l();break;case EAction.openOptions:this.controller.openOptions(s.data),u(!0);break;case EAction.updateOptionsTabId:this.controller.updateOptionsTabId(s.data),u(!0);break;case EAction.searchTorrent:console.log(s.data),this.controller.searchTorrent(s.data),u(!0);break;case EAction.testClientConnectivity:this.controller.clientController.testClientConnectivity(s.data).then(d=>{u(d)}).catch(d=>{this.logger.add({module:EModule.background,event:`${EAction.testClientConnectivity}`,msg:this.i18n.t("service.testClientConnectivityFailed",{address:s.data.address}),data:d}),l(d)});break;case EAction.getSystemLogs:this.logger.load().then(d=>{u(d)}).catch(d=>{l(d)});break;case EAction.removeSystemLogs:this.logger.remove(s.data).then(d=>{u(d)}).catch(d=>{l(d)});break;case EAction.clearSystemLogs:this.logger.clear().then(d=>{u(d)}).catch(d=>{l(d)});break;case EAction.writeLog:this.logger.add(s.data),u(!0);break;case EAction.readUIOptions:this.config.readUIOptions().then(d=>{u(d)}).catch(d=>{l(d)});break;case EAction.saveUIOptions:this.config.saveUIOptions(s.data).then(d=>{u(d)}).catch(d=>{l(d)});break;case EAction.changeLanguage:return this.i18n.reset(s.data);default:if(this[s.action]){this[s.action](s.data,a).then(d=>{u(d)}).catch(d=>{l(d)});return}this.controller.call(s,a).then(d=>{u(d)}).catch(d=>{l(d)});break}}catch(d){l(d)}})}initConfig(){if(this.reloadCount<10&&(this.config.sites.length===0||this.config.clients.length===0)){setTimeout(()=>{this.initConfig()},500),this.reloadCount++;return}this.readConfig().then(()=>{this.initI18n()})}initI18n(){this.i18n.init().then(()=>{this.init()}).catch(()=>{console.debug("i18n init error")})}readConfig(){return new Promise((s,a)=>{this.config.read().then(u=>{this.initUserData(),this.options=u,s(u),this.localMode||this.controller.init(this.options)})})}saveConfig(){this.config.save(this.options)}initUserData(){this.options.sites.forEach(s=>{s.user=this.userData.get(s.host)})}resetTimer(s=!1){clearInterval(this.autoRefreshUserDataTimer);let a=this;typeof chrome=="object"&&chrome.alarms?chrome.alarms.clear(EAlarm.refreshJob,function(u){console.log(u?`Alarm ${EAlarm.refreshJob} was successfully cleared.`:`Alarm ${EAlarm.refreshJob} was not cleared.`),a.options.autoRefreshUserData&&(a.options.autoRefreshByAlarm?a.setRefreshUserDataJob(s):a.resetAutoRefreshUserDataTimer(s))}):a.options.autoRefreshUserData&&a.resetAutoRefreshUserDataTimer(s)}resetAutoRefreshUserDataTimer(s=!1){console.log("resetAutoRefreshUserDataTimer"),clearInterval(this.autoRefreshUserDataTimer),this.options.autoRefreshUserDataNextTime=this.getNextTime(0),new Date().getTime()>=this.options.autoRefreshUserDataNextTime&&(s?PPF.getToDay()!=PPF.getToDay(this.options.autoRefreshUserDataLastTime)?this.options.autoRefreshUserDataNextTime=new Date().getTime()+1e4:this.options.autoRefreshUserDataNextTime=this.getNextTime():this.options.autoRefreshUserDataNextTime=this.getNextTime()),this.autoRefreshUserDataTimer=window.setInterval(()=>{this.refreshUserData()},1e3)}refreshUserData(){console.log("refreshUserData");let s=new Date().getTime();this.autoRefreshUserDataFailedCount=0;let a=this.options.autoRefreshUserDataFailedRetryCount||3,u=this.options.autoRefreshUserDataFailedRetryInterval||5;this.options.autoRefreshUserDataNextTime&&s>=this.options.autoRefreshUserDataNextTime&&!this.autoRefreshUserDataIsWorking?(this.options.autoRefreshUserDataNextTime=this.getNextTime(),this.autoRefreshUserDataIsWorking=!0,this.controller.userService.refreshUserData(this.autoRefreshUserDataFailedCount>0).then(l=>{var d;this.debug("refreshUserData DONE.",l),this.autoRefreshUserDataIsWorking=!1;let h=!1;if(l.some(p=>{if(!p||!p.id&&p.msg&&p.msg.status!=EUserDataRequestStatus.notSupported)return h=!0,!0}),h?(this.autoRefreshUserDataFailedCount<a?(this.options.autoRefreshUserDataNextTime=new Date().getTime()+u*6e4,this.debug("数据刷新失败, 下次重试时间",new Date(this.options.autoRefreshUserDataNextTime).toLocaleString()),this.resetTimer()):this.debug("数据刷新失败, 重试次数已超限制"),this.autoRefreshUserDataFailedCount++):(this.debug("数据刷新完成"),this.autoRefreshUserDataFailedCount=0),this.options.autoBackupData&&(!h||this.autoRefreshUserDataFailedCount>=a)){let{autoBackupDataServerId:p}=this.options;console.log(`上传用户数据到 -> ${p}`);let x=(d=this.options.backupServers)==null?void 0:d.filter(m=>m.id===p)[0];x?(console.log(`开始上传用户数据到 -> ${x.name}`),this.controller.backupToServer(x).then(m=>console.log(`用户数据上传完成 -> ${x.name}`,m)).catch(m=>console.log(`用户数据上传失败 -> ${x.name}`,m))):console.log(`未找到备份服务器 -> ${p}`,this.options.backupServers)}})):console.debug("refresh data skipped...")}getNextTime(s=1){let a=PPF.getToDay(),u=new Date(`${a} ${this.options.autoRefreshUserDataHours}:${this.options.autoRefreshUserDataMinutes}:00`);return new Date(u.setDate(u.getDate()+s)).getTime()}saveUserData(){this.initUserData(),this.config.save(this.options)}init(){this.localMode||(this.contentMenus.init(this.options),this.resetTimer(!0))}debug(...s){s.forEach(a=>{this.controller.pushDebugMsg(a)})}writeLog(s){this.logger.add(s)}writeErrorLog(s){this.logger.add({module:EModule.background,event:"一般错误",msg:typeof s=="string"?s:JSON.stringify(s)})}initBrowserEvent(){if(window.chrome===void 0||!chrome.runtime)return;console.log("service.initBrowserEvent"),chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((a,u,l)=>(this.requestMessage(a,u).then(h=>{l&&l({resolve:h})}).catch(h=>{l&&l({reject:h})}),!0)),chrome.runtime.onInstalled.addListener(a=>{console.log("chrome.runtime.onInstalled",a),a.reason=="update"&&this.upgrade()});let s=[];switch(PPF.browserName){case EBrowserType.Firefox:s=["requestHeaders","blocking"];break;case EBrowserType.Edge:case EBrowserType.Chrome:default:s=["requestHeaders","blocking","extraHeaders"];break}chrome.webRequest.onBeforeSendHeaders.addListener(a=>{let u=[];return a.requestHeaders&&(u=a.requestHeaders.map(l=>l.name.startsWith(this.gDummyHeaderPrefix)?{name:l.name.replace(this.gDummyHeaderPrefix,""),value:l.value}:{name:l.name,value:l.value})),{requestHeaders:u}},{urls:["<all_urls>"]},s)}upgrade(){setTimeout(()=>{this.userData.upgrade()},1e3)}getSiteParser(s,a){let u=this.options.system&&this.options.system.sites&&this.options.system.sites.find(h=>h.host===s);if(!u)return"";let l=u.parser&&u.parser[a];if(!l){let h=this.options.system&&this.options.system.schemas&&this.options.system.schemas.find(d=>d.name===u.schema);l=h.parser&&h.parser[a]}return l}getSiteSelector(s,a){let u=typeof s=="string"?s:s.host,l=this.clone(this.options.system),d=l.sites.concat(this.options.sites).find(m=>m.host===u);if(!d){if(typeof s=="string")return null;d=s}let p=d.selectors&&d.selectors[a],x=l.schemas.find(m=>d!=null&&m.name===d.schema);if(!p)x&&x.selectors&&(p=x.selectors[a]);else{if(p.disabled===!0)return null;x&&x.selectors&&x.selectors[a]&&p.merge===!0&&(p.fields=Object.assign(x.selectors[a].fields,p.fields),p=Object.assign(x.selectors[a],p))}return p}clone(s){return PPF.clone(s)}checkPermissions(s){return PPF.checkPermissions(s)}requestPermissions(s){return PPF.requestPermissions(s)}setRefreshUserDataJob(s=!1){let a=0,u=2,l=this.getNextTime(0);Date.now()>l?(s&&PPF.getToDay()!=PPF.getToDay(this.options.autoRefreshUserDataLastTime)&&(a=1),a<1&&(this.options.autoRefreshUserDataNextTime=this.getNextTime(),a=Math.round((this.options.autoRefreshUserDataNextTime-Date.now())/1e3/60),a=a>1?a:1)):(this.options.autoRefreshUserDataNextTime=l,a=1),console.log(`setRefreshUserDataJob delay in ${a}, period: ${u}`),chrome.alarms.create(EAlarm.refreshJob,{delayInMinutes:a,periodInMinutes:u}),chrome.alarms.onAlarm.addListener(h=>{h.name===EAlarm.refreshJob&&(console.debug("alarm RefreshUserDataJob invoked"),this.refreshUserData())})}}const service=Object.freeze(Object.defineProperty({__proto__:null,default:PTPlugin},Symbol.toStringTag,{value:"Module"}))})();
