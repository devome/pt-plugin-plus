!function(t){console.log("this is best-movies.js");class e extends window.DoubanCommon{initButtons(){let e=t("table.list_movies");e.length>0&&e.each(((e,s)=>{let o=t(s),n=o.attr("id");n&&this.createButton(o.find("tr > td:eq(0)"),n)}))}createButton(e,s){if(!s)return;let o=t("<div style='padding: 5px;text-align:center;'/>").appendTo(e);const n="gsc-search-button gsc-search-button-v2",i="font-size: 12px;color: #fff;padding: 5px;margin-right: 5px;";t(`<button class='${n}' style='${i}'/>`).html("助手搜索").attr("title",`按当前默认方案直接搜索 ${s}`).on("click",(e=>{let o=t(e.target);this.search(s,o)})).appendTo(o),t(`<button class='${n}' style='${i}'/>`).html("按方案搜索").attr("title",`按指定方案搜索 ${s}`).on("click",(t=>{this.showPopupMenusForSolutions(t,s)})).appendTo(o),t(`<button class='${n}' style='${i}'/>`).html("按站点搜索").attr("title",`按指定站点搜索 ${s}`).on("click",(t=>{this.showPopupMenus(t,s)})).appendTo(o)}showPopupMenus(e,s){let o=[],n=this;const i=PTService.options;i.sites&&i.sites.length>0&&i.sites.forEach((t=>{var e;t.offline||(e={title:`在 ${t.name} - ${t.host} 中搜索`,key:`${s}/${t.host}`},o.push({title:e.title,fn:()=>{n.search(e.key)}}))})),o.length>0&&(basicContext.show(o,e),t(".basicContext").css({"font-size":"12px",left:"-=20px",top:"+=10px"}))}showPopupMenusForSolutions(e,s){let o=[],n=this;function i(t){o.push({title:t.title,fn:()=>{n.search(t.key)}})}const l=PTService.options.searchSolutions;l&&l.length>0&&l.forEach((t=>{i({title:`使用 ${t.name} 搜索`,key:`${s}/${t.id}`})})),o.length>0&&(o.push({}),i({title:"在 <所有站点> 中搜索",key:`${s}/all`}),basicContext.show(o,e),t(".basicContext").css({"font-size":"12px",left:"-=20px",top:"+=10px"}))}}(new e).init()}(jQuery);