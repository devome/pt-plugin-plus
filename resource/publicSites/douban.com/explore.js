!function(t,e){class s extends e.DoubanCommon{constructor(){super(),this.lastId="",this.status=0}initButtons(){t(".detail-pop").bind("DOMNodeInserted",(e=>{this.createButton(t(e.target))}))}createButton(e){if(1==this.status)return;this.status=1;let s=t("a[href*='movie.douban.com/subject']",e),i="";if(s.length>0){let t=s.attr("href").match(/subject\/(\d+)/),e=s.text().split(" ")[0];if(t&&t.length>=2){let s=t[1];i=`douban${s}`,s!=this.lastId&&(this.lastId=s,PTService.call(PTService.action.getIMDbIdFromDouban,s).catch((t=>{console.log(t)}))),i+="|"+e}}if(!i)return void(this.status=0);let a="pt-plugin-search-button";t("#"+a,e).remove(),t("<a href='javascript:void(0);' id='"+a+"' title='用 PT 助手搜索'/>").html("助手搜索").on("click",(e=>{this.search(i,t(e.target))})).appendTo(t(".collect-area",e)),this.status=0}}(new s).init()}(jQuery,window);