!function(t,e){class i extends e.DoubanCommon{initButtons(){let i=this.getIMDbId()||this.getTitle(),n=e.location.href.match(/subject\/(\d+)/);if(n&&n.length>1){let t=n[1];PTService.call(PTService.action.getIMDbIdFromDouban,t).catch((t=>{console.log(t)}))}if(i){PTService.addButton({title:"搜索当前电影",icon:"search",label:"搜索",click:(t,e)=>{this.search(i),t()}});let e=t("span.rec a[share-id]");e.length>0&&t("<a href='javascript:void(0);' class='lnk-sharing' style='margin-right: 5px;'/>").html("用 PT 助手搜索").on("click",(e=>{this.search(i,t(e.target))})).insertBefore(e)}}getIMDbId(){let e=t("a[href*='www.imdb.com/title/']:first");return e.length?e.text():(e=t("#info").text().match(/IMDb: (tt\d+)/),e?e[1]:"")}getTitle(){return document.title.replace(" (豆瓣)","")}}(new i).init()}(jQuery,window);