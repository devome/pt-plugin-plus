{
  "name": "ilolicon PT",
  "description": "主打动漫，追番和萝莉资源，兼顾热门国漫和爆款剧集的连载，设有影视对比区和专业级画质对比bbcode的站点。",
  "url": "https://share.ilolicon.com/",
  "icon": "https://share.ilolicon.com/favicon.ico",
  "tags": [
    "成人",
    "动漫",
    "萝莉"
  ],
  "schema": "NexusPHP",
  "host": "share.ilolicon.com",
  "collaborator": [
    "AllenPu",
    "anonymous"
  ],
  "plugins": [{
    "name": "特别区",
    "pages": ["/special.php"],
    "scripts": ["/schemas/NexusPHP/common.js", "/schemas/NexusPHP/torrents.js"]
  }],
  "levelRequirements": [
    {
      "level": 1,
      "name": "有点经验的魔法少女",
      "interval": "5",
      "downloaded": "50GB",
      "ratio": "1.05",
      "seedingPoints": "50000",
      "privilege": "可以发布趣味盒内容。"
    },
    {
      "level": 2,
      "name": "高级魔法少女",
      "interval": "8",
      "downloaded": "120GB",
      "ratio": "1.55",
      "seedingPoints": "200000",
      "privilege": ""
    },
    {
      "level": 3,
      "name": "疯狂魔法少女",
      "interval": "15",
      "downloaded": "300GB",
      "ratio": "2.05",
      "seedingPoints": "400000",
      "privilege": "Crazy User及以上用户封存账号后不会被删除。"
    },
    {
      "level": 4,
      "name": "超级疯狂的魔法少女",
      "interval": "25",
      "downloaded": "500GB",
      "ratio": "2.55",
      "seedingPoints": "688888",
      "privilege": ""
    },
    {
      "level": 5,
      "name": "经验丰富的魔法少女",
      "interval": "40",
      "downloaded": "750GB",
      "ratio": "3.05",
      "seedingPoints": "1011000",
      "privilege": "Veteran User及以上用户会永远保留账号。"
    },
    {
      "level": 6,
      "name": "极限魔法少女",
      "interval": "60",
      "downloaded": "1TB",
      "ratio": "3.55",
      "seedingPoints": "1500000",
      "privilege": "允许使用个性条；可以查看NFO文档。"
    },
    {
      "level": 7,
      "name": "终极魔法少女",
      "interval": "80",
      "downloaded": "1.5TB",
      "ratio": "4.05",
      "seedingPoints": "2000000",
      "privilege": "可以请求续种；得到一个邀请名额。"
    },
    {
      "level": 8,
      "name": "尼克斯大师",
      "interval": "100",
      "downloaded": "3TB",
      "ratio": "4.55",
      "seedingPoints": "3000000",
      "privilege": "可以查看种子结构；得到两个邀请名额。"
    },
    {
      "level": 100,
      "name": "贵宾",
      "privilege": "和Nexus Master拥有相同权限并被认为是精英成员。免除自动降级。VIP下载不计算下载量。"
    }
  ],
  "selectors": {
    "userBaseInfo": {
      "page": "/index.php",
      "fields": {
        "id": {
          "selector": ["a[href*='userdetails.php'][class*='Name']:first", "a[href*='userdetails.php']:first"],
          "attribute": "href",
          "filters": ["(function(){ return query ? (query.getQueryString('uuid') || query.getQueryString('id')) : ''; })()"]
        },
        "name": {
          "selector": ["a[href*='userdetails.php'][class*='Name']:first", "a[href*='userdetails.php']:first"],
          "filters": ["(function(){ return query && (query.attr('href').getQueryString('uuid') || query.attr('href').getQueryString('id')) ? query.text() : ''; })()"]
        },
        "isLogged": {
          "selector": ["a[href*='usercp.php']"],
          "filters": ["(function(){ return query.length>0; })()"]
        },
        "messageCount": {
          "selector": ["td[style*='background: red'] a[href*='messages.php']", "div[style*='background: red'] a[href*='messages.php']"],
          "filters": ["(function(){ return query.text().match(/(\\d+)/); })()", "(function(){ return (query && query.length>=2)?parseInt(query[1]):0; })()"]
        }
      }
    },
    "userExtendInfo": {
      "page": "/userdetails.php?uuid=$user.id$",
      "fields": {
        "uploaded": {
          "selector": ["td.rowhead:contains('传输') + td"],
          "filters": ["(function(){ return query.text().replace(/,/g,'').match(/上传量[：:]?\\s*([\\d.]+ ?[ZEPTGMK]?i?B)/); })()", "(function(){ return (query && query.length>=2)?(query[1]).sizeToNumber():0; })()"]
        },
        "downloaded": {
          "selector": ["td.rowhead:contains('传输') + td"],
          "filters": ["(function(){ return query.text().replace(/,/g,'').match(/下载量[：:]?\\s*([\\d.]+ ?[ZEPTGMK]?i?B)/); })()", "(function(){ return (query && query.length>=2)?(query[1]).sizeToNumber():0; })()"]
        },
        "ratio": {
          "selector": ["td.rowhead:contains('传输') + td"],
          "filters": ["(function(){ return query.text().match(/分享率[：:]?\\s*([\\d.]+)/); })()", "(function(){ return (query && query.length>=2)?parseFloat(query[1]):0; })()"]
        },
        "levelName": {
          "selector": ["td.rowhead:contains('等级')", "td.rowhead:contains('等級')", "td.rowhead:contains('Class')"],
          "filters": ["(function(){ return query.next().find('img').attr('title'); })()", "(function(){ return query.replace(/[^a-z0-9 ]/gi, '').trim().length > 0 ? query.replace(/[^a-z0-9 ]/gi, '').trim() : query; })()"]
        },
        "bonus": {
          "selector": ["td.rowhead:contains('魔力') + td"],
          "filters": ["(function(){ return query.text().replace(/,/g,'').match(/([\\d.]+)/); })()", "(function(){ return (query && query.length>=2)?parseFloat(query[1]):0; })()"]
        },
        "joinTime": {
          "selector": ["td.rowhead:contains('加入日期')", "td.rowhead:contains('Join'):contains('date')"],
          "filters": ["(function(){ return query.next().text().split(' (')[0].trim(); })()", "(function(){ return dateTime(query).isValid()?dateTime(query).valueOf():query; })()"]
        },
        "seedingTime": {
          "selector": ["td.rowhead:contains('BT时间') + td"],
          "filters": ["(function(){ return query.text().match(/做种时间[：:]?\\s*([\\d]+天[\\d:]+)/); })()", "(function(){ return (query && query.length>=2)?query[1]:''; })()"]
        },
        "seedingPoints": {
          "selector": ["td.rowhead:contains('魔力') + td"],
          "filters": ["(function(){ return query.text().replace(/,/g,'').match(/([\\d.]+)\\s*这是你的做种积分/); })()", "(function(){ return (query && query.length>=2)?parseFloat(query[1]):0; })()"]
        }
      }
    },
    "userSeedingTorrents": {
      "prerequisites": "!user.seeding",
      "page": "/getusertorrentlistajax.php?useruuid=$user.id$&type=seeding",
      "fields": {
        "seeding": {
          "selector": ["body"],
          "filters": ["(function(){ return query.text().match(/(\\d+).*?条记录/); })()", "(function(){ return (query && query.length>=2)?parseInt(query[1]):0; })()"]
        },
        "seedingSize": {
          "selector": ["body"],
          "filters": ["(function(){ return query.text().match(/总大小[：:]?\\s*([\\d.]+ ?[ZEPTGMK]?i?B)/); })()", "(function(){ return (query && query.length>=2)?query[1].sizeToNumber():0; })()"]
        }
      }
    },
    "userUploadedTorrents": {
      "prerequisites": "!user.uploads",
      "page": "/getusertorrentlistajax.php?useruuid=$user.id$&type=uploaded",
      "fields": {
        "uploads": {
          "selector": ["b:first"],
          "filters": ["(function(){ return query ? parseInt(query.text().trim().replace(/,/g,'')) : 0; })()"]
        }
      }
    }
  },
  "searchEntry": [
    {
        "name": "种子区",
        "enabled": true
    },
    {
        "entry": "special.php?search=$key$&notnewword=1",
        "name": "特别区",
        "enabled": false
    }
],
  "searchEntryConfig": {
    "merge": true,
    "skipIMDbId": false,
    "fieldSelector": {
      "progress": {
        "selector": [
          "> td.rowfollow:eq(1) td.embedded:eq(1) > div:last"
        ],
        "filters": [
          "(function(){ return query ? parseFloat(query.attr('title').match(/[\\d.]+/)) : null; })()"
        ]
      },
      "status": {
        "selector": [
          "> td.rowfollow:eq(1) td.embedded:eq(1) > div:last"
        ],
        "filters": [
          "(function(){ return query ? query.attr('title') : ''; })()",
          "(function(){ return query.indexOf('seeding') != -1 ? 2 : query.indexOf('leeching') != -1 ? 1 : query.indexOf('100%') != -1 ? 255 : 3; })()"
        ]
      }
    }
  }
}
