!function(e){console.log("this is browse.js");class t extends window.NexusPHPCommon{init(){this.initButtons(),this.initFreeSpaceButton(),PTService.pageApp=this}initButtons(){this.initListButtons(!0)}getDownloadURLs(){let t=e("a.bookmark").toArray(),n=e.map(t,(t=>{let n=e(t).attr("tid");return this.getDownloadURL(n)}));return 0==t.length?"获取下载链接失败，未能正确定位到链接":n}getDownloadURL(e){let t=(new Base64).encode("vvv"+e+"|||"+PTService.site.passkey+"zz");return`https://${PTService.site.host}/rssdd.php?par=${t}&ssl=yes`}call(e,t){return new Promise(((n,i)=>{e===PTService.action.downloadFromDroper&&this.downloadFromDroper(t,(()=>{n()}))}))}downloadFromDroper(e,t){if(!PTService.site.passkey)return PTService.showNotice({msg:"请先设置站点密钥（Passkey）。"}),void t();"string"==typeof e&&(e={url:e,title:""});let n=this.getDroperURL(e.url);n?this.sendTorrentToDefaultClient(n).then((e=>{t(e)})).catch((e=>{t(e)})):t()}getDroperURL(e){let t=e.split("/"),n=t[t.length-2];return this.getDownloadURL(n)}confirmWhenExceedSize(){return this.confirmSize(e("#torrent_table").find("td[align='center']:contains('MB'),td[align='center']:contains('GB'),td[align='center']:contains('TB')"))}}(new t).init()}(jQuery);