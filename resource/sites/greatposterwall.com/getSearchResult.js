!function(e){new class{constructor(){this.haveData=!1,this.categories={},/auth_form/.test(e.responseText)?e.status=ESearchResultParseStatus.needLogin:(e.isLogged=!0,this.haveData=!0,this.authkey="",this.passkey="")}start(){this.getAuthKey().then((()=>{e.resolve(this.getResult())})).catch((()=>{e.reject({success:!1,msg:e.searcher.getErrorMessage(e.site,ESearchResultParseStatus.parseError,e.errorMsg),data:{site:e.site,isLogged:e.isLogged}})}))}getResult(){if(!this.haveData)return[];let t=e.site,s=e.page.response.results;0==s.length&&e.reject({success:!1,msg:e.searcher.getErrorMessage(e.site,ESearchResultParseStatus.noTorrents,e.errorMsg),data:{site:e.site,isLogged:e.isLogged}});let r=[],a=this.authkey,o=this.passkey;console.log("groups.length",s.length);try{s.forEach((s=>{if(s.hasOwnProperty("torrents"))s.torrents.forEach((i=>{let n={id:i.torrentId,title:s.groupName+" - "+s.groupSubName+" ["+s.groupYear+"] ["+s.releaseType+"]",subTitle:i.codec+" / "+i.source+" / "+i.resolution+" / "+i.container+" / "+i.processing+(i.remasterTitle?` / ${i.remasterTitle}`:"")+(i.scene?" / Scene":"")+(i.isFreeleech||i.isNeutralLeech||i.isPersonalFreeleech?" / Freeleech":"")+(i.releaseGroup?` / ${i.releaseGroup}`:""),link:`${t.url}torrents.php?id=${s.groupId}&torrentid=${i.torrentId}`,url:`${t.url}torrents.php?action=download&id=${i.torrentId}&authkey=${a}&torrent_pass=${o}`,size:parseFloat(i.size),time:i.time,seeders:i.seeders,leechers:i.leechers,completed:i.snatches,site:t,entryName:e.entry.name,category:s.releaseType,imdbId:s.imdbId};r.push(n)}));else{let i={title:s.groupName,link:`${t.url}torrents.php?id=${s.groupId}&torrentid=${s.torrentId}`,url:`${t.url}torrents.php?action=download&id=${s.torrentId}&authkey=${a}&torrent_pass=${o}`,size:parseFloat(s.size),time:s.groupTime,author:"",seeders:s.seeders,leechers:s.leechers,completed:s.snatches,comments:0,site:t,tags:s.tags,entryName:e.entry.name,category:s.category,imdbId:s.imdbId};r.push(i)}})),console.log("results.length",r.length),0==r.length&&(e.status=ESearchResultParseStatus.noTorrents)}catch(t){console.log(t),e.status=ESearchResultParseStatus.parseError,e.errorMsg=t.stack}return r}getAuthKey(){const t=(e.site.activeURL+"/ajax.php?action=index").replace("://","****").replace(/\/\//g,"/").replace("****","://");return new Promise(((e,s)=>{$.get(t).done((t=>{t&&"success"===t.status&&t.response?(this.authkey=t.response.authkey,this.passkey=t.response.passkey,e()):s()})).fail((()=>{s()}))}))}}(e).start()}(options);