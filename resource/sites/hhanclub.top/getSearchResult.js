!function(t,e){let r=new class{constructor(){this.haveData=!1,/takelogin\.php|<form action="\?returnto=/.test(t.responseText)?t.status=ESearchResultParseStatus.needLogin:(t.isLogged=!0,/没有种子|No [Tt]orrents?|Your search did not match anything|用准确的关键字重试/.test(t.responseText)?t.status=ESearchResultParseStatus.noTorrents:(this.haveData=!0,this.site=t.site))}getResult(){if(!this.haveData)return[];let r=t.site,s=(PTServiceFilters.parseURL(r.url),t.resultSelector||".torrent-table-for-spider"),n=t.page.find(s).find("> .torrent-table-sub-info");if(0==n.length)return t.status=ESearchResultParseStatus.torrentTableIsEmpty,[];let i=[];r.url.lastIndexOf("/")!=r.url.length-1&&(r.url+="/");try{for(let s=0;s<n.length;s++){const a=n.eq(s);let l=a.find(".torrent-info-text-name");if(0==l.length)continue;let o=l.attr("href");o&&"http"!==o.substr(0,4)&&(o=`${r.url}${o}`);let u=a.find(".torrent-manage a[href^='download.php?id=']").attr("href");if(u&&"http"!==u.substr(0,4)&&(u=`${r.url}${u}`),!u)continue;u+=r&&r.passkey?"&passkey="+r.passkey:"";let h={title:l.text(),subTitle:a.find(".torrent-info-text-small_name").text()||"",link:o,url:u,size:a.find(".torrent-info-text-size").text()||0,time:a.find(".torrent-info-text-added > span").attr("title")||"",author:a.find(".torrent-info-text-author").text()||"",seeders:a.find(".torrent-info-text-seeders").text().trim()||0,leechers:a.find(".torrent-info-text-leechers").text().trim()||0,completed:a.find(".torrent-info-text-finished").text().trim()||0,comments:0,site:r,tags:e.getRowTags(this.site,a),entryName:t.entry.name,category:this.getCategory(a),progress:e.getFieldValue(this.site,a,"progress"),status:e.getFieldValue(this.site,a,"status"),imdbId:this.getIMDbId(a)};i.push(h)}}catch(e){t.status=ESearchResultParseStatus.parseError,t.errorMsg=e.stack}return i}getIMDbId(t){let r=e.getFieldValue(this.site,t,"imdbId");if(r)return r;try{let e=t.find("a[href*='imdb.com/title/tt']").first().attr("href");if(e&&(r=e.match(/(tt\d+)/),r))return r[0]}catch(t){return console.log(t),null}return null}getCategory(e){let r={name:"",link:""},s=e.find("> .torrent-cat > a"),n=s.find("img:first");return s.length&&(r.link=s.attr("href"),"http"!==r.link.substr(0,4)&&(r.link=t.site.url+r.link)),n.length?r.name=n.attr("alt"):r.name=s.text(),r}}(t);t.results=r.getResult(),console.log(t.results)}(options,options.searcher);