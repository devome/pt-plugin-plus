!function(e){new class{constructor(){this.haveData=!1,this.categories={},/auth_form/.test(e.responseText)?e.status=ESearchResultParseStatus.needLogin:(e.isLogged=!0,this.haveData=!0,this.authkey="",this.passkey="")}start(){this.getAuthKey().then((()=>{e.resolve(this.getResult())})).catch((()=>{e.reject({success:!1,msg:e.searcher.getErrorMessage(e.site,ESearchResultParseStatus.parseError,e.errorMsg),data:{site:e.site,isLogged:e.isLogged}})}))}getResult(){if(!this.haveData)return[];let t=e.site,s=e.page.response.results;if(0==s.length)return e.status=ESearchResultParseStatus.noTorrents,[];let r=[],a=this.authkey,o=this.passkey;console.log("groups.length",s.length);try{s.forEach((s=>{if(s.hasOwnProperty("torrents"))s.torrents.forEach((n=>{let i={id:n.torrentId,title:s.groupName+" - "+s.groupSubName+" ["+s.groupYear+"] ["+s.releaseType+"]",subTitle:n.codec+" / "+n.source+" / "+n.resolution+" / "+n.container+" / "+n.processing+(n.remasterTitle?` / ${n.remasterTitle}`:"")+(n.scene?" / Scene":"")+(n.isFreeleech||n.isNeutralLeech||n.isPersonalFreeleech?" / Freeleech":"")+(n.releaseGroup?` / ${n.releaseGroup}`:""),link:`${t.url}torrents.php?id=${s.groupId}&torrentid=${n.torrentId}`,url:`${t.url}torrents.php?action=download&id=${n.torrentId}&authkey=${a}&torrent_pass=${o}`,size:parseFloat(n.size),time:n.time,seeders:n.seeders,leechers:n.leechers,completed:n.snatches,site:t,entryName:e.entry.name,category:s.releaseType,imdbId:s.imdbId};r.push(i)}));else{let n={title:s.groupName,link:`${t.url}torrents.php?id=${s.groupId}&torrentid=${s.torrentId}`,url:`${t.url}torrents.php?action=download&id=${s.torrentId}&authkey=${a}&torrent_pass=${o}`,size:parseFloat(s.size),time:s.groupTime,author:"",seeders:s.seeders,leechers:s.leechers,completed:s.snatches,comments:0,site:t,tags:s.tags,entryName:e.entry.name,category:s.category,imdbId:s.imdbId};r.push(n)}})),console.log("results.length",r.length),0==r.length&&(e.status=ESearchResultParseStatus.noTorrents)}catch(t){console.log(t),e.status=ESearchResultParseStatus.parseError,e.errorMsg=t.stack}return r}getAuthKey(){const t=(e.site.activeURL+"/ajax.php?action=index").replace("://","****").replace(/\/\//g,"/").replace("****","://");return new Promise(((e,s)=>{$.get(t).done((t=>{t&&"success"===t.status&&t.response?(this.authkey=t.response.authkey,this.passkey=t.response.passkey,e()):s()})).fail((()=>{s()}))}))}}(e).start()}(options);