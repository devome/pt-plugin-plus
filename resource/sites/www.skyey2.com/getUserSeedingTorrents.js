void 0==="".getQueryString&&(String.prototype.getQueryString=function(e,t){null==t&&(t="&");var s,n=new RegExp("(^|"+t+"|\\?)"+e+"=([^"+t+"]*)("+t+"|$)");return(s=this.match(n))?decodeURI(s[2]):null}),function(e,t){let s=e.site.activeURL+e.rule.page;s=s.replace("$user.id$",e.userInfo.id).replace("$user.name$",e.userInfo.name).replace("://","****").replace(/\/\//g,"/").replace("****","://"),new class{constructor(e,t){this.options=e,this.dataURL=t,this.body=null,this.rawData="",this.pageInfo={count:0,current:0},this.result={seeding:0,seedingSize:0},this.load()}done(){this.options.resolve(this.result)}parse(){const e=(new DOMParser).parseFromString(this.rawData,"text/html");this.body=$(e).find("body"),this.getPageInfo();let s=new t.InfoParser(t.service).getResult(this.body,this.options.rule);s&&(this.result.seeding+=s.seeding,this.result.seedingSize+=s.seedingSize),this.pageInfo.current<this.pageInfo.count?(this.pageInfo.current++,this.load()):this.done()}getPageInfo(){if(this.pageInfo.count>0)return;const e=this.body.find("table.torrents > tbody > tr:eq(0) td:eq(1)").text();this.pageInfo.count=e?parseInt(e.split("/")[1]/50):0}load(){let e=this.dataURL;this.pageInfo.current>0&&(e+="&page="+this.pageInfo.current),$.get(e).done((e=>{this.rawData=e,this.parse()})).fail((()=>{this.done()}))}}(e,s)}(_options,_self);