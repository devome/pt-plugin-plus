!function(t,e){console.log("this is details.js");class s extends e.NexusPHPCommon{init(){this.initButtons(),PTService.pageApp=this}initButtons(){this.initDetailButtons()}_getDownloadUrlByPossibleHrefs(){const e=["a[href*='downhash'][href*='https'][class!='forward_a']","a[href*='hash'][href*='https'][class!='forward_a']","a[href*='passkey'][href*='https'][class!='forward_a']","a[href*='passkey'][class!='forward_a']"];for(const s of e){const e=t(s);if(e.length)return e.attr("href")}return null}getDownloadURL(){let e=PTService.getFieldValue("downloadURL");if(!e){if(e=this._getDownloadUrlByPossibleHrefs(),e||(e=t("td.rowfollow:contains('&passkey='):last").text()||t("a[href*='download'][href*='?id']:first").attr("href")||t("a[href*='download.php?']:first").attr("href")),!(e+"").getQueryString("passkey")&&PTService.site.passkey){let t=location.href.getQueryString("id");if(t)return location.origin+"/download.php?id="+t+"&passkey="+PTService.site.passkey+(PTService.site.disableHttps?"":"&https=1")}if(!e)return""}return this.getFullURL(e)}getTitle(){let e=t("title").text(),s=/\"(.*?)\"/.exec(e);return s&&s.length>1&&s[1]||e}getIMDbId(){let s=e.location.href,r=null;try{if(r=PTService.getFieldValue("imdbId"),!r){const e=t("a[href*='www.imdb.com/title/']:first");if(e.length>0){let t=e.attr("href").match(/(tt\d+)/);t&&t.length>=2&&(r=t[1])}}}catch(t){console.log(`${s} 获取IMDb Id 失败`,t)}return console.log(r),r}}(new s).init()}(jQuery,window);