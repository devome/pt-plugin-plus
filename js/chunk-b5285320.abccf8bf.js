(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5285320"],{"26e5":function(t,e,i){},"4bd4":function(t,e,i){"use strict";i("26e5");var s=i("94ab");e["a"]={name:"v-form",mixins:[Object(s["b"])("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},s={_uid:t._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(function(n){n&&(e.errorBag.hasOwnProperty(t._uid)||(s.valid=i(t)))})):s.valid=i(t),s},validate:function(){var t=this.inputs.filter((function(t){return!t.validate(!0)})).length;return!t},reset:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].reset();this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].resetValidation();this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},register:function(t){var e=this.watchInput(t);this.inputs.push(t),this.watchers.push(e)},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i.valid&&i.valid(),i.shouldValidate&&i.shouldValidate(),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}},"504c":function(t,e,i){var s=i("9e1e"),n=i("0d58"),a=i("6821"),o=i("52a7").f;t.exports=function(t){return function(e){var i,r=a(e),l=n(r),c=l.length,u=0,d=[];while(c>u)i=l[u++],s&&!o.call(r,i)||d.push(t?[i,r[i]]:r[i]);return d}}},"56a4":function(t,e,i){"use strict";var s=i("9d26"),n=i("b64a"),a=i("94ab"),o=i("3ccf"),r=i("58df");e["a"]=Object(r["a"])(n["a"],Object(a["a"])("stepper","v-stepper-step","v-stepper")).extend({name:"v-stepper-step",directives:{Ripple:o["a"]},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$vuetify.icons.complete"},editIcon:{type:String,default:"$vuetify.icons.edit"},errorIcon:{type:String,default:"$vuetify.icons.error"},editable:Boolean,rules:{type:Array,default:function(){return[]}},step:[Number,String]},data:function(){return{isActive:!1,isInactive:!0}},computed:{classes:function(){return{"v-stepper__step":!0,"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error":this.hasError,"v-stepper__step--complete":this.complete,"error--text":this.hasError}},hasError:function(){return this.rules.some((function(t){return!0!==t()}))}},mounted:function(){this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.stepper&&this.stepper.unregister(this)},methods:{click:function(t){t.stopPropagation(),this.$emit("click",t),this.editable&&this.stepClick(this.step)},toggle:function(t){this.isActive=t.toString()===this.step.toString(),this.isInactive=Number(t)<Number(this.step)}},render:function(t){var e={class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click}},i=void 0;i=this.hasError?[t(s["a"],{},this.errorIcon)]:this.complete?this.editable?[t(s["a"],{},this.editIcon)]:[t(s["a"],{},this.completeIcon)]:String(this.step);var n=!(this.hasError||!this.complete&&!this.isActive)&&this.color,a=t("span",this.setBackgroundColor(n,{staticClass:"v-stepper__step__step"}),i),o=t("div",{staticClass:"v-stepper__label"},this.$slots.default);return t("div",e,[a,o])}})},"768b":function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var s=i("a745"),n=i.n(s);function a(t){if(n()(t))return t}var o=i("67bb"),r=i.n(o),l=i("5d58"),c=i.n(l);function u(t,e){var i=null==t?null:"undefined"!=typeof r.a&&t[c.a]||t["@@iterator"];if(null!=i){var s,n,a,o,l=[],u=!0,d=!1;try{if(a=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;u=!1}else for(;!(u=(s=a.call(i)).done)&&(l.push(s.value),l.length!==e);u=!0);}catch(h){d=!0,n=h}finally{try{if(!u&&null!=i["return"]&&(o=i["return"](),Object(o)!==o))return}finally{if(d)throw n}}return l}}var d=i("e630");function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t,e){return a(t)||u(t,e)||Object(d["a"])(t,e)||h()}},"7e85":function(t,e,i){"use strict";i("bff6");var s=i("94ab"),n=i("6a18"),a=i("58df"),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e["a"]=Object(a["a"])(Object(s["b"])("stepper"),n["a"]).extend({name:"v-stepper",provide:function(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{nonLinear:Boolean,altLabels:Boolean,vertical:Boolean,value:[Number,String]},data:function(){return{inputValue:null,isBooted:!1,steps:[],content:[],isReverse:!1}},computed:{classes:function(){return o({"v-stepper":!0,"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear},this.themeClasses)}},watch:{inputValue:function(t,e){this.isReverse=Number(t)<Number(e);for(var i=this.steps.length;--i>=0;)this.steps[i].toggle(this.inputValue);for(var s=this.content.length;--s>=0;)this.content[s].toggle(this.inputValue,this.isReverse);this.$emit("input",this.inputValue),e&&(this.isBooted=!0)},value:function(){var t=this;this.$nextTick((function(){return t.inputValue=t.value}))}},mounted:function(){this.inputValue=this.value||this.steps[0].step||1},methods:{register:function(t){"v-stepper-step"===t.$options.name?this.steps.push(t):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content.push(t))},unregister:function(t){"v-stepper-step"===t.$options.name?this.steps=this.steps.filter((function(e){return e!==t})):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content=this.content.filter((function(e){return e!==t})))},stepClick:function(t){var e=this;this.$nextTick((function(){return e.inputValue=t}))}},render:function(t){return t("div",{class:this.classes},this.$slots.default)}})},8519:function(t,e,i){"use strict";i("c5be")},"92b8":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"set-sites"},[i("v-alert",{attrs:{value:!0,type:"info"}},[i("div",[t._v(t._s(t.$t("settings.sites.index.title")))])]),i("v-card",[i("v-card-title",[i("v-btn",{attrs:{color:"success"},on:{click:t.add}},[i("v-icon",{staticClass:"mr-2"},[t._v("add")]),t._v("\n        "+t._s(t.$t("common.add"))+"\n      ")],1),i("v-btn",{attrs:{color:"error",disabled:0==t.selected.length},on:{click:t.removeSelected}},[i("v-icon",{staticClass:"mr-2"},[t._v("remove")]),t._v("\n        "+t._s(t.$t("common.remove"))+"\n      ")],1),i("v-divider",{staticClass:"mx-3 mt-0",attrs:{inset:"",vertical:""}}),i("input",{ref:"fileImport",staticStyle:{display:"none"},attrs:{type:"file",multiple:"",accept:"application/json"}}),i("v-btn",{attrs:{color:"info"},on:{click:t.importConfig}},[i("v-icon",{staticClass:"mr-2"},[t._v("folder_open")]),t._v("\n        "+t._s(t.$t("settings.sites.index.importConfig"))+"\n      ")],1),i("v-divider",{staticClass:"mx-3 mt-0",attrs:{inset:"",vertical:""}}),i("v-btn",{attrs:{color:"info",loading:t.importing},on:{click:t.importAll}},[i("v-icon",{staticClass:"mr-2"},[t._v("gps_fixed")]),t._v("\n        "+t._s(t.$t("settings.sites.index.importAll"))+"\n      ")],1),t.importing?i("span",[t._v(t._s(t.$t("settings.sites.index.importedText"))+" "+t._s(t.importedCount))]):t._e(),i("v-divider",{staticClass:"mx-3 mt-0",attrs:{inset:"",vertical:""}}),i("v-btn",{attrs:{color:"purple",dark:"",loading:t.faviconReseting},on:{click:t.resetFavicons}},[i("v-icon",{staticClass:"mr-2"},[t._v("cached")]),t._v("\n        "+t._s(t.$t("settings.sites.index.resetFavicons"))+"\n      ")],1),i("v-spacer"),i("v-text-field",{staticClass:"search",attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""}})],1),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:this.$store.state.options.sites,pagination:t.pagination,"item-key":"host","select-all":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",{staticStyle:{width:"20px"}},[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"props.selected"}})],1),i("td",{staticClass:"text-xs-center pb-1"},[i("v-btn",{staticClass:"siteIcon",attrs:{flat:"",icon:"",title:t.$t("settings.sites.index.resetFavicons"),loading:t.loadingIconSites.includes(e.item.host)},on:{click:function(i){return i.stopPropagation(),t.resetFavicon(e.item)}}},[t.loadingIconSites.includes(e.item.host)?t._e():i("v-avatar",{attrs:{size:18}},[i("img",{attrs:{src:e.item.icon}})])],1),i("br"),i("a",{on:{click:function(i){return t.edit(e.item)}}},[i("span",[t._v(t._s(e.item.name))])])],1),i("td",[t._v(t._s(e.item.tags&&e.item.tags.join(", ")))]),i("td",[i("v-switch",{attrs:{"true-value":"true","false-value":"false","input-value":e.item.allowSearch?"true":"false","hide-details":"",disabled:e.item.offline},on:{click:function(i){return i.stopPropagation(),t.updateSearchStatus(e.item)}}})],1),i("td",[i("v-switch",{attrs:{"true-value":"true","false-value":"false","input-value":e.item.allowGetUserInfo?"true":"false","hide-details":"",disabled:e.item.offline},on:{click:function(i){return i.stopPropagation(),t.updateAllowGetUserInfo(e.item)}}})],1),i("td",[i("v-switch",{attrs:{"true-value":"true","false-value":"false","input-value":e.item.offline?"true":"false","hide-details":""},on:{click:function(i){return i.stopPropagation(),t.updateOfflineStatus(e.item)}}})],1),i("td",[i("a",{attrs:{href:e.item.activeURL,target:"_blank",rel:"noopener noreferrer nofollow"}},[t._v(t._s(e.item.activeURL))])]),i("td",[i("v-icon",{attrs:{small:"",title:t.$t("common.edit")},on:{click:function(i){return t.edit(e.item)}}},[t._v("edit")]),i("v-icon",{staticClass:"ml-2",attrs:{small:"",title:t.$t("settings.sites.index.plugins")},on:{click:function(i){return t.editPlugins(e.item)}}},[t._v("assistant")]),e.item.allowGetUserInfo?i("v-icon",{staticClass:"ml-2",attrs:{small:"",title:t.$t("settings.sites.index.showUserInfo")},on:{click:function(i){return t.editUserInfo(e.item)}}},[t._v("view_list")]):t._e(),i("v-icon",{staticClass:"ml-2",attrs:{small:"",title:t.$t("settings.sites.index.searchEntry")},on:{click:function(i){return t.editSearchEntry(e.item)}}},[t._v("search")]),i("v-icon",{staticClass:"ml-2",attrs:{small:"",color:"error",title:t.$t("common.remove")},on:{click:function(i){return t.removeConfirm(e.item)}}},[t._v("delete")]),i("v-icon",{staticClass:"ml-2",attrs:{small:"",color:"info",title:t.$t("common.share")},on:{click:function(i){return t.shareSiteConfig(e.item)}}},[t._v("share")])],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),i("AddSite",{on:{save:t.addSite},model:{value:t.showAddDialog,callback:function(e){t.showAddDialog=e},expression:"showAddDialog"}}),i("EditSite",{attrs:{site:t.selectedSite},on:{save:t.updateSite},model:{value:t.showEditDialog,callback:function(e){t.showEditDialog=e},expression:"showEditDialog"}}),i("UserInfo",{attrs:{site:t.selectedSite},model:{value:t.showUserInfo,callback:function(e){t.showUserInfo=e},expression:"showUserInfo"}}),i("v-dialog",{attrs:{width:"300"},model:{value:t.dialogRemoveConfirm,callback:function(e){t.dialogRemoveConfirm=e},expression:"dialogRemoveConfirm"}},[i("v-card",[i("v-card-title",{staticClass:"headline red lighten-2"},[t._v(t._s(t.$t("settings.sites.index.removeTitle")))]),i("v-card-text",[t._v(t._s(t.$t("settings.sites.index.removeConfirm")))]),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{flat:"",color:"info"},on:{click:function(e){t.dialogRemoveConfirm=!1}}},[i("v-icon",[t._v("cancel")]),i("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("common.cancel")))])],1),i("v-btn",{attrs:{color:"error",flat:""},on:{click:t.remove}},[i("v-icon",[t._v("check_circle_outline")]),i("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("common.ok")))])],1)],1)],1)],1),i("v-alert",{attrs:{value:!0,color:"grey"}},[i("div",{domProps:{innerHTML:t._s(t.$t("settings.sites.index.subTitle"))}})]),i("v-snackbar",{attrs:{top:"",timeout:3e3,color:"error"},model:{value:t.siteDuplicate,callback:function(e){t.siteDuplicate=e},expression:"siteDuplicate"}},[t._v(t._s(t.$t("settings.sites.index.siteDuplicateText")))]),i("v-snackbar",{attrs:{top:"",timeout:3e3,color:"error"},model:{value:t.haveError,callback:function(e){t.haveError=e},expression:"haveError"}},[t._v(t._s(t.errorMsg))]),i("v-snackbar",{attrs:{bottom:"",timeout:3e3,color:"success"},model:{value:t.haveSuccess,callback:function(e){t.haveSuccess=e},expression:"haveSuccess"}},[t._v(t._s(t.successMsg))])],1)},n=[],a=(i("6762"),i("2fdb"),i("7514"),i("ac6a"),i("6b54"),i("7f7f"),i("20d6"),i("2b0e")),o=i("f62e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-snackbar",{attrs:{value:t.haveError,top:"",timeout:3e3,color:"error"}},[t._v(t._s(t.$t("settings.sites.add.validMsg")))]),i("v-dialog",{attrs:{"max-width":"800"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("v-card",[i("v-toolbar",{attrs:{dark:"",color:"blue-grey darken-2"}},[i("v-toolbar-title",[t._v(t._s(t.$t("settings.sites.add.title")))]),i("v-spacer"),i("v-btn",{attrs:{icon:"",flat:"",color:"success",href:"https://github.com/pt-plugins/PT-Plugin-Plus/wiki/config-site",target:"_blank",rel:"noopener noreferrer nofollow",title:t.$t("common.help")}},[i("v-icon",[t._v("help")])],1)],1),i("v-card-text",[i("v-stepper",{model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[i("v-stepper-header",[i("v-stepper-step",{attrs:{complete:t.step>1,step:"1"}},[t._v(t._s(t.$t("settings.sites.add.step1")))]),i("v-divider"),i("v-stepper-step",{attrs:{step:"2"}},[t._v(t._s(t.$t("settings.sites.add.step2")))])],1),i("v-stepper-items",[i("v-stepper-content",{attrs:{step:"1"}},[i("v-autocomplete",{attrs:{items:t.$store.getters.sites,label:t.$t("settings.sites.add.validMsg"),hint:t.selectedSiteDescription,filter:t.filterSite,"persistent-hint":"","return-object":"","single-line":"","item-text":"name","item-value":"name"},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.item;return[i("v-list-tile-avatar",[i("img",{attrs:{src:s.icon}})]),i("span",{domProps:{textContent:t._s(s.name)}})]}},{key:"item",fn:function(e){return[i("v-list-tile-avatar",[i("img",{attrs:{src:e.item.icon}})]),i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.name)}}),i("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.url)}})],1),i("v-list-tile-action",[i("v-list-tile-action-text",[t._v(t._s(t.joinTags(e.item.tags)))])],1)]}}]),model:{value:t.selectedSite,callback:function(e){t.selectedSite=e},expression:"selectedSite"}})],1),i("v-stepper-content",{attrs:{step:"2"}},[i("SiteEditor",{attrs:{initData:t.selectedSite,custom:t.isCustom},on:{change:t.change}})],1)],1)],1)],1),i("v-divider"),i("v-card-actions",{staticClass:"pa-3"},[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:1==t.step,expression:"step == 1"}],attrs:{flat:"",color:"grey darken-1",href:"https://github.com/pt-plugins/PT-Plugin-Plus/tree/master/resource/sites",target:"_blank",rel:"noopener noreferrer nofollow"}},[i("v-icon",[t._v("help")]),i("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("settings.sites.add.help")))])],1),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.step<t.stepCount,expression:"step < stepCount"}],attrs:{flat:""},on:{click:t.custom}},[i("v-icon",[t._v("add_circle_outline")]),i("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("settings.sites.add.custom")))])],1),i("v-spacer"),i("v-btn",{attrs:{flat:"",color:"error"},on:{click:t.cancel}},[i("v-icon",[t._v("cancel")]),i("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("common.cancel")))])],1),i("v-btn",{attrs:{flat:"",color:"grey darken-1",disabled:1===t.step},on:{click:function(e){t.step--}}},[i("v-icon",[t._v("navigate_before")]),i("span",[t._v(t._s(t.$t("settings.sites.add.prev")))])],1),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.step<t.stepCount,expression:"step < stepCount"}],attrs:{flat:"",color:"blue"},on:{click:function(e){return t.next(t.step)}}},[i("span",[t._v(t._s(t.$t("settings.sites.add.next")))]),i("v-icon",[t._v("navigate_next")])],1),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.step===t.stepCount,expression:"step === stepCount"}],attrs:{flat:"",color:"success",disabled:!t.valid},on:{click:t.save}},[i("v-icon",[t._v("check_circle_outline")])],1)],1)],1)],1)],1)},l=[],c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"mb-5",attrs:{color:t.$vuetify.dark?"":"grey lighten-4"}},[i("v-card-text",[i("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{ref:"name",attrs:{label:t.$t("settings.sites.editor.name"),placeholder:t.$t("settings.sites.editor.name"),required:"",rules:t.rules.require},model:{value:t.site.name,callback:function(e){t.$set(t.site,"name",e)},expression:"site.name"}}),i("v-combobox",{attrs:{"hide-selected":"",hint:t.$t("settings.sites.editor.inputTags"),label:t.$t("settings.sites.editor.tags"),multiple:"","persistent-hint":"","small-chips":""},model:{value:t.site.tags,callback:function(e){t.$set(t.site,"tags",e)},expression:"site.tags"}}),t.site.isCustom?t._e():i("v-text-field",{attrs:{value:t.getSchema,label:t.$t("settings.sites.editor.schema"),disabled:""}}),t.site.isCustom?i("v-autocomplete",{attrs:{items:t.$store.state.options.system.schemas,label:t.$t("settings.sites.editor.schema"),"menu-props":{maxHeight:"auto"},"persistent-hint":"","single-line":"","item-text":"name","item-value":"name"},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.item;return[i("span",{domProps:{textContent:t._s(s.name)}})]}},{key:"item",fn:function(e){return[i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.name)}})],1),i("v-list-tile-action",[i("v-list-tile-action-text",[t._v(t._s(e.item.ver))])],1)]}}],null,!1,2935589017),model:{value:t.site.schema,callback:function(e){t.$set(t.site,"schema",e)},expression:"site.schema"}}):t._e(),t.site.securityKeys?t._l(t.site.securityKeys,(function(e,s,n){return i("v-text-field",{key:n,attrs:{label:s,type:t.showPasskey?"text":"password","append-icon":t.showPasskey?"visibility_off":"visibility"},on:{"click:append":function(e){t.showPasskey=!t.showPasskey}},model:{value:t.site.securityKeys[s],callback:function(e){t.$set(t.site.securityKeys,s,e)},expression:"site.securityKeys[key]"}})})):i("v-text-field",{attrs:{label:t.$t("settings.sites.editor.passkey"),placeholder:t.$t("settings.sites.editor.passkeyTip"),type:t.showPasskey?"text":"password","append-icon":t.showPasskey?"visibility_off":"visibility"},on:{"click:append":function(e){t.showPasskey=!t.showPasskey}},model:{value:t.site.passkey,callback:function(e){t.$set(t.site,"passkey",e)},expression:"site.passkey"}}),i("v-text-field",{attrs:{label:t.$t("settings.sites.editor.url"),placeholder:t.$t("settings.sites.editor.urlTip"),required:"",rules:[t.rules.url],disabled:!t.custom},model:{value:t.site.url,callback:function(e){t.$set(t.site,"url",e)},expression:"site.url"}}),i("v-text-field",{attrs:{label:t.$t("settings.sites.editor.priority"),placeholder:t.$t("settings.sites.editor.priorityTip"),type:"number"},model:{value:t.site.priority,callback:function(e){t.$set(t.site,"priority",e)},expression:"site.priority"}}),i("v-textarea",{attrs:{label:t.$t("settings.sites.editor.cdn"),value:"",hint:t.$t("settings.sites.editor.cdnTip")},model:{value:t.cdn,callback:function(e){t.cdn=e},expression:"cdn"}}),i("v-autocomplete",{attrs:{items:t.timezone,label:t.$t("settings.sites.editor.timezone"),"persistent-hint":"","item-text":"text","item-value":"value"},model:{value:t.site.timezoneOffset,callback:function(e){t.$set(t.site,"timezoneOffset",e)},expression:"site.timezoneOffset"}}),i("v-text-field",{attrs:{label:t.$t("settings.sites.editor.description")},model:{value:t.site.description,callback:function(e){t.$set(t.site,"description",e)},expression:"site.description"}}),i("v-autocomplete",{attrs:{items:this.$store.state.options.clients,label:t.$t("settings.sites.editor.defaultClient"),"menu-props":{maxHeight:"auto"},"persistent-hint":"","item-text":"name","item-value":"id"},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.item;return[i("span",{domProps:{textContent:t._s(s.name)}})]}},{key:"item",fn:function(e){return[i("v-list-tile-content",[i("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.name)}}),i("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.address)}})],1),i("v-list-tile-action",[i("v-list-tile-action-text",[t._v(t._s(e.item.type))])],1)]}}]),model:{value:t.site.defaultClientId,callback:function(e){t.$set(t.site,"defaultClientId",e)},expression:"site.defaultClientId"}}),i("v-text-field",{attrs:{label:t.$t("settings.sites.editor.upLoadLimit"),placeholder:t.$t("settings.sites.editor.upLoadLimitTip")},model:{value:t.site.upLoadLimit,callback:function(e){t.$set(t.site,"upLoadLimit",e)},expression:"site.upLoadLimit"}}),i("v-switch",{attrs:{label:t.$t("settings.sites.editor.allowGetUserInfo"),disabled:t.site.offline},model:{value:t.site.allowGetUserInfo,callback:function(e){t.$set(t.site,"allowGetUserInfo",e)},expression:"site.allowGetUserInfo"}}),i("v-switch",{attrs:{disabled:t.site.offline,label:t.$t("settings.sites.editor.allowSearch")},model:{value:t.site.allowSearch,callback:function(e){t.$set(t.site,"allowSearch",e)},expression:"site.allowSearch"}}),t.site.allowSearch?[i("v-container",{staticClass:"ma-0 pa-0 ml-4",attrs:{fluid:""}},[i("v-layout",{staticClass:"ma-0 pa-0",attrs:{row:"",wrap:""}},t._l(t.site.searchEntry,(function(e,s,n){return i("v-flex",{key:n,staticClass:"ma-0 pa-0",attrs:{xs3:""}},[i("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{disabled:!t.site.allowSearch||t.site.offline,label:e.name},model:{value:e.enabled,callback:function(i){t.$set(e,"enabled",i)},expression:"item.enabled"}})],1)})),1)],1)]:t._e(),i("v-switch",{attrs:{label:t.$t("settings.sites.editor.offline")},model:{value:t.site.offline,callback:function(e){t.$set(t.site,"offline",e)},expression:"site.offline"}}),i("v-switch",{attrs:{label:t.$t("settings.sites.editor.disableMessageCount")},model:{value:t.site.disableMessageCount,callback:function(e){t.$set(t.site,"disableMessageCount",e)},expression:"site.disableMessageCount"}}),i("v-switch",{attrs:{label:t.$t("settings.sites.editor.enableQuickLink")},model:{value:t.site.enableQuickLink,callback:function(e){t.$set(t.site,"enableQuickLink",e)},expression:"site.enableQuickLink"}}),i("v-switch",{attrs:{label:t.$t("settings.sites.editor.enableDefaultQuickLink"),disabled:!t.site.enableQuickLink},model:{value:t.site.enableDefaultQuickLink,callback:function(e){t.$set(t.site,"enableDefaultQuickLink",e)},expression:"site.enableDefaultQuickLink"}}),i("v-textarea",{attrs:{disabled:!t.site.enableQuickLink,label:t.$t("settings.sites.editor.quickLinkText"),hint:t.$t("settings.sites.editor.quickLinkTextTip")},model:{value:t.quickLinkText,callback:function(e){t.quickLinkText=e},expression:"quickLinkText"}})],2)],1)],1)},u=[],d=i("768b"),h=(i("28a5"),a["default"].extend({data:function(){var t=this;return{showPasskey:!1,rules:{require:[function(t){return!!t||"!"}],url:function(e){return/^(https?):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]$/.test(e)||t.$t("settings.sites.editor.urlTip")}},cdn:"",quickLinkText:"",valid:!1,site:{},timezone:[{value:"-1200",text:"(UTC -12:00) Enitwetok, Kwajalien"},{value:"-1100",text:"(UTC -11:00) Midway Island, Samoa"},{value:"-1000",text:"(UTC -10:00) Hawaii"},{value:"-0900",text:"(UTC -09:00) Alaska"},{value:"-0800",text:"(UTC -08:00) Pacific Time (US & Canada)"},{value:"-0700",text:"(UTC -07:00) Mountain Time (US & Canada)"},{value:"-0600",text:"(UTC -06:00) Central Time (US & Canada), Mexico City"},{value:"-0500",text:"(UTC -05:00) Eastern Time (US & Canada), Bogota, Lima"},{value:"-0400",text:"(UTC -04:00) Atlantic Time (Canada), Caracas, La Paz"},{value:"-0330",text:"(UTC -03:30) Newfoundland"},{value:"-0300",text:"(UTC -03:00) Brazil, Buenos Aires, Falkland Is."},{value:"-0200",text:"(UTC -02:00) Mid-Atlantic, Ascention Is., St Helena"},{value:"-0100",text:"(UTC -01:00) Azores, Cape Verde Islands"},{value:"+0000",text:"(UTC ±00:00) Casablanca, Dublin, London, Lisbon, Monrovia"},{value:"+0100",text:"(UTC +01:00) Brussels, Copenhagen, Madrid, Paris"},{value:"+0200",text:"(UTC +02:00) Sofia, Izrael, South Africa,"},{value:"+0300",text:"(UTC +03:00) Baghdad, Riyadh, Moscow, Nairobi"},{value:"+0330",text:"(UTC +03:30) Tehran"},{value:"+0400",text:"(UTC +04:00) Abu Dhabi, Baku, Muscat, Tbilisi"},{value:"+0430",text:"(UTC +04:30) Kabul"},{value:"+0500",text:"(UTC +05:00) Ekaterinburg, Karachi, Tashkent"},{value:"+0530",text:"(UTC +05:30) Bombay, Calcutta, Madras, New Delhi"},{value:"+0600",text:"(UTC +06:00) Almaty, Colomba, Dhakra"},{value:"+0700",text:"(UTC +07:00) Bangkok, Hanoi, Jakarta"},{value:"+0800",text:"(UTC +08:00) ShangHai, HongKong, Perth, Singapore, Taipei"},{value:"+0900",text:"(UTC +09:00) Osaka, Sapporo, Seoul, Tokyo, Yakutsk"},{value:"+0930",text:"(UTC +09:30) Adelaide, Darwin"},{value:"+1000",text:"(UTC +10:00) Melbourne, Papua New Guinea, Sydney"},{value:"+1100",text:"(UTC +11:00) Magadan, New Caledonia, Solomon Is."},{value:"+1200",text:"(UTC +12:00) Auckland, Fiji, Marshall Island"}]}},props:{custom:Boolean,initData:{type:Object,default:function(){return{valid:!1}}}},watch:{site:{handler:function(){this.site.cdn?this.cdn=this.site.cdn.join("\n"):this.cdn="",this.site.userQuickLinks?this.quickLinkText=this.site.userQuickLinks.map((function(t){return"".concat(t.desc,",").concat(t.href,",").concat(t.color?t.color:"")})).join("\n"):this.quickLinkText="",this.$emit("change",{data:this.site,valid:this.valid})},deep:!0},cdn:function(){var t=this.cdn.split("\n"),e=[];t.forEach((function(t){/(https?):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/.test(t)&&e.push(t)})),e.length>0?this.site.activeURL=e[0]:this.site.activeURL=this.site.url,this.site.cdn=e},quickLinkText:function(){this.site.userQuickLinks=this.quickLinkText.split(/\n/).filter((function(t){return!!t})).map((function(t){return t.split(/\s*[,，]\s*/)})).filter((function(t){var e=Object(d["a"])(t,3),i=e[0],s=e[1],n=(e[2],!!i&&!!s),a=!0;try{new URL(s)}catch(o){a=!1}return n&&a})).map((function(t){var e=Object(d["a"])(t,3),i=e[0],s=e[1],n=e[2];return{desc:i,href:s,color:n}}))},initData:function(){this.initData&&(this.site=Object.assign({},this.initData),this.valid=!(!this.site.name||!this.site.host))}},computed:{getSchema:function(){var t="";return"string"===typeof this.site.schema?t=this.site.schema:this.site.schema&&this.site.schema.name&&(t=this.site.schema.name),t}}})),v=h,p=i("2877"),f=i("6544"),m=i.n(f),g=i("c6a6"),b=i("b0af"),x=i("99d9"),_=i("ac7c"),k=i("2b5d"),w=i("a523"),C=i("0e8f"),$=i("4bd4"),S=i("a722"),y=i("40fe"),T=i("5d23"),V=i("b73d"),L=i("2677"),I=i("a844"),U=Object(p["a"])(v,c,u,!1,null,null,null),E=U.exports;m()(U,{VAutocomplete:g["a"],VCard:b["a"],VCardText:x["b"],VCheckbox:_["a"],VCombobox:k["a"],VContainer:w["a"],VFlex:C["a"],VForm:$["a"],VLayout:S["a"],VListTileAction:y["a"],VListTileActionText:T["a"],VListTileContent:T["b"],VListTileSubTitle:T["c"],VListTileTitle:T["d"],VSwitch:V["a"],VTextField:L["a"],VTextarea:I["a"]});var P=a["default"].extend({components:{SiteEditor:E},data:function(){return{step:1,show:!1,stepCount:2,selectedSite:{},valid:!1,isCustom:!1,newData:{},haveError:!1}},props:{value:Boolean},model:{prop:"value",event:"change"},watch:{show:function(){this.$emit("change",this.show),this.show||(this.step=1,this.selectedSite={name:""})},value:function(){this.show=this.value}},methods:{change:function(t){console.log(t),this.newData=t.data,this.valid=t.valid},save:function(){this.$emit("save",Object.assign({isCustom:this.isCustom},this.newData)),this.show=!1},next:function(t){this.selectedSite&&this.selectedSite.name?(this.valid=!0,this.haveError=!1,this.step++):(this.haveError=!0,this.valid=!1),this.isCustom=!1},custom:function(){this.selectedSite={name:"",isCustom:!0},this.isCustom=!0,this.valid=!1,this.step=2},joinTags:function(t){return t&&t.join?t.join(", "):""},filterSite:function(t,e,i){function s(t){return null!=t?t:""}var n=s(t.host)+s(t.name)+s(t.url),a=s(e);return n.toString().toLowerCase().indexOf(a.toString().toLowerCase())>-1},cancel:function(){this.show=!1}},computed:{selectedSiteDescription:function(){if(!this.selectedSite)return"";var t=this.selectedSite,e="";return void 0!==t.description&&(e="; "+t.description),(t.url?t.url:"")+e}},created:function(){}}),A=P,D=i("8336"),O=i("169a"),j=i("ce7e"),M=i("132d"),R=i("c954"),B=i("2db4"),N=i("9910"),z=i("7e85"),F=i("e516"),q=i("9c54"),H=i("56a4"),G=i("71d9"),K=i("2a7f"),Q=Object(p["a"])(A,r,l,!1,null,null,null),J=Q.exports;m()(Q,{VAutocomplete:g["a"],VBtn:D["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VDialog:O["a"],VDivider:j["a"],VIcon:M["a"],VListTileAction:y["a"],VListTileActionText:T["a"],VListTileAvatar:R["a"],VListTileContent:T["b"],VListTileSubTitle:T["c"],VListTileTitle:T["d"],VSnackbar:B["a"],VSpacer:N["a"],VStepper:z["a"],VStepperContent:F["a"],VStepperHeader:q["a"],VStepperItems:q["b"],VStepperStep:H["a"],VToolbar:G["a"],VToolbarTitle:K["b"]});var Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"800"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("v-card",[i("v-card-title",{staticClass:"headline blue-grey darken-2",staticStyle:{color:"white"}},[t._v(t._s(t.$t("settings.sites.edit.title")))]),i("v-card-text",[i("SiteEditor",{attrs:{initData:t.defaultSite},on:{change:t.change}})],1),i("v-divider"),i("v-card-actions",{staticClass:"pa-3"},[i("v-spacer"),i("v-btn",{attrs:{flat:"",color:"error"},on:{click:t.cancel}},[i("v-icon",[t._v("cancel")]),i("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("common.cancel")))])],1),i("v-btn",{attrs:{flat:"",color:"success",disabled:!t.valid},on:{click:t.save}},[i("v-icon",[t._v("check_circle_outline")]),i("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("common.ok")))])],1)],1)],1)],1)},Y=[],W=a["default"].extend({components:{SiteEditor:E},data:function(){return{show:!1,defaultSite:{},valid:!0,newData:{}}},props:{value:Boolean,site:Object},model:{prop:"value",event:"change"},watch:{show:function(){this.$emit("change",this.show)},value:function(){this.show=this.value,this.show&&(this.defaultSite=Object.assign({},this.site))}},methods:{change:function(t){console.log(t),this.newData=t.data,this.valid=t.valid},save:function(){this.$emit("save",this.newData),this.show=!1},cancel:function(){this.show=!1}}}),X=W,tt=i("12b2"),et=Object(p["a"])(X,Z,Y,!1,null,null,null),it=et.exports;m()(et,{VBtn:D["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:tt["a"],VDialog:O["a"],VDivider:j["a"],VIcon:M["a"],VSpacer:N["a"]});var st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"1200"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("v-card",[i("v-card-title",{staticClass:"headline blue-grey darken-2",staticStyle:{color:"white"}},[t._v(t._s(t.$t("settings.sites.userinfo.title"))+"@"+t._s(this.site.name))]),i("v-card-text",[i("v-data-table",{attrs:{headers:t.headers,items:t.userData,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",[t._v(t._s(e.item.date))]),i("td",[t._v(t._s(e.item.name))]),i("td",[t._v(t._s(e.item.levelName))]),i("td",{staticClass:"number"},[i("div",[t._v("\n              "+t._s(t._f("formatSize")(e.item.uploaded))+"\n              "),i("v-icon",{attrs:{small:"",color:"green darken-4"}},[t._v("expand_less")])],1),i("div",[t._v("\n              "+t._s(t._f("formatSize")(e.item.downloaded))+"\n              "),i("v-icon",{attrs:{small:"",color:"red darken-4"}},[t._v("expand_more")])],1)]),i("td",{staticClass:"number"},[t._v(t._s(t._f("formatRatio")(e.item.ratio)))]),i("td",{staticClass:"number"},[t._v(t._s(e.item.seeding))]),i("td",{staticClass:"number"},[t._v(t._s(t._f("formatSize")(e.item.seedingSize)))]),i("td",{staticClass:"number"},[t._v(t._s(t._f("formatNumber")(e.item.bonus)))]),i("td",[i("v-icon",{staticClass:"ml-2",attrs:{small:"",color:"error",title:t.$t("common.remove"),disabled:"latest"===e.item.date},on:{click:function(i){return t.removeConfirm(e.item)}}},[t._v("delete")])],1)]}}])})],1),i("v-divider"),i("v-card-actions",{staticClass:"pa-3"},[i("v-spacer"),i("v-btn",{attrs:{flat:"",color:"success"},on:{click:t.save}},[i("v-icon",[t._v("check_circle_outline")]),i("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("common.ok")))])],1)],1)],1)],1)},nt=[],at=(i("ffc1"),a["default"].extend({name:"UserInfo",data:function(){return{dataKey:"PT-Plugin-Plus-User-Datas",show:!1,rawUserData:[],pagination:{descending:!0,sortBy:"date",rowsPerPage:25},headers:[{text:this.$t("home.headers.date"),align:"left",value:"date",width:"130px"},{text:this.$t("home.headers.userName"),align:"left",value:"name"},{text:this.$t("home.headers.levelName"),align:"left",value:"levelName"},{text:this.$t("home.headers.activitiyData"),align:"right",value:"uploaded",width:"160px"},{text:this.$t("home.headers.ratio"),align:"right",value:"ratio"},{text:this.$t("home.headers.seeding"),align:"right",value:"seeding"},{text:this.$t("home.headers.seedingSize"),align:"right",value:"seedingSize"},{text:this.$t("home.headers.bonus"),align:"right",value:"bonus"},{text:this.$t("settings.sites.index.headers.action"),value:"name",sortable:!1,width:"50px"}]}},props:{value:Boolean,site:Object},model:{prop:"value",event:"change"},filters:{formatRatio:function(t){if(t>1e4||-1==t)return"∞";var e=parseFloat(t);return isNaN(e)?"":e.toFixed(2)}},watch:{show:function(){this.$emit("change",this.show)},value:function(){var t=this;this.value&&chrome.storage.local.get(this.dataKey,(function(e){t.rawUserData=e[t.dataKey][t.site.host],t.show=t.value}))}},computed:{userData:function(){return Object.entries(this.rawUserData).map((function(t){var e=t[1],i=e.downloaded,s=e.uploaded;return 0==i&&s>0?e.ratio=-1:i>0&&(e.ratio=s/i),e["date"]=t[0],e}))}},methods:{save:function(){this.show=!1},removeConfirm:function(t){var e=this;confirm(this.$t("settings.sites.userinfo.deleteConfirm"))&&(this.$delete(this.rawUserData,t.date),chrome.storage.local.get(this.dataKey,(function(i){delete i[e.dataKey][e.site.host][t.date],chrome.storage.local.set(i,(function(){}))})))}}})),ot=at,rt=(i("e270"),i("8fea")),lt=Object(p["a"])(ot,st,nt,!1,null,"cfb19bc8",null),ct=lt.exports;m()(lt,{VBtn:D["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:tt["a"],VDataTable:rt["a"],VDialog:O["a"],VDivider:j["a"],VIcon:M["a"],VSpacer:N["a"]});var ut=i("c67c"),dt=i("a1f4"),ht=i("21a6"),vt=i.n(ht),pt=i("0a02"),ft=new dt["a"],mt=a["default"].extend({components:{AddSite:J,EditSite:it,UserInfo:ct},data:function(){return{selected:[],pagination:{rowsPerPage:-1},showAddDialog:!1,showEditDialog:!1,showUserInfo:!1,siteDuplicate:!1,sites:[],selectedSite:{},dialogRemoveConfirm:!1,options:this.$store.state.options,importing:!1,importingCount:0,importedCount:0,fileImport:null,errorMsg:"",haveError:!1,haveSuccess:!1,successMsg:"",faviconReseting:!1,loadingIconSites:[]}},methods:{add:function(){this.showAddDialog=!0},edit:function(t){var e=this.$store.state.options.sites.findIndex((function(e){return t.name===e.name}));-1!==e&&(this.selectedSite=this.$store.state.options.sites[e],this.showEditDialog=!0)},editUserInfo:function(t){var e=this.$store.state.options.sites.findIndex((function(e){return t.name===e.name}));-1!==e&&(this.selectedSite=this.$store.state.options.sites[e],this.showUserInfo=!0)},removeConfirm:function(t){this.selectedSite=t,this.dialogRemoveConfirm=!0},remove:function(){this.dialogRemoveConfirm=!1,this.$store.commit("removeSite",this.selectedSite),this.selectedSite={}},removeSelected:function(){var t=this;confirm(this.$t("settings.sites.index.removeSelectedConfirm").toString())&&(this.selected.forEach((function(e){t.$store.commit("removeSite",e)})),this.selected=[])},updateSearchStatus:function(t){t.allowSearch=!t.allowSearch,this.$store.commit("updateSite",t),this.pagination.rowsPerPage=0,this.pagination.rowsPerPage=-1},updateAllowGetUserInfo:function(t){t.allowGetUserInfo=!t.allowGetUserInfo,this.$store.commit("updateSite",t),this.pagination.rowsPerPage=0,this.pagination.rowsPerPage=-1},updateOfflineStatus:function(t){t.offline=!t.offline,this.$store.commit("updateSite",t),this.pagination.rowsPerPage=0,this.pagination.rowsPerPage=-1},updateSite:function(t){this.$store.commit("updateSite",t),this.pagination.rowsPerPage=0,this.pagination.rowsPerPage=-1},addSite:function(t){if(!t.host){var e=ut["a"].parseURL(t.url);t.host=e.host}if(!t.icon){var i=ut["a"].parseURL(t.url);t.icon="".concat(i.protocol,"://").concat(t.host,"/favicon.ico")}var s=this.$store.state.options.sites.findIndex((function(e){return e.host===t.host}));-1===s?(t.activeURL||(t.activeURL=t.url),this.$store.commit("addSite",t)):this.siteDuplicate=!0},importAll:function(){var t=this;confirm(this.$t("settings.sites.index.importAllConfirm").toString())&&(this.importing||(this.importing=!0,this.importedCount=0,this.$store.state.options.system.sites.forEach((function(e){var i=t.$store.state.options.sites?t.$store.state.options.sites.findIndex((function(t){return t.host===e.host})):-1;-1===i&&t.checkAndAddSite(e)}))))},editPlugins:function(t){this.$router.push({name:"set-site-plugins",params:{host:t.host}})},writeLog:function(t){ft.sendRequest(o["b"].writeLog,null,{module:o["k"].options,event:t.event,msg:t.msg,data:t.data})},editSearchEntry:function(t){this.$router.push({name:"set-site-search-entry",params:{host:t.host}})},checkAndAddSite:function(t){var e=this;this.importingCount++,ft.sendRequest(o["b"].getUserInfo,null,t).then((function(i){console.log(i),i&&i.name&&(e.$store.commit("addSite",Object.assign({valid:!0,activeURL:t.url,allowSearch:!0,allowGetUserInfo:!0},t)),e.importedCount++)})).catch((function(t){console.log("error",t)})).finally((function(){e.importingCount--,0==e.importingCount&&(e.importing=!1)}))},clearMessage:function(){this.successMsg="",this.errorMsg=""},shareSiteConfig:function(t){var e=(t.host||t.name)+".json",i=JSON.parse(JSON.stringify(t));if(["id","user","passkey","defaultClientId"].forEach((function(t){i[t]&&delete i[t]})),i.isCustom||["categories","selectors","searchEntryConfig","description","icon","url","schema","tags","formerHosts"].forEach((function(t){i[t]&&delete i[t]})),i.plugins&&i.plugins.length>0){var s=[];i.plugins.forEach((function(t){t.isCustom&&s.push(t)})),i.plugins=s}if(i.searchEntry&&i.searchEntry.length>0){var n=[];i.searchEntry.forEach((function(t){t.isCustom&&n.push(t)})),i.searchEntry=n}var a=new Blob([JSON.stringify(i)],{type:"text/plain"});vt.a.saveAs(a,e)},importConfig:function(){this.fileImport.click()},importConfigFile:function(t){var e=this;this.clearMessage();var i=t.srcElement;if(i.files.length>0&&i.files[0].name.length>0){console.log(i.files);for(var s=0;s<i.files.length;s++){var n=i.files[s],a=new FileReader;a.onload=function(t){try{var i=JSON.parse(t.target.result);e.importSite(i)}catch(s){console.log(s),e.errorMsg=e.$t("common.importFailed").toString()}},a.onerror=function(){e.errorMsg=e.$t("settings.backup.loadError").toString()},a.readAsText(n)}i.value=""}},importSite:function(t){var e=JSON.parse(JSON.stringify(this.options)),i=null,s=null;if(e.sites&&e.sites.length>0&&(i=e.sites.find((function(e){return e.host===t.host}))),e.system&&e.system.sites&&e.system.sites.length>0&&(s=e.system.sites.find((function(e){return e.host===t.host}))),i){if(!confirm(this.$t("settings.sites.index.importDuplicateConfirm",{name:i.name||i.host}).toString()))return;if(t.plugins&&t.plugins.length>0){i.plugins||(i.plugins=[]);var n=i.plugins,a=[];n.forEach((function(t){t.isCustom&&a.push(t)})),t.plugins.forEach((function(t){var e=n.findIndex((function(e){return e.name===t.name}));-1===e&&(t.id=pt["a"].getNewId(),a.push(t))})),i.plugins=a}if(t.searchEntry&&t.searchEntry.length>0){i.searchEntry||(i.searchEntry=[]);var o=i.searchEntry;t.searchEntry.forEach((function(t){var e=o.findIndex((function(e){return e.name===t.name}));-1===e&&(t.id=pt["a"].getNewId(),o.push(t))}))}this.updateSite(i)}else{if(!confirm(this.$t("settings.sites.index.importConfirm",{name:t.name||t.host}).toString()))return;s?this.addSite(Object.assign(s,t)):this.addSite(t)}this.successMsg=this.$t("settings.sites.index.importedText").toString()},resetFavicons:function(){var t=this;this.faviconReseting=!0,ft.sendRequest(o["b"].resetFavicons).then((function(e){t.$store.commit("updateOptions",e)})).finally((function(){t.faviconReseting=!1}))},resetFavicon:function(t){var e=this;if(t.host){var i=t.host;this.loadingIconSites.includes(i)||this.loadingIconSites.push(i),ft.sendRequest(o["b"].resetFavicon,null,t.activeURL||t.url).then((function(t){e.$store.commit("readConfig")})).catch((function(t){console.log(t)})).finally((function(){var t=e.loadingIconSites.indexOf(i);console.log("host: %s, index: %s",i,t),-1!=t&&e.loadingIconSites.splice(t,1)}))}}},created:function(){this.options.system||this.writeLog({event:"Sites.init.error",msg:"系统配置信息丢失"}),this.options.system&&!this.options.system.sites&&this.writeLog({event:"Sites.init.error",msg:"系统配置网站信息丢失"})},mounted:function(){this.fileImport=this.$refs.fileImport,this.fileImport.addEventListener("change",this.importConfigFile)},beforeDestroy:function(){this.fileImport.removeEventListener("change",this.importConfigFile)},computed:{headers:function(){return[{text:this.$t("settings.sites.index.headers.name"),align:"center",value:"name",width:"110px"},{text:this.$t("settings.sites.index.headers.tags"),align:"left",value:"tags"},{text:this.$t("settings.sites.index.headers.allowSearch"),align:"left",value:"allowSearch"},{text:this.$t("settings.sites.index.headers.allowGetUserInfo"),align:"left",value:"allowGetUserInfo"},{text:this.$t("settings.sites.index.headers.offline"),align:"left",value:"offline"},{text:this.$t("settings.sites.index.headers.activeURL"),align:"left",value:"activeURL"},{text:this.$t("settings.sites.index.headers.action"),value:"name",sortable:!1}]}},watch:{successMsg:function(){this.haveSuccess=""!=this.successMsg},errorMsg:function(){this.haveError=""!=this.errorMsg}}}),gt=mt,bt=(i("8519"),i("0798")),xt=i("8212"),_t=Object(p["a"])(gt,s,n,!1,null,"0e0e7614",null);e["default"]=_t.exports;m()(_t,{VAlert:bt["a"],VAvatar:xt["a"],VBtn:D["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:tt["a"],VCheckbox:_["a"],VDataTable:rt["a"],VDialog:O["a"],VDivider:j["a"],VIcon:M["a"],VSnackbar:B["a"],VSpacer:N["a"],VSwitch:V["a"],VTextField:L["a"]})},"9c54":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return l}));var s=i("80d2"),n=i("7e85"),a=i("56a4"),o=i("e516"),r=Object(s["g"])("v-stepper__header"),l=Object(s["g"])("v-stepper__items");n["a"],o["a"],a["a"]},b8a8:function(t,e,i){},bff6:function(t,e,i){},c5be:function(t,e,i){},e270:function(t,e,i){"use strict";i("b8a8")},e516:function(t,e,i){"use strict";var s=i("0789"),n=i("94ab"),a=i("80d2"),o=i("58df");e["a"]=Object(o["a"])(Object(n["a"])("stepper","v-stepper-content","v-stepper")).extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data:function(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{classes:function(){return{"v-stepper__content":!0}},computedTransition:function(){return this.isReverse?s["f"]:s["g"]},styles:function(){return this.isVertical?{height:Object(a["d"])(this.height)}:{}},wrapperClasses:function(){return{"v-stepper__wrapper":!0}}},watch:{isActive:function(t,e){t&&null==e?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted:function(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition:function(t){this.isActive&&"height"===t.propertyName&&(this.height="auto")},enter:function(){var t=this,e=0;requestAnimationFrame((function(){e=t.$refs.wrapper.scrollHeight})),this.height=0,setTimeout((function(){return t.isActive&&(t.height=e||"auto")}),450)},leave:function(){var t=this;this.height=this.$refs.wrapper.clientHeight,setTimeout((function(){return t.height=0}),10)},toggle:function(t,e){this.isActive=t.toString()===this.step.toString(),this.isReverse=e}},render:function(t){var e={class:this.classes},i={class:this.wrapperClasses,style:this.styles,ref:"wrapper"};this.isVertical||(e.directives=[{name:"show",value:this.isActive}]);var s=t("div",i,[this.$slots.default]),n=t("div",e,[s]);return t(this.computedTransition,{on:this.$listeners},[n])}})},ffc1:function(t,e,i){var s=i("5ca1"),n=i("504c")(!0);s(s.S,"Object",{entries:function(t){return n(t)}})}}]);