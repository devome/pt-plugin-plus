(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d74aca6"],{"14b5":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));s("a481"),s("6b54"),s("7f7f");var i=s("d225"),n=s("b0b4"),a=function(){function t(){Object(i["a"])(this,t)}return Object(n["a"])(t,[{key:"replacePathKey",value:function(t,e){if(!t)return t;var s=new Date;return this.replaceKeys(t,{"site.name":e.name,"site.host":e.host,YYYY:s.getFullYear(),MM:("0"+(s.getMonth()+1).toString()).substr(-2),DD:("0"+s.getDate().toString()).substr(-2)})}},{key:"getSavePath",value:function(t,e){if(t){var s=t,i="<...>";if(s&&s.indexOf(i)>=0){var n=window.prompt("当前为自定义路径：".concat(s," \n请输入路径中 ").concat(i," 部分的内容: "));if(null===n)return!1;s=s.replace(i,n)}return this.replacePathKey(s,e)}}},{key:"replaceKeys",value:function(t,e){var s=t;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];s=s.replace("$"+i+"$",n)}return s}}]),t}()},"17ad":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-torrent"},[t.options.showMoiveInfoCardOnSearch?s("MovieInfoCard",{attrs:{IMDbId:t.IMDbId,doubanId:t.searchPayload.doubanId}}):t._e(),s("v-alert",{staticStyle:{padding:"8px 16px"},attrs:{value:!0,type:"info"}},[t._v("\n    "+t._s(t.$t("searchTorrent.title"))+" ["+t._s(t.key)+"], "+t._s(t.searchMsg)+"\n    "+t._s(t.skipSites)+"\n    "),t.loading||""==t.key?t._e():s("v-btn",{attrs:{flat:"",icon:"",small:"",color:"white",title:t.$t("searchTorrent.reSearch")},on:{click:function(e){return e.stopPropagation(),t.doSearch(t.searchPayload)}}},[s("v-icon",[t._v("cached")])],1),t.searchResult.noResultsSites.length>0?s("v-btn",{staticClass:"mt-1",attrs:{flat:"",small:"",color:"white"},on:{click:function(e){e.stopPropagation(),t.showNoResultsSites=!t.showNoResultsSites}}},[s("v-icon",{staticClass:"mr-1",attrs:{small:"",color:"grey darken-2"}},[t._v("face")]),t._v("\n      "+t._s(t.$t("searchTorrent.noResultsSites"))+"\n      "+t._s(t.searchResult.noResultsSites.length)+"\n    ")],1):t._e(),t.searchResult.failedSites.length>0?s("v-btn",{staticClass:"mt-1",attrs:{flat:"",small:"",color:"white"},on:{click:function(e){e.stopPropagation(),t.showFailedSites=!t.showFailedSites}}},[s("v-icon",{staticClass:"mr-1",attrs:{small:"",color:"orange"}},[t._v("warning")]),t._v("\n      "+t._s(t.$t("searchTorrent.failedSites"))+"\n      "+t._s(t.searchResult.failedSites.length)+"\n    ")],1):t._e(),t.searchResult.failedSites.length>0&&t.showFailedSites?s("v-btn",{staticClass:"mt-1",attrs:{flat:"",small:"",color:"white"},on:{click:function(e){return e.stopPropagation(),t.reSearchFailedSites.apply(null,arguments)}}},[s("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("autorenew")]),t._v("\n      "+t._s(t.$t("searchTorrent.reSearchFailedSites"))+"\n    ")],1):t._e()],1),t.searchQueue&&t.searchQueue.length?s("v-list",{attrs:{small:""}},[t._l(t.searchQueue,(function(e,i){return[s("v-list-tile",{key:e.site.host},[s("v-list-tile-action",[s("v-progress-circular",{attrs:{size:18,width:2,indeterminate:"",color:"primary"}})],1),s("v-list-tile-content",[s("v-list-tile-title",[s("v-avatar",{staticClass:"mr-2",attrs:{size:"18"}},[s("img",{attrs:{src:e.site.icon}})]),t._v("\n            "+t._s(e.site.name)+" "+t._s(t.$t("searchTorrent.searching"))+"\n          ")],1)],1),s("v-list-tile-action",{staticClass:"mr-5"},[s("v-icon",{attrs:{color:"red",title:t.$t("searchTorrent.cancelSearch")},on:{click:function(s){return t.abortSearch(e.site)}}},[t._v("cancel")])],1)],1),i+1<t.searchQueue.length?s("v-divider",{key:"line"+e.site.host+i}):t._e()]}))],2):t._e(),s("v-card",[s("v-card-title",{staticStyle:{padding:"0 5px 0 3px"}},[s("v-flex",{attrs:{xs12:""}},[t.searchSiteCount>1?s("div",[t._l(t.searchResult.sites,(function(e,i){return[s("v-chip",{key:i,staticClass:"mr-1 py-3 pl-1",attrs:{label:"",color:e.length?"blue-grey darken-2":"grey","text-color":"white",small:"",disabled:!e.length},on:{click:function(s){return s.stopPropagation(),t.resetDatas(e)}}},[i===t.allSitesKey?s("v-icon",{staticClass:"mr-1",attrs:{left:""}},[t._v("public")]):[e.length>0?s("v-avatar",{staticClass:"mr-1"},[s("img",{staticStyle:{width:"60%",height:"60%"},attrs:{src:e[0].site.icon}})]):s("v-avatar",{staticClass:"mr-1"},[s("img",{staticStyle:{width:"60%",height:"60%"},attrs:{src:e.site.icon}})])],s("span",[t._v("\n                "+t._s(i===t.allSitesKey?t.$t("searchTorrent.allSites"):i)+"\n              ")]),s("v-chip",{staticClass:"ml-2 py-3",staticStyle:{"margin-right":"-13px"},attrs:{label:"",color:e.length?"blue-grey":"grey",small:"","text-color":"white",disabled:""}},[s("span",[t._v(t._s(e.length||e.msg))])])],2)]}))],2):t._e(),t.searchResult.noResultsSites.length>0&&t.showNoResultsSites?s("div",[t._l(t.searchResult.noResultsSites,(function(e,i){return[s("v-chip",{key:i,staticClass:"mr-1 py-3 pl-1",attrs:{label:"",color:"grey darken-1","text-color":"white",small:"",disabled:""}},[[s("v-avatar",{staticClass:"mr-1"},[s("img",{staticStyle:{width:"60%",height:"60%"},attrs:{src:e.site.icon}})])],e.site.activeURL||e.site.url?s("a",{attrs:{href:e.site.activeURL||e.site.url,rel:"noopener noreferrer nofollow",target:"_blank"}},[t._v(t._s(e.site.name))]):s("span",[t._v(t._s(e.site.name))]),s("v-chip",{staticClass:"ml-2 py-3 chip-compact",staticStyle:{"margin-right":"-13px"},attrs:{label:"",color:"grey",small:"","text-color":"white",disabled:""}},[s("span",[t._v(t._s(e.msg))]),s("v-btn",{attrs:{flat:"",icon:"",small:"",color:"grey lighten-2",title:t.$t("searchTorrent.reSearch")},on:{click:function(s){return s.stopPropagation(),t.reSearchWithSite(e.site.host)}}},[s("v-icon",{attrs:{small:""}},[t._v("refresh")])],1)],1)],2)]}))],2):t._e(),t.searchResult.failedSites.length>0&&t.showFailedSites?s("div",[t._l(t.searchResult.failedSites,(function(e,i){return[s("v-chip",{key:i,staticClass:"mr-1 py-3 pl-1",attrs:{label:"",color:"orange darken-3","text-color":"white",small:"",disabled:""}},[[s("v-avatar",{staticClass:"mr-1"},[s("img",{staticStyle:{width:"60%",height:"60%"},attrs:{src:e.site.icon}})])],s("span",[t._v(t._s(e.site.name))]),s("v-chip",{staticClass:"ml-2 py-3",staticStyle:{"margin-right":"-13px"},attrs:{label:"",color:e.color,small:"","text-color":"white",disabled:""}},[e.url?s("a",{attrs:{href:e.url,rel:"noopener noreferrer nofollow",target:"_blank"}},[t._v(t._s(e.msg))]):t._e(),e.url?t._e():s("span",[t._v(t._s(e.msg))]),s("v-btn",{attrs:{flat:"",icon:"",small:"",color:"grey lighten-2",title:t.$t("searchTorrent.reSearch")},on:{click:function(s){return s.stopPropagation(),t.reSearchWithSite(e.site.host)}}},[s("v-icon",{attrs:{small:""}},[t._v("refresh")])],1)],1)],2)]}))],2):t._e()]),s("v-flex",{attrs:{xs6:""}},[s("div",{staticClass:"mt-1"},[t._l(t.searchResult.tags,(function(e,i){return[s("v-chip",{key:i,staticClass:"mr-1 pl-0",attrs:{label:"",color:e.tag.color,"text-color":"white",small:""},on:{click:function(s){return s.stopPropagation(),t.resetDatas(e.items)}}},[s("span",[t._v(t._s(i))]),s("v-chip",{staticClass:"ml-2",staticStyle:{"margin-right":"-13px"},attrs:{label:"",color:"blue-grey",small:"","text-color":"white",disabled:""}},[s("span",[t._v(t._s(e.items.length))])])],1)]}))],2),t.showCategory?s("div",{staticClass:"mt-1"},[t._l(t.searchResult.categories,(function(e,i){return[s("v-chip",{key:i,staticClass:"mr-1 pl-0",attrs:{label:"",color:"grey darken-1","text-color":"white",small:""},on:{click:function(s){return s.stopPropagation(),t.resetDatas(e.items)}}},[s("span",[t._v(t._s(i))]),s("v-chip",{staticClass:"ml-2",staticStyle:{"margin-right":"-13px"},attrs:{label:"",color:"grey",small:"","text-color":"white",disabled:""}},[s("span",[t._v(t._s(e.items.length))])])],1)]}))],2):t._e()]),s("v-flex",{attrs:{xs6:""}},[s("div",[s("v-text-field",{attrs:{"append-icon":"search",label:t.$t("searchTorrent.filterSearchResults"),"single-line":"","hide-details":"",enterkeyhint:"search"},model:{value:t.filterKey,callback:function(e){t.filterKey=e},expression:"filterKey"}})],1)])],1),s("div",{ref:"divToolbar",attrs:{id:"divToolbar"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.toolbarIsFixed,expression:"toolbarIsFixed"}],attrs:{id:"divToobarHeight"}}),s("div",{class:t.toolbarClass,attrs:{id:"divToobarInner"}},[t.$vuetify.breakpoint.smAndDown?s("div",{staticStyle:{display:"inline-flex"}},[s("v-flex",{staticClass:"px-2",staticStyle:{height:"50px"},attrs:{xs6:""}},[s("v-select",{attrs:{items:t.orderHeaders,label:t.$t("common.orderBy")},model:{value:t.pagination.sortBy,callback:function(e){t.$set(t.pagination,"sortBy",e)},expression:"pagination.sortBy"}})],1),s("v-flex",{staticClass:"px-0",staticStyle:{height:"50px"},attrs:{xs6:""}},[s("v-radio-group",{attrs:{row:""},model:{value:t.currentOrderMode,callback:function(e){t.currentOrderMode=e},expression:"currentOrderMode"}},t._l(t.orderMode,(function(t,e){return s("v-radio",{key:e,staticClass:"mr-2",attrs:{label:t.text,value:t.value}})})),1)],1)],1):t._e(),s("div",{staticStyle:{display:"inline-flex","overflow-x":"auto",width:"100%","overflow-y":"hidden"}},[s("v-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.checkBox&&t.toolbarIsFixed,expression:"checkBox && toolbarIsFixed"}],staticStyle:{margin:"8px 0 0 3px",padding:"0",height:"32px",flex:"unset"},attrs:{indeterminate:t.indeterminate,value:t.selected.length>0&&t.selected.length==t.datas.length},on:{click:function(e){return e.stopPropagation(),t.toggleAll.apply(null,arguments)}}}),t.selected.length>0?[s("v-btn",{class:t.$vuetify.breakpoint.smAndUp?"":"mini",attrs:{disabled:0==t.selected.length,color:"success",small:"",title:t.$t("searchTorrent.sendToClientTip")},on:{click:function(e){return e.stopPropagation(),t.showAllContentMenus(e)}}},[s("v-icon",{attrs:{small:""}},[t._v("cloud_download")]),t.$vuetify.breakpoint.smAndUp?s("span",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.$t("searchTorrent.sendToClient"))+" ("+t._s(t.selected.length)+")\n              ")]):s("span",{staticClass:"ml-2"},[t._v(t._s(t.selected.length))]),s("span",{staticClass:"ml-1"},[t._v(t._s(t._f("formatSize")(t.selectedSize)))])],1),t.sending.count>0?s("v-progress-circular",{attrs:{rotate:-90,size:60,width:10,value:t.sending.progress,color:"primary"}},[t._v(t._s(t.sending.progress.toFixed(0))+"%")]):t._e(),s("v-btn",{class:t.$vuetify.breakpoint.smAndUp?"":"mini",attrs:{disabled:0==t.selected.length,color:"success",small:"",title:t.$t("searchTorrent.copyToClipboardTip")},on:{click:function(e){return t.copySelectedToClipboard()}}},[s("v-icon",{attrs:{small:""}},[t._v("file_copy")]),t.$vuetify.breakpoint.smAndUp?s("span",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.$t("searchTorrent.copyToClipboard"))+" ("+t._s(t.selected.length)+")\n              ")]):s("span",{staticClass:"ml-2"},[t._v(t._s(t.selected.length))])],1),t.$vuetify.breakpoint.mdAndUp?s("v-btn",{attrs:{disabled:0==t.selected.length,color:"success",small:"",title:t.$t("searchTorrent.saveTip")},on:{click:t.downloadSelected}},[s("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("save")]),t._v("\n              "+t._s(t.$t("searchTorrent.save"))+" ("+t._s(t.selected.length)+")\n            ")],1):t._e(),t.downloading.count>0?s("v-progress-circular",{attrs:{rotate:-90,size:60,width:10,value:t.downloading.progress,color:"primary"}},[t._v(t._s(t.downloading.progress.toFixed(0))+"%")]):t._e(),t.downloadFailedTorrents.length>0?s("v-btn",{staticClass:"error",attrs:{small:"",title:t.$t("searchTorrent.downloadFailed"),loading:t.downloading.count>0},on:{click:t.reDownloadFailedTorrents}},[s("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("get_app")]),t._v("\n              "+t._s(t.$t("searchTorrent.downloadFailed"))+" ("+t._s(t.downloadFailedTorrents.length)+")\n            ")],1):t._e(),s("AddToCollectionGroup",{attrs:{disabled:0==t.selected.length,label:t.$vuetify.breakpoint.smAndUp?t.$t("searchTorrent.collection")+" ("+t.selected.length+")":t.selected.length,small:""},on:{add:t.addSelectedToCollection}}),s("KeepUpload",{attrs:{items:t.selected,label:t.$vuetify.breakpoint.smAndUp?t.$t("keepUploadTask.keepUpload")+" ("+t.selected.length+")":t.selected.length,color:"success"}})]:t._e(),t.$store.state.options.allowSaveSnapshot?s("v-btn",{class:t.$vuetify.breakpoint.smAndUp?"":"mini",attrs:{loading:t.loading,color:"cyan",small:"",dark:"",title:t.$t("searchResultSnapshot.create")},on:{click:function(e){return e.stopPropagation(),t.createSearchResultSnapshot()}}},[s("v-icon",{attrs:{small:""}},[t._v("add_a_photo")]),t.$vuetify.breakpoint.smAndUp?s("span",{staticClass:"ml-2"},[t._v("\n              "+t._s(t.$t("searchResultSnapshot.create"))+"\n            ")]):t._e()],1):t._e(),s("v-menu",{staticClass:"ml-2",attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[s("v-btn",t._g({class:t.$vuetify.breakpoint.smAndUp?"":"mini",attrs:{color:"blue",dark:"",title:t.$t("home.settings"),small:""}},i),[s("v-icon",{attrs:{small:""}},[t._v("settings")])],1)]}}])},[s("v-card",[s("v-container",{attrs:{"grid-list-xs":""}},[s("v-switch",{attrs:{color:"success",label:t.$t("searchTorrent.showCheckbox")},on:{change:t.updateViewOptions},model:{value:t.checkBox,callback:function(e){t.checkBox=e},expression:"checkBox"}}),s("v-switch",{attrs:{color:"success",label:t.$t("searchTorrent.showCategory")},on:{change:t.updateViewOptions},model:{value:t.showCategory,callback:function(e){t.showCategory=e},expression:"showCategory"}}),s("v-switch",{attrs:{color:"success",label:t.$t("searchTorrent.titleMiddleEllipsis")},on:{change:t.updateViewOptions},model:{value:t.titleMiddleEllipsis,callback:function(e){t.titleMiddleEllipsis=e},expression:"titleMiddleEllipsis"}})],1)],1)],1)],2)])]),s("v-data-table",{class:"torrent"+(t.fixedTable?" fixed-table fixed-header v-table__overflow":""),attrs:{search:t.filterKey,"custom-filter":t.searchResultFilter,headers:t.headers,items:t.datas,pagination:t.pagination,loading:t.loading,"item-key":"link","select-all":t.checkBox,"rows-per-page-items":t.options.rowsPerPageItems},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[s("tr",[t.checkBox?s("th",[s("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":""},on:{click:function(e){return e.stopPropagation(),t.toggleAll.apply(null,arguments)}}})],1):t._e(),t._l(e.headers,(function(e){return[e.visible?s("th",{key:e.text,class:t.getHeaderClass(e),style:e.width?"width:"+e.width+";":"",on:{click:function(s){!1!==e.sortable&&t.changeSort(e.value)}}},[!1!==e.sortable?s("v-icon",{attrs:{small:""}},[t._v("arrow_upward")]):t._e(),t._v("\n              "+t._s(e.text)+"\n            ")],1):t._e()]}))],2)]}},{key:"items",fn:function(e){return[t.checkBox?s("td",[s("v-checkbox",{attrs:{primary:"","hide-details":""},on:{change:function(s){return t.shiftCheck(s,e.index)}},model:{value:e.selected,callback:function(s){t.$set(e,"selected",s)},expression:"props.selected"}})],1):t._e(),t.$vuetify.breakpoint.mdAndUp?s("td",{staticClass:"center"},[s("v-avatar",{attrs:{size:"18"}},[s("img",{attrs:{src:e.item.site.icon}})]),t.$vuetify.breakpoint.width>1200?[s("br"),s("a",{staticClass:"captionText",attrs:{href:e.item.site.activeURL||e.item.site.url,target:"_blank",rel:"noopener noreferrer nofollow"},domProps:{innerHTML:t._s(e.item.site.name)}})]:t._e()],2):t._e(),s("td",{class:t.$vuetify.breakpoint.xs?"titleCell-mobile":"titleCell"},[t.$vuetify.breakpoint.smAndDown?s("v-avatar",{staticClass:"mr-1",staticStyle:{"vertical-align":"unset"},attrs:{size:"14"}},[s("img",{attrs:{src:e.item.site.icon}})]):t._e(),t.titleMiddleEllipsis&&!t.$vuetify.breakpoint.xs?s("div",{staticClass:"titleWrap"},[s("a",{class:[t.$vuetify.breakpoint.xs?"body-2":"subheading titleFull","font-weight-medium"],attrs:{href:e.item.link,target:"_blank",title:e.item.title,rel:"noopener noreferrer nofollow"},domProps:{innerHTML:t._s(e.item.titleHTML)}}),s("a",{class:[t.$vuetify.breakpoint.xs?"body-2":"subheading titleEllipsisMiddle","font-weight-medium"],attrs:{href:e.item.link,target:"_blank",title:"·title:"+e.item.title,rel:"noopener noreferrer nofollow"},domProps:{innerHTML:t._s(e.item.titleHTML)}})]):s("a",{class:[t.$vuetify.breakpoint.xs?"body-2":"subheading","font-weight-medium"],attrs:{href:e.item.link,target:"_blank",title:e.item.title,rel:"noopener noreferrer nofollow"},domProps:{innerHTML:t._s(e.item.titleHTML)}}),e.item.tags&&e.item.tags.length||e.item.subTitle?s("div",{staticClass:"sub-title captionText"},[e.item.tags&&e.item.tags.length?s("span",{staticClass:"mr-1"},t._l(e.item.tags,(function(e,i){return s("span",{key:i,class:["tag",""+e.color],style:{"background-color":""+e.color,"border-color":""+e.color},attrs:{title:e.title}},[t._v(t._s(e.name))])})),0):t._e(),e.item.subTitle?s("span",{attrs:{title:e.item.subTitle}},[t._v(t._s(e.item.subTitle))]):t._e()]):t._e(),t.$vuetify.breakpoint.xs?s("v-layout",[s("v-flex",{staticClass:"pt-2 captionText",attrs:{xs3:""}},[t._v("\n              "+t._s(t._f("formatSize")(e.item.size))+"\n            ")]),s("v-flex",{staticClass:"pt-2 captionText",attrs:{xs3:""}},[s("v-icon",{staticStyle:{"font-size":"12px","margin-bottom":"2px"}},[t._v("arrow_upward")]),t._v("\n              "+t._s(e.item.seeders)+"\n              "),s("v-icon",{staticStyle:{"font-size":"12px","margin-bottom":"2px"}},[t._v("arrow_downward")]),t._v("\n              "+t._s(e.item.leechers)+"\n            ")],1),s("v-flex",{attrs:{xs3:""}},[null!=e.item.progress?s("TorrentProgress",{staticClass:"progress",staticStyle:{position:"unset","padding-top":"2px"},attrs:{progress:parseInt(e.item.progress),status:e.item.status}}):t._e()],1),s("v-flex",{attrs:{xs3:""}},[t.$vuetify.breakpoint.xs?s("Actions",{attrs:{url:e.item.url,downloadMethod:e.item.site.downloadMethod,isCollectioned:t.isCollectioned(e.item.link),item:e.item},on:{copyLinkToClipboard:function(s){return t.copyLinkToClipboard(e.item.url)},saveTorrentFile:function(s){return t.saveTorrentFile(e.item)},addToCollection:function(s){return t.addToCollection(e.item)},deleteCollection:function(s){return t.deleteCollection(e.item)},downloadSuccess:t.downloadSuccess,downloadError:t.downloadError}}):t._e()],1)],1):t._e()],1),t.$vuetify.breakpoint.width>1200?s("td",{staticClass:"category center"},[e.item.category&&e.item.category.name?s("span",{staticClass:"captionText",attrs:{title:e.item.category.name}},[t._v(t._s(e.item.category.name))]):t._e(),s("br"),s("span",{staticClass:"captionText"},[t._v("<"+t._s(e.item.entryName)+">")])]):t._e(),t.$vuetify.breakpoint.smAndUp?s("td",{staticClass:"size"},[t._v("\n          "+t._s(t._f("formatSize")(e.item.size))+"\n          "),null!=e.item.progress?s("TorrentProgress",{staticClass:"progress",attrs:{progress:parseInt(e.item.progress),status:e.item.status}}):t._e()],1):t._e(),t.$vuetify.breakpoint.smAndUp?s("td",{staticClass:"size"},[t._v(t._s(e.item.seeders))]):t._e(),t.$vuetify.breakpoint.mdAndUp?s("td",{staticClass:"size"},[t._v(t._s(e.item.leechers))]):t._e(),t.$vuetify.breakpoint.mdAndUp?s("td",{staticClass:"size"},[t._v(t._s(e.item.completed))]):t._e(),t.$vuetify.breakpoint.smAndUp?s("td",{staticClass:"size"},[t._v(t._s(e.item.comments))]):t._e(),t.$vuetify.breakpoint.mdAndUp?s("td",[t._v(t._s(t._f("formatDate")(e.item.time)))]):t._e(),t.$vuetify.breakpoint.smAndUp?s("td",{staticClass:"text-xs-center"},[e.item.url?[s("Actions",{attrs:{url:e.item.url,downloadMethod:e.item.site.downloadMethod,isCollectioned:t.isCollectioned(e.item.link),item:e.item},on:{copyLinkToClipboard:function(s){return t.copyLinkToClipboard(e.item.url)},saveTorrentFile:function(s){return t.saveTorrentFile(e.item)},addToCollection:function(s){return t.addToCollection(e.item)},deleteCollection:function(s){return t.deleteCollection(e.item)},downloadSuccess:t.downloadSuccess,downloadError:t.downloadError}})]:s("span",[t._v(t._s(t.$t("searchTorrent.failUrl")))])],2):t._e()]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),s("v-snackbar",{attrs:{top:"",timeout:3e3,"multi-line":"",color:"error"},model:{value:t.haveError,callback:function(e){t.haveError=e},expression:"haveError"}},[s("div",{domProps:{innerHTML:t._s(t.errorMsg)}})]),s("v-snackbar",{attrs:{bottom:"",timeout:3e3,"multi-line":"",color:"success"},model:{value:t.haveSuccess,callback:function(e){t.haveSuccess=e},expression:"haveSuccess"}},[s("div",{domProps:{innerHTML:t._s(t.successMsg)}})])],1)},n=[],a=s("75fc"),o=(s("55dd"),s("6762"),s("2fdb"),s("b54a"),s("a481"),s("7f7f"),s("20d6"),s("ac6a"),s("7514"),s("28a5"),s("4917"),s("386d"),s("6b54"),s("2b0e")),r=s("a1f4"),l=s("f62e"),c=s("c67c"),d=s("5a0c"),h=s.n(d),u=s("5ff3"),f=s("bdfc"),p=s("14b5"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.visible?s("div",{staticClass:"movieInfoCard"},[s("v-card",{staticClass:"white--text",attrs:{color:"blue-grey darken-2"}},[s("v-card-title",{staticClass:"pb-2"},[s("div",{class:t.$vuetify.breakpoint.mdAndUp?"headline":"title"},[s("span",[t._v(t._s(t.info.title))]),s("span",{class:["ml-1","grey--text",t.$vuetify.breakpoint.mdAndUp?"title":"caption"]},[t._v("("+t._s(t.info.year||t.info.attrs.year[0])+")")])])]),s("v-img",{staticClass:"ml-3 mb-3",attrs:{src:t.info.image||t.info.pic.normal,contain:"","max-height":t.maxHeight,position:"left center"}},[t.$vuetify.breakpoint.mdAndUp?s("v-layout",{staticStyle:{"margin-left":"220px"}},[t.info.updateTime?s("v-card-title",{staticClass:"pt-0"},[s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.alias")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.aka))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.director")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.director))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.writer")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.scenarist))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.cast")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.cast))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.type")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.genre))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.pubdate")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.releaseDate))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.duration")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.runtime))])]),s("v-flex",{staticClass:"my-2",attrs:{xs12:""}},[s("v-divider",{attrs:{light:""}})],1),s("div",{staticClass:"caption",domProps:{innerHTML:t._s("　　"+t.info.summary.replace(/\n/g,"<br>")+" @豆瓣")}})],1):t.info.attrs?s("v-card-title",{staticClass:"pt-0"},[s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.alias")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.alt_title))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.director")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.attrs.director)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.writer")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.attrs.writer)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.cast")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.attrs.cast)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.type")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.attrs.movie_type)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.pubdate")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.attrs.pubdate)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.duration")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.attrs.movie_duration)))])]),s("v-flex",{staticClass:"my-2",attrs:{xs12:""}},[s("v-divider",{attrs:{light:""}})],1),s("div",{staticClass:"caption",domProps:{innerHTML:t._s(t.info.summary+" @豆瓣")}})],1):s("v-card-title",{staticClass:"pt-0"},[s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.alias")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.info.original_title))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.director")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.getArrayValues(t.info.directors)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.cast")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.getArrayValues(t.info.actors)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.type")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.genres)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.pubdate")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.pubdate)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",[t._v(t._s(t.$t("movieInfoCard.duration")))]),s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.durations)))])]),s("v-flex",{staticClass:"my-2",attrs:{xs12:""}},[s("v-divider",{attrs:{light:""}})],1),s("div",{staticClass:"caption",domProps:{innerHTML:t._s(t.info.intro+" @豆瓣")}})],1)],1):s("v-layout",{staticStyle:{"margin-left":"75px"}},[s("v-card-text",{staticClass:"pt-0"},[s("v-flex",{attrs:{xs12:""}},[s("span",{staticClass:"caption"},[t._v(t._s(t.info.original_title||t.info.alt_title))])]),s("v-flex",{attrs:{xs12:""}},[s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.genres||t.info.attrs.movie_type)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.pubdate||t.info.attrs.pubdate)))])]),s("v-flex",{attrs:{xs12:""}},[s("span",{staticClass:"caption"},[t._v(t._s(t.formatArray(t.info.durations||t.info.attrs.movie_duration)))])])],1)],1)],1),s("v-divider",{attrs:{light:""}}),s("v-card-actions",{staticClass:"px-3"},[s("v-btn",{attrs:{color:"success",href:t.info.link||t.info.url||t.info.mobile_link,target:"_blank",rel:"noopener noreferrer nofollow"}},[t._v("豆瓣 "+t._s(t.info.average||t.info.rating.value||t.info.rating.average))]),s("v-btn",{attrs:{color:"amber",href:"https://www.imdb.com/title/"+this.IMDbId+"/",target:"_blank",rel:"noopener noreferrer nofollow"}},[t._v("IMDb "+t._s(t.ratings.imdbRating))]),t.tomatoRating>0?s("v-btn",{attrs:{color:"red lighten-3",href:t.ratings.tomatoURL,target:"_blank",rel:"noopener noreferrer nofollow"}},[s("v-avatar",{staticClass:"mr-1",attrs:{size:"20"}},[t.tomatoRating>=60?s("img",{attrs:{src:t.rottenTomatoes.fresh}}):s("img",{attrs:{src:t.rottenTomatoes.rotten}})]),t._v("\n        "+t._s(t.tomatoRating)+"%\n      ")],1):t._e(),t.metascore>0?s("v-btn",{staticStyle:{"min-width":"unset"},attrs:{color:t.metascore>60?"success":t.metascore>40?"warning":"error",href:"https://www.metacritic.com/search/movie/"+t.info.title+"/results",target:"_blank",rel:"noopener noreferrer nofollow"}},[s("v-avatar",{staticClass:"mr-2",attrs:{size:"20"}},[s("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/f/f2/Metacritic_M.png"}})]),t._v("\n        "+t._s(t.metascore)+"\n      ")],1):t._e(),s("v-spacer"),t.$vuetify.breakpoint.mdAndUp?s("v-layout",[t.rating>0?s("v-flex",{attrs:{xs6:""}},[s("v-rating",{attrs:{"background-color":"white",color:"yellow accent-4",dense:"",readonly:"","half-increments":"",size:"30"},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}}),s("span",{staticClass:"ma-2"},[t._v(t._s(t.$t("movieInfoCard.ratings.douban",{average:t.info.average||t.info.rating.value||t.info.rating.average,numRaters:t.info.votes||t.info.rating.count||t.info.rating.numRaters})))])],1):t._e(),t.imdbRating>0?s("v-flex",{attrs:{xs6:""}},[s("v-rating",{attrs:{"background-color":"white",color:"yellow accent-4",dense:"",readonly:"","half-increments":"",size:"30"},model:{value:t.imdbRating,callback:function(e){t.imdbRating=e},expression:"imdbRating"}}),s("span",{staticClass:"ma-2"},[t._v(t._s(t.$t("movieInfoCard.ratings.imdb",{average:t.ratings.imdbRating,numRaters:t.ratings.imdbVotes.replace(/,/g,"")})))])],1):t._e()],1):t._e()],1)],1)],1):t._e()},v=[],m=s("a400"),b=new r["a"],y=o["default"].extend({props:{IMDbId:String,doubanId:String},data:function(){return{info:{title:"",summary:"",image:"",rating:{average:"",numRaters:0,value:""},attrs:{year:[],director:[],writer:[],cast:[],movie_type:[],pubdate:[],movie_duration:[]}},ratings:{imdbRating:"",Ratings:[],imdbVotes:""},rottenTomatoes:{fresh:"https://www.rottentomatoes.com/assets/pizza-pie/images/icons/global/new-fresh.587bf3a5e47.png",rotten:"https://www.rottentomatoes.com/assets/pizza-pie/images/icons/global/new-rotten.efc30acb29c.png"},visible:!1}},watch:{IMDbId:function(){this.reset()}},created:function(){this.reset()},methods:{reset:function(){var t=this;this.visible=!1,this.ratings={imdbRating:"",Ratings:[],imdbVotes:""},console.log(this.doubanId,this.IMDbId),this.IMDbId&&(b.sendRequest(m["a"].getMovieInfos,null,this.doubanId?"douban".concat(this.doubanId):this.IMDbId).then((function(e){console.log(e),t.visible=!0,Array.isArray(e)?t.info=e[0]:t.info=e})).catch((function(t){console.log(t)})),b.sendRequest(m["a"].getMovieRatings,null,this.IMDbId).then((function(e){console.log(e),t.ratings=e})).catch((function(t){console.log(t)})))},formatArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" / ",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return t&&t.length>0?s>0&&t.length>s?t.slice(0,s-1).join(e)+" ...":t.join(e):""},getArrayValues:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" / ";if(t&&t.length>0){var i=[];return t.forEach((function(t){i.push(t[e])})),i.join(s)}return""}},computed:{rating:function(){return this.info&&(this.info.rating||this.info.average)?parseFloat(this.info.average||this.info.rating.value||this.info.rating.average)/2:0},imdbRating:function(){return this.ratings&&this.ratings.imdbRating?parseFloat(this.ratings.imdbRating)/2:0},tomatoRating:function(){if(this.ratings&&this.ratings.Ratings){var t=0;return this.ratings.Ratings.some((function(e){if("Rotten Tomatoes"==e.Source)return t=parseInt(e.Value),!0})),t}return 0},metascore:function(){if(this.ratings&&this.ratings.Ratings){var t=0;return this.ratings.Ratings.some((function(e){if("Metacritic"==e.Source)return t=parseInt(e.Value.split("/")[0]),!0})),t}return 0},maxHeight:function(){return this.$vuetify.breakpoint.smAndDown?120:300}}}),_=y,S=(s("68f0"),s("2877")),k=s("6544"),T=s.n(k),w=s("8212"),C=s("8336"),x=s("b0af"),M=s("99d9"),I=s("12b2"),R=s("ce7e"),E=s("0e8f"),A=s("adda"),P=s("a722"),O=s("1d4d"),D=s("9910"),L=Object(S["a"])(_,g,v,!1,null,"3109bf39",null),U=L.exports;T()(L,{VAvatar:w["a"],VBtn:C["a"],VCard:x["a"],VCardActions:M["a"],VCardText:M["b"],VCardTitle:I["a"],VDivider:R["a"],VFlex:E["a"],VImg:A["a"],VLayout:P["a"],VRating:O["a"],VSpacer:D["a"]});var V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"mt-1",attrs:{xs2:""}},[s("v-icon",{attrs:{size:10,color:t.color,title:t.statusTip}},[t._v(t._s(t.icon))])],1),s("v-flex",{attrs:{xs10:""}},[s("v-progress-linear",{staticStyle:{"margin-left":"1px"},attrs:{color:t.color,height:"4",value:t.progress,title:t.progress+"%"}})],1)],1)},F=[],B=(s("c5f6"),o["default"].extend({props:{progress:Number,status:Number},mounted:function(){},computed:{color:function(){var t="success";switch(this.status){case m["s"].downloading:t="info";break;case m["s"].completed:case m["s"].inactive:t="grey";break;case m["s"].sending:default:break}return t},icon:function(){var t="arrow_upward";switch(this.status){case m["s"].downloading:t="arrow_downward";break;case m["s"].completed:t="done";break;case m["s"].inactive:t="wifi_off";break;case m["s"].sending:default:break}return t},statusTip:function(){var t=this.$t("searchTorrent.torrentStatus.sending").toString();switch(this.status){case m["s"].downloading:t=this.$t("searchTorrent.torrentStatus.downloading").toString();break;case m["s"].completed:t=this.$t("searchTorrent.torrentStatus.completed").toString();break;case m["s"].inactive:t=this.$t("searchTorrent.torrentStatus.inactive").toString();break;case m["s"].sending:default:break}return t}}})),z=B,K=s("132d"),H=s("8e36"),N=Object(S["a"])(z,V,F,!1,null,null,null),j=N.exports;T()(N,{VFlex:E["a"],VIcon:K["a"],VLayout:P["a"],VProgressLinear:H["a"]});var q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-btn",{class:t.$vuetify.breakpoint.smAndUp?"":"mini",attrs:{flat:t.flat,icon:t.icon,small:t.small,loading:t.loading,color:t.color,disabled:t.disabled,title:t.$t("collection.add"),dark:t.dark},on:{click:function(e){return e.stopPropagation(),t.showContentMenus.apply(null,arguments)}}},[t.haveSuccess?s("v-icon",{attrs:{color:"success",small:""}},[t._v("done")]):t.haveError?s("v-icon",{attrs:{color:"red",small:""}},[t._v("close")]):s("v-icon",{attrs:{small:""}},[t._v(t._s(t.iconText))]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.label))])],1)},Q=[],G=s("0a02"),Y=new r["a"],W=o["default"].extend({props:{flat:Boolean,icon:Boolean,small:Boolean,dark:Boolean,iconText:{type:String,default:"favorite_border"},color:{type:String,default:"success"},label:{type:String,default:""},disabled:Boolean},data:function(){return{options:this.$store.state.options,contentMenus:[],loading:!1,haveSuccess:!1,haveError:!1,groups:[]}},methods:{showContentMenus:function(t){var e=this;Y.sendRequest(l["b"].getTorrentCollectionGroups).then((function(s){e.groups=s;var i=[];e.groups.forEach((function(t){i.push({title:t.name,fn:function(){e.$emit("add",t)}})})),i.push({}),i.push({title:e.$t("collection.addGroup"),fn:function(){e.createGroup()}}),G["a"].showContextMenu(i,t)}))},createGroup:function(){var t=this,e=window.prompt(this.$t("collection.inputGroupName").toString());e&&Y.sendRequest(l["b"].addTorrentCollectionGroup,null,{name:e,color:l["a"][Math.floor(Math.random()*l["a"].length)]}).then((function(e){e&&t.$emit("add",e[e.length-1])}))},clearStatus:function(){this.haveSuccess=!1,this.haveError=!1}}}),J=W,Z=Object(S["a"])(J,q,Q,!1,null,null,null),X=Z.exports;T()(Z,{VBtn:C["a"],VIcon:K["a"]});var tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"torrent-actions"},[s("DownloadTo",{staticClass:"mx-0",attrs:{downloadOptions:t.item,flat:"",icon:"",small:"",mini:t.$vuetify.breakpoint.smAndDown,color:"grey darken-1"},on:{error:t.downloadError,success:t.downloadSuccess}}),s("v-btn",{class:t.$vuetify.breakpoint.mdAndUp?"mx-0":"mx-0 btn-mini",attrs:{flat:"",icon:"",small:"",color:"grey darken-1"}},[s("v-icon",{attrs:{small:"",title:t.$t("searchTorrent.copyToClipboardTip")},on:{click:t.copyLinkToClipboard}},[t._v("file_copy")])],1),"POST"==t.downloadMethod?s("v-btn",{class:t.$vuetify.breakpoint.mdAndUp?"mx-0":"mx-0 btn-mini",attrs:{flat:"",icon:"",small:"",color:"grey darken-1"}},[s("v-icon",{attrs:{small:"",title:t.$t("searchTorrent.saveTip")},on:{click:function(e){return e.stopPropagation(),t.saveTorrentFile.apply(null,arguments)}}},[t._v("save")])],1):s("v-btn",{class:t.$vuetify.breakpoint.mdAndUp?"mx-0":"mx-0 btn-mini",attrs:{flat:"",icon:"",small:"",href:t.url,target:"_blank",rel:"noopener noreferrer nofollow",title:t.$t("searchTorrent.saveTip"),color:"grey darken-1"}},[s("v-icon",{attrs:{small:""}},[t._v("save")])],1),t.isCollectioned?s("v-btn",{class:t.$vuetify.breakpoint.mdAndUp?"mx-0":"mx-0 btn-mini",attrs:{flat:"",icon:"",small:"",color:"pink",title:t.$t("collection.remove")},on:{click:t.deleteCollection}},[s("v-icon",{attrs:{small:""}},[t._v("favorite")])],1):s("v-btn",{class:t.$vuetify.breakpoint.mdAndUp?"mx-0":"mx-0 btn-mini",attrs:{flat:"",icon:"",small:"",color:"grey darken-1",title:t.$t("collection.add")},on:{click:t.addToCollection}},[s("v-icon",{attrs:{small:""}},[t._v("favorite_border")])],1)],1)},et=[],st=s("3046"),it=o["default"].extend({components:{DownloadTo:st["a"]},props:{url:String,downloadMethod:String,isCollectioned:Boolean,item:Object},methods:{copyLinkToClipboard:function(){this.$emit("copyLinkToClipboard")},showSiteContentMenus:function(t){this.$emit("showSiteContentMenus",this.item,t)},saveTorrentFile:function(){this.$emit("saveTorrentFile",this.item)},addToCollection:function(){this.$emit("addToCollection",this.item)},deleteCollection:function(){this.$emit("deleteCollection",this.item)},downloadSuccess:function(t){this.$emit("downloadSuccess",t)},downloadError:function(t){this.$emit("downloadError",t)}}}),nt=it,at=(s("b4e2"),Object(S["a"])(nt,tt,et,!1,null,null,null)),ot=at.exports;T()(at,{VBtn:C["a"],VIcon:K["a"]});var rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"1024",fullscreen:t.$vuetify.breakpoint.smAndDown},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[s("v-btn",t._g({class:t.$vuetify.breakpoint.smAndUp?"":"mini",attrs:{dark:"",small:"",title:t.$t("keepUploadTask.keepUpload"),color:t.color}},i),[s("v-icon",{attrs:{small:""}},[t._v("merge_type")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.label||t.$t("keepUploadTask.keepUpload")))])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"blue-grey darken-2"}},[s("v-toolbar-title",[t._v(t._s(t.$t("keepUploadTask.verification")))]),s("v-spacer"),s("v-btn",{attrs:{icon:"",flat:"",color:"success",href:"https://github.com/pt-plugins/PT-Plugin-Plus/wiki/keep-upload-task",target:"_blank",rel:"noopener noreferrer nofollow",title:t.$t("common.help")}},[s("v-icon",[t._v("help")])],1)],1),s("v-card-text",{staticStyle:{"max-height":"80vh"}},[s("v-list",{attrs:{"two-line":"",subheader:"",dense:""}},[t._l(t.verifiedItems,(function(e,i){return[0==i?s("v-subheader",{key:i},[t._v(t._s(t.$t("keepUploadTask.baseTorrent")))]):t._e(),1==i?s("v-subheader",{key:i},[t._v(t._s(t.$t("keepUploadTask.otherTorrent")))]):t._e(),s("v-list-tile",{key:e.title},[s("v-list-tile-avatar",[s("v-avatar",{attrs:{size:"18"}},[s("img",{attrs:{src:e.data.site.icon}})])],1),s("v-list-tile-content",[s("v-list-tile-title",{staticClass:"list-item"},[s("a",{attrs:{href:e.data.link,target:"_blank",rel:"noopener noreferrer nofollow"}},[t._v(t._s(e.data.title))])]),s("v-list-tile-sub-title",[t._v(t._s(t.$t("keepUploadTask.size"))+t._s(t._f("formatSize")(e.data.size))+",\n                "+t._s(t.$t("keepUploadTask.fileCount"))+t._s(e.torrent?e.torrent.files.length:"N/A")+",\n                "+t._s(t.$t("keepUploadTask.status.label"))+t._s(e.status))])],1),s("v-list-tile-action",[s("div",[t.verifiedItems[0].verified&&!e.loading&&!e.verified&&i>0?s("v-btn",{staticClass:"mr-1",attrs:{icon:"",title:t.$t("keepUploadTask.addToKeepUpload")},on:{click:function(s){return s.stopPropagation(),t.addToVerified(e)}}},[s("v-icon",{attrs:{color:"info"}},[t._v("add")])],1):t._e(),t.verifiedItems[0].verified&&!e.loading&&!e.torrent&&i>0?s("v-btn",{staticClass:"mr-1",attrs:{icon:"",title:t.$t("keepUploadTask.redownload")},on:{click:function(e){return e.stopPropagation(),t.reDownload(i)}}},[s("v-icon",{attrs:{color:"green"}},[t._v("sync")])],1):t._e(),s("v-btn",{attrs:{icon:"",loading:e.loading,title:e.status}},[e.verified?s("v-icon",{attrs:{color:"success"}},[t._v("done_all")]):s("v-icon",{attrs:{color:"error",title:t.$t("keepUploadTask.removeFromKeepUpload")},on:{click:function(e){return e.stopPropagation(),t.deleteVerifiedItem(i)}}},[t._v("clear")])],1)],1)])],1),i>0?s("v-divider",{key:"d"+i,attrs:{inset:""}}):t._e()]}))],2)],1),t.$vuetify.breakpoint.smAndDown?s("v-divider"):t._e(),t.$vuetify.breakpoint.smAndDown&&t.downloadOptions?s("div",{staticClass:"caption ml-1 py-2"},[t._v("\n      "+t._s(t.$t("keepUploadTask.savePath"))+t._s(t.downloadOptions?t.downloadOptions.clientName+" -> "+t.downloadOptions.savePath:"")+"\n    ")]):t._e(),s("v-divider"),s("v-card-actions",[t.verifiedCount>1?[s("DownloadTo",{attrs:{flat:"","get-options-only":"",small:"",label:t.$vuetify.breakpoint.smAndDown?t.$t("keepUploadTask.setSavePath"):t.downloadOptions?t.downloadOptions.clientName+" -> "+t.downloadOptions.savePath:t.$t("keepUploadTask.setSavePath"),downloadOptions:t.items[0]},on:{itemClick:t.setDownloadOptions}}),t.downloadOptions&&t.verifiedItems.length>0?s("v-btn",{attrs:{flat:"",small:"",loading:t.creating,color:"info"},on:{click:t.create}},[s("v-icon",{attrs:{small:""}},[t._v("date_range")]),s("span",{staticClass:"ml-2"},[t._v(t._s(t.$t("keepUploadTask.create")))])],1):t._e()]:t._e(),s("v-spacer"),s("v-btn",{attrs:{color:"error",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v(t._s(t.$t("common.close")))])],2)],1),s("v-snackbar",{attrs:{top:"",timeout:3e3,color:"error"},model:{value:t.haveError,callback:function(e){t.haveError=e},expression:"haveError"}},[t._v(t._s(t.errorMsg))]),s("v-snackbar",{attrs:{bottom:"",timeout:3e3,color:"success"},model:{value:t.haveSuccess,callback:function(e){t.haveSuccess=e},expression:"haveSuccess"}},[t._v(t._s(t.successMsg))])],1)},lt=[],ct=new r["a"],dt=o["default"].extend({components:{DownloadTo:st["a"]},data:function(){return{dialog:!1,verified:!1,baseTorrent:null,loading:!1,verifiedItems:[],downloadOptions:null,creating:!1,errorMsg:"",haveError:!1,haveSuccess:!1,successMsg:"",verifiedCount:0}},props:{label:String,color:String,items:{type:Array,default:function(){return[]}}},mounted:function(){},watch:{dialog:function(){this.dialog&&this.start()},successMsg:function(){this.haveSuccess=""!=this.successMsg},errorMsg:function(){this.haveError=""!=this.errorMsg}},methods:{deleteVerifiedItem:function(t){this.$delete(this.verifiedItems,t)},setDownloadOptions:function(t){console.log(t),this.downloadOptions=t.downloadOptions},create:function(){var t=this;if(0!=this.verifiedItems.length&&this.downloadOptions){this.creating=!0;var e={title:this.verifiedItems[0].data.title,size:this.verifiedItems[0].data.size,downloadOptions:this.downloadOptions,items:[]},s=[];if(this.verifiedItems.forEach((function(t){if(t.verified){var e=G["a"].clone(t);e.data.site&&(e.data.host=e.data.site.host,delete e.data.site),["author","category","comments","completed","entryName","status","tags","titleHTML","progress","seeders","leechers"].forEach((function(t){e.data.hasOwnProperty(t)&&delete e.data[t]})),s.push(e.data)}})),0==s.length)return this.errorMsg=this.$t("keepUploadTask.noItem").toString(),void(this.creating=!1);e.items=s,console.log(e),ct.sendRequest(l["b"].createKeepUploadTask,null,e).then((function(e){t.successMsg=t.$t("keepUploadTask.createSuccess").toString(),setTimeout((function(){t.creating=!1,t.dialog=!1}),3e3),console.log("createKeepUploadTask",e),t.$root.$emit("KeepUploadTaskCreateSuccess")})).catch((function(){t.creating=!1,t.errorMsg=t.$t("keepUploadTask.createError").toString()}))}},start:function(){var t=this;this.baseTorrent=null,this.verifiedItems=[],this.verifiedCount=0,this.downloadOptions=null,this.clearMessage(),this.items.forEach((function(e,s){e.url&&(t.verifiedItems.push({data:e,torrent:null,loading:!0,verified:!1,status:t.$t("keepUploadTask.status.downloading").toString()}),t.getTorrent(e.url,s).then((function(e){t.verification(e,s)})).catch((function(){t.verification(null,s)})))}))},reDownload:function(t){var e=this;this.verifiedItems[t].loading=!0,this.verifiedItems[t].status=this.$t("keepUploadTask.status.downloading").toString(),this.getTorrent(this.verifiedItems[t].data.url,t).then((function(s){e.verification(s,t)})).catch((function(){e.verification(null,t)}))},verification:function(t,e){var s=this;if(0==e)this.baseTorrent||(this.baseTorrent=t,this.verifiedItems[0].loading=!1,t?(this.verifiedItems[0].torrent=this.baseTorrent.torrent,this.verifiedItems[0].verified=!0,this.verifiedItems[0].status=this.$t("keepUploadTask.status.downloaded").toString(),this.verifiedCount++):this.verifiedItems[0].verified=!1);else{if(this.verifiedItems[0].loading)return void setTimeout((function(){s.verification(t,e)}),200);var i={verified:!1,torrent:null,loading:!1};if(this.verifiedItems[0].verified||(i.status=this.$t("keepUploadTask.status.failed").toString()),!t||!this.verifiedItems[0].verified)return void(this.verifiedItems[e]=Object.assign(this.verifiedItems[e],i));var n=t.torrent,a=this.baseTorrent.torrent;n.name==a.name&&n.length==a.length&&n.files.length==a.files.length&&(i.verified=a.files.every((function(t,e){var s=n.files[e];return s.path==t.path&&s.length==t.length}))),i.torrent=n,i.verified&&this.verifiedCount++,i.status=i.verified?this.$t("keepUploadTask.status.success").toString():this.$t("keepUploadTask.status.failed").toString(),!i.verified&&n.name==a.name&&n.length<=a.length&&n.files.length<=a.files.length&&n.files.every((function(t){return a.files.find((function(e){return t.path==e.path&&t.length==e.length}))}))&&(n.files.length==a.files.length?i.status=this.$t("keepUploadTask.status.incorrectOrder").toString():i.status=this.$t("keepUploadTask.status.missingFiles").toString()),this.verifiedItems[e]=Object.assign(this.verifiedItems[e],i)}},getTorrent:function(t,e){var s=this;return new Promise((function(i,n){ct.sendRequest(l["b"].getTorrentDataFromURL,null,{url:t,parseTorrent:!0}).then((function(t){console.log(t),s.verifiedItems[e].status=s.$t("keepUploadTask.status.waiting").toString(),i(t)})).catch((function(t){s.verifiedItems[e].status=s.$t("keepUploadTask.status.downloadFailed").toString(),s.verifiedItems[e].error=!0,n(t)}))}))},clearMessage:function(){this.successMsg="",this.errorMsg=""},addToVerified:function(t){window.confirm(this.$t("keepUploadTask.addToKeepUploadConfirm").toString())&&(t.verified=!0,this.verifiedCount++)}}}),ht=dt,ut=(s("de67"),s("169a")),ft=s("8860"),pt=s("ba95"),gt=s("40fe"),vt=s("c954"),mt=s("5d23"),bt=s("2db4"),yt=s("e0c7"),_t=s("71d9"),St=s("2a7f"),kt=Object(S["a"])(ht,rt,lt,!1,null,"7d1e1804",null),Tt=kt.exports;T()(kt,{VAvatar:w["a"],VBtn:C["a"],VCard:x["a"],VCardActions:M["a"],VCardText:M["b"],VDialog:ut["a"],VDivider:R["a"],VIcon:K["a"],VList:ft["a"],VListTile:pt["a"],VListTileAction:gt["a"],VListTileAvatar:vt["a"],VListTileContent:mt["b"],VListTileSubTitle:mt["c"],VListTileTitle:mt["d"],VSnackbar:bt["a"],VSpacer:D["a"],VSubheader:yt["a"],VToolbar:_t["a"],VToolbarTitle:St["b"]});var wt=s("efd2"),Ct=new r["a"],xt=o["default"].extend({components:{MovieInfoCard:U,TorrentProgress:j,Actions:ot,AddToCollectionGroup:X,KeepUpload:Tt},data:function(){return{allSitesKey:"allSites",key:"",host:"",options:this.$store.state.options,getters:this.$store.getters,searchMsg:"",datas:[],getLinks:[],selected:[],pagination:{page:1,rowsPerPage:100,descending:!1,sortBy:""},loading:!1,errorMsg:"",haveError:!1,haveSuccess:!1,successMsg:"",currentSite:{},skipSites:"",beginTime:null,reloadCount:0,searchQueue:[],searchTimer:0,searchResult:{sites:{},tags:{},categories:{},failedSites:[],noResultsSites:[]},checkBox:!1,downloading:{count:0,completed:0,speed:0,progress:0},latestTorrentsKey:"__LatestTorrents__",latestTorrentsOnly:!1,searchSiteCount:0,sending:{count:0,completed:0,speed:0,progress:0},showCategory:!1,titleMiddleEllipsis:!1,fixedTable:!1,siteContentMenus:{},clientContentMenus:[],filterKey:"",filteredDatas:[],showFailedSites:!1,showNoResultsSites:!1,pathHandler:new p["a"],IMDbId:"",downloadFailedTorrents:[],lastCheckedIndex:-1,shiftKey:!1,searchPayload:{},torrentCollectionLinks:[],headerOrderClickCount:0,currentOrderMode:l["o"].asc,rawDatas:[],toolbarClass:"mt-3",toolbarIsFixed:!1}},created:function(){this.options.system||this.writeLog({event:"SearchTorrent.init",msg:this.$t("searchTorrent.optionsIsMissing").toString()}),this.pagination=this.$store.getters.pagination(l["l"].searchTorrent,{rowsPerPage:100});var t=this.$store.getters.viewsOptions(l["v"].searchTorrent,{checkBox:!1,showCategory:!1,titleMiddleEllipsis:!1});Object.assign(this,t),this.loadTorrentCollections()},mounted:function(){var t=this;wt["a"].$on("searchTorrent",this.eventSearchTorrent);var e="mousedown.torrentSearch",s="mouseUp.torrentSearch";$(".search-torrent").off(e),$(".search-torrent").off(s),$(".search-torrent").on(e,(function(e){t.shiftKey=e.shiftKey||!1})),$(".search-torrent").on(s,(function(e){t.shiftKey=!1})),window.addEventListener("scroll",this.handleScroll),this.$root.$on("KeepUploadTaskCreateSuccess",(function(){t.toggleAll()}))},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),wt["a"].$off("searchTorrent",this.eventSearchTorrent)},beforeRouteUpdate:function(t,e,s){t.params.key&&(this.key=t.params.key,this.host=t.params.host,s())},activated:function(){this.$route.params["key"]&&(this.key=this.$route.params["key"]),this.host=this.$route.params["host"],this.loadTorrentCollections(),this.handleScroll()},watch:{key:function(t,e){t&&t!=e&&(console.log("watch search key",t,e),this.doSearch())},host:function(t,e){t&&t!=e&&(console.log("watch search host",t,e),this.doSearch())},successMsg:function(){this.haveSuccess=""!=this.successMsg},errorMsg:function(){this.haveError=""!=this.errorMsg},"$store.state.options.defaultSearchSolutionId":function(t,e){console.log("watch search defaultSearchSolutionId",t,e),t!=e&&(this.$store.state.options.autoSearchWhenSwitchSolution?this.doSearch():console.log("切换搜索方案 - 跳过搜索, 可在 常规设置 - 搜索 中开启自动搜索"))},loading:function(){this.$store.commit("updateSearchStatus",this.loading)},pagination:{handler:function(){this.pagination.descending?this.currentOrderMode=l["o"].desc:this.currentOrderMode=l["o"].asc,this.updatePagination(this.pagination)},deep:!0},currentOrderMode:function(){this.pagination.descending=this.currentOrderMode===l["o"].desc},checkBox:function(){!1===this.checkBox&&(this.selected=[])}},methods:{eventSearchTorrent:function(t){console.log("Event: searchTorrent",t),this.doSearch()},writeLog:function(t){Ct.sendRequest(l["b"].writeLog,null,{module:l["k"].options,event:t.event,msg:t.msg,data:t.data})},doSearch:function(t){var e,s=this;clearTimeout(this.searchTimer),t&&(e=this.clone(t)),this.searchTimer=window.setTimeout((function(){s.search(e)}),220)},reset:function(){this.selected=[],this.clearMessage(),this.datas=[],this.rawDatas=[],this.getLinks=[],this.searchResult={sites:{},tags:{},categories:{},failedSites:[],noResultsSites:[]},this.filterKey="",this.searchPayload={}},search:function(t){var e=this;if(!this.loading&&this.key)if(this.reset(),"http:"!==window.location.protocol){if(!this.options.system)return this.reloadCount>=10?(this.errorMsg=this.$t("searchTorrent.optionsIsMissingErrorMsg").toString(),void this.writeLog({event:"SearchTorrent.init",msg:this.errorMsg})):(setTimeout((function(){e.search()}),200),void this.reloadCount++);if(this.options.sites){if(/(show-snapshot)-([a-z0-9]{32})/.test(this.key)){var s=this.key.match(/(show-snapshot)-([a-z0-9]{32})/);if(s)return void this.loadSearchResultSnapshot(s[2])}t&&(this.searchPayload=t);var i={id:"",cn:"",en:"",key:this.key};if(-1!==this.key.indexOf("|")){var n=(this.key+"||").split("|");i.id=n[0],i.cn=n[1],i.en=n[2],i.key=n[3],/(douban\d+)/.test(i.id)?this.searchPayload.doubanId=i.id.match(/douban(\d+)/)[1]:this.searchPayload.imdbId=i.id,this.searchPayload.cn=i.cn,this.searchPayload.en=i.en,this.searchPayload.key=i.key}if(/(douban\d+)/.test(this.key))return this.searchPayload.doubanId=this.key.match(/douban(\d+)/)[1],void this.getIMDbIdFromDouban(this.key).then((function(t){"string"==typeof t?(e.searchPayload.imdbId=t,e.key=t,e.search(e.searchPayload)):i.cn?(e.key=i.cn,e.search(e.searchPayload)):(e.errorMsg=e.$t("searchTorrent.doubanIdConversionFailed").toString(),e.searchMsg=e.errorMsg,e.loading=!1)})).catch((function(t){i.cn?(e.key=i.cn,e.search(e.searchPayload)):(e.errorMsg=t||e.$t("searchTorrent.doubanIdConversionFailed").toString(),e.searchMsg=e.errorMsg,e.loading=!1)}));var a=[],o=[];this.skipSites="",this.key===this.latestTorrentsKey?this.latestTorrentsOnly=!0:this.latestTorrentsOnly=!1,this.options=this.$store.state.options;var r=this.options.defaultSearchSolutionId;if(/^[a-z0-9]{32}$/.test(this.host)?(r=this.host,this.host=""):"all"===this.host&&(r="all",this.host=""),this.host){var l=this.options.sites.find((function(t){return t.host===e.host&&!t.offline}));l&&a.push(this.clone(l))}else if(r&&this.options.searchSolutions&&"all"!=r){var c=[];this.options.sites.forEach((function(t){if(t.offline)return!1;c.push(e.clone(t))}));var d=this.options.searchSolutions.find((function(t){return t.id===r}));d&&d.range.forEach((function(t){var e=c.findIndex((function(e){return e.host===t.host}));if(e>-1){var s=c[e],i=s.searchEntry;i&&(i.forEach((function(t,e){i[e].enabled=!1})),t.entry&&t.entry.forEach((function(t){var e=i.findIndex((function(e){return e.id==t||e.name==t}));i[e]&&i[e].name&&(i[e].enabled=!0)}))),a.push(s)}}))}else this.options.sites.forEach((function(t){if(t.offline)return!1;if(t.allowSearch||"all"==r){var s=e.getSiteSchema(t);s&&s.searchEntry&&s.searchEntry.length>0||t.searchEntry&&t.searchEntry.length>0?a.push(e.clone(t)):o.push(t.name)}}));if(o.length>0&&(this.skipSites=this.$t("searchTorrent.skipSites").toString()+o.join(",")),0!==a.length){if(this.searchSiteCount=a.length,this.beginTime=h()(),this.writeLog({event:"SearchTorrent.Search.Start",msg:this.$t("searchTorrent.searchStartMsg",{count:a.length}).toString(),data:{key:this.key}}),this.$store.dispatch("saveConfig",{lastSearchKey:this.searchPayload.key||this.key}),this.pagination.page=1,/(tt\d+)/.test(this.key)){var u=this.key.match(/(tt\d+)/);u&&u.length>=2&&(this.key=u[1]),this.IMDbId=this.key}else this.IMDbId="";this.doSearchTorrentWithQueue(a)}else this.errorMsg=this.$t("searchTorrent.noAllowSearchSites").toString()}else this.errorMsg=this.$t("searchTorrent.sitesIsMissing").toString()}else $.getJSON("http://".concat(window.location.hostname,":8001/test/searchData.json")).done((function(t){t&&e.addSearchResult(t)}))},doSearchTorrentWithQueue:function(t){var e=this;this.loading=!0,this.searchMsg=this.$t("searchTorrent.searching").toString(),t.forEach((function(t,s){e.IMDbId&&t.searchEntryConfig&&t.searchEntryConfig.skipIMDbId||(e.searchQueue.push({site:t,key:e.key}),e.writeLog({event:"SearchTorrent.Search.Processing",msg:e.$t("searchTorrent.siteIsSearching",{siteName:t.name}).toString(),data:{host:t.host,name:t.name,key:e.key}}),e.sendSearchRequest(G["a"].clone(t)))}))},sendSearchRequest:function(t){var e=this;Ct.sendRequest(l["b"].getSearchResult,null,{key:this.latestTorrentsOnly?"":this.key,site:t,payload:this.searchPayload}).then((function(s){if(s&&s.length)return e.writeLog({event:"SearchTorrent.Search.Done[".concat(t.name,"]"),msg:e.$t("searchTorrent.siteIsSearchDone",{siteName:t.name,count:s.length}).toString(),data:{host:t.host,name:t.name,key:e.key}}),void e.addSearchResult(s);s&&s.msg?(e.writeLog({event:"SearchTorrent.Search.Error1",msg:s.msg,data:{host:t.host,name:t.name,key:e.key}}),e.errorMsg=s.msg):s&&"abort"==s.statusText?e.errorMsg=e.$t("searchTorrent.siteSearchAbort",{host:t.host}).toString():(s&&"timeout"==s.statusText?e.errorMsg=e.$t("searchTorrent.siteSearchTimeout",{host:t.host}).toString():e.errorMsg=e.$t("searchTorrent.siteSearchError",{host:t.host}).toString(),e.writeLog({event:"SearchTorrent.Search.Error2",msg:e.errorMsg,data:{host:t.host,name:t.name,key:e.key,result:s}})),e.searchResult.failedSites.push({site:t,msg:e.errorMsg,color:"orange darken-1"})})).catch((function(s){console.log(s),s.msg&&(e.errorMsg=s.msg),e.writeLog({event:"SearchTorrent.Search.Error3",msg:s.msg,data:s}),s.data&&0==s.data.isLogged?e.searchResult.failedSites.push({site:t,url:t.url,msg:e.$t("searchTorrent.notLogged").toString(),color:"grey"}):s.type===l["h"].error?e.searchResult.failedSites.push({site:t,url:t.url,msg:s.msg||s.data||s,color:"grey"}):e.searchResult.noResultsSites.push({site:t,msg:s.msg||s.data||s,color:"light-blue darken-2"})})).finally((function(){e.removeQueue(t)}))},abortSearch:function(t){var e=this;Ct.sendRequest(l["b"].abortSearch,null,{key:this.key,site:t}).then((function(){e.writeLog({event:"SearchTorrent.Search.Abort",msg:e.$t("searchTorrent.siteSearchAbort",{host:t.name}).toString()})})).catch((function(){e.writeLog({event:"SearchTorrent.Search.Abort.Error",msg:e.$t("searchTorrent.siteSearchAbortError",{host:t.name}).toString()}),e.removeQueue(t)}))},removeQueue:function(t){var e=this.searchQueue.findIndex((function(e){return e.site.host===t.host}));-1!==e&&(this.searchQueue.splice(e,1),0==this.searchQueue.length&&(this.searchMsg=this.$t("searchTorrent.searchFinished",{count:this.datas.length,second:h()().diff(this.beginTime,"second",!0)}).toString(),this.loading=!1,this.writeLog({event:"SearchTorrent.Search.Finished",msg:this.searchMsg,data:{key:this.key}})))},createSearchResultSnapshot:function(){var t=this;Ct.sendRequest(l["b"].createSearchResultSnapshot,null,{key:this.key,searchPayload:this.searchPayload,result:this.rawDatas}).then((function(e){t.successMsg=t.$t("searchResultSnapshot.createSuccess").toString(),console.log("createSearchResultSnapshot",e)})).catch((function(){t.errorMsg=t.$t("searchResultSnapshot.createError").toString()}))},loadSearchResultSnapshot:function(t){var e=this;this.loading=!0,Ct.sendRequest(l["b"].getSearchResultSnapshot,null,t).then((function(t){console.log("loadSearchResultSnapshot",t),e.key=t.key,e.searchPayload=t.searchPayload,e.searchPayload&&e.searchPayload.imdbId?e.IMDbId=e.searchPayload.imdbId:/^(tt\d+)$/.test(e.key)?e.IMDbId=e.key:e.IMDbId="",e.addSearchResult(G["a"].clone(t.result)),e.searchMsg=e.$t("searchResultSnapshot.snapshotTime",{time:h()(t.time).format("YYYY-MM-DD hh:mm:ss")}).toString(),setTimeout((function(){e.loading=!1}),300)}))},addSearchResult:function(t){var e=this,s=this.allSitesKey;this.searchResult.sites[s]||(this.searchResult.sites[s]=[]),t.forEach((function(t){var s=G["a"].clone(t);if(s.site&&(s.host=s.site.host,delete s.site),e.rawDatas.push(s),t.link=t.link.replace("://","****").replace(/\/\//g,"/").replace("****","://"),!e.getLinks.includes(t.link)){if(!t.site){var i=t.host||"";if(t.site=G["a"].getSiteFromHost(i,e.options),!t.site)return}if(!t.progress&&!t.status&&t.site&&t.site.user&&t.site.user.seedingList){var n=t.site.user.seedingList,a=n.some((function(e){return t.id&&t.id==e}));a&&(t.progress=100,t.status=2)}if(h()(t.time).isValid()){var o=t.time+"";/^(\d){10}$/.test(o+"")?t.time=1e3*parseInt(o):t.time=h()(o).valueOf(),t.time=G["a"].transformTime(t.time,t.site.timezoneOffset)}else if("string"==typeof t.time){var r=c["a"].timeAgoToNumber(t.time);r>0&&(t.time=r)}t.titleHTML||(t.titleHTML=t.title),t.title=$("<span/>").html(t.titleHTML).text().trim(),t.size&&(t.size=e.fileSizetoLength(t.size)),t.seeders&&"string"==typeof t.seeders&&(t.seeders=parseInt(t.seeders.replace(",","")),isNaN(t.seeders)&&(t.seeders=0)),t.leechers&&"string"==typeof t.leechers&&(t.leechers=parseInt(t.leechers.replace(",","")),isNaN(t.leechers)&&(t.leechers=0)),t.completed&&"string"==typeof t.completed&&(t.completed=parseInt(t.completed.replace(",","")),isNaN(t.completed)&&(t.completed=0)),t.url&&(t.url=t.url.replace("://","****").replace(/\/\//g,"/").replace("****","://")),e.datas.push(t),e.getLinks.push(t.link),e.searchMsg=e.$t("searchTorrent.searchProgress",{count:e.datas.length}).toString();var l=t.site.name;e.searchResult.sites[l]||(e.searchResult.sites[l]=[]),e.searchResult.sites[l].push(t),e.addTagResult(t),e.addCategoryResult(t)}})),this.searchResult.sites[s]=this.datas.sort((function(t,e){return t.title.localeCompare(e.title,void 0,{sensitivity:"base"})}))},addTagResult:function(t){var e=this,s=this.$t("searchTorrent.noTag").toString();this.searchResult.tags[s]||(this.searchResult.tags[s]={tag:{name:s,color:"blue-grey darken-2"},items:[]}),void 0!=t.tags&&null!=t.tags&&t.tags.length?t.tags.forEach((function(s){var i=s.name;i&&(e.searchResult.tags[i]||(e.searchResult.tags[i]={tag:s,items:[]}),e.searchResult.tags[i].items.push(t))})):this.searchResult.tags[s].items.push(t)},addCategoryResult:function(t){if(t.category){var e="";"string"==typeof t.category?(e=t.category,t.category={name:e}):e=t.category.name,e&&(this.searchResult.categories[e]||(this.searchResult.categories[e]={name:e,items:[]}),this.searchResult.categories[e].items.push(t))}},fileSizetoLength:function(t){if("number"==typeof t)return t;var e=t.replace(/,/g,"").trim().match(/^(\d*\.?\d+)(.*[^ZEPTGMK])?([ZEPTGMK](B|iB))$/i);if(e){var s=parseFloat(e[1]),i=e[3];switch(!0){case/Zi?B/i.test(i):return s*Math.pow(2,70);case/Ei?B/i.test(i):return s*Math.pow(2,60);case/Pi?B/i.test(i):return s*Math.pow(2,50);case/Ti?B/i.test(i):return s*Math.pow(2,40);case/Gi?B/i.test(i):return s*Math.pow(2,30);case/Mi?B/i.test(i):return s*Math.pow(2,20);case/Ki?B/i.test(i):return s*Math.pow(2,10);default:return s}}return 0},getSiteSchema:function(t){var e={};return"string"===typeof t.schema&&(e=this.options.system&&this.options.system.schemas&&this.options.system.schemas.find((function(e){return e.name==t.schema}))),e},sendToClient:function(t,e,s,i){var n=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5?arguments[5]:void 0;console.log(t),this.clearMessage();var r=c["a"].parseURL(t).host,d=this.options.sites.find((function(t){if(t.cdn){var e=t.cdn.findIndex((function(t){return t.indexOf(r)>-1}));if(e>-1)return!0}return t.host===r})),h={},u="";s?(h=s.client,u=s.path):(h=this.getters.clientOptions(d),u=this.getters.siteDefaultPath(d));var f=this.pathHandler.getSavePath(u,d);if(!1!==f){this.haveSuccess=!0,this.successMsg=this.$t("searchTorrent.seedingTorrent").toString();var p={url:t,title:e,savePath:f,autoStart:h.autoStart,tagIMDb:h.tagIMDb,clientId:h.id,link:a,imdbId:o};this.writeLog({event:"SearchTorrent.sendTorrentToClient",msg:this.$t("searchTorrent.sendTorrentToClient").toString(),data:p}),Ct.sendRequest(l["b"].sendTorrentToClient,null,p).then((function(t){console.log("命令执行完成",t),"success"==t.type?(n.successMsg=t.msg,n.writeLog({event:"SearchTorrent.sendTorrentToClient.Success",msg:n.$t("searchTorrent.sendTorrentToClientSuccess").toString(),data:t})):(n.errorMsg=t.msg,n.writeLog({event:"SearchTorrent.sendTorrentToClient.Error",msg:n.$t("searchTorrent.sendTorrentToClientError").toString(),data:t})),i&&i()})).catch((function(t){n.writeLog({event:"SearchTorrent.sendTorrentToClient.Error",msg:n.$t("searchTorrent.sendTorrentToClientError").toString(),data:t}),n.errorMsg=t.msg,i&&i()}))}else this.errorMsg=this.$t("searchTorrent.userCanceled").toString()},updatePagination:function(t){console.log(t),this.$store.dispatch("updatePagination",{key:l["l"].searchTorrent,options:t})},getRandomString:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=e?"abcdefhijkmnprstwxyz2345678ABCDEFGHJKMNPQRSTWXYZ":"abcdefghijkmnopqrstuvwxyz0123456789ABCDEFGHIJKMNOPQRSTUVWXYZ",i=s.length,n=[],a=0;a<t;a++)n.push(s.charAt(Math.floor(Math.random()*i)));return n.join("")},resetDatas:function(t){this.loading||t.length&&(this.pagination.page=1,this.datas=t,this.selected=[])},downloadSelected:function(){var t=this,e=[];if(this.selected.forEach((function(s){s.url&&e.push({url:s.url,fileName:"[".concat(s.site.name,"][").concat(s.title,"].torrent"),method:s.site.downloadMethod,timeout:t.options.connectClientTimeout})})),console.log(e),e.length){if(e.length>1&&!confirm(this.$t("searchTorrent.multiDownloadConfirm").toString()))return;this.downloadTorrentFiles(e)}},downloadTorrentFiles:function(t){var e=this;this.downloading.count=t.length,this.downloading.completed=0,this.downloading.speed=0,this.downloading.progress=0,new u["a"]({files:t,autoStart:!0,tagIMDb:!0,onCompleted:function(t){e.downloadTorrentFilesCompleted(t)},onError:function(t,s){e.downloadTorrentFilesCompleted(),e.writeLog({event:"SearchTorrent.downloadSelected.Error",msg:e.$t("searchTorrent.downloadSelectedError",{name:t.fileName}).toString(),data:s});var i=e.downloadFailedTorrents.findIndex((function(e){return e.url==t.url}));-1==i&&e.downloadFailedTorrents.push(t)}})},downloadTorrentFilesCompleted:function(t){if(this.downloading.completed++,this.downloading.progress=this.downloading.completed/this.downloading.count*100,this.downloading.completed>=this.downloading.count&&(this.downloading.count=0,this.selected=[]),t)for(var e=0;e<this.downloadFailedTorrents.length;e++){var s=this.downloadFailedTorrents[e];if(s.url==t.url){this.downloadFailedTorrents.splice(e,1);break}}},saveTorrentFile:function(t){var e=l["m"].GET;t.site&&(e=t.site.downloadMethod||l["m"].GET);var s=t.url+"",i=new u["b"]({url:s,timeout:this.options.connectClientTimeout,fileName:"[".concat(t.site.name,"][").concat(t.title,"].torrent")});i.requestMethod=e,i.onError=function(t){},i.start()},sendSelectedToClient:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(void 0===t&&(t=Object(a["a"])(this.selected),s=t.length,this.sending.count=s,this.sending.completed=0,this.sending.speed=0,this.sending.progress=0),0!==t.length){var n=t.shift();console.log(n.imdbId),this.sendToClient(n.url,n.title,i,(function(){if(e.sending.completed++,e.sending.progress=e.sending.completed/e.sending.count*100,e.sending.completed>=e.sending.count)return e.sending.count=0,void(e.selected=[]);e.sendSelectedToClient(t,s,i)}),n.link,n.imdbId)}else this.sending.count=0},copyLinkToClipboard:function(t){var e=this;this.successMsg="",this.errorMsg="",Ct.sendRequest(l["b"].copyTextToClipboard,null,t).then((function(t){e.successMsg=e.$t("searchTorrent.copyLinkToClipboardSuccess").toString()})).catch((function(){e.errorMsg=e.$t("searchTorrent.copyLinkToClipboardError").toString()}))},getSelectedURLs:function(){var t=[];return this.selected.forEach((function(e){e.url&&t.push(e.url)})),t},copySelectedToClipboard:function(){var t=this,e=this.getSelectedURLs();this.clearMessage(),Ct.sendRequest(l["b"].copyTextToClipboard,null,e.join("\n")).then((function(s){t.successMsg=t.$t("searchTorrent.copySelectedToClipboardSuccess",{count:e.length}).toString(),t.selected=[]})).catch((function(){t.errorMsg=t.$t("searchTorrent.copyLinkToClipboardError").toString()}))},clearMessage:function(){this.successMsg="",this.errorMsg="",this.haveSuccess=!1,this.haveError=!1},getSiteContentMenus:function(t){var e=[],s=[],i=t.host;if(!i)return[];if(this.siteContentMenus[i])return this.siteContentMenus[i];function n(s,i){s.forEach((function(s){e.push({client:i,path:s,host:t.host})}))}return this.options.clients.forEach((function(i){if(s.push({client:i,path:"",host:t.host}),i.paths){for(var a in i.paths){var o=i.paths[a];a===t.host&&n(o,i)}var r=i.paths[l["f"].allSite];r&&(e.length>0&&e.push({}),n(r,i))}})),e.length>0&&s.splice(0,0,{}),e=e.concat(s),this.siteContentMenus[i]=e,e},showSiteContentMenus:function(t,e){var s=this,i=this.getSiteContentMenus(t.site),n=[];i.forEach((function(e){e.client&&e.client.name?n.push({title:s.$t("searchTorrent.downloadTo",{path:"".concat(e.client.name," -> ").concat(e.client.address)+(e.path?" -> ".concat(s.pathHandler.replacePathKey(e.path,t.site)):"")}).toString(),fn:function(){t.url&&s.sendToClient(t.url,t.title,e,null,t.link,t.imdbId)}}):n.push({})})),console.log(i,n),f["show"](n,e),$(".basicContext").css({left:"-=20px",top:"+=10px"})},showAllContentMenus:function(t){var e=this,s=[],i=[],n=this;function a(t){var e=n.$vuetify.breakpoint.xs?t.client.name:n.$t("searchTorrent.downloadTo",{path:"".concat(t.client.name," -> ").concat(t.client.address)}).toString();t.path&&(e+=" -> ".concat(t.path)),i.push({title:e,fn:function(){n.sendSelectedToClient(void 0,0,t)}})}0==this.clientContentMenus.length?(this.options.clients.forEach((function(t){s.push({client:t,path:""})})),s.forEach((function(t){if(t.client&&t.client.name){if(a(t),t.client.paths){var s=t.client.paths[l["f"].allSite];s&&s.forEach((function(s){if(-1==s.indexOf("$site.name$")&&-1==s.indexOf("$site.host$")&&-1==s.indexOf("<...>")){var i=e.clone(t);i.path=s,a(i)}}))}}else i.push({})})),this.clientContentMenus=i):i=this.clientContentMenus,f["show"](i,t),$(".basicContext").css({left:"-=20px",top:"+=10px"})},reSearchWithSite:function(t){var e=this.options.sites.find((function(e){return e.host===t}));if(e){var s=this.searchResult.failedSites.findIndex((function(e){return e.site.host===t}));-1!==s&&this.searchResult.failedSites.splice(s,1),s=this.searchResult.noResultsSites.findIndex((function(e){return e.site.host===t})),-1!==s&&this.searchResult.noResultsSites.splice(s,1),this.doSearchTorrentWithQueue([e])}},reSearchFailedSites:function(){if(0==this.searchResult.failedSites.length)return!1;var t=[];this.searchResult.failedSites.forEach((function(e){t.push(e.site)})),0!==t.length?(this.searchResult.failedSites=[],this.beginTime=h()(),this.writeLog({event:"SearchTorrent.Search.Start",msg:this.$t("searchTorrent.searchStartMsg",{count:t.length}).toString(),data:{key:this.key}}),this.doSearchTorrentWithQueue(t)):this.errorMsg=this.$t("searchTorrent.noReSearchSites").toString()},clone:function(t){return JSON.parse(JSON.stringify(t))},searchResultFilter:function(t,e){if(e=e.toString().toLowerCase(),this.filteredDatas=[],""===e.trim())return t;var s=e.split(" ");return this.filteredDatas=t.filter((function(t){var e=(t.title+(t.subTitle||"")).toLowerCase(),i=!0;return s.forEach((function(t){""!=t.trim()&&(i=i&&e.indexOf(t)>-1)})),i})),this.filteredDatas},getIMDbIdFromDouban:function(t){var e=this,s=t.match(/douban(\d+)/);return s&&s.length>=2?(this.searchMsg=this.$t("searchTorrent.doubanIdConverting").toString(),Ct.sendRequest(l["b"].getIMDbIdFromDouban,null,s[1])):new Promise((function(t,s){s(e.$t("searchTorrent.invalidDoubanId").toString())}))},reDownloadFailedTorrents:function(){this.downloadTorrentFiles(this.downloadFailedTorrents)},shiftCheck:function(t,e){var s=this;if(-1!==this.lastCheckedIndex){if(this.shiftKey){var i=e,n=this.lastCheckedIndex,a=Math.min(i,n),o=Math.max(i,n)+1,r=this.clone(this.filteredDatas.length>0?this.filteredDatas:this.datas);r=r.sort(this.arrayObjectSort(this.pagination.sortBy,this.pagination.descending?l["o"].desc:l["o"].asc));for(var c=function(){var e=r[d],i=s.selected.findIndex((function(t){return t.link===e.link}));t?-1===i&&s.selected.push(e):-1!==i&&s.selected.splice(i,1)},d=a;d<o;d++)c()}this.lastCheckedIndex=e}else this.lastCheckedIndex=e},arrayObjectSort:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l["o"].asc;function s(t,e){return new Function("o","return o."+e)(t)}return function(i,n){var a=s(i,t),o=s(n,t);return a<o?e==l["o"].desc?1:-1:a>o?e==l["o"].desc?-1:1:0}},addSelectedToCollection:function(t){var e=this;this.selected.forEach((function(s){s.url&&e.addToCollection(s,t)}))},addToCollection:function(t,e){var s=this,i={title:t.title,url:t.url,link:t.link,host:t.site.host,size:t.size,subTitle:t.subTitle,movieInfo:{imdbId:this.IMDbId||this.searchPayload.imdbId,doubanId:this.searchPayload.doubanId}};e&&e.id&&(i.groups=[e.id]),Ct.sendRequest(l["b"].addTorrentToCollection,null,i).then((function(t){s.loadTorrentCollections(),console.log(t)}))},deleteCollection:function(t){var e=this;Ct.sendRequest(l["b"].deleteTorrentFromCollention,null,{link:G["a"].getCleaningURL(t.link)}).then((function(t){e.loadTorrentCollections()}))},loadTorrentCollections:function(){var t=this;Ct.sendRequest(l["b"].getAllTorrentCollectionLinks).then((function(e){t.torrentCollectionLinks=e}))},isCollectioned:function(t){return this.torrentCollectionLinks.includes(G["a"].getCleaningURL(t))},toggleAll:function(){this.selected.length>0?this.selected=[]:this.filteredDatas.length>0?this.selected=this.filteredDatas.slice():this.selected=this.datas.slice()},changeSort:function(t){this.pagination.sortBy===t?(this.pagination.descending=!this.pagination.descending,this.headerOrderClickCount++,2==this.headerOrderClickCount&&(this.pagination.sortBy="")):(this.headerOrderClickCount=0,this.pagination.sortBy=t,this.pagination.descending=!1)},getHeaderClass:function(t){var e=[];return e.push("column"),!1!==t.sortable&&(e.push("sortable"),e.push(this.pagination.descending?"desc":"asc"),t.value===this.pagination.sortBy&&e.push("active")),t.align&&e.push("text-xs-".concat(t.align)),e},downloadSuccess:function(t){this.successMsg=t},downloadError:function(t){this.errorMsg=t},updateViewOptions:function(){this.$store.dispatch("updateViewOptions",{key:l["v"].searchTorrent,options:{checkBox:this.checkBox,showCategory:this.showCategory,titleMiddleEllipsis:this.titleMiddleEllipsis}})},handleScroll:function(){var t=$("#divToolbar");if(t&&t.offset()){var e=$("#system-topbar"),s=e.height(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=t.offset().top;if(i+s>n){this.toolbarClass="isFixedToolbar",this.toolbarIsFixed=!0;var a=$("#divToobarInner").height()||0;$("#divToobarHeight").height(a),$("#divToobarInner").css({top:s})}else this.toolbarIsFixed=!1,this.toolbarClass="mt-3"}}},computed:{headers:function(){return[{text:this.$t("searchTorrent.headers.site"),align:"center",value:this.$store.state.options.searchResultOrderBySitePriority?"site.priority":"site.host",visible:this.$vuetify.breakpoint.mdAndUp},{text:this.$t("searchTorrent.headers.title"),align:"left",value:"title",visible:!0},{text:this.$t("searchTorrent.headers.category"),align:"center",value:"category.name",width:"150px",visible:this.$vuetify.breakpoint.width>1200},{text:this.$t("searchTorrent.headers.size"),align:"right",value:"size",width:"100px",visible:this.$vuetify.breakpoint.smAndUp},{text:this.$t("searchTorrent.headers.seeders"),align:"right",value:"seeders",width:"60px",visible:this.$vuetify.breakpoint.smAndUp},{text:this.$t("searchTorrent.headers.leechers"),align:"right",value:"leechers",width:"60px",visible:this.$vuetify.breakpoint.mdAndUp},{text:this.$t("searchTorrent.headers.completed"),align:"right",value:"completed",width:"60px",visible:this.$vuetify.breakpoint.mdAndUp},{text:this.$t("searchTorrent.headers.comments"),align:"right",value:"comments",width:"60px",visible:this.$vuetify.breakpoint.smAndUp},{text:this.$t("searchTorrent.headers.time"),align:"left",value:"time",width:"130px",visible:this.$vuetify.breakpoint.mdAndUp},{text:this.$t("searchTorrent.headers.action"),sortable:!1,width:this.$vuetify.breakpoint.mdAndUp?"130px":"80px",align:"center",visible:this.$vuetify.breakpoint.smAndUp}]},orderHeaders:function(){return this.headers.filter((function(t){return!1!==t.sortable}))},orderMode:function(){return[{text:this.$t("common.orderMode.asc"),value:l["o"].asc},{text:this.$t("common.orderMode.desc"),value:l["o"].desc}]},indeterminate:function(){return this.selected.length>0&&this.selected.length<this.datas.length},selectedSize:function(){if(this.selected.length>0){var t=0;return this.selected.forEach((function(e){var s=e.size;s>0&&(t+=s)})),t}return 0}}}),$t=xt,Mt=(s("653e"),s("0798")),It=s("ac7c"),Rt=s("cc20"),Et=s("a523"),At=s("8fea"),Pt=s("e449"),Ot=s("490a"),Dt=s("67b6"),Lt=s("43a6"),Ut=s("b56d"),Vt=s("b73d"),Ft=s("2677"),Bt=Object(S["a"])($t,i,n,!1,null,null,null);e["default"]=Bt.exports;T()(Bt,{VAlert:Mt["a"],VAvatar:w["a"],VBtn:C["a"],VCard:x["a"],VCardTitle:I["a"],VCheckbox:It["a"],VChip:Rt["a"],VContainer:Et["a"],VDataTable:At["a"],VDivider:R["a"],VFlex:E["a"],VIcon:K["a"],VLayout:P["a"],VList:ft["a"],VListTile:pt["a"],VListTileAction:gt["a"],VListTileContent:mt["b"],VListTileTitle:mt["d"],VMenu:Pt["a"],VProgressCircular:Ot["a"],VRadio:Dt["a"],VRadioGroup:Lt["a"],VSelect:Ut["a"],VSnackbar:bt["a"],VSwitch:Vt["a"],VTextField:Ft["a"]})},"2f21":function(t,e,s){"use strict";var i=s("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3046:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-btn",{class:[t.mini?"btn-mini":""],attrs:{flat:t.flat,icon:t.icon,small:t.small,loading:t.loading,title:t.title||t.$t("searchTorrent.sendToClientTip"),color:t.color},on:{click:function(e){return e.stopPropagation(),t.showSiteContentMenus.apply(null,arguments)}}},[t.haveSuccess?s("v-icon",{attrs:{color:"success",small:""}},[t._v("done")]):t.haveError?s("v-icon",{attrs:{color:"red",small:""}},[t._v("close")]):s("v-icon",{attrs:{small:""}},[t._v(t._s(t.iconText))]),t.label?s("span",{staticClass:"ml-2"},[t._v(t._s(t.label))]):t._e()],1)},n=[],a=(s("6b54"),s("b54a"),s("7f7f"),s("7514"),s("ac6a"),s("c5f6"),s("2b0e")),o=s("f62e"),r=s("14b5"),l=s("a1f4"),c=s("0a02"),d=new l["a"],h=a["default"].extend({props:{flat:Boolean,icon:Boolean,small:Boolean,mini:Boolean,color:String,iconText:{type:String,default:"cloud_download"},downloadOptions:{type:[Object,Array],default:function(){return{host:String,url:String}}},getOptionsOnly:Boolean,label:String,title:String,payload:[Object,Array,String,Number]},data:function(){return{options:this.$store.state.options,contentMenus:[],pathHandler:new r["a"],loading:!1,site:{},haveSuccess:!1,haveError:!1,allContentMenus:[]}},methods:{getSiteContentMenus:function(t){var e=[],s=[];if(this.contentMenus&&this.contentMenus.length>0)return this.contentMenus;function i(s,i){s.forEach((function(s){e.push({client:i,path:s,host:t})}))}return this.options.clients.forEach((function(n){if(s.push({client:n,path:"",host:t}),n.paths){for(var a in n.paths){var r=n.paths[a];t===a&&i(r,n)}var l=n.paths[o["f"].allSite];l&&(e.length>0&&e.push({}),i(l,n))}})),e.length>0&&s.splice(0,0,{}),e=e.concat(s),this.contentMenus=e,e},getSiteFromHost:function(t){return this.options.sites.find((function(e){var s=e.cdn||[];return e.url&&s.push(e.url),e.host==t||s.join("").indexOf(t)>-1}))},showSiteContentMenus:function(t){var e=this;if(Array.isArray(this.downloadOptions))this.showAllContentMenus(t);else{var s=this.downloadOptions,i=s.host;if(!i&&s.site&&(i=s.site.host),i){this.site=s.site||this.getSiteFromHost(i);var n=this.getSiteContentMenus(i),a=[];n.forEach((function(t){if(t.client&&t.client.name){var i=e.$vuetify.breakpoint.xs?t.client.name:e.$t("searchTorrent.downloadTo",{path:"".concat(t.client.name," -> ").concat(t.client.address)});t.path&&(i+=" ->".concat(e.pathHandler.replacePathKey(t.path,e.site))),a.push({title:i,fn:function(){if(s.url){console.log(s,t);var i={url:s.url,title:s.title,savePath:t.path,autoStart:t.client.autoStart,tagIMDb:t.client.tagIMDb,link:s.link,clientId:t.client.id,imdbId:s.imdbId};if(e.getOptionsOnly)return i.savePath=e.pathHandler.getSavePath(i.savePath,e.site),void e.$emit("itemClick",{payload:e.payload,downloadOptions:Object.assign({clientName:t.client.name},i)});e.sendToClient(i)}}})}else a.push({})})),c["a"].showContextMenu(a,t)}}},showAllContentMenus:function(t){var e=[],s=[],i=this;function n(t){var e=i.$t("searchTorrent.downloadTo",{path:"".concat(t.client.name," -> ").concat(t.client.address)}).toString();t.path&&(e+=" -> ".concat(t.path)),s.push({title:e,fn:function(){i.sendTorrentsInBackground(t)}})}0==this.allContentMenus.length?(this.options.clients.forEach((function(t){e.push({client:t,path:""})})),e.forEach((function(t){if(t.client&&t.client.name){if(n(t),t.client.paths){var e=t.client.paths[o["f"].allSite];e&&e.forEach((function(e){if(-1==e.indexOf("$site.name$")&&-1==e.indexOf("$site.host$")&&-1==e.indexOf("<...>")){var s=c["a"].clone(t);s.path=e,n(s)}}))}}else s.push({})})),this.allContentMenus=s):s=this.allContentMenus,c["a"].showContextMenu(s,t)},sendTorrentsInBackground:function(t){var e=this,s=[];this.downloadOptions.forEach((function(e){s.push({title:e.title,url:e.url,clientId:t.client.id,savePath:t.path,autoStart:t.client.autoStart,tagIMDb:t.client.tagIMDb,link:e.link,imdbId:e.imdbId})})),this.loading=!0,d.sendRequest(o["b"].sendTorrentsInBackground,null,s).then((function(t){console.log("命令执行完成",t),e.haveSuccess=!0,e.$emit("success",t)})).catch((function(t){console.log(t),e.haveError=!0,e.$emit("error",t.msg||t)})).finally((function(){e.loading=!1,setTimeout((function(){e.clearStatus()}),5e3)}))},sendToClient:function(t){var e=this;this.clearStatus();var s=this.pathHandler.getSavePath(t.savePath,this.site);!1!==s&&(this.loading=!0,t.savePath=s,d.sendRequest(o["b"].sendTorrentToClient,null,t).then((function(t){console.log("命令执行完成",t),"success"==t.type?(e.haveSuccess=!0,e.$emit("success",t.msg)):(e.haveError=!0,e.$emit("error",t.msg))})).catch((function(t){console.log(t),e.haveError=!0,e.$emit("error",t.msg||t)})).finally((function(){e.loading=!1,setTimeout((function(){e.clearStatus()}),5e3)})))},clearStatus:function(){this.haveSuccess=!1,this.haveError=!1}}}),u=h,f=s("2877"),p=s("6544"),g=s.n(p),v=s("8336"),m=s("132d"),b=Object(f["a"])(u,i,n,!1,null,null,null);e["a"]=b.exports;g()(b,{VBtn:v["a"],VIcon:m["a"]})},3362:function(t,e,s){},"386b":function(t,e,s){var i=s("5ca1"),n=s("79e5"),a=s("be13"),o=/"/g,r=function(t,e,s,i){var n=String(a(t)),r="<"+e;return""!==s&&(r+=" "+s+'="'+String(i).replace(o,"&quot;")+'"'),r+">"+n+"</"+e+">"};t.exports=function(t,e){var s={};s[t]=e(r),i(i.P+i.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",s)}},"43a6":function(t,e,s){"use strict";s("94a7"),s("60d0");var i=s("c37a"),n=s("5e28"),a=s("94ab");e["a"]=i["a"].extend({name:"v-radio-group",mixins:[n["a"],Object(a["b"])("radio")],model:{prop:"value",event:"change"},provide:function(){return{radio:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},mandatory:{type:Boolean,default:!0},name:String,row:Boolean,value:{default:null}},data:function(){return{internalTabIndex:-1,radios:[]}},computed:{classes:function(){return{"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row}}},watch:{hasError:"setErrorState",internalValue:"setActiveRadio"},mounted:function(){this.setErrorState(this.hasError),this.setActiveRadio()},methods:{genDefaultSlot:function(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{role:"radiogroup"}},i["a"].options.methods.genDefaultSlot.call(this))},onRadioChange:function(t){this.disabled||(this.hasInput=!0,this.internalValue=t,this.setActiveRadio(),this.$nextTick(this.validate))},onRadioBlur:function(t){t.relatedTarget&&t.relatedTarget.classList.contains("v-radio")||(this.hasInput=!0,this.$emit("blur",t))},register:function(t){t.isActive=this.valueComparator(this.internalValue,t.value),t.$on("change",this.onRadioChange),t.$on("blur",this.onRadioBlur),this.radios.push(t)},setErrorState:function(t){for(var e=this.radios.length;--e>=0;)this.radios[e].parentError=t},setActiveRadio:function(){for(var t=this.radios.length;--t>=0;){var e=this.radios[t];e.isActive=this.valueComparator(this.internalValue,e.value)}},unregister:function(t){t.$off("change",this.onRadioChange),t.$off("blur",this.onRadioBlur);var e=this.radios.findIndex((function(e){return e===t}));e>-1&&this.radios.splice(e,1)}}})},"4a30":function(t,e,s){},"4ce1":function(t,e,s){},"55dd":function(t,e,s){"use strict";var i=s("5ca1"),n=s("d8e8"),a=s("4bf8"),o=s("79e5"),r=[].sort,l=[1,2,3];i(i.P+i.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!s("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(a(this)):r.call(a(this),n(t))}})},"60d0":function(t,e,s){},"653e":function(t,e,s){"use strict";s("4ce1")},"67b6":function(t,e,s){"use strict";s("a14d");var i=s("9d26"),n=s("ba87"),a=s("b64a"),o=s("ad54"),r=s("6a18"),l=s("5368"),c=s("94ab"),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t};function h(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return Array.from(t)}e["a"]={name:"v-radio",mixins:[a["a"],o["a"],Object(c["a"])("radio","v-radio","v-radio-group"),r["a"]],inheritAttrs:!1,props:{color:{type:String,default:"accent"},disabled:Boolean,label:String,onIcon:{type:String,default:"$vuetify.icons.radioOn"},offIcon:{type:String,default:"$vuetify.icons.radioOff"},readonly:Boolean,value:null},data:function(){return{isActive:!1,isFocused:!1,parentError:!1}},computed:{computedData:function(){return this.setTextColor(!this.parentError&&this.isActive&&this.color,{staticClass:"v-radio",class:d({"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused},this.themeClasses)})},computedColor:function(){return this.isActive?this.color:this.radio.validationState||!1},computedIcon:function(){return this.isActive?this.onIcon:this.offIcon},hasState:function(){return this.isActive||!!this.radio.validationState},isDisabled:function(){return this.disabled||!!this.radio.disabled},isReadonly:function(){return this.readonly||!!this.radio.readonly}},mounted:function(){this.radio.register(this)},beforeDestroy:function(){this.radio.unregister(this)},methods:{genInput:function(){for(var t,e=arguments.length,s=Array(e),i=0;i<e;i++)s[i]=arguments[i];return(t=l["a"].options.methods.genInput).call.apply(t,[this].concat(h(s)))},genLabel:function(){return this.$createElement(n["a"],{on:{click:this.onChange},attrs:{for:this.id},props:{color:this.radio.validationState||"",dark:this.dark,focused:this.hasState,light:this.light}},this.$slots.label||this.label)},genRadio:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("radio",d({name:this.radio.name||!!this.radio._uid&&"v-radio-"+this.radio._uid,value:this.value},this.$attrs)),this.genRipple(this.setTextColor(this.computedColor)),this.$createElement(i["a"],this.setTextColor(this.computedColor,{props:{dark:this.dark,light:this.light}}),this.computedIcon)])},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t)},onChange:function(){this.isDisabled||this.isReadonly||this.isDisabled||this.isActive&&this.radio.mandatory||this.$emit("change",this.value)},onKeydown:function(){}},render:function(t){return t("div",this.computedData,[this.genRadio(),this.genLabel()])}}},"68f0":function(t,e,s){"use strict";s("6da3")},"6da3":function(t,e,s){},a14d:function(t,e,s){},b4e2:function(t,e,s){"use strict";s("4a30")},b54a:function(t,e,s){"use strict";s("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},de67:function(t,e,s){"use strict";s("3362")}}]);