(function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],u=0,d=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);h&&h(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var r=n[s];0!==o[r]&&(i=!1)}i&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},s={index:0},o={index:0},a=[];function r(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-015b843d":"612bcc42","chunk-026c9eed":"686c82f2","chunk-0a1c3f45":"7526e576","chunk-1c032292":"1101cf4a","chunk-1de57bb4":"5aa4029f","chunk-2cfa392a":"f65e7734","chunk-2d0ab081":"f5f1feb3","chunk-2d0d3e49":"0aeccbcc","chunk-2d207f04":"070affbd","chunk-330b850c":"755a2834","chunk-346e5a20":"c2551263","chunk-37a19064":"055e8aa9","chunk-42375e72":"f578d3c6","chunk-4665df3c":"40f6fe67","chunk-46722ad3":"8bbe9817","chunk-4eea6028":"6f4d88f2","chunk-569dbb1d":"ce25cd13","chunk-6bb8f5a8":"ea73c008","chunk-761f411d":"1ab28c43","chunk-96799c68":"07f11e9c","chunk-e9607d78":"9256a663"}[e]+".js"}function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-015b843d":1,"chunk-026c9eed":1,"chunk-0a1c3f45":1,"chunk-1c032292":1,"chunk-1de57bb4":1,"chunk-2cfa392a":1,"chunk-330b850c":1,"chunk-346e5a20":1,"chunk-42375e72":1,"chunk-4eea6028":1,"chunk-569dbb1d":1,"chunk-6bb8f5a8":1,"chunk-761f411d":1,"chunk-96799c68":1,"chunk-e9607d78":1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-015b843d":"e9a6dd4b","chunk-026c9eed":"75d2ef7d","chunk-0a1c3f45":"e4b1b7c7","chunk-1c032292":"5388432c","chunk-1de57bb4":"153ab7fd","chunk-2cfa392a":"afe5f4cf","chunk-2d0ab081":"31d6cfe0","chunk-2d0d3e49":"31d6cfe0","chunk-2d207f04":"31d6cfe0","chunk-330b850c":"1aabb9af","chunk-346e5a20":"c3b506b1","chunk-37a19064":"31d6cfe0","chunk-42375e72":"c5ffb323","chunk-4665df3c":"31d6cfe0","chunk-46722ad3":"31d6cfe0","chunk-4eea6028":"fcfc84ba","chunk-569dbb1d":"6a213a33","chunk-6bb8f5a8":"364adcc9","chunk-761f411d":"78a237b6","chunk-96799c68":"76947aa9","chunk-e9607d78":"78e26da9"}[e]+".css",o=l.p+i,a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var c=a[r],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===i||u===o))return t()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){c=d[r],u=c.getAttribute("data-href");if(u===i||u===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var i=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=i,delete s[e],h.parentNode.removeChild(h),n(a)},h.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){s[e]=0})));var i=o[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,n){i=o[e]=[t,n]}));t.push(i[2]=a);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=r(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(h);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",d.name="ChunkLoadError",d.type=i,d.request=s,n[1](d)}o[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var h=u;a.push([0,"chunk-vendors","chunk-common"]),n()})({0:function(e,t,n){e.exports=n("d1a2")},1583:function(e,t,n){},3440:function(e,t,n){"use strict";n("6f84")},"3bab":function(e,t,n){},"60d1":function(e,t,n){"use strict";n("1583")},"6d99":function(e,t,n){"use strict";n("cb42")},"6f84":function(e,t,n){},cb42:function(e,t,n){},ccd7:function(e,t,n){"use strict";n("3bab")},d1a2:function(e,t,n){"use strict";n.r(t);n("ac6a"),n("5df3"),n("6b54"),n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),s=n("7e92"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[e.initializing?[n("v-progress-linear",{staticClass:"pa-0 ma-0",attrs:{indeterminate:!0,color:"info",height:"5"}}),n("v-alert",{attrs:{value:!0,type:"info"}},[n("div",[n("div",[e._v(e._s(e.$t("app.initializing","zh-CN")))]),n("div",[e._v(e._s(e.$t("app.initializing","en")))])])])]:[n("v-alert",{attrs:{value:!e.$store.state.initialized,type:"error"}},[e._v(e._s(e.$t("app.initError")))]),e.$store.state.initialized&&e.havePermissions?[n("Navigation",{model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}}),n("Topbar",{model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}}),n("Content"),n("Footer")]:n("Permissions",{on:{update:e.reload}})]],2)},a=[],r=n("f62e"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{clipped:"",fixed:"",app:"",width:"220"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},e._l(e.navs,(function(t,i){return n("v-list",{key:i,attrs:{dense:""}},[t.title?n("v-subheader",{staticClass:"grey--text text--darken-1"},[e._v(e._s(e.$t(t.title)))]):e._e(),e._l(t.items,(function(t,i){return[!1!==t.visible?n("v-list-tile",{key:i,attrs:{to:t.key,href:t.url,target:t.url?"_blank":"",rel:"noopener noreferrer nofollow"}},[n("v-list-tile-action",{staticStyle:{"min-width":"42px","margin-left":"13px"}},[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(e.$t(t.title)))])],1)],1):e._e()]}))],2)})),1)},c=[],u=i["default"].extend({props:{value:Boolean},data:function(){return{drawer:this.$store.state.options.navBarIsOpen}},model:{prop:"value",event:"change"},watch:{drawer:function(){this.$emit("change",this.drawer)},value:function(){this.drawer=this.value}},computed:{navs:function(){return[{title:"navigation.dashboard.title",key:"group-",items:[{title:"navigation.dashboard.userData",icon:"dashboard",key:"/home"},{title:"navigation.dashboard.searchResults",icon:"search",key:"/search-torrent"},{title:"navigation.dashboard.searchResultSnapshot",icon:"add_a_photo",key:"/search-result-snapshot",visible:this.$store.state.options.allowSaveSnapshot},{title:"navigation.dashboard.history",icon:"history",key:"/history",visible:this.$store.state.options.saveDownloadHistory},{title:"navigation.dashboard.collection",icon:"favorite",key:"/collection"},{title:"navigation.dashboard.keepUploadTask",icon:"merge_type",key:"/keep-upload-task"}]},{title:"navigation.settings.title",items:[{title:"navigation.settings.downloadClients",icon:"cloud_download",key:"/set-download-clients"},{title:"navigation.settings.base",icon:"settings",key:"/set-base"},{title:"navigation.settings.sites",icon:"public",key:"/set-sites"},{title:"navigation.settings.downloadPaths",icon:"folder_open",key:"/set-download-paths"},{title:"navigation.settings.searchSolution",icon:"widgets",key:"/set-search-solution"},{title:"navigation.settings.backup",icon:"restore",key:"/set-backup"},{title:"navigation.settings.permissions",icon:"verified_user",key:"/set-permissions"}]},{title:"navigation.thanks.title",items:[{title:"navigation.thanks.reference",icon:"developer_board",key:"/technology-stack"},{title:"navigation.thanks.specialThanksTo",icon:"people",key:"/dev-team"}]}]}}}),d=u,h=n("2877"),f=n("6544"),p=n.n(f),v=n("132d"),m=n("8860"),g=n("ba95"),b=n("40fe"),_=n("5d23"),k=n("f774"),w=n("e0c7"),y=Object(h["a"])(d,l,c,!1,null,null,null),S=y.exports;p()(y,{VIcon:v["a"],VList:m["a"],VListTile:g["a"],VListTileAction:b["a"],VListTileContent:_["b"],VListTileTitle:_["d"],VNavigationDrawer:k["a"],VSubheader:w["a"]});var x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{attrs:{color:e.baseColor,app:"",fixed:"","clipped-left":"",id:"system-topbar"}},[n("v-toolbar-side-icon",{attrs:{title:e.$t("topbar.navBarTip")},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",{staticClass:"hidden-md-and-down",staticStyle:{width:"220px"}},[n("span",[e._v(e._s(e.$t("topbar.title")))])]),n("SearchBox"),n("v-btn",{staticClass:"grey--text text--darken-2 hidden-xs-only",attrs:{flat:"",to:"/search-torrent/__LatestTorrents__",title:e.$t("topbar.showNewTorrentsTip")}},[n("v-icon",[e._v("fiber_new")]),n("span",{staticClass:"ml-2 hidden-md-and-down"},[e._v(e._s(e.$t("topbar.showNewTorrents")))])],1),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[n("v-btn",{staticClass:"grey--text text--darken-2",attrs:{flat:"",href:"https://github.com/ronggang/PT-Plugin-Plus",target:"_blank",rel:"noopener noreferrer nofollow",title:e.$t("topbar.github")}},[n("v-icon",[e._v("home")]),n("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("topbar.github")))])],1),n("v-btn",{staticClass:"grey--text text--darken-2",attrs:{flat:"",href:"https://github.com/ronggang/PT-Plugin-Plus/wiki",target:"_blank",title:e.$t("topbar.help"),rel:"noopener noreferrer nofollow"}},[n("v-icon",[e._v("help")]),n("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("topbar.help")))])],1),n("v-btn",{staticClass:"grey--text text--darken-2",attrs:{flat:"",to:"/donate",title:e.$t("navigation.support.donate")}},[n("v-icon",[e._v("free_breakfast")]),n("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("navigation.support.donate")))])],1)],1)],1)},C=[],L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"offset-y":"","nudge-right":"32"},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[n("v-text-field",{staticClass:"mt-2 mb-0",attrs:{flat:"","solo-inverted":"","prepend-icon":"search",type:"search",label:e.$t("searchBox.searchTip"),clearable:"",loading:e.loadStatus,enterkeyhint:"search"},on:{"click:prepend":function(t){return e.searchTorrent()},click:function(t){return t.stopPropagation(),e.showSelectBox.apply(null,arguments)},"click:clear":e.clearSearchKey,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchTorrent()}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[n("v-menu",{staticClass:"top-searches",attrs:{slot:"prepend-inner","offset-y":"","nudge-bottom":"8","nudge-left":"12"},slot:"prepend-inner"},[n("v-btn",{attrs:{slot:"activator",flat:"",small:"",color:"grey lighten-2"},slot:"activator"},[e._v(e._s(e.$t("common.hot")))]),n("div",{style:(e.$vuetify.breakpoint.smAndUp?"width: 550px":"width: 300px")+";background-color: #fff;"},[n("v-container",{staticClass:"pa-3",attrs:{fluid:"","grid-list-lg":""}},[0==e.topSearches.length?n("div",[e._v(" "+e._s(e.$t("common.loading"))+" ")]):n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.topSearches,(function(t,i){return n("v-flex",{key:i,attrs:{xs4:""}},[n("v-card",{staticStyle:{cursor:"pointer"},attrs:{title:e.$t("searchBox.searchThisKey",{key:t.title})},on:{click:function(n){return e.searchHotItem(t)}}},[n("v-img",{attrs:{src:t.image,height:e.$vuetify.breakpoint.smAndUp?"230px":"110px"}},[n("div",{staticClass:"top-searches-item px-1"},[n("div",[n("span",{staticClass:"caption"},[e._v(e._s(t.title))]),e.$vuetify.breakpoint.smAndUp?n("span",{staticClass:"caption ml-2 grey--text"},[e._v("("+e._s(t.year)+")")]):e._e(),t.doubanRating?n("a",{staticClass:"caption orange--text rating",attrs:{href:t.link,rel:"noopener noreferrer nofollow",target:"_blank",title:e.$t("searchBox.toDouban")},on:{click:function(e){e.stopPropagation()}}},[e._v(e._s(parseFloat(t.doubanRating).toFixed(1)))]):e._e()]),e.$vuetify.breakpoint.smAndUp?n("div",{staticClass:"caption grey--text alt-title"},[e._v("\n                        "+e._s(t.alt_title)+"\n                      ")]):e._e()])])],1)],1)})),1)],1),n("v-divider"),n("div",{staticClass:"pa-1 top-searches text-sm-right"},[n("v-btn",{staticClass:"caption grey--text",attrs:{flat:"",small:"",title:e.$t("common.refresh"),loading:e.topSearchesLoading},on:{click:function(t){return t.stopPropagation(),e.getTopSearches.apply(null,arguments)}}},[n("v-icon",{staticStyle:{"font-size":"20px"}},[e._v("update")]),n("span",{staticClass:"ml-2"},[e._v(e._s(e.$t("common.lastUpdate",{time:e.topSearchesUpdateTime})))])],1)],1)],1)],1),n("v-menu",{staticClass:"search-solution",attrs:{slot:"append","offset-y":""},slot:"append"},[n("v-btn",{attrs:{slot:"activator",flat:"",small:"",color:"grey lighten-2"},slot:"activator"},[e._v(e._s(e.selectedSearchSolutionName))]),n("v-list",{attrs:{dense:""}},[n("v-list-tile",{attrs:{title:e.$t("searchBox.defaultTip")},on:{click:function(t){return e.changeSearchSolution(null)}}},[n("v-list-tile-title",[e._v(e._s(e.$t("searchBox.default")))])],1),n("v-divider"),e.$store.state.options.searchSolutions&&e.$store.state.options.searchSolutions.length>0?e._l(e.$store.state.options.searchSolutions,(function(t,i){return n("v-list-tile",{key:i,on:{click:function(n){return e.changeSearchSolution(t)}}},[n("v-list-tile-title",[e._v(e._s(t.name))])],1)})):n("v-btn",{attrs:{flat:"",small:"",to:"/set-search-solution"}},[e._v(e._s(e.$t("searchBox.noSearchSolution")))]),n("v-divider"),n("v-list-tile",{on:{click:function(t){return e.changeSearchSolution(e.allSite)}}},[n("v-list-tile-title",[e._v(e._s(e.$t("searchBox.all")))])],1)],2)],1)],1)]}}]),model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[n("div",[n("v-list",{staticClass:"pb-0"},[n("v-list-tile",{on:{click:function(t){return t.stopPropagation(),e.itemClick(null)}}},[n("v-list-tile-content",[n("v-list-tile-title",[n("v-icon",[e._v("search")]),n("span",{staticClass:"title ml-1"},[e._v(e._s(e.$t("searchBox.searchThisKey",{key:this.searchKey})))])],1)],1),n("v-list-tile-action",[n("v-icon",[e._v("forward")])],1)],1),e.isLoading?n("v-progress-linear",{attrs:{indeterminate:!0,color:"secondary",height:"2"}}):n("v-divider")],1),n("v-list",{staticClass:"py-0",attrs:{"three-line":""}},[e._l(e.items,(function(t,i){return[n("v-list-tile",{key:i,attrs:{title:e.$t("searchBox.searchThisKey",{key:t.title})},on:{click:function(n){return n.stopPropagation(),e.itemClick(t)}}},[n("v-list-tile-avatar",{staticClass:"album",attrs:{size:75}},[n("img",{attrs:{src:t.image||t.img||(t.images?t.images.small:t.pic?t.pic.normal:"")}})]),n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"mb-1"},[n("span",{staticClass:"title"},[e._v(e._s(t.title))]),n("span",{staticClass:"ml-1 caption"},[e._v("("+e._s(t.year)+")")])]),n("v-list-tile-sub-title",[n("div",[e._v("\n                "+e._s(t.aka||t.originalTitle||t.original_title||"")+"\n              ")]),n("div",{staticClass:"caption"},[e._v("\n                "+e._s(t.genre||t.genres&&t.genres.join(" | "))+"\n              ")])])],1),n("v-list-tile-action",{staticStyle:{"align-items":"center"}},[n("a",{staticClass:"grey--text text--darken-1 mt-3 title",staticStyle:{"text-decoration":"none"},attrs:{href:t.link||t.alt||t.url,rel:"noopener noreferrer nofollow",target:"_blank",title:e.$t("searchBox.toDouban")},on:{click:function(e){e.stopPropagation()}}},[n("img",{attrs:{src:"https://img3.doubanio.com/favicon.ico",width:"16"}}),e._v("\n              "+e._s(parseFloat(t.average?t.average:t.rating?t.rating.average||t.rating.value:null).toFixed(1))+"\n            ")]),n("v-rating",{staticClass:"mb-3",attrs:{value:t.average?parseFloat(t.average)/2:t.rating?t.rating.stars?parseInt(t.rating.stars)/10:t.rating.star_count:0,"background-color":"grey lighten-2",color:"yellow accent-4",dense:"",readonly:"","half-increments":"",size:"13"}})],1)],1),n("v-divider",{key:"l"+i})]}))],2),n("v-list",{staticClass:"py-0"},[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"grey--text text--darken-1 caption"},[e._v(e._s(e.$t("searchBox.doubanTip")))])],1)],1)],1)],1)])},O=[],T=(n("386d"),n("7514"),n("7f7f"),n("a1f4")),I=n("5a0c"),V=n.n(I),P=new T["a"],q=i["default"].extend({data:function(){return{isLoading:!1,items:[],selected:{},timer:null,showMenu:!1,searchKey:"",options:this.$store.state.options,selectedSearchSolutionName:"",allSite:{id:"all",name:"<所有站点>"},initialized:!1,topSearches:[],topSearchesUpdateTime:"N/A",topSearchesLoading:!1}},methods:{searchHotItem:function(e){console.log(e);var t=e.imdbId||"douban"+e.doubanId+"|"+e.title+"|"+e.alt_title;this.searchTorrent(t)},itemClick:function(e){console.log(e);var t=this.searchKey,n=this.options.beforeSearchingOptions?this.options.beforeSearchingOptions.searchModeForItem:r["d"].id;switch(n){case r["d"].id:e&&e.id&&(t="douban"+e.id+"|"+e.title+"|"+(e.originalTitle||e.aka||e.original_title)+"|"+t);break;case r["d"].name:e&&e.title&&(t=e.title);break}this.searchTorrent(t)},showSelectBox:function(){var e=this;this.$store&&!this.$store.state.options.beforeSearchingOptions.getMovieInformation||(this.items.length>0?this.showMenu=!0:this.searchKey&&(this.timer=setTimeout((function(){e.getDoubanInfos(e.searchKey)}),750)))},getDoubanInfos:function(e){var t=this;this.$store&&!this.$store.state.options.beforeSearchingOptions.getMovieInformation||!this.isLoading&&e&&(this.isLoading=!0,this.items=[],"localhost"!=window.location.hostname?P.sendRequest(r["b"].queryMovieInfoFromDouban,null,{key:e,count:this.$store.state.options.beforeSearchingOptions.maxMovieInformationCount}).then((function(e){t.isLoading=!1,e&&(e.subjects?(t.items=e.subjects.filter((function(e){return"movie"==e.type})),t.showMenu=t.items.length>0):e.title&&e.updateTime&&(t.items=[e],t.showMenu=!0))})).catch((function(e){console.log(e)})).finally((function(){t.isLoading=!1})):$.ajax("http://localhost:8001/test/beforeSearching.json").done((function(e){console.log(e),e&&e.subjects&&(t.items=e.subjects,t.isLoading=!1,t.showMenu=!0)})).fail((function(e){console.log(e)})).always((function(){return t.isLoading=!1})))},searchTorrent:function(e){e=e||this.searchKey,e&&(this.showMenu=!1,clearTimeout(this.timer),this.$store.dispatch("saveConfig",{lastSearchKey:this.searchKey}),this.$router.push({name:"search-torrent",params:{key:e}}))},changeSearchSolution:function(e){var t="";e?(this.selectedSearchSolutionName=e.name,t=e.id):this.selectedSearchSolutionName=this.$t("searchBox.default").toString(),this.$store.dispatch("saveConfig",{defaultSearchSolutionId:t})},clearSearchKey:function(){this.$store.dispatch("saveConfig",{lastSearchKey:""})},getTopSearches:function(){var e=this;this.topSearchesLoading=!0,P.sendRequest(r["b"].getTopSearches).then((function(t){e.topSearches=t,e.topSearchesUpdateTime=V()().format("YYYY-MM-DD HH:mm:ss")})).catch((function(e){console.log(e)})).finally((function(){e.topSearchesLoading=!1}))}},watch:{searchKey:function(){var e=this;this.$store&&!this.$store.state.options.beforeSearchingOptions.getMovieInformation||(clearTimeout(this.timer),this.initialized&&(this.searchKey?this.timer=setTimeout((function(){e.getDoubanInfos(e.searchKey)}),750):this.showMenu=!1))},"$store.state.options.lastSearchKey":function(){var e=this;this.searchKey!=this.$store.state.options.lastSearchKey&&(console.log("key change: %s",this.$store.state.options.lastSearchKey),this.searchKey=this.$store.state.options.lastSearchKey,this.searchKey&&(this.isLoading=!0,this.items=[],setTimeout((function(){e.isLoading=!1}),1e3)))}},created:function(){var e=this;if(this.selectedSearchSolutionName=this.$t("searchBox.default").toString(),this.options.defaultSearchSolutionId==this.allSite.id)this.selectedSearchSolutionName=this.allSite.name;else if(this.options.defaultSearchSolutionId&&this.options.searchSolutions){var t=this.options.searchSolutions.find((function(t){return t.id===e.options.defaultSearchSolutionId}));t&&(this.selectedSearchSolutionName=t.name)}if(this.options.sites){this.options.sites.forEach((function(e){e.allowSearch&&0}))}this.options.search&&this.options.search.saveKey&&(this.searchKey=this.options.lastSearchKey||""),this.getTopSearches(),setTimeout((function(){e.initialized=!0}),500)},computed:{loadStatus:function(){return this.$store&&this.$store.state&&this.$store.state.searching||this.isLoading}}}),R=q,M=(n("3440"),n("8336")),D=n("b0af"),N=n("a523"),U=n("ce7e"),E=n("0e8f"),B=n("adda"),A=n("a722"),j=n("c954"),z=n("e449"),K=n("8e36"),F=n("1d4d"),Y=n("2677"),H=Object(h["a"])(R,L,O,!1,null,"0ca4d96c",null),W=H.exports;p()(H,{VBtn:M["a"],VCard:D["a"],VContainer:N["a"],VDivider:U["a"],VFlex:E["a"],VIcon:v["a"],VImg:B["a"],VLayout:A["a"],VList:m["a"],VListTile:g["a"],VListTileAction:b["a"],VListTileAvatar:j["a"],VListTileContent:_["b"],VListTileSubTitle:_["c"],VListTileTitle:_["d"],VMenu:z["a"],VProgressLinear:K["a"],VRating:F["a"],VTextField:Y["a"]});var Q=i["default"].extend({props:{value:Boolean},components:{SearchBox:W},model:{prop:"value",event:"change"},watch:{drawer:function(){this.$emit("change",this.drawer)},value:function(){this.drawer=this.value}},data:function(){return{words:{title:"PT 助手",navBarTip:"点击显示/隐藏导航栏",help:"使用帮助",github:"访问 Github",showNewTorrents:"浏览各站首页种子",showNewTorrentsTip:"根据当前方案，搜索各站的首页种子"},drawer:this.$store.state.options.navBarIsOpen,baseColor:"amber"}}}),J=Q,G=n("9910"),Z=n("71d9"),X=n("2a7f"),ee=n("706c"),te=Object(h["a"])(J,x,C,!1,null,null,null),ne=te.exports;p()(te,{VBtn:M["a"],VIcon:v["a"],VSpacer:G["a"],VToolbar:Z["a"],VToolbarItems:X["a"],VToolbarSideIcon:ee["a"],VToolbarTitle:X["b"]});var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-footer",{attrs:{app:"",fixed:""}},[n("span",{staticClass:"pl-2 grey--text text--darken-1"},[e._v("\n    © "+e._s(e.$t("app.author"))+" "+e._s(e.year)+", "+e._s(e.$t("common.version"))+"\n    "+e._s(e.version)+"\n    "),e.isDevelopmentMode&&e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"deep-orange--text"},[e._v(e._s(e.words.developmentMode))]):e._e(),e.isDebugMode&&e.$vuetify.breakpoint.mdAndUp?n("v-chip",{attrs:{label:"",outline:"",color:"orange",disabled:"",small:""}},[e._v(e._s(e.$t("common.debugMode")))]):e._e(),e.newReleases?n("v-btn",{attrs:{outline:"",color:"success",small:"",href:"https://github.com/ronggang/PT-Plugin-Plus/releases",target:"_blank",rel:"noopener noreferrer nofollow"}},[e._v(e._s(e.$t("common.haveNewReleases"))+", "+e._s(e.releasesVersion))]):e._e()],1),n("v-spacer"),n("v-btn",{attrs:{flat:"",small:"",href:"https://t.me/joinchat/NZ9NCxPKXyby8f35rn_QTw",target:"_blank",rel:"noopener noreferrer nofollow",title:"Telegram",icon:e.$vuetify.breakpoint.smAndDown}},[n("v-img",{style:e.$vuetify.breakpoint.smAndDown?"max-width:16px":null,attrs:{src:"./assets/telegram.svg",width:"16"}}),e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"ml-1"},[e._v("Telegram")]):e._e()],1),n("input",{ref:"fileLanguage",staticStyle:{display:"none"},attrs:{type:"file"}}),n("v-menu",{attrs:{top:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{flat:"",small:"",icon:e.$vuetify.breakpoint.smAndDown}},i),[n("v-icon",{attrs:{small:""}},[e._v("language")]),e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"ml-1"},[e._v("\n          "+e._s(e.$t("common.changeLanguage"))+"\n        ")]):e._e()],1)]}}])},[n("v-list",{attrs:{dense:""}},[n("v-list-tile",{on:{click:e.selectFile}},[n("v-list-tile-title",[e._v(e._s(e.$t("common.addLanguage")))])],1)],1),n("v-divider"),n("v-list",{attrs:{dense:""}},e._l(e.languages,(function(t,i){return n("v-list-tile",{key:i,on:{click:function(n){return e.changeLanguage(t)}}},[n("v-list-tile-title",{class:e.currentLanguage==t.code?"primary--text":""},[n("span",[e.currentLanguage==t.code?n("v-icon",{staticClass:"mr-1 primary--text",attrs:{small:""}},[e._v("check")]):n("span",{staticClass:"mr-4"})],1),e._v("\n          "+e._s(t.name)+"\n        ")])],1)})),1)],1),n("v-btn",{attrs:{flat:"",small:"",to:"/system-logs",icon:e.$vuetify.breakpoint.smAndDown}},[n("v-icon",{attrs:{small:""}},[e._v("assignment")]),e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"ml-1"},[e._v("\n      "+e._s(e.$t("common.systemLog"))+"\n    ")]):e._e()],1),e.$vuetify.breakpoint.mdAndUp?n("v-btn",{attrs:{flat:"",small:"",href:"/debugger.html",target:"_blank",rel:"noopener noreferrer nofollow",title:e.$t("navigation.support.debugger")}},[n("v-icon",{attrs:{small:""}},[e._v("bug_report")]),n("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("navigation.support.debugger")))])],1):e._e(),n("v-snackbar",{attrs:{top:"",timeout:3e3,color:"error"},model:{value:e.invalidFile,callback:function(t){e.invalidFile=t},expression:"invalidFile"}},[e._v("\n    "+e._s(e.$t("footer.invalidFile"))+"\n  ")])],1)},se=[],oe=(n("a481"),n("6762"),n("2fdb"),n("7626")),ae=n("a400"),re=i["default"].extend({data:function(){return{words:{developmentMode:"zip"},version:"",isDebugMode:oe["b"].debugMode,isDevelopmentMode:!1,newReleases:!1,releasesVersion:"",languages:[],fileInput:null,currentLanguage:"",invalidFile:!1,year:(new Date).getFullYear()}},created:function(){var e=this;if(this.languages=window.i18nService.config,this.currentLanguage=window.i18nService.currentLanguage,oe["b"].isExtensionMode&&chrome.runtime&&chrome.runtime.getManifest){var t=chrome.runtime.getManifest();this.version="v"+(t.version_name||t.version)}else this.version="localVersion";"localVersion"!=this.version&&this.checkUpdate(),oe["b"].getInstallType().then((function(t){console.log(t,ae["i"].development),e.isDevelopmentMode=[ae["i"].development,ae["i"].crx].includes(t),t===ae["i"].crx&&(e.words.developmentMode=ae["i"].crx)})).catch((function(){console.log("获取安装方式失败")}))},mounted:function(){this.fileInput=this.$refs.fileLanguage,this.fileInput.addEventListener("change",this.addLanguage)},beforeDestroy:function(){this.fileInput.removeEventListener("change",this.addLanguage)},methods:{checkUpdate:function(){var e=this;$.getJSON(oe["a"].latestReleases).done((function(t){t&&t.tag_name&&(e.releasesVersion=t.tag_name,e.releasesVersion>e.version&&(e.newReleases=!0))})).fail((function(e){}))},changeLanguage:function(e){this.currentLanguage=e.code,window.i18nService.reset(e.code)},addLanguage:function(e){var t=this,n=e.srcElement;if(n.files.length>0&&n.files[0].name.length>0){var i=new FileReader;i.onload=function(e){try{var n=JSON.parse(e.target.result);n.code&&n.words?(t.loadLanguage(n),t.invalidFile=!1):t.invalidFile=!0,console.log(n)}catch(i){console.warn(i),t.invalidFile=!0}},i.onerror=function(){},i.readAsText(n.files[0]),n.value=""}},loadLanguage:function(e){var t=this;window.i18nService.exists(e.code)?window.confirm(this.$t("footer.replaceLanguageConfirm")+"")&&window.i18nService.replace(e).then((function(){t.currentLanguage=e.code})).catch((function(){})):window.i18nService.add(e).then((function(){t.currentLanguage=e.code,t.languages.push({name:e.name,code:e.code})})).catch((function(){}))},selectFile:function(){this.fileInput.click()}}}),le=re,ce=n("cc20"),ue=n("553a"),de=n("2db4"),he=Object(h["a"])(le,ie,se,!1,null,null,null),fe=he.exports;p()(he,{VBtn:M["a"],VChip:ce["a"],VDivider:U["a"],VFooter:ue["a"],VIcon:v["a"],VImg:B["a"],VList:m["a"],VListTile:g["a"],VListTileTitle:_["d"],VMenu:z["a"],VSnackbar:de["a"],VSpacer:G["a"]});var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{class:e.$vuetify.breakpoint.smAndDown?["pa-0"]:e.$vuetify.breakpoint.md?["pa-1"]:["pa-3"],attrs:{fluid:""}},[n("keep-alive",[e.$route.meta.keepAlive?n("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():n("router-view")],1)],1)},ve=[],me=n("549c"),ge={},be=Object(h["a"])(ge,pe,ve,!1,null,null,null),_e=be.exports;p()(be,{VContainer:N["a"],VContent:me["a"]});var ke=n("d97c"),we={name:"App",components:{Navigation:S,Topbar:ne,Footer:fe,Content:_e,Permissions:ke["default"]},data:function(){return{baseColor:"amber",drawer:this.$store.state.options.navBarIsOpen,havePermissions:!1,initializing:!0}},created:function(){},watch:{drawer:function(){this.$store.state.options.navBarIsOpen!=this.drawer&&this.$store.dispatch("saveConfig",{navBarIsOpen:this.drawer})}},methods:{init:function(){var e=this;console.log("APP init."),chrome&&chrome.permissions?chrome.permissions.contains({origins:["http://*/*","https://*/*"]},(function(t){e.havePermissions=t,e.initializing=!1})):(this.havePermissions=!0,this.initializing=!1)},reload:function(e){this.havePermissions=e}}},ye=we,Se=(n("60d1"),n("0798")),xe=n("7496"),Ce=Object(h["a"])(ye,o,a,!1,null,null,null),$e=Ce.exports;p()(Ce,{VAlert:Se["a"],VApp:xe["a"],VProgressLinear:K["a"]});var Le=n("8c4f"),Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("v-alert",{attrs:{value:!0,type:"info"}},[e._v(e._s(e.$t("home.title")))]),n("v-card",[e.sites&&e.sites.length>0?n("v-card-title",[n("v-btn",{attrs:{color:"success",loading:e.loading,title:e.$t("home.getInfos")},on:{click:e.getInfos}},[n("v-icon",{staticClass:"mr-2"},[e._v("cached")]),e._v("\n        "+e._s(e.$t("home.getInfos"))+"\n      ")],1),n("v-btn",{attrs:{to:"/user-data-timeline",color:"success",title:e.$t("home.timeline")}},[n("v-icon",[e._v("timeline")])],1),n("v-btn",{attrs:{to:"/statistic",color:"success",title:e.$t("home.statistic")}},[n("v-icon",[e._v("equalizer")])],1),n("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{color:"blue",dark:"",title:e.$t("home.settings")}},i),[n("v-icon",[e._v("settings")])],1)]}}],null,!1,243296654)},[n("v-card",[n("v-container",{attrs:{"grid-list-xs":""}},[n("v-switch",{attrs:{color:"success",label:e.$t("home.siteName")},on:{change:e.updateViewOptions},model:{value:e.showSiteName,callback:function(t){e.showSiteName=t},expression:"showSiteName"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.userName")},on:{change:e.updateViewOptions},model:{value:e.showUserName,callback:function(t){e.showUserName=t},expression:"showUserName"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.userLevel")},on:{change:e.updateViewOptions},model:{value:e.showUserLevel,callback:function(t){e.showUserLevel=t},expression:"showUserLevel"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.levelRequirements")},on:{change:e.updateViewOptions},model:{value:e.showLevelRequirements,callback:function(t){e.showLevelRequirements=t},expression:"showLevelRequirements"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.week")},on:{change:e.updateViewOptions},model:{value:e.showWeek,callback:function(t){e.showWeek=t},expression:"showWeek"}})],1)],1)],1),n("v-spacer"),n("v-text-field",{staticClass:"search",attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",enterkeyhint:"search"},model:{value:e.filterKey,callback:function(t){e.filterKey=t},expression:"filterKey"}})],1):e._e(),n("v-data-table",{ref:"userDataTable",staticClass:"elevation-1",attrs:{search:e.filterKey,headers:e.headers,items:e.sites,pagination:e.pagination,"item-key":"host","no-data-text":e.$t("home.nodata")},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"center"},[n("v-badge",{attrs:{color:"red messageCount",overlap:""},scopedSlots:e._u([!t.item.disableMessageCount&&t.item.user.messageCount>0?{key:"badge",fn:function(){return[e._v("\n              "+e._s(t.item.user.messageCount>10?"":t.item.user.messageCount)+"\n            ")]},proxy:!0}:null],null,!0)},[n("v-btn",{staticClass:"siteIcon",attrs:{flat:"",icon:"",title:e.$t("home.getInfos"),disabled:t.item.offline},on:{click:function(n){return n.stopPropagation(),e.getSiteUserInfo(t.item)}}},[n("v-avatar",{attrs:{size:e.showSiteName?18:24}},[n("img",{attrs:{src:t.item.icon}})])],1)],1),n("br"),e.showSiteName?n("a",{staticClass:"nodecoration",attrs:{href:t.item.activeURL,target:"_blank",rel:"noopener noreferrer nofollow"}},[n("span",{staticClass:"caption"},[e._v(e._s(t.item.name))])]):e._e()],1),n("td",[e.showUserName?[e._v("\n            "+e._s(t.item.user.name)+"\n            "),t.item.user.id?[n("br"),e._v("("+e._s(t.item.user.id)+")\n            ")]:e._e()]:[e._v("\n            ****\n          ")]],2),n("td",[e._v("\n          "+e._s(e.showUserLevel?t.item.user.levelName:"****")+"\n          "),e.showLevelRequirements?[t.item.levelRequirements?[t.item.user.nextLevel.name?[n("br"),n("span",{staticStyle:{color:"blue"}},[t.item.user.nextLevel.requiredDate?[e._v(e._s(t.item.user.nextLevel.requiredDate)+" ")]:e._e()],2),n("span",{staticStyle:{color:"red"}},[t.item.user.nextLevel.uploaded?[e._v(e._s(e._f("formatSize")(t.item.user.nextLevel.uploaded))),n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("file_upload")]),e._v(" ")]:e._e(),t.item.user.nextLevel.downloaded?[e._v(e._s(e._f("formatSize")(t.item.user.nextLevel.downloaded))),n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("file_download")]),e._v(" ")]:e._e(),t.item.user.nextLevel.trueDownloaded?[e._v(e._s(e._f("formatSize")(t.item.user.nextLevel.trueDownloaded))+e._s(e.$t("home.levelRequirement.trueDownloaded"))+" ")]:e._e(),t.item.user.nextLevel.bonus?[e._v(e._s(e._f("formatNumber")(t.item.user.nextLevel.bonus))+e._s(e.$t("home.levelRequirement.bonus"))+" ")]:e._e(),t.item.user.nextLevel.seedingPoints?[e._v(e._s(e._f("formatNumber")(t.item.user.nextLevel.seedingPoints))+e._s(e.$t("home.levelRequirement.seedingPoints"))+" ")]:e._e(),t.item.user.nextLevel.uploads?[e._v(e._s(t.item.user.nextLevel.uploads)+e._s(e.$t("home.levelRequirement.uploads"))+" ")]:e._e()],2)]:[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("done")])],n("div",{staticClass:"levelRequirement"},[e._l(t.item.levelRequirements,(function(i){return[Number(t.item.user.nextLevel.level)>Number(i.level)?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("done")])]:[n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("block")])],i.requiredDate?[e._v(e._s(i.requiredDate))]:e._e(),e._v("("+e._s(i.name)+"):\n                  "),i.uploaded?[e._v(e._s(i.uploaded)),n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("file_upload")]),e._v(";")]:e._e(),i.uploads?[e._v(e._s(e.$t("home.levelRequirement.uploads"))+" "+e._s(i.uploads)+";")]:e._e(),i.downloaded?[e._v(e._s(i.downloaded)),n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("file_download")]),e._v(";")]:e._e(),i.trueDownloaded?[e._v(e._s(e.$t("home.levelRequirement.trueDownloaded"))+" "+e._s(i.trueDownloaded)+";")]:e._e(),i.ratio?[e._v(e._s(e.$t("home.levelRequirement.ratio"))+" "+e._s(i.ratio)+";")]:e._e(),i.bonus?[e._v(e._s(e.$t("home.levelRequirement.bonus"))+" "+e._s(e._f("formatNumber")(i.bonus))+";")]:e._e(),i.seedingPoints?[e._v(e._s(e.$t("home.levelRequirement.seedingPoints"))+" "+e._s(e._f("formatNumber")(i.seedingPoints))+";")]:e._e(),e._v("\n                  "+e._s(i.privilege)),n("br")]}))],2)]:e._e()]:e._e()],2),n("td",{staticClass:"number"},[n("div",[e._v("\n            "+e._s(e._f("formatSize")(t.item.user.uploaded))+"\n            "),n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("expand_less")])],1),n("div",[e._v("\n            "+e._s(e._f("formatSize")(t.item.user.downloaded))+"\n            "),n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("expand_more")])],1)]),n("td",{staticClass:"number"},[e._v(e._s(e._f("formatRatio")(t.item.user.ratio)))]),n("td",{staticClass:"number"},[e._v(e._s(t.item.user.seeding))]),n("td",{staticClass:"number"},[e._v(e._s(e._f("formatSize")(t.item.user.seedingSize)))]),n("td",{staticClass:"number"},[t.item.user.seedingPoints?[n("div",[e._v("\n              魔力："+e._s(e._f("formatNumber")(t.item.user.bonus))+"\n            ")]),n("div",[e._v("\n              积分："+e._s(e._f("formatNumber")(t.item.user.seedingPoints))+"\n            ")])]:[e._v("\n            "+e._s(e._f("formatNumber")(t.item.user.bonus))+"\n          ")]],2),n("td",{staticClass:"number"},[e._v(e._s(e._f("formatNumber")(t.item.user.bonusPerHour)))]),n("td",{staticClass:"number",attrs:{title:t.item.user.joinDateTime}},[e._v(e._s(e._f("timeAgo")(t.item.user.joinTime,e.showWeek)))]),n("td",{staticClass:"number"},[n("v-btn",{attrs:{depressed:"",small:"",to:"statistic/"+t.item.host,title:e.$t("home.statistic")}},[e._v(e._s(e._f("formatDate")(t.item.user.lastUpdateTime,"YYYY-MM-DD HH:mm:ss")))])],1),n("td",{staticClass:"center"},[t.item.user.isLoading?n("v-progress-circular",{attrs:{indeterminate:"",width:3,size:"30",color:"green"}},[t.item.user.isLoading?n("v-icon",{attrs:{color:"red",small:"",title:e.$t("home.cancelRequest")},on:{click:function(n){return e.abortRequest(t.item)}}},[e._v("cancel")]):e._e()],1):n("span",[t.item.user.isLogged?n("span",[e._v(e._s(e.formatError(t.item.user)))]):n("a",{staticClass:"nodecoration",attrs:{href:t.item.activeURL,target:"_blank",rel:"noopener noreferrer nofollow"}},[e._v(e._s(e.formatError(t.item.user)))])])],1)]}}])})],1),n("v-alert",{attrs:{value:!0,color:"grey"}},[n("div",{domProps:{innerHTML:e._s(e.$t("home.tip"))}})])],1)},Te=[],Ie=(n("4917"),n("20d6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"700",fullscreen:e.$vuetify.breakpoint.smAndDown},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.showButton?n("v-btn",e._g({attrs:{dark:"",title:"一键签到？",color:"warning"}},i),[n("v-icon",[e._v("how_to_reg")]),n("span",{staticClass:"ml-2"},[e._v("一键签到？")])],1):e._e()]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"blue-grey darken-2"}},[n("v-toolbar-title",[e._v("关于自动签到")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",flat:"",color:"success",href:"https://github.com/ronggang/PT-Plugin-Plus/wiki/frequently-asked-questions#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8A%A9%E6%89%8B%E6%B2%A1%E6%9C%89%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E5%8A%9F%E8%83%BD",target:"_blank",rel:"noopener noreferrer nofollow",title:e.$t("common.help")}},[n("v-icon",[e._v("help")])],1)],1),n("v-card-text",{staticClass:"pa-0",staticStyle:{"max-height":"80vh"}},[n("v-alert",{staticClass:"ma-0",attrs:{value:!0,color:"warning"}},[n("div",[e._v("\n          感谢您使用助手，抱歉这里没有自动签到功能，如果您愿意，请阅读以下内容：\n          "),n("br"),n("br"),e._v("- 首先，自动签到对站点来说属于“作弊”行为； "),n("br"),e._v("-\n          其次，签到功能对站点来说目的是用来活跃人气，如果自动签到了，对站点来说没有任何作用；\n          "),n("br"),e._v("-\n          再次，签到功能一般具有奖励作用，如签到后给予一定的积分（魔力）；\n          "),n("br"),e._v("- 最后，本人痛恨任何“薅羊毛”行为； "),n("br"),e._v("-\n          综上所述，助手不会添加任何可以自动获取奖励的功能，现在不会有，将来也不会有；\n          "),n("br"),n("br"),e._v("PS：如果您喜欢一个站点，请用行动表示支持，而不是把一切交给自动化脚本；\n          "),n("br"),n("br"),e._v("那为什么有这个按钮？因为很多人问，不得已加上这个“功能”。\n        ")])])],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"success",flat:""},on:{click:e.hideButton}},[e._v("不再显示该按钮")]),n("v-btn",{attrs:{color:"error",flat:""},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("common.close")))])],1)],1)],1)}),Ve=[],Pe=i["default"].extend({data:function(){return{dialog:!1,showButton:!0}},methods:{hideButton:function(){this.showButton=!1,this.$store.dispatch("updateViewOptions",{key:"AutoSignWarning",options:{showButton:!1}}),this.dialog=!1}},created:function(){var e=this.$store.getters.viewsOptions("AutoSignWarning",{showButton:!0});Object.assign(this,e)}}),qe=Pe,Re=n("99d9"),Me=n("169a"),De=Object(h["a"])(qe,Ie,Ve,!1,null,null,null),Ne=De.exports;p()(De,{VAlert:Se["a"],VBtn:M["a"],VCard:D["a"],VCardActions:Re["a"],VCardText:Re["b"],VDialog:Me["a"],VDivider:U["a"],VIcon:v["a"],VSpacer:G["a"],VToolbar:Z["a"],VToolbarTitle:X["b"]});var Ue=n("0a02"),Ee=new T["a"],Be=i["default"].extend({components:{AutoSignWarning:Ne},data:function(){return{loading:!1,items:[],pagination:{rowsPerPage:-1},options:this.$store.state.options,beginTime:null,reloadCount:0,requestQueue:[],requestTimer:0,requestMsg:"",sites:[],filterKey:"",isSecret:!1,showUserName:!0,showSiteName:!0,showUserLevel:!0,showLevelRequirements:!0,showWeek:!1}},created:function(){this.init()},activated:function(){this.loading||this.init()},methods:{resetSites:function(){var e=this;this.sites=[],this.options.sites.forEach((function(t){var n=e.clone(t);n.allowGetUserInfo&&(n.user?(void 0===n.user.isLoading&&(n.user.isLoading=!1),void 0===n.user.isLogged&&(n.user.isLogged=!1),e.formatUserInfo(n.user,n)):n.user={id:"",name:"",isLogged:!1,isLoading:!1},e.sites.push(n))}))},init:function(){var e=this;Ee.sendRequest(r["b"].readConfig).then((function(t){e.options=e.clone(t),e.resetSites()})).catch();var t=this.$store.getters.viewsOptions(r["v"].home,{showUserName:!0,showSiteName:!0,showUserLevel:!0,showLevelRequirements:!0,showWeek:!1});Object.assign(this,t)},getInfos:function(){var e=this;this.loading=!0,this.beginTime=V()(),this.writeLog({event:"Home.getUserInfo.Start",msg:this.$t("home.startGetting").toString()}),this.sites.forEach((function(t,n){e.writeLog({event:"Home.getUserInfo.Processing",msg:e.$t("home.gettingForSite",{siteName:t.name}).toString(),data:{host:t.host,name:t.name}}),e.getSiteUserInfo(t)}))},writeLog:function(e){Ee.sendRequest(r["b"].writeLog,null,{module:r["k"].options,event:e.event,msg:e.msg,data:e.data})},removeQueue:function(e){var t=this.requestQueue.findIndex((function(t){return t.host===e.host}));e.user.isLoading=!1,-1!==t&&(this.requestQueue.splice(t,1),0==this.requestQueue.length&&(this.requestMsg=this.$t("home.requestCompleted",{second:V()().diff(this.beginTime,"second",!0)}).toString(),this.loading=!1,this.writeLog({event:"Home.getUserInfo.Finished",msg:this.requestMsg}),this.sites=this.clone(this.sites)))},formatUserInfo:function(e,t){var n=e.downloaded,i=e.uploaded;0==n&&i>0?e.ratio=-1:n>0&&(e.ratio=i/n),e.joinTime=Ue["a"].transformTime(e.joinTime,t.timezoneOffset),e.joinDateTime=V()(e.joinTime).format("YYYY-MM-DD HH:mm:ss");try{if(t.levelRequirements){e.nextLevel={},e.nextLevel.level=-1;for(var s=0,o=t.levelRequirements;s<o.length;s++){var a=o[s];if(a.requiredDate)break;if(!a.interval||!e.joinDateTime)break;a.requiredDate=V()(e.joinDateTime).add(a.interval,"week").format("YYYY-MM-DD")}for(var r=0,l=t.levelRequirements;r<l.length;r++){a=l[r];if(a.interval&&e.joinDateTime){var c=a.interval,u=V()(e.joinDateTime).add(c,"week");V()(new Date).isBefore(u)&&(e.nextLevel.requiredDate=u.format("YYYY-MM-DD"),e.nextLevel.level=a.level)}if(a.uploaded||n&&a.ratio){var d=a.uploaded?this.fileSizetoLength(a.uploaded):0,h=a.ratio?n*a.ratio:0,f=Math.max(d,h);i<f&&(e.nextLevel.uploaded=f-i,e.nextLevel.level=a.level)}if(a.downloaded){var p=this.fileSizetoLength(a.downloaded);n<p&&(e.nextLevel.downloaded=p-n,e.nextLevel.level=a.level)}if(a.ratio){var v=e.ratio,m=a.ratio;-1!=v&&v<m&&(e.nextLevel.ratio=a.ratio,e.nextLevel.level=a.level)}if(a.bonus){var g=e.bonus,b=a.bonus;g<b&&(e.nextLevel.bonus=b-g,e.nextLevel.level=a.level)}if(a.seedingPoints){var _=e.seedingPoints,k=a.seedingPoints;_<k&&(e.nextLevel.seedingPoints=k-_,e.nextLevel.level=a.level)}if(a.uploads){var w=e.uploads,y=a.uploads;w<y&&(e.nextLevel.uploads=y-w,e.nextLevel.level=a.level)}if(a.trueDownloaded){var S=e.trueDownloaded?e.trueDownloaded:0,x=this.fileSizetoLength(a.trueDownloaded);S<x&&(e.nextLevel.trueDownloaded=x-S,e.nextLevel.level=a.level)}if(e.nextLevel.level>0){e.nextLevel.name=a.name;break}}}}catch(C){}},fileSizetoLength:function(e){if("number"==typeof e)return e;var t=e.replace(/,/g,"").trim().match(/^(\d*\.?\d+)(.*[^ZEPTGMK])?([ZEPTGMK](B|iB))$/i);if(t){var n=parseFloat(t[1]),i=t[3];switch(!0){case/Zi?B/i.test(i):return n*Math.pow(2,70);case/Ei?B/i.test(i):return n*Math.pow(2,60);case/Pi?B/i.test(i):return n*Math.pow(2,50);case/Ti?B/i.test(i):return n*Math.pow(2,40);case/Gi?B/i.test(i):return n*Math.pow(2,30);case/Mi?B/i.test(i):return n*Math.pow(2,20);case/Ki?B/i.test(i):return n*Math.pow(2,10);default:return n}}return 0},getSiteUserInfo:function(e){var t=this;if(e.user&&!e.offline){var n=e.user;n.isLoading=!0,n.isLogged=!1,n.lastErrorMsg="",this.requestQueue.push(Object.assign({},e)),Ee.sendRequest(r["b"].getUserInfo,null,e).then((function(i){console.log(i),i&&i.name&&(n=Object.assign(n,i),t.formatUserInfo(n,e))})).catch((function(e){console.log("error",e),e.msg&&e.msg.status?n.lastErrorMsg=e.msg.msg:n.lastErrorMsg=t.$t("home.getUserInfoError").toString()})).finally((function(){t.removeQueue(e),t.$store.commit("readConfig")}))}},abortRequest:function(e){var t=this;Ee.sendRequest(r["b"].abortGetUserInfo,null,e).then((function(){t.writeLog({event:"Home.getUserInfo.Abort",msg:t.$t("home.getUserInfoAbort",{siteName:e.name}).toString()})})).catch((function(){t.writeLog({event:"Home.getUserInfo.Abort.Error",msg:t.$t("home.getUserInfoAbortError",{siteName:e.name}).toString()}),t.removeQueue(e)}))},clone:function(e){return JSON.parse(JSON.stringify(e))},updateViewOptions:function(){this.$store.dispatch("updateViewOptions",{key:r["v"].home,options:{showUserName:this.showUserName,showSiteName:this.showSiteName,showUserLevel:this.showUserLevel,showLevelRequirements:this.showLevelRequirements,showWeek:this.showWeek}})},formatError:function(e){return e.lastErrorMsg?e.lastErrorMsg:e.lastUpdateStatus&&e.lastUpdateStatus!==r["u"].success?this.$t("service.user."+e.lastUpdateStatus):""}},filters:{formatRatio:function(e){if(e>1e4||-1==e)return"∞";var t=parseFloat(e);return isNaN(t)?"":t.toFixed(2)}},computed:{headers:function(){return[{text:this.$t("home.headers.site"),align:"center",value:"name",width:"110px"},{text:this.$t("home.headers.userName"),align:"left",value:"user.name"},{text:this.$t("home.headers.levelName"),align:"left",value:"user.levelName"},{text:this.$t("home.headers.activitiyData"),align:"right",value:"user.uploaded",width:"120px"},{text:this.$t("home.headers.ratio"),align:"right",value:"user.ratio"},{text:this.$t("home.headers.seeding"),align:"right",value:"user.seeding"},{text:this.$t("home.headers.seedingSize"),align:"right",value:"user.seedingSize"},{text:this.$t("home.headers.bonus"),align:"right",value:"user.bonus"},{text:this.$t("home.headers.bonusPerHour"),align:"right",value:"user.bonusPerHour"},{text:this.$t("home.headers.joinTime"),align:"right",value:"user.joinTime"},{text:this.$t("home.headers.lastUpdateTime"),align:"right",value:"user.lastUpdateTime"},{text:this.$t("home.headers.status"),align:"center",value:"user.lastUpdateStatus"}]}}}),Ae=Be,je=(n("ccd7"),n("8212")),ze=n("4ca6"),Ke=n("12b2"),Fe=n("8fea"),Ye=n("490a"),He=n("b73d"),We=Object(h["a"])(Ae,Oe,Te,!1,null,null,null),Qe=We.exports;p()(We,{VAlert:Se["a"],VAvatar:je["a"],VBadge:ze["a"],VBtn:M["a"],VCard:D["a"],VCardTitle:Ke["a"],VContainer:N["a"],VDataTable:Fe["a"],VIcon:v["a"],VMenu:z["a"],VProgressCircular:Ye["a"],VSpacer:G["a"],VSwitch:He["a"],VTextField:Y["a"]}),i["default"].use(Le["a"]);var Je=new Le["a"]({routes:[{path:"/",name:"home",component:Qe,alias:"/home",meta:{keepAlive:!0}},{path:"/set-sites",name:"set-sites",component:function(){return n.e("chunk-015b843d").then(n.bind(null,"92b8"))},meta:{keepAlive:!0}},{path:"/set-support-schema",name:"set-support-schema",component:function(){return n.e("chunk-1de57bb4").then(n.bind(null,"7170"))}},{path:"/set-download-clients",name:"set-download-clients",component:function(){return n.e("chunk-330b850c").then(n.bind(null,"043d"))}},{path:"/set-base",name:"set-base",component:function(){return n.e("chunk-42375e72").then(n.bind(null,"45cf"))}},{path:"/set-download-paths",name:"set-download-paths",component:function(){return n.e("chunk-6bb8f5a8").then(n.bind(null,"080a"))}},{path:"/set-backup",name:"set-backup",component:function(){return n.e("chunk-0a1c3f45").then(n.bind(null,"8819"))}},{path:"/technology-stack",name:"technology-stack",component:function(){return n.e("chunk-4665df3c").then(n.bind(null,"6556"))}},{path:"/set-language",name:"set-language",component:function(){return n.e("chunk-2d0d3e49").then(n.bind(null,"5f68"))}},{path:"/set-search-solution",name:"set-search-solution",component:function(){return n.e("chunk-346e5a20").then(n.bind(null,"aa53"))}},{path:"/donate",name:"donate",component:function(){return n.e("chunk-2d207f04").then(n.bind(null,"a351"))}},{path:"/set-site-plugins/:host",name:"set-site-plugins",component:function(){return n.e("chunk-026c9eed").then(n.bind(null,"b637"))},props:!0},{path:"/search-torrent/:key?/:host?",name:"search-torrent",component:function(){return n.e("chunk-4eea6028").then(n.bind(null,"17ad"))},props:!0,meta:{keepAlive:!0}},{path:"/history",name:"history",component:function(){return n.e("chunk-761f411d").then(n.bind(null,"8cd1"))}},{path:"/system-logs",name:"system-logs",component:function(){return n.e("chunk-e9607d78").then(n.bind(null,"bdd7"))}},{path:"/set-site-search-entry/:host",name:"set-site-search-entry",component:function(){return n.e("chunk-569dbb1d").then(n.bind(null,"f359"))},props:!0},{path:"/dev-team",name:"dev-team",component:function(){return n.e("chunk-37a19064").then(n.bind(null,"8d3b"))}},{path:"/user-data-timeline",name:"user-data-timeline",component:function(){return n.e("chunk-2cfa392a").then(n.bind(null,"6d73"))}},{path:"/statistic/:host?",name:"statistic",component:function(){return n.e("chunk-1c032292").then(n.bind(null,"1f4e"))}},{path:"/set-permissions",name:"set-permissions",component:function(){return Promise.resolve().then(n.bind(null,"d97c"))}},{path:"/collection",name:"collection",component:function(){return n.e("chunk-96799c68").then(n.bind(null,"bf34"))},meta:{keepAlive:!0}},{path:"/search-result-snapshot",name:"search-result-snapshot",component:function(){return n.e("chunk-2d0ab081").then(n.bind(null,"1419"))}},{path:"/keep-upload-task",name:"keep-upload-task",component:function(){return n.e("chunk-46722ad3").then(n.bind(null,"d479"))}}]}),Ge=n("9ab4"),Ze=n("2f62"),Xe=n("8d81"),et=n.n(Xe),tt=function(e){function t(){return e.call(this)||this}return Object(Ge["b"])(t,e),t.prototype.save=function(e){return this.sendRequest(r["b"].saveConfig,null,e)},t}(T["a"]),nt=new tt;i["default"].use(Ze["a"]);var it=new Ze["a"].Store({state:{options:{sites:[],clients:[]},schemas:[],uiOptions:{},initialized:!1,searching:!1},mutations:{readConfig:function(e){nt.sendRequest(r["b"].readConfig,(function(t){e.options=t}))},resetConfig:function(e,t){var n=e.options.system;e.options=Object.assign({},t),e.options.system=n,nt.sendRequest(r["b"].saveConfig,null,e.options)},updateConfig:function(e,t){Object.assign(e.options,t),nt.sendRequest(r["b"].saveConfig,null,e.options)},addSite:function(e,t){e.options.sites.push(t),nt.sendRequest(r["b"].saveConfig,null,e.options)},updateSite:function(e,t){var n=e.options.sites.findIndex((function(e){return e.host===t.host}));-1!==n&&(e.options.sites[n]=t,nt.sendRequest(r["b"].saveConfig,null,e.options))},removeSite:function(e,t){var n=e.options.sites.findIndex((function(e){return e.host===t.host}));-1!==n&&(e.options.sites.splice(n,1),nt.sendRequest(r["b"].saveConfig,null,e.options))},addClient:function(e,t){t.id=et()((new Date).toString()),e.options.clients.push(t),nt.sendRequest(r["b"].saveConfig,null,e.options)},updateClient:function(e,t){var n=e.options.clients.findIndex((function(e){return t.id===e.id}));-1!==n&&(e.options.clients[n]=t,nt.sendRequest(r["b"].saveConfig,null,e.options))},removeClient:function(e,t){var n=e.options.clients.findIndex((function(e){return e.id===t.id}));if(-1!==n){var i=e.options.clients[n];e.options.defaultClientId==i.id&&(e.options.defaultClientId=""),e.options.clients.splice(n,1),nt.sendRequest(r["b"].saveConfig,null,e.options)}},clearClients:function(e){e.options.clients=[],e.options.defaultClientId="",nt.sendRequest(r["b"].saveConfig,null,e.options)},updatePathsOfClient:function(e,t){var n=e.options.clients.find((function(e){return t.clientId===e.id}));n&&(n.paths||(n.paths={}),t.site&&t.site.host?n.paths[t.site.host]=t.paths:n.paths[r["f"].allSite]=t.paths,nt.sendRequest(r["b"].saveConfig,null,e.options))},removePathsOfClient:function(e,t){var n=e.options.clients.find((function(e){return t.clientId===e.id}));if(n&&n.paths){var i="";i=t.site?t.site.host:r["f"].allSite,delete n.paths[i],nt.sendRequest(r["b"].saveConfig,null,e.options)}},addPlugin:function(e,t){var n=e.options.sites.find((function(e){return e.host===t.host}));n&&(n.plugins||(n.plugins=[]),t.plugin.id=et()((new Date).toString()),n.plugins.push(t.plugin),nt.sendRequest(r["b"].saveConfig,null,e.options))},updatePlugin:function(e,t){var n=e.options.sites.find((function(e){return e.host===t.host}));if(n){var i=n.plugins.findIndex((function(e){return e.id===t.plugin.id}));-1!==i&&(n.plugins[i]=t.plugin,nt.sendRequest(r["b"].saveConfig,null,e.options))}},removePlugin:function(e,t){var n=e.options.sites.find((function(e){return e.host===t.host}));if(n){var i=n.plugins.findIndex((function(e){return e.id===t.plugin.id}));-1!==i&&(n.plugins.splice(i,1),nt.sendRequest(r["b"].saveConfig,null,e.options))}},updateOptions:function(e,t){e.options=t},updateUIOptions:function(e,t){e.uiOptions=t},updateSearchStatus:function(e,t){e.searching=t}},actions:{resetRunTimeOptions:function(e,t){var n=e.commit;e.state;nt.sendRequest(r["b"].resetRunTimeOptions,null,t).then((function(e){n("updateOptions",e)})).catch((function(e){console.log("store.resetRunTimeOptions.error",e)}))},readConfig:function(e){var t=e.commit,n=e.state;return new Promise((function(e,i){nt.sendRequest(r["b"].writeLog,null,{module:r["k"].options,event:"Options.readConfig",msg:"开始加载配置信息"}),nt.sendRequest(r["b"].readConfig).then((function(s){return t("updateOptions",s),s.system?s.system.clients&&s.system.schemas?(nt.sendRequest(r["b"].writeLog,null,{module:r["k"].options,event:"Options.readConfig.Finished",msg:"配置加载完成"}),n.initialized=!0,void e(s)):(nt.sendRequest(r["b"].writeLog,null,{module:r["k"].options,event:"Options.readConfig.Error",msg:"配置信息加载失败，没有获取到下载服务器或站点架构信息"}),void i("Options.readConfig.Error")):(nt.sendRequest(r["b"].writeLog,null,{module:r["k"].options,event:"Options.readConfig.Error",msg:"配置信息加载失败，没有获取到系统定义信息"}),void i("Options.readConfig.Error"))})).catch((function(e){i(e)}))}))},saveConfig:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options);Object.assign(s,t),nt.sendRequest(r["b"].saveConfig,null,s).then((function(){n("updateOptions",s)})).catch((function(e){console.log("store.saveConfig.error",e)}))},readUIOptions:function(e){var t=e.commit;return new Promise((function(e,n){nt.sendRequest(r["b"].readUIOptions).then((function(n){t("updateUIOptions",n),e(n)})).catch((function(e){console.log("store.saveConfig.error",e),n(e)}))}))},saveUIOptions:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.uiOptions);Object.assign(s,t),nt.sendRequest(r["b"].saveUIOptions,null,s).then((function(){n("updateUIOptions",s)})).catch()},updatePagination:function(e,t){var n=e.commit,i=e.state,s=i.uiOptions.paginations||{};s[t.key]=t.options,i.uiOptions.paginations=s,nt.sendRequest(r["b"].saveUIOptions,null,i.uiOptions).then((function(){n("updateUIOptions",i.uiOptions)})).catch()},updateViewOptions:function(e,t){var n=e.commit,i=e.state,s=i.uiOptions.views||{};s[t.key]=t.options,i.uiOptions.views=s,nt.sendRequest(r["b"].saveUIOptions,null,i.uiOptions).then((function(){n("updateUIOptions",i.uiOptions)})).catch()},updateSearchSolution:function(e,t){var n=e.commit,i=e.state,s=-1;i.options.searchSolutions&&(s=i.options.searchSolutions.findIndex((function(e){return e.id===t.id})));var o=Object.assign({},i.options);o.searchSolutions||(o.searchSolutions=[]),-1==s?(t.id=et()((new Date).toString()),o.searchSolutions.push(t)):o.searchSolutions[s]=t,nt.save(o).then((function(){n("updateOptions",o)})).catch()},removeSearchSolution:function(e,t){var n=e.commit,i=e.state,s=-1;i.options.searchSolutions&&(s=i.options.searchSolutions.findIndex((function(e){return e.id===t.id})));var o=Object.assign({},i.options);o.searchSolutions&&s>-1&&(o.defaultSearchSolutionId==t.id&&(o.defaultSearchSolutionId=""),o.searchSolutions.splice(s,1),nt.save(o).then((function(){n("updateOptions",o)})).catch())},addSiteSearchEntry:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options),o=s.sites.find((function(e){return e.host===t.host}));o&&(o.searchEntry||(o.searchEntry=[]),t.item.id=et()((new Date).toString()),o.searchEntry.push(t.item),n("updateOptions",s),nt.save(s))},updateSiteSearchEntry:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options),o=s.sites.find((function(e){return e.host===t.host}));if(o){var a=o.searchEntry.findIndex((function(e){return e.isCustom&&e.id===t.item.id}));-1!==a&&(o.searchEntry[a]=t.item,n("updateOptions",s),nt.save(s))}},removeSiteSearchEntry:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options),o=s.sites.find((function(e){return e.host===t.host}));if(o){var a=o.searchEntry.findIndex((function(e){return e.isCustom&&e.id===t.item.id}));-1!==a&&(o.searchEntry.splice(a,1),n("updateOptions",s),nt.save(s))}},addLanguage:function(e,t){e.commit,e.state;nt.sendRequest(r["b"].addLanguage,null,t).then((function(){})).catch((function(e){}))},replaceLanguage:function(e,t){e.commit,e.state;nt.sendRequest(r["b"].replaceLanguage,null,t).then((function(){})).catch((function(e){}))},addBackupServer:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options);s.backupServers||(s.backupServers=[]),t.id=et()((new Date).toString()),s.backupServers.push(t),n("updateOptions",s),nt.save(s)},updateBackupServer:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options);if(s.backupServers){var o=s.backupServers.findIndex((function(e){return e.id===t.id}));-1!==o&&(s.backupServers[o]=t,n("updateOptions",s),nt.save(s))}},removeBackupServer:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options);if(s.backupServers){var o=s.backupServers.findIndex((function(e){return e.id===t.id}));-1!==o&&(s.backupServers.splice(o,1),n("updateOptions",s),nt.save(s))}}},getters:{sites:function(e){return e.options.system&&e.options.system.sites&&e.options.system.sites.filter((function(t){return!e.options.sites||-1===e.options.sites.findIndex((function(e){return e.host===t.host}))}))},clients:function(e){return e.options.system&&e.options.system.clients&&e.options.system.clients.filter((function(t){return!e.options.clients||-1===e.options.clients.findIndex((function(e){return e.name===t.name}))}))},defaultClient:function(e){return e.options.defaultClientId?e.options.clients.find((function(t){return e.options.defaultClientId===t.id})):null},clientOptions:function(e){return function(t,n){void 0===n&&(n=""),n||(n=t.defaultClientId||e.options.defaultClientId);var i=e.options.clients.find((function(e){return e.id===n}));return i}},siteDefaultPath:function(e){return function(t,n){void 0===n&&(n=""),n||(n=t.defaultClientId||e.options.defaultClientId);var i=e.options.clients.find((function(e){return e.id===n})),s="";if(i&&i.paths)for(var o in i.paths)if(t.host===o){s=i.paths[o][0];break}return s}},pagination:function(e){return function(t,n){return e.uiOptions&&e.uiOptions.paginations&&e.uiOptions.paginations[t]||n}},viewsOptions:function(e){return function(t,n){return e.uiOptions&&e.uiOptions.views&&e.uiOptions.views[t]||n}}}});window.chrome=window.chrome||{},chrome&&chrome.tabs&&chrome.tabs.getCurrent((function(e){nt.sendRequest(r["b"].updateOptionsTabId,null,e.id)}));var st=n("c67c"),ot=n("a925");i["default"].use(ot["a"]);var at=new ot["a"]({locale:"",fallbackLocale:"en"}),rt=function(){function e(){this.loadedLanguages=[],this.config=[],this.currentLanguage="",this.onChanged=function(){},this.onAdded=function(){},this.onReplaced=function(){},this.initialized=!1,this.vuei18n=at,this.loadLangResource("en"),this.loadLangResource("zh-CN")}return e.prototype.init=function(e){var t=this;return new Promise((function(n,i){t.loadConfig().then((function(){t.reset(e).then((function(){t.initialized=!0,n(at)})).catch((function(){i()}))})).catch((function(){console.error("Loading language configuration file failed. (加载语言配置文件失败)")}))}))},e.prototype.loadConfig=function(){var e=this;return new Promise((function(t,n){$.getJSON(oe["a"].host+"/i18n.json").done((function(n){e.config=n,t(e.config)})).fail((function(e){n(e)}))}))},e.prototype.loadLangResource=function(e){var t=this;return new Promise((function(n,i){$.getJSON(oe["a"].host+"/i18n/"+e+".json").done((function(e){t.push(e),n(e)})).fail((function(e){i(e)}))}))},e.prototype.push=function(e){e.name&&e.code&&(this.exists(e.code)||(at.setLocaleMessage(e.code,e.words),this.loadedLanguages.push(e.code)))},e.prototype.change=function(e){this.currentLanguage!==e&&(at.locale=e,this.currentLanguage=e,this.initialized&&this.onChanged.call(this,e))},e.prototype.reset=function(e){var t=this;return new Promise((function(n,i){if(t.currentLanguage!==e){if(!t.exists(e))return void t.loadLangResource(e).then((function(){t.change(e),n(e)})).catch((function(s){"en"==e?i(s):t.reset("en").then((function(){n(e)}))}));t.change(e)}n(e)}))},e.prototype.add=function(e){var t=this;return new Promise((function(n,i){e.name&&e.code?t.exists(e.code)?i():(t.push(e),at.locale=e.code,t.currentLanguage=e.code,t.initialized&&t.onAdded.call(t,e),n(e.code)):i()}))},e.prototype.replace=function(e){var t=this;return new Promise((function(n,i){e.name&&e.code?t.exists(e.code)&&(at.setLocaleMessage(e.code,e.words),at.locale=e.code,t.currentLanguage=e.code,t.initialized&&t.onReplaced.call(t,e),n(e.code)):i()}))},e.prototype.exists=function(e){return this.loadedLanguages.includes(e)},e}(),lt=function(){function e(){this.options={sites:[],clients:[]},this.i18n=new rt,this.loadCount=0,this.initI18n(),this.initVueConfig(),this.initMainVM(),this.init()}return e.prototype.initVueConfig=function(){var e=this;i["default"].config.productionTip=!1;var t=function(e){st["a"].hasOwnProperty(e)&&i["default"].filter(e,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return st["a"][e].call(st["a"],t)}))};for(var n in st["a"])t(n);i["default"].filter("formatDate",(function(e,t){return void 0===t&&(t="YYYY-MM-DD HH:mm"),e?V()(e).isValid()?(/^(\d){10}$/.test(e)&&(e=1e3*parseInt(e)),V()(e).format(t)):e:""})),i["default"].filter("timeAgo",(function(t,n){if(void 0===n&&(n=!1),!t)return"";var i={year:e.i18n.vuei18n.t("timeline.time.year",e.i18n.currentLanguage).toString(),month:e.i18n.vuei18n.t("timeline.time.month",e.i18n.currentLanguage).toString(),day:e.i18n.vuei18n.t("timeline.time.day",e.i18n.currentLanguage).toString(),hour:e.i18n.vuei18n.t("timeline.time.hour",e.i18n.currentLanguage).toString(),mins:e.i18n.vuei18n.t("timeline.time.mins",e.i18n.currentLanguage).toString(),week:e.i18n.vuei18n.t("timeline.time.week",e.i18n.currentLanguage).toString()},s=(new Date).getTime(),o=Math.floor(Math.abs(s-t)/1e3/60),a=Math.floor(o/60);o-=60*a;var r=Math.floor(a/24);if(a-=24*r,n){var l=Math.floor(r/7);return l<1?e.i18n.vuei18n.t("timeline.time.lessThanAWeek",e.i18n.currentLanguage).toString():""+l+i.week}var c=Math.floor(r/30),u=r-30*c,d=Math.floor(r/365);c-=12*d;while(c>12)d++,c-=12;var h="";switch(!0){case d>0:h=d+i["year"]+c+i["month"];break;case c>0:h=c+i["month"]+u+i["day"];break;case r>0:h=r+i["day"]+a+i["hour"];break;case a>0:h=a+i["hour"]+o+i["mins"];break;case o>0:h=o+i["mins"];break;default:h="< 1"+i["mins"]}return h+e.i18n.vuei18n.t("timeline.time.ago",e.i18n.currentLanguage).toString()}))},e.prototype.initI18n=function(){var e=this;this.i18n.onChanged=function(t){e.options.locale=t,it.dispatch("saveConfig",{locale:t}),e.vm&&(e.vm.$vuetify.lang.current="zh-CN"!=t?"en":"zh-Hans")},this.i18n.onAdded=function(e){it.dispatch("addLanguage",e)},this.i18n.onReplaced=function(e){it.dispatch("replaceLanguage",e)},window.i18nService=this.i18n,s["a"].init("en")},e.prototype.initMainVM=function(){this.vm=new i["default"]({router:Je,store:it,i18n:this.i18n.vuei18n,render:function(e){return e($e)}}),this.vm.$mount("#app")},e.prototype.init=function(){var e=this,t=[];t.push(it.dispatch("readConfig")),t.push(it.dispatch("readUIOptions")),Promise.all(t).then((function(t){e.options=t[0],e.i18n.init(e.options.locale||"zh-CN").then((function(t){"zh-CN"!=e.options.locale?e.vm.$vuetify.lang.current="en":e.vm.$vuetify.lang.current="zh-Hans",e.vm.$children[0].init()}))})).catch((function(t){++e.loadCount<5?setTimeout((function(){e.init()}),1e3):alert("加载配置失败？？"+t),console.log(t)}))},e}();(function(){new lt})()},d97c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"mt-3"},[n("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[n("v-card",[n("v-img",{attrs:{src:"./assets/banner/default.jpg","aspect-ratio":"2.75"}}),n("v-card-title",{staticClass:"pb-1"},[e.cancelled?n("div",{staticClass:"title mb-2"},[e._v(e._s(e.$t("permissions.cancelled")))]):n("div",[n("h3",{staticClass:"title mb-2"},[e._v(e._s(e.$t("permissions.title")))]),n("h3",[e._v(e._s(e.$t("permissions.subtitle")))]),n("v-data-table",{attrs:{headers:e.headers,items:e.items,"item-key":"key","select-all":"","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[t.item.visible?n("tr",[n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("td",[e._v(e._s(e.$t(t.item.title)))]),n("td",[n("v-switch",{attrs:{"true-value":"true","false-value":"false","input-value":t.item.enabled?"true":"false","hide-details":""},on:{click:function(n){return n.stopPropagation(),e.updatePermissions(t.item)}}})],1)]):e._e()]}}],null,!1,393232643),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)]),e.cancelled?e._e():n("v-card-actions",[n("v-btn",{attrs:{flat:"",color:"success",disabled:0==e.selected.length},on:{click:e.authorize}},[e._v(e._s(e.$t("permissions.authorize")))]),n("v-btn",{attrs:{flat:"",color:"orange"},on:{click:e.cancel}},[e._v(e._s(e.$t("permissions.cancel")))])],1)],1)],1)],1)},s=[],o=(n("6762"),n("2fdb"),n("ac6a"),n("2b0e")),a=o["default"].extend({data:function(){return{permissions:[{origins:["http://*/*","https://*/*"],title:"permissions.details.allSites",visible:!0,isOrigin:!0},{key:"downloads",visible:!0,title:"permissions.details.downloads"},{key:"cookies",visible:!0,title:"permissions.details.cookies"}],selected:[],cancelled:!1,items:[]}},methods:{authorize:function(){var e=this;if(chrome&&chrome.permissions){var t={permissions:[],origins:[]};this.selected.forEach((function(e){var n;e.visible&&(e.isOrigin?(n=t.origins).push.apply(n,e.origins):t.permissions.push(e.key))})),chrome.permissions.request(t,(function(t){e.$emit("update",t)}))}else this.$emit("update",!0)},cancel:function(){this.cancelled=!0},updatePermissions:function(e){if(e.visible){e.enabled=!e.enabled;var t={};t=e.isOrigin?{origins:e.origins}:{permissions:[e.key]},e.enabled?chrome.permissions.request(t,(function(t){e.enabled=t})):chrome.permissions.remove(t,(function(t){e.enabled=!t})),console.log(e)}}},created:function(){var e=this;if(chrome&&chrome.permissions){var t=chrome.runtime.getManifest();this.permissions.forEach((function(n){var i={};n.isOrigin?i={origins:n.origins}:(t.optional_permissions&&n.key&&(n.visible=t.optional_permissions.includes(n.key)),i={permissions:[n.key]}),n.visible&&chrome.permissions.contains(i,(function(t){e.items.push(Object.assign({enabled:t},n))}))}))}else this.items=this.permissions},computed:{headers:function(){return[{text:this.$t("permissions.headers.title"),align:"left",sortable:!1,value:"title"},{text:this.$t("permissions.headers.enabled"),align:"left",value:"enabled",sortable:!1}]}}}),r=a,l=(n("6d99"),n("2877")),c=n("6544"),u=n.n(c),d=n("8336"),h=n("b0af"),f=n("99d9"),p=n("12b2"),v=n("ac7c"),m=n("8fea"),g=n("0e8f"),b=n("adda"),_=n("a722"),k=n("b73d"),w=Object(l["a"])(r,i,s,!1,null,"21c1f1d8",null);t["default"]=w.exports;u()(w,{VBtn:d["a"],VCard:h["a"],VCardActions:f["a"],VCardTitle:p["a"],VCheckbox:v["a"],VDataTable:m["a"],VFlex:g["a"],VImg:b["a"],VLayout:_["a"],VSwitch:k["a"]})}});