(function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],u=0,d=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);h&&h(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var r=n[s];0!==o[r]&&(i=!1)}i&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},s={index:0},o={index:0},a=[];function r(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-13555d18":"dcdcd94a","chunk-1de57bb4":"38ef58dc","chunk-2d0ab081":"7078b090","chunk-2d0d3e49":"ea8928c0","chunk-2d0e93b1":"274e4eb1","chunk-2d207f04":"9a27fe16","chunk-312da0e2":"4ce17cd2","chunk-3311d7d4":"86b41fb6","chunk-34974cfb":"b16f81a8","chunk-4f44ec56":"553722d1","chunk-50e00a12":"105ad30b","chunk-566edeef":"75bc81b2","chunk-6513cab0":"cabfc9c1","chunk-6894dbf1":"a685ec77","chunk-6bb8f5a8":"1e99fb49","chunk-b5285320":"b49c90cc","chunk-cc82d62c":"52521b36","chunk-ce66cee4":"56e9e374","chunk-e9607d78":"73b17a31","chunk-f0ce86ae":"7c16c983","chunk-fc3f34d4":"7ea7374f"}[e]+".js"}function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-13555d18":1,"chunk-1de57bb4":1,"chunk-312da0e2":1,"chunk-3311d7d4":1,"chunk-4f44ec56":1,"chunk-50e00a12":1,"chunk-566edeef":1,"chunk-6513cab0":1,"chunk-6894dbf1":1,"chunk-6bb8f5a8":1,"chunk-b5285320":1,"chunk-cc82d62c":1,"chunk-ce66cee4":1,"chunk-e9607d78":1,"chunk-f0ce86ae":1,"chunk-fc3f34d4":1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-13555d18":"5b4cc742","chunk-1de57bb4":"153ab7fd","chunk-2d0ab081":"31d6cfe0","chunk-2d0d3e49":"31d6cfe0","chunk-2d0e93b1":"31d6cfe0","chunk-2d207f04":"31d6cfe0","chunk-312da0e2":"a21d6262","chunk-3311d7d4":"f154ac52","chunk-34974cfb":"31d6cfe0","chunk-4f44ec56":"c7f9297d","chunk-50e00a12":"e4b1b7c7","chunk-566edeef":"9875a461","chunk-6513cab0":"78a237b6","chunk-6894dbf1":"fc087c93","chunk-6bb8f5a8":"364adcc9","chunk-b5285320":"6c224007","chunk-cc82d62c":"8dd9547d","chunk-ce66cee4":"a6e55058","chunk-e9607d78":"78e26da9","chunk-f0ce86ae":"1ffef6ce","chunk-fc3f34d4":"4a1c3364"}[e]+".css",o=l.p+i,a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var c=a[r],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===i||u===o))return t()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){c=d[r],u=c.getAttribute("data-href");if(u===i||u===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var i=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=i,delete s[e],h.parentNode.removeChild(h),n(a)},h.href=o;var v=document.getElementsByTagName("head")[0];v.appendChild(h)})).then((function(){s[e]=0})));var i=o[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,n){i=o[e]=[t,n]}));t.push(i[2]=a);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=r(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(h);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",d.name="ChunkLoadError",d.type=i,d.request=s,n[1](d)}o[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var h=u;a.push([0,"chunk-vendors","chunk-common"]),n()})({0:function(e,t,n){e.exports=n("d1a2")},1583:function(e,t,n){},"1c16":function(e,t,n){},"574f":function(e,t,n){"use strict";n("1c16")},"60d1":function(e,t,n){"use strict";n("1583")},"6d99":function(e,t,n){"use strict";n("cb42")},b8c4:function(e,t,n){},cb42:function(e,t,n){},ceda:function(e,t,n){"use strict";n("b8c4")},d1a2:function(e,t,n){"use strict";n.r(t);n("ac6a"),n("5df3"),n("6b54");var i=n("d225"),s=n("b0b4"),o=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),a=n("7e92"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire",dark:this.darkMode}},[e.initializing?[n("v-progress-linear",{staticClass:"pa-0 ma-0",attrs:{indeterminate:!0,color:"info",height:"5"}}),n("v-alert",{attrs:{value:!0,type:"info"}},[n("div",[n("div",[e._v(e._s(e.$t("app.initializing","zh-CN")))]),n("div",[e._v(e._s(e.$t("app.initializing","en")))])])])]:[n("v-alert",{attrs:{value:!e.$store.state.initialized,type:"error"}},[e._v(e._s(e.$t("app.initError")))]),e.$store.state.initialized&&e.havePermissions?[n("Navigation",{model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}}),n("Topbar",{model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}}),n("Content"),n("Footer")]:n("Permissions",{on:{update:e.reload}})]],2)},l=[],c=n("f62e"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{clipped:"",fixed:"",app:"",width:"220"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},e._l(e.navs,(function(t,i){return n("v-list",{key:i,attrs:{dense:""}},[t.title?n("v-subheader",{staticClass:"grey--text text--darken-1"},[e._v(e._s(e.$t(t.title)))]):e._e(),e._l(t.items,(function(t,i){return[!1!==t.visible?n("v-list-tile",{key:i,attrs:{to:t.key,href:t.url,target:t.url?"_blank":"",rel:"noopener noreferrer nofollow"}},[n("v-list-tile-action",{staticStyle:{"min-width":"42px","margin-left":"13px"}},[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(e.$t(t.title)))])],1)],1):e._e()]}))],2)})),1)},d=[],h=o["default"].extend({props:{value:Boolean},data:function(){return{drawer:this.$store.state.options.navBarIsOpen}},model:{prop:"value",event:"change"},watch:{drawer:function(){this.$emit("change",this.drawer)},value:function(){this.drawer=this.value}},computed:{navs:function(){return[{title:"navigation.dashboard.title",key:"group-",items:[{title:"navigation.dashboard.userData",icon:"dashboard",key:"/home"},{title:"navigation.dashboard.searchResults",icon:"search",key:"/search-torrent"},{title:"navigation.dashboard.searchResultSnapshot",icon:"add_a_photo",key:"/search-result-snapshot",visible:this.$store.state.options.allowSaveSnapshot},{title:"navigation.dashboard.history",icon:"history",key:"/history",visible:this.$store.state.options.saveDownloadHistory},{title:"navigation.dashboard.collection",icon:"favorite",key:"/collection"},{title:"navigation.dashboard.keepUploadTask",icon:"merge_type",key:"/keep-upload-task"}]},{title:"navigation.settings.title",items:[{title:"navigation.settings.downloadClients",icon:"cloud_download",key:"/set-download-clients"},{title:"navigation.settings.base",icon:"settings",key:"/set-base"},{title:"navigation.settings.sites",icon:"public",key:"/set-sites"},{title:"navigation.settings.downloadPaths",icon:"folder_open",key:"/set-download-paths"},{title:"navigation.settings.searchSolution",icon:"widgets",key:"/set-search-solution"},{title:"navigation.settings.backup",icon:"restore",key:"/set-backup"},{title:"navigation.settings.permissions",icon:"verified_user",key:"/set-permissions"}]},{title:"navigation.thanks.title",items:[{title:"navigation.thanks.reference",icon:"developer_board",key:"/technology-stack"},{title:"navigation.thanks.specialThanksTo",icon:"people",key:"/dev-team"}]}]}}}),v=h,f=n("2877"),m=n("6544"),p=n.n(m),g=n("132d"),_=n("8860"),b=n("ba95"),k=n("40fe"),y=n("5d23"),w=n("f774"),S=n("e0c7"),C=Object(f["a"])(v,u,d,!1,null,null,null),x=C.exports;p()(C,{VIcon:g["a"],VList:_["a"],VListTile:b["a"],VListTileAction:k["a"],VListTileContent:y["b"],VListTileTitle:y["d"],VNavigationDrawer:w["a"],VSubheader:S["a"]});var T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{attrs:{color:e.baseColor,app:"",fixed:"","clipped-left":"",id:"system-topbar"}},[n("v-toolbar-side-icon",{attrs:{title:e.$t("topbar.navBarTip")},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",{staticClass:"hidden-md-and-down",staticStyle:{width:"220px"}},[n("span",[e._v(e._s(e.$t("topbar.title")))])]),n("SearchBox"),n("v-btn",{staticClass:"grey--text text--darken-2 hidden-xs-only",attrs:{flat:"",to:"/search-torrent/__LatestTorrents__",title:e.$t("topbar.showNewTorrentsTip")}},[n("v-icon",[e._v("fiber_new")]),n("span",{staticClass:"ml-2 hidden-md-and-down"},[e._v(e._s(e.$t("topbar.showNewTorrents")))])],1),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[n("v-btn",{staticClass:"grey--text text--darken-2",attrs:{flat:"",href:"https://github.com/pt-plugins/PT-Plugin-Plus",target:"_blank",rel:"noopener noreferrer nofollow",title:e.$t("topbar.github")}},[n("v-icon",[e._v("home")]),n("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("topbar.github")))])],1),n("v-btn",{staticClass:"grey--text text--darken-2",attrs:{flat:"",href:"https://github.com/pt-plugins/PT-Plugin-Plus/wiki",target:"_blank",title:e.$t("topbar.help"),rel:"noopener noreferrer nofollow"}},[n("v-icon",[e._v("help")]),n("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("topbar.help")))])],1)],1)],1)},L=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"offset-y":"","nudge-right":"32"},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[n("v-text-field",{staticClass:"mt-2 mb-0",attrs:{flat:"","solo-inverted":"","prepend-icon":"search",type:"search",label:e.$t("searchBox.searchTip"),clearable:"",loading:e.loadStatus,enterkeyhint:"search"},on:{"click:prepend":function(t){return e.searchTorrent()},click:function(t){return t.stopPropagation(),e.showSelectBox.apply(null,arguments)},"click:clear":e.clearSearchKey,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchTorrent()}},model:{value:e.searchKey,callback:function(t){e.searchKey="string"===typeof t?t.trim():t},expression:"searchKey"}},[n("v-menu",{staticClass:"top-searches",attrs:{slot:"prepend-inner","offset-y":"","nudge-bottom":"8","nudge-left":"12"},slot:"prepend-inner"},[n("v-btn",{attrs:{slot:"activator",flat:"",small:"",color:"grey lighten-2"},slot:"activator"},[e._v(e._s(e.$t("common.hot")))]),n("div",{style:(e.$vuetify.breakpoint.smAndUp?"width: 550px":"width: 300px")+";background-color: #fff;"},[n("v-container",{staticClass:"pa-3",attrs:{fluid:"","grid-list-lg":""}},[0==e.topSearches.length?n("div",[e._v("\n              "+e._s(e.$t("common.loading"))+"\n            ")]):n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.topSearches,(function(t,i){return n("v-flex",{key:i,attrs:{xs4:""}},[n("v-card",{staticStyle:{cursor:"pointer"},attrs:{title:e.$t("searchBox.searchThisKey",{key:t.title})},on:{click:function(n){return e.searchHotItem(t)}}},[n("v-img",{attrs:{src:t.image,height:e.$vuetify.breakpoint.smAndUp?"230px":"110px"}},[n("div",{staticClass:"top-searches-item px-1"},[n("div",[n("span",{staticClass:"caption"},[e._v(e._s(t.title))]),e.$vuetify.breakpoint.smAndUp?n("span",{staticClass:"caption ml-2 grey--text"},[e._v("("+e._s(t.year)+")")]):e._e(),n("a",{staticClass:"caption orange--text rating",attrs:{href:t.link,rel:"noopener noreferrer nofollow",target:"_blank",title:e.$t("searchBox.toDouban")},on:{click:function(e){e.stopPropagation()}}},[e._v(e._s(t.doubanRating?parseFloat(t.doubanRating).toFixed(1):"--"))])]),e.$vuetify.breakpoint.smAndUp?n("div",{staticClass:"caption grey--text alt-title"},[e._v("\n                        "+e._s(t.alt_title)+"\n                      ")]):e._e()])])],1)],1)})),1)],1),n("v-divider"),n("div",{staticClass:"pa-1 top-searches text-sm-right"},[n("v-btn",{staticClass:"caption grey--text",attrs:{flat:"",small:"",title:e.$t("common.refresh"),loading:e.topSearchesLoading},on:{click:function(t){return t.stopPropagation(),e.getTopSearches.apply(null,arguments)}}},[n("v-icon",{staticStyle:{"font-size":"20px"}},[e._v("update")]),n("span",{staticClass:"ml-2"},[e._v(e._s(e.$t("common.lastUpdate",{time:e.topSearchesUpdateTime})))])],1)],1)],1)],1),n("v-menu",{staticClass:"search-solution",attrs:{slot:"append","offset-y":""},slot:"append"},[n("v-btn",{attrs:{slot:"activator",flat:"",small:"",color:"grey lighten-2"},slot:"activator"},[e._v(e._s(e.selectedSearchSolutionName))]),n("v-card",{staticClass:"scroll-card"},[n("v-list",{attrs:{dense:""}},[n("v-list-tile",{attrs:{title:e.$t("searchBox.defaultTip")},on:{click:function(t){return e.changeSearchSolution(null)}}},[n("v-list-tile-title",[e._v(e._s(e.$t("searchBox.default")))])],1),n("v-divider"),e.$store.state.options.searchSolutions&&e.$store.state.options.searchSolutions.length>0?e._l(e.$store.state.options.searchSolutions,(function(t,i){return n("v-list-tile",{key:i,on:{click:function(n){return e.changeSearchSolution(t)}}},[n("v-list-tile-title",[e._v(e._s(t.name))])],1)})):n("v-btn",{attrs:{flat:"",small:"",to:"/set-search-solution"}},[e._v(e._s(e.$t("searchBox.noSearchSolution")))]),n("v-divider"),n("v-list-tile",{on:{click:function(t){return e.changeSearchSolution(e.allSite)}}},[n("v-list-tile-title",[e._v(e._s(e.$t("searchBox.all")))])],1)],2)],1)],1)],1)]}}]),model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[n("div",[n("v-list",{staticClass:"pb-0"},[n("v-list-tile",{on:{click:function(t){return t.stopPropagation(),e.itemClick(null)}}},[n("v-list-tile-content",[n("v-list-tile-title",[n("v-icon",[e._v("search")]),n("span",{staticClass:"title ml-1"},[e._v(e._s(e.$t("searchBox.searchThisKey",{key:this.searchKey})))])],1)],1),n("v-list-tile-action",[n("v-icon",[e._v("forward")])],1)],1),e.isLoading?n("v-progress-linear",{attrs:{indeterminate:!0,color:"secondary",height:"2"}}):n("v-divider")],1),n("v-list",{staticClass:"py-0",attrs:{"three-line":""}},[e._l(e.items,(function(t,i){return[n("v-list-tile",{key:i,attrs:{title:e.$t("searchBox.searchThisKey",{key:t.title})},on:{click:function(n){return n.stopPropagation(),e.itemClick(t)}}},[n("v-list-tile-avatar",{staticClass:"album",attrs:{size:75}},[n("img",{attrs:{src:t.image||t.img||(t.images?t.images.small:t.pic?t.pic.normal:"")}})]),n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"mb-1"},[n("span",{staticClass:"title"},[e._v(e._s(t.title))]),n("span",{staticClass:"ml-1 caption"},[e._v("("+e._s(t.year)+")")])]),n("v-list-tile-sub-title",[n("div",[e._v("\n                "+e._s(t.aka||t.originalTitle||t.original_title||"")+"\n              ")]),n("div",{staticClass:"caption"},[e._v("\n                "+e._s(t.genre||t.genres&&t.genres.join(" | "))+"\n              ")])])],1),n("v-list-tile-action",{staticStyle:{"align-items":"center"}},[n("a",{staticClass:"grey--text text--darken-1 mt-3 title",staticStyle:{"text-decoration":"none"},attrs:{href:t.link||t.alt||t.url,rel:"noopener noreferrer nofollow",target:"_blank",title:e.$t("searchBox.toDouban")},on:{click:function(e){e.stopPropagation()}}},[n("img",{attrs:{src:"https://img3.doubanio.com/favicon.ico",width:"16"}}),e._v("\n              "+e._s(parseFloat(t.average?t.average:t.rating?t.rating.average||t.rating.value:null).toFixed(1))+"\n            ")]),n("v-rating",{staticClass:"mb-3",attrs:{value:t.average?parseFloat(t.average)/2:t.rating?t.rating.stars?parseInt(t.rating.stars)/10:t.rating.star_count:0,"background-color":"grey lighten-2",color:"yellow accent-4",dense:"",readonly:"","half-increments":"",size:"13"}})],1)],1),n("v-divider",{key:"l"+i})]}))],2),n("v-list",{staticClass:"py-0"},[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"grey--text text--darken-1 caption"},[e._v(e._s(e.$t("searchBox.doubanTip")))])],1)],1)],1)],1)])},R=[],q=(n("386d"),n("7514"),n("7f7f"),n("a1f4")),I=n("efd2"),P=n("5a0c"),V=n.n(P),A=new q["a"],U=o["default"].extend({data:function(){return{isLoading:!1,items:[],selected:{},timer:null,showMenu:!1,searchKey:"",options:this.$store.state.options,selectedSearchSolutionName:"",allSite:{id:"all",name:"<所有站点>"},initialized:!1,topSearches:[],topSearchesUpdateTime:"N/A",topSearchesLoading:!1}},methods:{searchHotItem:function(e){console.log(e);var t=e.imdbId||"douban".concat(e.doubanId,"|").concat(e.title,"|").concat(e.alt_title);this.searchTorrent(t)},itemClick:function(e){console.log(e);var t=this.searchKey,n=this.options.beforeSearchingOptions?this.options.beforeSearchingOptions.searchModeForItem:c["d"].id;switch(n){case c["d"].id:e&&e.id&&(t="douban".concat(e.id,"|").concat(e.title,"|").concat(e.originalTitle||e.aka||e.original_title,"|").concat(t));break;case c["d"].name:e&&e.title&&(t=e.title);break}this.searchTorrent(t)},showSelectBox:function(){var e=this;this.$store&&!this.$store.state.options.beforeSearchingOptions.getMovieInformation||(this.items.length>0?this.showMenu=!0:this.searchKey&&(this.timer=setTimeout((function(){e.getDoubanInfos(e.searchKey)}),750)))},getDoubanInfos:function(e){var t=this;this.$store&&!this.$store.state.options.beforeSearchingOptions.getMovieInformation||!this.isLoading&&e&&(this.isLoading=!0,this.items=[],"localhost"!=window.location.hostname?A.sendRequest(c["b"].queryMovieInfoFromDouban,null,{key:e,count:this.$store.state.options.beforeSearchingOptions.maxMovieInformationCount}).then((function(e){t.isLoading=!1,e&&(e.subjects?(t.items=e.subjects.filter((function(e){return"movie"==e.type})),t.showMenu=t.items.length>0):e.title&&e.updateTime&&(t.items=[e],t.showMenu=!0))})).catch((function(e){console.log(e)})).finally((function(){t.isLoading=!1})):$.ajax("http://localhost:8001/test/beforeSearching.json").done((function(e){console.log(e),e&&e.subjects&&(t.items=e.subjects,t.isLoading=!1,t.showMenu=!0)})).fail((function(e){console.log(e)})).always((function(){return t.isLoading=!1})))},searchTorrent:function(e){if(e=e||this.searchKey,console.log("searchTorrent: key: ".concat(e)),e){var t={name:"search-torrent",params:{key:e}};if(this.$route.params.key===e&&this.$route.name===t.name)return console.log("skip router.push same searchTorrent: key: ".concat(e),this.$route),console.log("using eventBus.$emit searchTorrent: key: ".concat(e)),void I["a"].$emit("searchTorrent",{key:e});this.showMenu=!1,clearTimeout(this.timer),this.$store.dispatch("saveConfig",{lastSearchKey:this.searchKey}),this.$router.push(t)}},changeSearchSolution:function(e){var t="";e?(this.selectedSearchSolutionName=e.name,t=e.id):this.selectedSearchSolutionName=this.$t("searchBox.default").toString(),this.$store.dispatch("saveConfig",{defaultSearchSolutionId:t})},clearSearchKey:function(){this.$store.dispatch("saveConfig",{lastSearchKey:""})},getTopSearches:function(){var e=this;this.topSearchesLoading=!0,A.sendRequest(c["b"].getTopSearches).then((function(t){e.topSearches=t,e.topSearchesUpdateTime=V()().format("YYYY-MM-DD HH:mm:ss")})).catch((function(e){console.log(e)})).finally((function(){e.topSearchesLoading=!1}))}},watch:{searchKey:function(){var e=this;this.$store&&!this.$store.state.options.beforeSearchingOptions.getMovieInformation||(clearTimeout(this.timer),this.initialized&&(this.searchKey?this.timer=setTimeout((function(){e.getDoubanInfos(e.searchKey)}),750):this.showMenu=!1))},"$store.state.options.lastSearchKey":function(){var e=this;this.searchKey!=this.$store.state.options.lastSearchKey&&(console.log("key change: %s",this.$store.state.options.lastSearchKey),this.searchKey=this.$store.state.options.lastSearchKey,this.searchKey&&(this.isLoading=!0,this.items=[],setTimeout((function(){e.isLoading=!1}),1e3)))}},created:function(){var e=this;if(this.selectedSearchSolutionName=this.$t("searchBox.default").toString(),this.options.defaultSearchSolutionId==this.allSite.id)this.selectedSearchSolutionName=this.allSite.name;else if(this.options.defaultSearchSolutionId&&this.options.searchSolutions){var t=this.options.searchSolutions.find((function(t){return t.id===e.options.defaultSearchSolutionId}));t&&(this.selectedSearchSolutionName=t.name)}if(this.options.sites){this.options.sites.forEach((function(e){e.allowSearch&&0}))}this.options.search&&this.options.search.saveKey&&(this.searchKey=this.options.lastSearchKey||""),this.getTopSearches(),setTimeout((function(){e.initialized=!0}),500)},computed:{loadStatus:function(){return this.$store&&this.$store.state&&this.$store.state.searching||this.isLoading}}}),M=U,D=(n("ceda"),n("8336")),j=n("b0af"),B=n("a523"),N=n("ce7e"),E=n("0e8f"),z=n("adda"),H=n("a722"),F=n("c954"),K=n("e449"),G=n("8e36"),Y=n("1d4d"),Q=n("2677"),W=Object(f["a"])(M,O,R,!1,null,"e74fe1a2",null),J=W.exports;p()(W,{VBtn:D["a"],VCard:j["a"],VContainer:B["a"],VDivider:N["a"],VFlex:E["a"],VIcon:g["a"],VImg:z["a"],VLayout:H["a"],VList:_["a"],VListTile:b["a"],VListTileAction:k["a"],VListTileAvatar:F["a"],VListTileContent:y["b"],VListTileSubTitle:y["c"],VListTileTitle:y["d"],VMenu:K["a"],VProgressLinear:G["a"],VRating:Y["a"],VTextField:Q["a"]});var Z=o["default"].extend({props:{value:Boolean},components:{SearchBox:J},model:{prop:"value",event:"change"},watch:{drawer:function(){this.$emit("change",this.drawer)},value:function(){this.drawer=this.value}},data:function(){return{words:{title:"PT 助手",navBarTip:"点击显示/隐藏导航栏",help:"使用帮助",github:"访问 Github",showNewTorrents:"浏览各站首页种子",showNewTorrentsTip:"根据当前方案，搜索各站的首页种子"},drawer:this.$store.state.options.navBarIsOpen,baseColor:"amber"}}}),X=Z,ee=n("9910"),te=n("71d9"),ne=n("2a7f"),ie=n("706c"),se=Object(f["a"])(X,T,L,!1,null,null,null),oe=se.exports;p()(se,{VBtn:D["a"],VIcon:g["a"],VSpacer:ee["a"],VToolbar:te["a"],VToolbarItems:ne["a"],VToolbarSideIcon:ie["a"],VToolbarTitle:ne["b"]});var ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-footer",{attrs:{app:"",fixed:""}},[n("span",{staticClass:"pl-2 grey--text text--darken-1"},[e._v("\n    © "+e._s(e.$t("app.author"))+" "+e._s(e.year)+", "+e._s(e.$t("common.version"))+"\n    "+e._s(e.version)+"\n    "),e.isDevelopmentMode&&e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"deep-orange--text"},[e._v(e._s(e.words.developmentMode))]):e._e(),e.isDebugMode&&e.$vuetify.breakpoint.mdAndUp?n("v-chip",{attrs:{label:"",outline:"",color:"orange",disabled:"",small:""}},[e._v(e._s(e.$t("common.debugMode")))]):e._e(),e.newReleases?n("v-btn",{attrs:{outline:"",color:"success",small:"",href:"https://github.com/pt-plugins/PT-Plugin-Plus/releases",target:"_blank",rel:"noopener noreferrer nofollow"}},[e._v(e._s(e.$t("common.haveNewReleases"))+", "+e._s(e.releasesVersion))]):e._e()],1),n("v-spacer"),n("v-btn",{attrs:{flat:"",small:"",href:"https://t.me/joinchat/NZ9NCxPKXyby8f35rn_QTw",target:"_blank",rel:"noopener noreferrer nofollow",title:"Telegram",icon:e.$vuetify.breakpoint.smAndDown}},[n("v-img",{style:e.$vuetify.breakpoint.smAndDown?"max-width:16px":null,attrs:{src:"./assets/telegram.svg",width:"16"}}),e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"ml-1"},[e._v("Telegram")]):e._e()],1),n("input",{ref:"fileLanguage",staticStyle:{display:"none"},attrs:{type:"file"}}),n("v-menu",{attrs:{top:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{flat:"",small:"",icon:e.$vuetify.breakpoint.smAndDown}},i),[n("v-icon",{attrs:{small:""}},[e._v("language")]),e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"ml-1"},[e._v("\n          "+e._s(e.$t("common.changeLanguage"))+"\n        ")]):e._e()],1)]}}])},[n("v-list",{attrs:{dense:""}},[n("v-list-tile",{on:{click:e.selectFile}},[n("v-list-tile-title",[e._v(e._s(e.$t("common.addLanguage")))])],1)],1),n("v-divider"),n("v-list",{attrs:{dense:""}},e._l(e.languages,(function(t,i){return n("v-list-tile",{key:i,on:{click:function(n){return e.changeLanguage(t)}}},[n("v-list-tile-title",{class:e.currentLanguage==t.code?"primary--text":""},[n("span",[e.currentLanguage==t.code?n("v-icon",{staticClass:"mr-1 primary--text",attrs:{small:""}},[e._v("check")]):n("span",{staticClass:"mr-4"})],1),e._v("\n          "+e._s(t.name)+"\n        ")])],1)})),1)],1),n("v-btn",{attrs:{flat:"",small:"",to:"/system-logs",icon:e.$vuetify.breakpoint.smAndDown}},[n("v-icon",{attrs:{small:""}},[e._v("assignment")]),e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"ml-1"},[e._v("\n      "+e._s(e.$t("common.systemLog"))+"\n    ")]):e._e()],1),n("v-btn",{attrs:{flat:"",small:"",icon:e.$vuetify.breakpoint.smAndDown},on:{click:e.toggle_dark_mode}},[n("v-icon",{attrs:{small:""}},[e._v("invert_colors")]),e.$vuetify.breakpoint.mdAndUp?n("span",{staticClass:"ml-1"},[e._v("\n      "+e._s(e.$t("common.darkMode"))+"\n    ")]):e._e()],1),e.$vuetify.breakpoint.mdAndUp?n("v-btn",{attrs:{flat:"",small:"",href:"/debugger.html",target:"_blank",rel:"noopener noreferrer nofollow",title:e.$t("navigation.support.debugger")}},[n("v-icon",{attrs:{small:""}},[e._v("bug_report")]),n("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("navigation.support.debugger")))])],1):e._e(),n("v-snackbar",{attrs:{top:"",timeout:3e3,color:"error"},model:{value:e.invalidFile,callback:function(t){e.invalidFile=t},expression:"invalidFile"}},[e._v("\n    "+e._s(e.$t("footer.invalidFile"))+"\n  ")])],1)},re=[],le=(n("a481"),n("6762"),n("2fdb"),n("7626")),ce=n("a400"),ue=o["default"].extend({data:function(){return{words:{developmentMode:"zip"},version:"",isDebugMode:le["b"].debugMode,isDevelopmentMode:!1,newReleases:!1,releasesVersion:"",languages:[],fileInput:null,currentLanguage:"",invalidFile:!1,year:(new Date).getFullYear()}},created:function(){var e=this;if(this.languages=window.i18nService.config,this.currentLanguage=window.i18nService.currentLanguage,le["b"].isExtensionMode&&chrome.runtime&&chrome.runtime.getManifest){var t=chrome.runtime.getManifest();this.version="v"+(t.version_name||t.version)}else this.version="localVersion";"localVersion"!=this.version&&this.checkUpdate(),le["b"].getInstallType().then((function(t){console.log(t,ce["i"].development),e.isDevelopmentMode=[ce["i"].development,ce["i"].crx].includes(t),t===ce["i"].crx&&(e.words.developmentMode=ce["i"].crx)})).catch((function(){console.log("获取安装方式失败")}))},mounted:function(){this.fileInput=this.$refs.fileLanguage,this.fileInput.addEventListener("change",this.addLanguage)},beforeDestroy:function(){this.fileInput.removeEventListener("change",this.addLanguage)},methods:{checkUpdate:function(){var e=this;$.getJSON(le["a"].latestReleases).done((function(t){t&&t.tag_name&&(e.releasesVersion=t.tag_name,e.releasesVersion>e.version&&(e.newReleases=!0))})).fail((function(e){}))},changeLanguage:function(e){this.currentLanguage=e.code,window.i18nService.reset(e.code)},addLanguage:function(e){var t=this,n=e.srcElement;if(n.files.length>0&&n.files[0].name.length>0){var i=new FileReader;i.onload=function(e){try{var n=JSON.parse(e.target.result);n.code&&n.words?(t.loadLanguage(n),t.invalidFile=!1):t.invalidFile=!0,console.log(n)}catch(i){console.warn(i),t.invalidFile=!0}},i.onerror=function(){},i.readAsText(n.files[0]),n.value=""}},toggle_dark_mode:function(){this.$root.$emit("ToggleDarkMode")},loadLanguage:function(e){var t=this;window.i18nService.exists(e.code)?window.confirm(this.$t("footer.replaceLanguageConfirm")+"")&&window.i18nService.replace(e).then((function(){t.currentLanguage=e.code})).catch((function(){})):window.i18nService.add(e).then((function(){t.currentLanguage=e.code,t.languages.push({name:e.name,code:e.code})})).catch((function(){}))},selectFile:function(){this.fileInput.click()}}}),de=ue,he=n("cc20"),ve=n("553a"),fe=n("2db4"),me=Object(f["a"])(de,ae,re,!1,null,null,null),pe=me.exports;p()(me,{VBtn:D["a"],VChip:he["a"],VDivider:N["a"],VFooter:ve["a"],VIcon:g["a"],VImg:z["a"],VList:_["a"],VListTile:b["a"],VListTileTitle:y["d"],VMenu:K["a"],VSnackbar:fe["a"],VSpacer:ee["a"]});var ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{class:e.$vuetify.breakpoint.smAndDown?["pa-0"]:e.$vuetify.breakpoint.md?["pa-1"]:["pa-3"],attrs:{fluid:""}},[n("keep-alive",[e.$route.meta.keepAlive?n("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():n("router-view")],1)],1)},_e=[],be=n("549c"),ke={},ye=Object(f["a"])(ke,ge,_e,!1,null,null,null),we=ye.exports;p()(ye,{VContainer:B["a"],VContent:be["a"]});var Se=n("d97c"),$e={name:"App",components:{Navigation:x,Topbar:oe,Footer:pe,Content:we,Permissions:Se["default"]},data:function(){return{baseColor:"amber",drawer:this.$store.state.options.navBarIsOpen,havePermissions:!1,initializing:!0,darkMode:!1}},created:function(){localStorage.getItem("DarkMode")&&(this.darkMode="true"==localStorage.getItem("DarkMode"))},mounted:function(){var e=this;this.$root.$on("ToggleDarkMode",(function(){e.darkMode=!e.darkMode,localStorage.setItem("DarkMode",e.darkMode)}))},watch:{drawer:function(){this.$store.state.options.navBarIsOpen!=this.drawer&&this.$store.dispatch("saveConfig",{navBarIsOpen:this.drawer})}},methods:{init:function(){var e=this;console.log("APP init."),chrome&&chrome.permissions?chrome.permissions.contains({origins:["http://*/*","https://*/*"]},(function(t){e.havePermissions=t,e.initializing=!1})):(this.havePermissions=!0,this.initializing=!1)},reload:function(e){this.havePermissions=e}}},Ce=$e,xe=(n("60d1"),n("0798")),Te=n("7496"),Le=Object(f["a"])(Ce,r,l,!1,null,null,null),Oe=Le.exports;p()(Le,{VAlert:xe["a"],VApp:Te["a"],VProgressLinear:G["a"]});var Re=n("8c4f"),qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("v-alert",{attrs:{value:!0,type:"info"}},[e._v(e._s(e.$t("home.title")))]),n("v-card",[e.sites&&e.sites.length>0?n("v-card-title",[n("v-btn",{staticClass:"batchBtn",attrs:{color:"success",loading:e.loading,title:e.$t("home.getGroupInfos")},on:{click:e.getInfos}},[n("v-icon",{staticClass:"mr-2"},[e._v("cached")]),e._v("\n        "+e._s(e.$t("home.getGroupInfos"))+"\n      ")],1),n("v-btn",{staticClass:"batchBtn",attrs:{to:"/user-data-timeline",color:"success",title:e.$t("home.timeline")}},[n("v-icon",[e._v("timeline")])],1),n("v-btn",{staticClass:"batchBtn",attrs:{to:"/statistic",color:"success",title:e.$t("home.statistic")}},[n("v-icon",[e._v("equalizer")])],1),e._l(e.allOpenTypes,(function(t){return n("div",[e.getAllUrlsByType(t.type).length>0?n("v-btn",{staticClass:"batchBtn",attrs:{color:t.color,title:e.$t("home."+t.type)},on:{click:function(n){return e.openAllUrlsByType(t.type)}}},[n("v-icon",[e._v(e._s(t.icon))])],1):e._e()],1)})),n("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{color:"blue",dark:"",title:e.$t("home.settings")}},i),[n("v-icon",[e._v("settings")])],1)]}}],null,!1,243296654)},[n("v-card",[n("v-container",{attrs:{"grid-list-xs":""}},[n("v-switch",{attrs:{color:"success",label:e.$t("home.siteName")},on:{change:e.updateViewOptions},model:{value:e.showSiteName,callback:function(t){e.showSiteName=t},expression:"showSiteName"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.userName")},on:{change:e.updateViewOptions},model:{value:e.showUserName,callback:function(t){e.showUserName=t},expression:"showUserName"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.userLevel")},on:{change:e.updateViewOptions},model:{value:e.showUserLevel,callback:function(t){e.showUserLevel=t},expression:"showUserLevel"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.levelRequirements")},on:{change:e.updateViewOptions},model:{value:e.showLevelRequirements,callback:function(t){e.showLevelRequirements=t},expression:"showLevelRequirements"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.week")},on:{change:e.updateViewOptions},model:{value:e.showWeek,callback:function(t){e.showWeek=t},expression:"showWeek"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.seedingPoints")},on:{change:e.updateViewOptions},model:{value:e.showSeedingPoints,callback:function(t){e.showSeedingPoints=t},expression:"showSeedingPoints"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.showHnR")},on:{change:e.updateViewOptions},model:{value:e.showHnR,callback:function(t){e.showHnR=t},expression:"showHnR"}}),n("v-switch",{attrs:{color:"success",label:e.$t("home.showLastUpdateTimeAsRelativeTime")},on:{change:e.updateViewOptions},model:{value:e.showLastUpdateTimeAsRelativeTime,callback:function(t){e.showLastUpdateTimeAsRelativeTime=t},expression:"showLastUpdateTimeAsRelativeTime"}})],1)],1)],1),n("v-select",{staticClass:"select",attrs:{items:e.headers,label:e.$t("home.selectColumns"),multiple:"",outlined:"","return-object":""},on:{change:e.updateViewOptions},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item,s=t.index;return[0===s?n("v-chip",[n("span",[e._v(e._s(i.text))])]):e._e(),1===s?n("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.selectedHeaders.length-1)+" others)")]):e._e()]}}],null,!1,3872365191),model:{value:e.selectedHeaders,callback:function(t){e.selectedHeaders=t},expression:"selectedHeaders"}}),n("v-select",{staticClass:"select-tags",attrs:{items:e.allSortedTags,label:e.$t("home.selectedTags"),"menu-props":{maxHeight:"70%"},multiple:"",outlined:"","return-object":""},on:{change:e.updateViewOptions},scopedSlots:e._u([{key:"selection",fn:function(t){t.item;var i=t.index;return[0===i?n("v-chip",[n("span",[e._v("+"+e._s(e.selectedTags.length))])]):e._e()]}}],null,!1,3119184398),model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}),n("v-spacer"),n("v-text-field",{staticClass:"search",attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",enterkeyhint:"search"},model:{value:e.filterKey,callback:function(t){e.filterKey=t},expression:"filterKey"}})],2):e._e(),n("v-data-table",{ref:"userDataTable",staticClass:"elevation-1",attrs:{search:e.filterKey,headers:e.showHeaders,items:e.filteredSitesByTags,pagination:e.pagination,"item-key":"host","no-data-text":e.$t("home.nodata")},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[e.showColumn("name")?n("td",{staticClass:"center"},[n("v-badge",{attrs:{color:"red messageCount",overlap:""},scopedSlots:e._u([!t.item.disableMessageCount&&t.item.user.messageCount>0?{key:"badge",fn:function(){return[e._v("\n              "+e._s(t.item.user.messageCount>10?"":t.item.user.messageCount)+"\n            ")]},proxy:!0}:null],null,!0)},[n("v-btn",{staticClass:"siteIcon",attrs:{flat:"",icon:"",title:e.$t("home.getInfos"),disabled:t.item.offline},on:{click:function(n){return n.stopPropagation(),e.getSiteUserInfo(t.item)}}},[n("v-avatar",{attrs:{size:e.showSiteName?18:24}},[n("img",{attrs:{src:t.item.icon}})])],1)],1),n("br"),e.showSiteName?n("a",{staticClass:"nodecoration",attrs:{href:t.item.activeURL,target:"_blank",rel:"noopener noreferrer nofollow"}},[n("span",{staticClass:"caption"},[e._v(e._s(t.item.name))])]):e._e()],1):e._e(),e.showColumn("user.name")?n("td",{attrs:{title:t.item.user.id}},[e.showUserName?[e._v("\n            "+e._s(t.item.user.name)+"\n          ")]:[e._v(" **** ")],t.item.enableQuickLink?n("v-card",{staticClass:"userQuickLinks"},[t.item.enableDefaultQuickLink?[e._l(e.defaultQuickLinks(t.item),(function(t){return[n("v-btn",{staticClass:"x-small",attrs:{outline:"",elevation:"2",target:"_blank",color:t.color,href:t.href}},[e._v(e._s(t.desc))])]})),n("hr")]:e._e(),e._l(t.item.userQuickLinks,(function(t){return[n("v-btn",{staticClass:"x-small",attrs:{outline:"",elevation:"2",target:"_blank",color:t.color,href:t.href}},[e._v(e._s(t.desc))])]}))],2):e._e()],2):e._e(),e.showColumn("user.levelName")?n("td",[e.showLevelRequirements?n("v-icon",{attrs:{small:""}},[e._v("military_tech")]):e._e(),e._v("\n          "+e._s(e.showUserLevel?t.item.user.levelName:"****")+"\n          "),e.showLevelRequirements?[t.item.levelRequirements?[e.isUserGroup(t.item)&&t.item.user.nextLevels&&t.item.user.nextLevels.length>0?[e._l(t.item.user.nextLevels,(function(t){return[n("div",[n("v-icon",{attrs:{small:""}},[e._v("keyboard_tab")]),t.requiredDate?[e._v("\n                      "+e._s(t.requiredDate)+" \n                    ")]:e._e(),t.uploaded?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("expand_less")]),e._v(e._s(e._f("formatSize")(t.uploaded))+" \n                    ")]:e._e(),t.downloaded?[n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("expand_more")]),e._v(e._s(e._f("formatSize")(t.downloaded))+" \n                    ")]:e._e(),t.trueDownloaded?[e._v("\n                      "+e._s(e.$t("home.levelRequirement.trueDownloaded"))+"\n                      "+e._s(e._f("formatSize")(t.trueDownloaded))+" \n                    ")]:e._e(),t.bonus?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("attach_money")]),e._v(e._s(e._f("formatNumber")(t.bonus))+" \n                    ")]:e._e(),t.seedingSize?[n("v-icon",{attrs:{small:"",color:"blue darken-4"}},[e._v("dns")]),e._v(e._s(e._f("formatSize")(t.seedingSize))+" \n                    ")]:e._e(),t.seedingPoints?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("energy_savings_leaf")]),e._v(e._s(e._f("formatNumber")(t.seedingPoints))+" \n                    ")]:e._e(),t.seedingTime?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("timer")]),e._v(e._s(e._f("formatNumber")(t.seedingTime))+" \n                    ")]:e._e(),t.averageSeedtime?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("timer")]),e._v(e._s(e._f("formatNumber")(t.averageSeedtime))+e._s(e.$t("home.levelRequirement.days"))+" \n                    ")]:e._e(),t.uploads?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("file_upload")]),e._v(e._s(t.uploads)+" \n                    ")]:e._e(),t.downloads?[n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("file_download")]),e._v(e._s(t.downloads)+" \n                    ")]:e._e(),t.uniqueGroups?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("library_music")]),e._v(e._s(t.uniqueGroups)+" \n                    ")]:e._e(),t.perfectFLAC?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("diamond")]),e._v(e._s(t.perfectFLAC)+" \n                    ")]:e._e(),t.posts?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("post_add")]),e._v(e._s(t.posts)+" \n                    ")]:e._e(),t.classPoints?[n("v-icon",{attrs:{small:"",color:"yellow darken-4"}},[e._v("energy_savings_leaf")]),e._v(e._s(e._f("formatNumber")(t.classPoints))+" \n                    ")]:e._e()],2)]}))]:t.item.user.name?[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v(e._s(e.getDoneIcon(t.item)))])]:e._e(),n("v-card",{staticClass:"levelRequirement"},[e._l(t.item.levelRequirements,(function(i){return[n("div",[!(t.item.user.nextLevels&&t.item.user.nextLevels.length>0)||Number(t.item.user.nextLevels[0].level)>Number(i.level)?n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("done")]):n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("block")]),i.requiredDate?[e._v("\n                      "+e._s(i.requiredDate)+" ")]:e._e(),e._v("("+e._s(i.name)+"):\n                    "),i.uploaded?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.uploaded")}},[e._v("expand_less")]),e._v(e._s(i.uploaded)+";\n                    ")]:e._e(),i.uploads?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.uploads")}},[e._v("file_upload")]),e._v(e._s(i.uploads)+";\n                    ")]:e._e(),i.downloaded?[n("v-icon",{attrs:{small:"",color:"red darken-4",title:e.$t("home.levelRequirement.downloaded")}},[e._v("expand_more")]),e._v(e._s(i.downloaded)+";\n                    ")]:e._e(),i.trueDownloaded?[e._v("\n                      "+e._s(e.$t("home.levelRequirement.trueDownloaded"))+"\n                      "+e._s(i.trueDownloaded)+";\n                    ")]:e._e(),i.downloads?[n("v-icon",{attrs:{small:"",color:"red darken-4",title:e.$t("home.levelRequirement.downloads")}},[e._v("file_download")]),e._v(e._s(i.downloads)+";\n                    ")]:e._e(),i.ratio?[n("v-icon",{attrs:{small:"",color:"orange darken-4",title:e.$t("home.levelRequirement.ratio")}},[e._v("balance")]),e._v(e._s(i.ratio)+";\n                    ")]:e._e(),i.bonus?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.bonus")}},[e._v("attach_money")]),e._v(e._s(e._f("formatInteger")(i.bonus))+";\n                    ")]:e._e(),i.seedingSize?[n("v-icon",{attrs:{small:"",color:"blue darken-4",title:e.$t("home.levelRequirement.seedingSize")}},[e._v("dns")]),e._v(e._s(i.seedingSize)+";\n                    ")]:e._e(),i.seedingPoints?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.seedingPoints")}},[e._v("energy_savings_leaf")]),e._v(e._s(e._f("formatInteger")(i.seedingPoints))+";\n                    ")]:e._e(),i.seedingTime?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.seedingTime")}},[e._v("timer")]),e._v(e._s(e._f("formatInteger")(i.seedingTime))+";\n                    ")]:e._e(),i.averageSeedtime?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.averageSeedtime")}},[e._v("timer")]),e._v(e._s(e._f("formatInteger")(i.averageSeedtime))+e._s(e.$t("home.levelRequirement.days"))+";\n                    ")]:e._e(),i.classPoints?[n("v-icon",{attrs:{small:"",color:"yellow darken-4",title:e.$t("home.levelRequirement.classPoints")}},[e._v("energy_savings_leaf")]),e._v(e._s(e._f("formatInteger")(i.classPoints))+";\n                    ")]:e._e(),i.uniqueGroups?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.uniqueGroups")}},[e._v("library_music")]),e._v(e._s(e._f("formatInteger")(i.uniqueGroups))+";\n                    ")]:e._e(),i.perfectFLAC?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.perfectFLAC")}},[e._v("diamond")]),e._v(e._s(e._f("formatInteger")(i.perfectFLAC))+";\n                    ")]:e._e(),i.posts?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.posts")}},[e._v("post_add")]),e._v(e._s(e._f("formatInteger")(i.posts))+";\n                    ")]:e._e(),i.alternative?[n("v-icon",{attrs:{small:"",title:e.$t("home.levelRequirement.alternative")}},[e._v("filter_1")]),e._v("(\n                      "),e._l(i.alternative,(function(t){return[e._v("\n                        ["),t.requiredDate?[e._v("\n                        "+e._s(t.requiredDate)+";\n                        ")]:e._e(),t.uploaded?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.uploaded")}},[e._v("expand_less")]),e._v(e._s(t.uploaded)+";\n                        ")]:e._e(),t.uploads?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.uploads")}},[e._v("file_upload")]),e._v(e._s(t.uploads)+";\n                        ")]:e._e(),t.downloaded?[n("v-icon",{attrs:{small:"",color:"red darken-4",title:e.$t("home.levelRequirement.downloaded")}},[e._v("expand_more")]),e._v(e._s(t.downloaded)+";\n                        ")]:e._e(),t.trueDownloaded?[e._v("\n                          "+e._s(e.$t("home.levelRequirement.trueDownloaded"))+"\n                          "+e._s(t.trueDownloaded)+";\n                        ")]:e._e(),t.downloads?[n("v-icon",{attrs:{small:"",color:"red darken-4",title:e.$t("home.levelRequirement.downloads")}},[e._v("file_download")]),e._v(e._s(t.downloads)+";\n                        ")]:e._e(),t.ratio?[n("v-icon",{attrs:{small:"",color:"orange darken-4",title:e.$t("home.levelRequirement.ratio")}},[e._v("balance")]),e._v(e._s(t.ratio)+";\n                        ")]:e._e(),t.bonus?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.bonus")}},[e._v("attach_money")]),e._v(e._s(e._f("formatInteger")(t.bonus))+";\n                        ")]:e._e(),t.seedingSize?[n("v-icon",{attrs:{small:"",color:"blue darken-4",title:e.$t("home.levelRequirement.seedingSize")}},[e._v("dns")]),e._v(e._s(t.seedingSize)+";\n                        ")]:e._e(),t.seedingPoints?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.seedingPoints")}},[e._v("energy_savings_leaf")]),e._v(e._s(e._f("formatInteger")(t.seedingPoints))+";\n                        ")]:e._e(),t.seedingTime?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.seedingTime")}},[e._v("timer")]),e._v(e._s(e._f("formatInteger")(t.seedingTime))+";\n                        ")]:e._e(),t.averageSeedtime?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.averageSeedtime")}},[e._v("timer")]),e._v(e._s(e._f("formatInteger")(t.averageSeedtime))+e._s(e.$t("home.levelRequirement.days"))+";\n                        ")]:e._e(),t.classPoints?[n("v-icon",{attrs:{small:"",color:"yellow darken-4",title:e.$t("home.levelRequirement.classPoints")}},[e._v("energy_savings_leaf")]),e._v(e._s(e._f("formatInteger")(t.classPoints))+";\n                        ")]:e._e(),t.uniqueGroups?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.uniqueGroups")}},[e._v("library_music")]),e._v(e._s(e._f("formatInteger")(t.uniqueGroups))+";\n                        ")]:e._e(),t.perfectFLAC?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.perfectFLAC")}},[e._v("diamond")]),e._v(e._s(e._f("formatInteger")(t.perfectFLAC))+";\n                        ")]:e._e(),t.posts?[n("v-icon",{attrs:{small:"",color:"green darken-4",title:e.$t("home.levelRequirement.posts")}},[e._v("post_add")]),e._v(e._s(e._f("formatInteger")(t.posts))+";\n                        ")]:e._e(),e._v("];\n                      ")]})),e._v(");\n                    ")]:e._e(),e._v("\n                    "+e._s(i.privilege)+"\n                  ")],2)]}))],2)]:e._e()]:e._e()],2):e._e(),e.showColumn("user.uploaded")?n("td",{staticClass:"number"},[n("div",[e._v("\n            "+e._s(e._f("formatSize")(t.item.user.uploaded))+"\n            "),n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("expand_less")])],1),n("div",[e._v("\n            "+e._s(e._f("formatSize")(t.item.user.downloaded))+"\n            "),n("v-icon",{attrs:{small:"",color:"red darken-4"}},[e._v("expand_more")])],1)]):e._e(),e.showColumn("user.ratio")?n("td",{staticClass:"number"},[e._v("\n          "+e._s(e._f("formatRatio")(t.item.user.ratio))+"\n        ")]):e._e(),e.showColumn("user.uploads")?n("td",{staticClass:"number"},[[e._v(e._s(t.item.user.uploads||0))]],2):e._e(),e.showColumn("user.seeding")?n("td",{staticClass:"number"},[n("div",[e._v(e._s(t.item.user.seeding||0))]),e.showHnR&&t.item.user.unsatisfieds&&0!=t.item.user.unsatisfieds?n("div",{attrs:{title:e.$t("home.headers.unsatisfieds")}},[n("v-icon",{attrs:{small:"",color:"yellow darken-4"}},[e._v("warning")]),e._v(e._s(t.item.user.unsatisfieds))],1):e._e()]):e._e(),e.showColumn("user.seedingSize")?n("td",{staticClass:"number"},[e._v("\n          "+e._s(e._f("formatSize")(t.item.user.seedingSize))+"\n        ")]):e._e(),e.showColumn("user.bonus")?n("td",{staticClass:"number"},[e.showSeedingPoints&&t.item.user.seedingPoints?[n("div",[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("attach_money")]),e._v(e._s(e._f("formatNumber")(t.item.user.bonus))+"\n            ")],1),n("div",[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("energy_savings_leaf")]),e._v(e._s(e._f("formatNumber")(t.item.user.seedingPoints))+"\n            ")],1)]:e.showSeedingPoints&&t.item.user.classPoints?[n("div",[n("v-icon",{attrs:{small:"",color:"green darken-4"}},[e._v("attach_money")]),e._v(e._s(e._f("formatNumber")(t.item.user.bonus))+"\n            ")],1),n("div",[n("v-icon",{attrs:{small:"",color:"yellow darken-4"}},[e._v("energy_savings_leaf")]),e._v(e._s(e._f("formatNumber")(t.item.user.classPoints))+"\n            ")],1)]:[e._v("\n            "+e._s(e._f("formatNumber")(t.item.user.bonus))+"\n          ")]],2):e._e(),e.showColumn("user.bonusPerHour")?n("td",{staticClass:"number"},[t.item.user.bonusPerHour?[e._v("\n            "+e._s(e._f("formatNumber")(t.item.user.bonusPerHour))+"\n          ")]:e._e()],2):e._e(),e.showColumn("user.joinTime")?n("td",{staticClass:"number",attrs:{title:t.item.user.joinDateTime}},[e._v("\n          "+e._s(e._f("timeAgo")(t.item.user.joinTime,e.showWeek))+"\n        ")]):e._e(),e.showColumn("user.lastUpdateTime")?n("td",{staticClass:"center"},[n("v-btn",{attrs:{depressed:"",small:"",to:"statistic/"+t.item.host,title:e._f("formatDate")(t.item.user.lastUpdateTime,"YYYY-MM-DD HH:mm:ss")+" "+e.$t("home.statistic")}},[e.showLastUpdateTimeAsRelativeTime?[e._v(e._s(e._f("timeAgo")(t.item.user.lastUpdateTime,!1)))]:[e._v(e._s(e._f("formatDate")(t.item.user.lastUpdateTime,"YYYY-MM-DD HH:mm:ss")))]],2)],1):e._e(),e.showColumn("user.lastUpdateStatus")?n("td",{staticClass:"center"},[t.item.user.isLoading?n("v-progress-circular",{attrs:{indeterminate:"",width:3,size:"30",color:"green"}},[t.item.user.isLoading?n("v-icon",{attrs:{color:"red",small:"",title:e.$t("home.cancelRequest")},on:{click:function(n){return e.abortRequest(t.item)}}},[e._v("cancel")]):e._e()],1):n("span",[t.item.offline?n("span",[e._v(e._s(e.$t("home.offline")))]):t.item.user.isLogged?n("span",[e._v(e._s(e.formatError(t.item.user)))]):n("a",{staticClass:"nodecoration",attrs:{href:t.item.activeURL,target:"_blank",rel:"noopener noreferrer nofollow"}},[e._v(e._s(e.formatError(t.item.user)))])])],1):e._e()]}}])})],1),n("v-alert",{attrs:{value:!0,color:"grey"}},[n("div",{domProps:{innerHTML:e._s(e.$t("home.tip"))}})])],1)},Ie=[],Pe=(n("8e6e"),n("ac4d"),n("8a81"),n("1c4c"),n("bd86")),Ve=(n("87f3"),n("55dd"),n("f400"),n("4917"),n("456d"),n("c5f6"),n("28a5"),n("20d6"),n("4f7f"),n("75fc")),Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"700",fullscreen:e.$vuetify.breakpoint.smAndDown},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.showButton?n("v-btn",e._g({attrs:{dark:"",title:"一键签到？",color:"warning"}},i),[n("v-icon",[e._v("how_to_reg")]),n("span",{staticClass:"ml-2"},[e._v("一键签到？")])],1):e._e()]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"blue-grey darken-2"}},[n("v-toolbar-title",[e._v("关于自动签到")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",flat:"",color:"success",href:"https://github.com/pt-plugins/PT-Plugin-Plus/wiki/frequently-asked-questions#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8A%A9%E6%89%8B%E6%B2%A1%E6%9C%89%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E5%8A%9F%E8%83%BD",target:"_blank",rel:"noopener noreferrer nofollow",title:e.$t("common.help")}},[n("v-icon",[e._v("help")])],1)],1),n("v-card-text",{staticClass:"pa-0",staticStyle:{"max-height":"80vh"}},[n("v-alert",{staticClass:"ma-0",attrs:{value:!0,color:"warning"}},[n("div",[e._v("\n          感谢您使用助手，抱歉这里没有自动签到功能，如果您愿意，请阅读以下内容：\n          "),n("br"),n("br"),e._v("- 首先，自动签到对站点来说属于“作弊”行为； "),n("br"),e._v("-\n          其次，签到功能对站点来说目的是用来活跃人气，如果自动签到了，对站点来说没有任何作用；\n          "),n("br"),e._v("-\n          再次，签到功能一般具有奖励作用，如签到后给予一定的积分（魔力）；\n          "),n("br"),e._v("- 最后，本人痛恨任何“薅羊毛”行为； "),n("br"),e._v("-\n          综上所述，助手不会添加任何可以自动获取奖励的功能，现在不会有，将来也不会有；\n          "),n("br"),n("br"),e._v("PS：如果您喜欢一个站点，请用行动表示支持，而不是把一切交给自动化脚本；\n          "),n("br"),n("br"),e._v("那为什么有这个按钮？因为很多人问，不得已加上这个“功能”。\n        ")])])],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"success",flat:""},on:{click:e.hideButton}},[e._v("不再显示该按钮")]),n("v-btn",{attrs:{color:"error",flat:""},on:{click:function(t){e.dialog=!1}}},[e._v(e._s(e.$t("common.close")))])],1)],1)],1)},Ue=[],Me=o["default"].extend({data:function(){return{dialog:!1,showButton:!0}},methods:{hideButton:function(){this.showButton=!1,this.$store.dispatch("updateViewOptions",{key:"AutoSignWarning",options:{showButton:!1}}),this.dialog=!1}},created:function(){var e=this.$store.getters.viewsOptions("AutoSignWarning",{showButton:!0});Object.assign(this,e)}}),De=Me,je=n("99d9"),Be=n("169a"),Ne=Object(f["a"])(De,Ae,Ue,!1,null,null,null),Ee=Ne.exports;p()(Ne,{VAlert:xe["a"],VBtn:D["a"],VCard:j["a"],VCardActions:je["a"],VCardText:je["b"],VDialog:Be["a"],VDivider:N["a"],VIcon:g["a"],VSpacer:ee["a"],VToolbar:te["a"],VToolbarTitle:ne["b"]});var ze=n("0a02");function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){Object(Pe["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ge(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw o}}}}function Ge(e,t){if(e){if("string"===typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Qe=new q["a"],We=o["default"].extend({components:{AutoSignWarning:Ee},data:function(){return{loading:!1,items:[],selectedHeaders:[],selectedTags:[],headers:[{text:this.$t("home.headers.site"),align:"center",value:"name",width:"110px"},{text:this.$t("home.headers.userName"),align:"left",value:"user.name"},{text:this.$t("home.headers.levelName"),align:"left",value:"user.levelName"},{text:this.$t("home.headers.activitiyData"),align:"right",value:"user.uploaded",width:"120px"},{text:this.$t("home.headers.ratio"),align:"right",value:"user.ratio"},{text:this.$t("home.headers.uploads"),align:"right",value:"user.uploads"},{text:this.$t("home.headers.seeding"),align:"right",value:"user.seeding"},{text:this.$t("home.headers.seedingSize"),align:"right",value:"user.seedingSize"},{text:this.$t("home.headers.bonus"),align:"right",value:"user.bonus"},{text:this.$t("home.headers.bonusPerHour"),align:"right",value:"user.bonusPerHour"},{text:this.$t("home.headers.joinTime"),align:"right",value:"user.joinTime"},{text:this.$t("home.headers.lastUpdateTime"),align:"center",value:"user.lastUpdateTime"},{text:this.$t("home.headers.status"),align:"center",value:"user.lastUpdateStatus"}],pagination:{rowsPerPage:-1},options:this.$store.state.options,beginTime:null,reloadCount:0,requestQueue:[],requestTimer:0,requestMsg:"",sites:[],filterKey:"",isSecret:!1,showUserName:!0,showSiteName:!0,showUserLevel:!0,showLevelRequirements:!0,showSeedingPoints:!0,showHnR:!0,showLastUpdateTimeAsRelativeTime:!0,showWeek:!1}},created:function(){this.init()},computed:{showHeaders:function(){var e=this;return this.headers.filter((function(t){return e.selectedHeaders.map((function(e){return e.value})).includes(t.value)}))},allOpenTypes:function(){return[{type:c["l"].openAllSites,icon:"moving",color:"secondary"},{type:c["l"].openAllUnReadMsg,icon:"forward_to_inbox",color:"primary"},{type:c["l"].openAllStatusErr,icon:"sync_problem",color:"error"}]},isSortByPriority:function(){return this.sites.filter((function(e){return e.priority})).length>0},allSitesSorted:function(){return this.sortByPriority(this.sites)},allStatusErrSites:function(){return this.allSitesSorted.filter((function(e){var t,n;return(null===(t=e.user)||void 0===t?void 0:t.lastErrorMsg)||(null===(n=e.user)||void 0===n?void 0:n.lastUpdateStatus)!==c["w"].success}))},allUnReadMsgSites:function(){return this.allSitesSorted.filter((function(e){var t;return((null===(t=e.user)||void 0===t?void 0:t.messageCount)||0)>0}))},allTaggedSites:function(){return this.allSitesSorted.filter((function(e){return Array.isArray(e.tags)&&e.tags.length>0}))},allUnTaggedSites:function(){return this.allSitesSorted.filter((function(e){return!e.tags||0===e.tags.length}))},selectedTagValues:function(){return this.selectedTags.map((function(e){return e.value}))},allSortedTags:function(){var e,t=this,n=[c["u"].all,c["u"].unTagged,c["u"].unReadMsg,c["u"].statusError],i=Ke(this.allTaggedSites);try{for(i.s();!(e=i.n()).done;){var s=e.value;n=n.concat(s.tags)}}catch(o){i.e(o)}finally{i.f()}return n=Object(Ve["a"])(new Set(n)),n.map((function(e){var n,i=e;switch(e){case c["u"].all:case c["u"].unTagged:case c["u"].unReadMsg:case c["u"].statusError:n=t.$t("home.tags.".concat(e)).toString();break;default:n=e}return{text:n,value:i}}))},filteredSitesByTags:function(){var e;if(0===this.selectedTagValues.length)return this.sites;if(this.selectedTagValues.includes(c["u"].all))return this.sites;var t=this.clone(this.selectedTagValues),n=[];t.includes(c["u"].unTagged)&&(n=n.concat(this.allUnTaggedSites)),t.includes(c["u"].unReadMsg)&&(n=n.concat(this.allUnReadMsgSites)),t.includes(c["u"].statusError)&&(n=n.concat(this.allStatusErrSites));var i,s=Ke(this.allTaggedSites);try{for(s.s();!(i=s.n()).done;){var o=i.value;(null===(e=o.tags)||void 0===e?void 0:e.some((function(e){return t.includes(e)})))&&n.push(o)}}catch(a){s.e(a)}finally{s.f()}return n=this.uniqBy(n,"name"),console.log("filteredSitesByTags uniq: ".concat(t),n),n=this.sortByPriority(n),n}},activated:function(){this.loading||this.init()},methods:{showColumn:function(e){var t,n=this,i=Ke(this.headers.filter((function(e){return n.selectedHeaders.includes(e)})));try{for(i.s();!(t=i.n()).done;){var s=t.value;if(s.value===e)return!0}}catch(o){i.e(o)}finally{i.f()}return!1},resetSites:function(){var e=this;this.sites=[],this.options.sites.forEach((function(t){var n=e.clone(t);n.allowGetUserInfo&&(n.user?(void 0===n.user.isLoading&&(n.user.isLoading=!1),void 0===n.user.isLogged&&(n.user.isLogged=!1),e.formatUserInfo(n.user,n)):n.user={id:"",name:"",isLogged:!1,isLoading:!1},e.sites.push(n))})),this.sites=this.sortByPriority(this.sites)},init:function(){var e=this;Qe.sendRequest(c["b"].readConfig).then((function(t){e.options=e.clone(t),e.resetSites()})).catch();var t=this.$store.getters.viewsOptions(c["x"].home,{showUserName:!0,showSiteName:!0,showUserLevel:!0,showLevelRequirements:!0,showSeedingPoints:!0,showHnR:!0,showLastUpdateTimeAsRelativeTime:!0,showWeek:!1,selectedHeaders:this.selectedHeaders});Object.assign(this,t),this.selectedHeaders=this.headers.filter((function(t){return e.selectedHeaders.map((function(e){return e.value})).includes(t.value)})),0==this.selectedHeaders.length&&(this.selectedHeaders=Object.assign([],this.headers))},getInfos:function(){var e=this;this.loading=!0,this.beginTime=V()(),this.writeLog({event:"Home.getUserInfo.Start",msg:this.$t("home.startGetting").toString()}),this.filteredSitesByTags.forEach((function(t,n){e.writeLog({event:"Home.getUserInfo.Processing",msg:e.$t("home.gettingForSite",{siteName:t.name}).toString(),data:{host:t.host,name:t.name}}),e.getSiteUserInfo(t)}))},writeLog:function(e){Qe.sendRequest(c["b"].writeLog,null,{module:c["k"].options,event:e.event,msg:e.msg,data:e.data})},removeQueue:function(e){var t=this.requestQueue.findIndex((function(t){return t.host===e.host}));e.user.isLoading=!1,-1!==t&&(this.requestQueue.splice(t,1),0==this.requestQueue.length&&(this.requestMsg=this.$t("home.requestCompleted",{second:V()().diff(this.beginTime,"second",!0)}).toString(),this.loading=!1,this.writeLog({event:"Home.getUserInfo.Finished",msg:this.requestMsg}),this.sites=this.clone(this.sites)))},getUserLevelGroup:function(e){var t,n,i=null===(n=null===(t=e.user)||void 0===t?void 0:t.levelName)||void 0===n?void 0:n.toLowerCase(),s={manager:"admin,moderator,sys,retire,uploader,管理,版主,发种,保种,上传,退休".split(/[,，]/gi),vip:"vip,贵宾".split(/[,，]/gi)};s.manager=s.manager.filter((function(e){return!!e})),s.vip=s.vip.filter((function(e){return!!e}));var o="user";for(var a in s){var r=s[a];if(r.some((function(e){return null===i||void 0===i?void 0:i.includes(e)}))){o=a;break}}return o},getDoneIcon:function(e){var t={manager:"manage_accounts",vip:"verified",user:"done"};return t[this.getUserLevelGroup(e)]||t.user},isUserGroup:function(e){return"user"===this.getUserLevelGroup(e)},formatUserInfo:function(e,t){var n,i,s,o,a=e.downloaded,r=e.uploaded;0==a&&r>0?e.ratio=-1:a>0&&(e.ratio=r/a),e.joinTime=ze["a"].transformTime(e.joinTime,t.timezoneOffset),e.joinDateTime=V()(e.joinTime).format("YYYY-MM-DD HH:mm:ss");try{if(t.levelRequirements){var l,c=Ke(t.levelRequirements);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u.requiredDate)break;if(!u.interval||!e.joinDateTime)break;u.requiredDate=this.getRequiredDate(u.interval,e.joinDateTime).format("YYYY-MM-DD")}}catch(C){c.e(C)}finally{c.f()}e.nextLevels=[];var d,h=-1,v=Ke(t.levelRequirements);try{for(v.s();!(d=v.n()).done;){u=d.value;if((null===(i=null===(n=e.levelName)||void 0===n?void 0:n.trim())||void 0===i?void 0:i.toUpperCase())==(null===(o=null===(s=u.name)||void 0===s?void 0:s.trim())||void 0===o?void 0:o.toUpperCase())){h=Number(u.level);break}}}catch(C){v.e(C)}finally{v.f()}var f,m=Ke(t.levelRequirements);try{for(m.s();!(f=m.n()).done;){u=f.value;if(!(Number(u.level)<h))if(u.alternative){var p,g=Ke(u.alternative);try{for(g.s();!(p=g.n()).done;){for(var _=p.value,b=Object.assign({},u),k=0,y=Object.keys(_);k<y.length;k++){var w=y[k];_[w]&&(b[w]=_[w])}var S=this.calculateNextLeve(e,b);if(!S){e.nextLevels=[];break}e.nextLevels.push(S)}}catch(C){g.e(C)}finally{g.f()}if(e.nextLevels.length)break}else{var $=this.calculateNextLeve(e,u);if($){if(e.nextLevels.length)continue;e.nextLevels.push($);break}e.nextLevels=[]}}}catch(C){m.e(C)}finally{m.f()}}}catch(x){console.log(x)}},calculateNextLeve:function(e,t){var n,i,s,o={level:-1},a=null!==(n=e.downloaded)&&void 0!==n?n:0,r=null!==(i=e.uploaded)&&void 0!==i?i:0;if(e.levelName!=t.name){if(t.interval&&e.joinDateTime){var l=this.getRequiredDate(t.interval,e.joinDateTime);V()(new Date).isBefore(l)&&(o.requiredDate=l.format("YYYY-MM-DD"),o.level=t.level)}if(t.uploaded||t.ratio){var c=t.uploaded?this.fileSizetoLength(t.uploaded):0,u=t.downloaded?this.fileSizetoLength(t.downloaded):0,d=Math.max(a,u)*(null!==(s=t.ratio)&&void 0!==s?s:0),h=Math.max(c,d);r<h&&(o.uploaded=h-r,o.level=t.level)}if(t.downloaded){var v=this.fileSizetoLength(t.downloaded);a<v&&(o.downloaded=v-a,o.level=t.level)}if(t.ratio){var f=e.ratio,m=t.ratio;-1!=f&&f<m&&(o.ratio=t.ratio,o.level=t.level)}if(t.bonus){var p=e.bonus,g=t.bonus;p<g&&(o.bonus=g-p,o.level=t.level)}if(t.seedingPoints){var _=e.seedingPoints,b=t.seedingPoints;_<b&&(o.seedingPoints=b-_,o.level=t.level)}if(t.seedingSize){var k=this.fileSizetoLength(t.seedingSize),y=e.seedingSize?e.seedingSize:0;y<k&&(o.seedingSize=k-y,o.level=t.level)}if(t.seedingTime){var w=e.seedingTime,S=t.seedingTime;w<S&&(o.seedingTime=S-w,o.level=t.level)}if(t.averageSeedtime){var $=e.averageSeedtime,C=t.averageSeedtime;$<C&&(o.averageSeedtime=C-$,o.level=t.level)}if(t.uploads){var x=e.uploads?e.uploads:0,T=t.uploads;x<T&&(o.uploads=T-x,o.level=t.level)}if(t.downloads){var L=e.downloads?e.downloads:0,O=t.downloads;L<O&&(o.downloads=O-L,o.level=t.level)}if(t.trueDownloaded){var R=e.trueDownloaded?e.trueDownloaded:0,q=this.fileSizetoLength(t.trueDownloaded);R<q&&(o.trueDownloaded=q-R,o.level=t.level)}if(t.classPoints){var I=e.classPoints,P=t.classPoints;I<P&&(o.classPoints=P-I,o.level=t.level)}if(t.uniqueGroups){var A=e.uniqueGroups,U=t.uniqueGroups;A<U&&(o.uniqueGroups=U-A,o.level=t.level)}if(t.perfectFLAC){var M=e.perfectFLAC,D=t.perfectFLAC;M<D&&(o.perfectFLAC=D-M,o.level=t.level)}if(t.posts){var j=e.posts,B=t.posts;j<B&&(o.posts=B-j,o.level=t.level)}return o.level>0?(o.name=t.name,o):void 0}},fileSizetoLength:function(e){if("number"==typeof e)return e;var t=e.replace(/,/g,"").trim().match(/^(\d*\.?\d+)(.*[^ZEPTGMK])?([ZEPTGMK](B|iB))$/i);if(t){var n=parseFloat(t[1]),i=t[3];switch(!0){case/Zi?B/i.test(i):return n*Math.pow(2,70);case/Ei?B/i.test(i):return n*Math.pow(2,60);case/Pi?B/i.test(i):return n*Math.pow(2,50);case/Ti?B/i.test(i):return n*Math.pow(2,40);case/Gi?B/i.test(i):return n*Math.pow(2,30);case/Mi?B/i.test(i):return n*Math.pow(2,20);case/Ki?B/i.test(i):return n*Math.pow(2,10);default:return n}}return 0},getRequiredDate:function(e,t){var n="week";switch(e.replace(/[^A-Za-z]/g,"")){case"D":n="day";break;case"M":n="month";break;case"Y":n="year";break}var i=e.replace(/\D/g,"");return V()(t).add(parseInt(i),n)},getSiteUserInfo:function(e){var t=this;if(e.user&&!e.offline){var n=e.user;n.isLoading=!0,n.isLogged=!1,n.lastErrorMsg="",this.requestQueue.push(Object.assign({},e)),Qe.sendRequest(c["b"].getUserInfo,null,e).then((function(i){console.log(i),i&&i.name&&(n=Object.assign(n,i),t.formatUserInfo(n,e))})).catch((function(e){console.log("error",e),e.msg&&e.msg.status?n.lastErrorMsg=e.msg.msg:n.lastErrorMsg=t.$t("home.getUserInfoError").toString()})).finally((function(){t.removeQueue(e),t.$store.commit("readConfig")}))}},abortRequest:function(e){var t=this;Qe.sendRequest(c["b"].abortGetUserInfo,null,e).then((function(){t.writeLog({event:"Home.getUserInfo.Abort",msg:t.$t("home.getUserInfoAbort",{siteName:e.name}).toString()})})).catch((function(){t.writeLog({event:"Home.getUserInfo.Abort.Error",msg:t.$t("home.getUserInfoAbortError",{siteName:e.name}).toString()}),t.removeQueue(e)}))},clone:function(e){return JSON.parse(JSON.stringify(e))},uniqBy:function(e,t){var n="function"===typeof t?t:function(e){return e[t]};return Object(Ve["a"])(e.reduce((function(e,t){var i=null===t||void 0===t?t:n(t);return e.has(i)||e.set(i,t),e}),new Map).values())},filterOnlineSites:function(e){return e.filter((function(e){return!0!==e.offline}))},sortByPriority:function(e){return this.isSortByPriority?e.sort((function(e,t){return(e.priority||Number.MAX_SAFE_INTEGER)-(t.priority||Number.MAX_SAFE_INTEGER)})):e},updateViewOptions:function(){this.$store.dispatch("updateViewOptions",{key:c["x"].home,options:{showUserName:this.showUserName,showSiteName:this.showSiteName,showUserLevel:this.showUserLevel,showLevelRequirements:this.showLevelRequirements,showSeedingPoints:this.showSeedingPoints,showHnR:this.showHnR,showLastUpdateTimeAsRelativeTime:this.showLastUpdateTimeAsRelativeTime,showWeek:this.showWeek,selectedHeaders:this.selectedHeaders,selectedTags:this.selectedTags}})},formatError:function(e){return e.lastErrorMsg?e.lastErrorMsg:e.lastUpdateStatus&&e.lastUpdateStatus!==c["w"].success?this.$t("service.user.".concat(e.lastUpdateStatus)):""},openAllUrlsByType:function(e){var t=this.getAllUrlsByType(e);console.log("try open ".concat(t.length," tabs..."),t);for(var n=0;n<t.length;n++){var i=t[n];window.open(i)}},getAllUrlsByType:function(e){var t=this;switch(e){case c["l"].openAllSites:return this.filterOnlineSites(this.filteredSitesByTags).map((function(e){return e.activeURL}));case c["l"].openAllStatusErr:return this.filterOnlineSites(this.allStatusErrSites).map((function(e){return t.defaultQuickLinks(e)[0]||e.activeURL})).map((function(e){return e.href||e}));case c["l"].openAllUnReadMsg:return this.filterOnlineSites(this.allUnReadMsgSites).map((function(e){return t.defaultQuickLinks(e)[1]||e.activeURL})).map((function(e){return e.href||e}));default:throw new Error("getAllUrlsByType: 未知的类型：".concat(e))}},defaultQuickLinks:function(e){var t,n,i=null===(t=e.user)||void 0===t?void 0:t.id,s=null===(n=e.user)||void 0===n?void 0:n.name,o=[];switch(e.schema){case"Gazelle":o=[{color:"primary",desc:"".concat(s,"(").concat(i,")"),href:"/user.php?id=".concat(i)},{color:"success",desc:this.$t("home.mailbox").toString(),href:"/inbox.php"},{color:"success",desc:this.$t("home.torrents").toString(),href:"/torrents.php"},{color:"primary",desc:this.$t("home.control_panel").toString(),href:"/user.php?action=edit&userid=".concat(i)}];break;case"GazelleJSONAPI":o=[{color:"primary",desc:"".concat(s,"(").concat(i,")"),href:"/user.php?id=".concat(i)},{color:"success",desc:this.$t("home.mailbox").toString(),href:"/inbox.php"},{color:"success",desc:this.$t("home.torrents").toString(),href:"/torrents.php"},{color:"primary",desc:this.$t("home.control_panel").toString(),href:"/user.php?action=edit&userid=".concat(i)},{color:"primary",desc:this.$t("home.security").toString(),href:"/user.php?action=edit&userid=".concat(i,"#paranoia_settings")}];break;case"NexusPHP":o=[{color:"primary",desc:"".concat(s,"(").concat(i,")"),href:"/userdetails.php?id=".concat(i)},{color:"success",desc:this.$t("home.mailbox").toString(),href:"/messages.php"},{color:"success",desc:this.$t("home.torrents").toString(),href:"/torrents.php"},{color:"primary",desc:this.$t("home.control_panel").toString(),href:"/usercp.php"},{color:"primary",desc:this.$t("home.security").toString(),href:"/usercp.php?action=security"}];break;case"TNode":o=[{color:"primary",desc:"".concat(s,"(").concat(i,")"),href:"/user/info"},{color:"success",desc:this.$t("home.mailbox").toString(),href:"/message/system"},{color:"success",desc:this.$t("home.torrents").toString(),href:"/torrent/list/"},{color:"primary",desc:this.$t("home.control_panel").toString(),href:"/user/setting"}];break;case"TTG":o=[{color:"primary",desc:"".concat(s,"(").concat(i,")"),href:"/userdetails.php?id=".concat(i)},{color:"success",desc:this.$t("home.mailbox").toString(),href:"/messages.php"},{color:"success",desc:this.$t("home.torrents").toString(),href:"/browse.php"},{color:"primary",desc:this.$t("home.control_panel").toString(),href:"/my.php"}];break;case"Discuz":case"UNIT3D":default:console.log("un-support schema for quickLinks: ".concat(e.schema));break}return o=o.map((function(t){return Fe(Fe({},t),{},{href:new URL(t.href,e.activeURL).toString()})})),o}},filters:{formatRatio:function(e){if(e>1e4||-1==e)return"∞";var t=parseFloat(e);return isNaN(t)?"":t.toFixed(2)}}}),Je=We,Ze=(n("574f"),n("8212")),Xe=n("4ca6"),et=n("12b2"),tt=n("8fea"),nt=n("490a"),it=n("b56d"),st=n("b73d"),ot=Object(f["a"])(Je,qe,Ie,!1,null,null,null),at=ot.exports;p()(ot,{VAlert:xe["a"],VAvatar:Ze["a"],VBadge:Xe["a"],VBtn:D["a"],VCard:j["a"],VCardTitle:et["a"],VChip:he["a"],VContainer:B["a"],VDataTable:tt["a"],VIcon:g["a"],VMenu:K["a"],VProgressCircular:nt["a"],VSelect:it["a"],VSpacer:ee["a"],VSwitch:st["a"],VTextField:Q["a"]}),o["default"].use(Re["a"]);var rt=new Re["a"]({routes:[{path:"/",name:"home",component:at,alias:"/home",meta:{keepAlive:!0}},{path:"/set-sites",name:"set-sites",component:function(){return n.e("chunk-b5285320").then(n.bind(null,"92b8"))},meta:{keepAlive:!0}},{path:"/set-support-schema",name:"set-support-schema",component:function(){return n.e("chunk-1de57bb4").then(n.bind(null,"7170"))}},{path:"/set-download-clients",name:"set-download-clients",component:function(){return n.e("chunk-3311d7d4").then(n.bind(null,"043d"))}},{path:"/set-base",name:"set-base",component:function(){return n.e("chunk-13555d18").then(n.bind(null,"45cf"))}},{path:"/set-download-paths",name:"set-download-paths",component:function(){return n.e("chunk-6bb8f5a8").then(n.bind(null,"080a"))}},{path:"/set-backup",name:"set-backup",component:function(){return n.e("chunk-50e00a12").then(n.bind(null,"8819"))}},{path:"/technology-stack",name:"technology-stack",component:function(){return n.e("chunk-34974cfb").then(n.bind(null,"6556"))}},{path:"/set-language",name:"set-language",component:function(){return n.e("chunk-2d0d3e49").then(n.bind(null,"5f68"))}},{path:"/set-search-solution",name:"set-search-solution",component:function(){return n.e("chunk-ce66cee4").then(n.bind(null,"aa53"))}},{path:"/donate",name:"donate",component:function(){return n.e("chunk-2d207f04").then(n.bind(null,"a351"))}},{path:"/set-site-plugins/:host",name:"set-site-plugins",component:function(){return n.e("chunk-fc3f34d4").then(n.bind(null,"b637"))},props:!0},{path:"/search-torrent/:key?/:host?",name:"search-torrent",component:function(){return n.e("chunk-312da0e2").then(n.bind(null,"17ad"))},props:!0,meta:{keepAlive:!0}},{path:"/history",name:"history",component:function(){return n.e("chunk-6513cab0").then(n.bind(null,"8cd1"))}},{path:"/system-logs",name:"system-logs",component:function(){return n.e("chunk-e9607d78").then(n.bind(null,"bdd7"))}},{path:"/set-site-search-entry/:host",name:"set-site-search-entry",component:function(){return n.e("chunk-566edeef").then(n.bind(null,"f359"))},props:!0},{path:"/dev-team",name:"dev-team",component:function(){return n.e("chunk-2d0e93b1").then(n.bind(null,"8d3b"))}},{path:"/user-data-timeline",name:"user-data-timeline",component:function(){return n.e("chunk-4f44ec56").then(n.bind(null,"6d73"))}},{path:"/statistic/:host?",name:"statistic",component:function(){return n.e("chunk-f0ce86ae").then(n.bind(null,"1f4e"))}},{path:"/set-permissions",name:"set-permissions",component:function(){return Promise.resolve().then(n.bind(null,"d97c"))}},{path:"/collection",name:"collection",component:function(){return n.e("chunk-cc82d62c").then(n.bind(null,"bf34"))},meta:{keepAlive:!0}},{path:"/search-result-snapshot",name:"search-result-snapshot",component:function(){return n.e("chunk-2d0ab081").then(n.bind(null,"1419"))}},{path:"/keep-upload-task",name:"keep-upload-task",component:function(){return n.e("chunk-6894dbf1").then(n.bind(null,"d479"))}}]}),lt=(n("2397"),n("4e2b")),ct=n("308d"),ut=n("6bb5"),dt=n("2f62"),ht=n("8d81"),vt=n.n(ht);function ft(e){var t=mt();return function(){var n,i=Object(ut["a"])(e);if(t){var s=Object(ut["a"])(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return Object(ct["a"])(this,n)}}function mt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var pt=function(e){Object(lt["a"])(n,e);var t=ft(n);function n(){return Object(i["a"])(this,n),t.call(this)}return Object(s["a"])(n,[{key:"save",value:function(e){return this.sendRequest(c["b"].saveConfig,null,e)}}]),n}(q["a"]),gt=new pt;o["default"].use(dt["a"]);var _t=new dt["a"].Store({state:{options:{sites:[],clients:[]},schemas:[],uiOptions:{},initialized:!1,searching:!1},mutations:{readConfig:function(e){gt.sendRequest(c["b"].readConfig,(function(t){e.options=t}))},resetConfig:function(e,t){var n=e.options.system;e.options=Object.assign({},t),e.options.system=n,gt.sendRequest(c["b"].saveConfig,null,e.options)},updateConfig:function(e,t){Object.assign(e.options,t),gt.sendRequest(c["b"].saveConfig,null,e.options)},addSite:function(e,t){e.options.sites.push(t),gt.sendRequest(c["b"].saveConfig,null,e.options)},updateSite:function(e,t){var n=e.options.sites.findIndex((function(e){return e.host===t.host}));-1!==n&&(e.options.sites[n]=t,gt.sendRequest(c["b"].saveConfig,null,e.options))},removeSite:function(e,t){var n=e.options.sites.findIndex((function(e){return e.host===t.host}));-1!==n&&(e.options.sites.splice(n,1),gt.sendRequest(c["b"].saveConfig,null,e.options))},addClient:function(e,t){t.id=vt()((new Date).toString()),e.options.clients.push(t),gt.sendRequest(c["b"].saveConfig,null,e.options)},updateClient:function(e,t){var n=e.options.clients.findIndex((function(e){return t.id===e.id}));-1!==n&&(e.options.clients[n]=t,gt.sendRequest(c["b"].saveConfig,null,e.options))},removeClient:function(e,t){var n=e.options.clients.findIndex((function(e){return e.id===t.id}));if(-1!==n){var i=e.options.clients[n];e.options.defaultClientId==i.id&&(e.options.defaultClientId=""),e.options.clients.splice(n,1),gt.sendRequest(c["b"].saveConfig,null,e.options)}},clearClients:function(e){e.options.clients=[],e.options.defaultClientId="",gt.sendRequest(c["b"].saveConfig,null,e.options)},updatePathsOfClient:function(e,t){var n=e.options.clients.find((function(e){return t.clientId===e.id}));n&&(n.paths||(n.paths={}),t.site&&t.site.host?n.paths[t.site.host]=t.paths:n.paths[c["f"].allSite]=t.paths,gt.sendRequest(c["b"].saveConfig,null,e.options))},removePathsOfClient:function(e,t){var n=e.options.clients.find((function(e){return t.clientId===e.id}));if(n&&n.paths){var i="";i=t.site?t.site.host:c["f"].allSite,delete n.paths[i],gt.sendRequest(c["b"].saveConfig,null,e.options)}},addPlugin:function(e,t){var n=e.options.sites.find((function(e){return e.host===t.host}));n&&(n.plugins||(n.plugins=[]),t.plugin.id=vt()((new Date).toString()),n.plugins.push(t.plugin),gt.sendRequest(c["b"].saveConfig,null,e.options))},updatePlugin:function(e,t){var n=e.options.sites.find((function(e){return e.host===t.host}));if(n){var i=n.plugins.findIndex((function(e){return e.id===t.plugin.id}));-1!==i&&(n.plugins[i]=t.plugin,gt.sendRequest(c["b"].saveConfig,null,e.options))}},removePlugin:function(e,t){var n=e.options.sites.find((function(e){return e.host===t.host}));if(n){var i=n.plugins.findIndex((function(e){return e.id===t.plugin.id}));-1!==i&&(n.plugins.splice(i,1),gt.sendRequest(c["b"].saveConfig,null,e.options))}},updateOptions:function(e,t){e.options=t},updateUIOptions:function(e,t){e.uiOptions=t},updateSearchStatus:function(e,t){e.searching=t}},actions:{resetRunTimeOptions:function(e,t){var n=e.commit;e.state;gt.sendRequest(c["b"].resetRunTimeOptions,null,t).then((function(e){n("updateOptions",e)})).catch((function(e){console.log("store.resetRunTimeOptions.error",e)}))},readConfig:function(e){var t=e.commit,n=e.state;return new Promise((function(e,i){gt.sendRequest(c["b"].writeLog,null,{module:c["k"].options,event:"Options.readConfig",msg:"开始加载配置信息"}),gt.sendRequest(c["b"].readConfig).then((function(s){return t("updateOptions",s),s.system?s.system.clients&&s.system.schemas?(gt.sendRequest(c["b"].writeLog,null,{module:c["k"].options,event:"Options.readConfig.Finished",msg:"配置加载完成"}),n.initialized=!0,void e(s)):(gt.sendRequest(c["b"].writeLog,null,{module:c["k"].options,event:"Options.readConfig.Error",msg:"配置信息加载失败，没有获取到下载服务器或站点架构信息"}),void i("Options.readConfig.Error")):(gt.sendRequest(c["b"].writeLog,null,{module:c["k"].options,event:"Options.readConfig.Error",msg:"配置信息加载失败，没有获取到系统定义信息"}),void i("Options.readConfig.Error"))})).catch((function(e){i(e)}))}))},saveConfig:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options);Object.assign(s,t),gt.sendRequest(c["b"].saveConfig,null,s).then((function(){n("updateOptions",s)})).catch((function(e){console.log("store.saveConfig.error",e)}))},readUIOptions:function(e){var t=e.commit;return new Promise((function(e,n){gt.sendRequest(c["b"].readUIOptions).then((function(n){t("updateUIOptions",n),e(n)})).catch((function(e){console.log("store.saveConfig.error",e),n(e)}))}))},saveUIOptions:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.uiOptions);Object.assign(s,t),gt.sendRequest(c["b"].saveUIOptions,null,s).then((function(){n("updateUIOptions",s)})).catch()},updatePagination:function(e,t){var n=e.commit,i=e.state,s=i.uiOptions.paginations||{};s[t.key]=t.options,i.uiOptions.paginations=s,gt.sendRequest(c["b"].saveUIOptions,null,i.uiOptions).then((function(){n("updateUIOptions",i.uiOptions)})).catch()},updateViewOptions:function(e,t){var n=e.commit,i=e.state,s=i.uiOptions.views||{};s[t.key]=t.options,i.uiOptions.views=s,gt.sendRequest(c["b"].saveUIOptions,null,i.uiOptions).then((function(){n("updateUIOptions",i.uiOptions)})).catch()},updateSearchSolution:function(e,t){var n=e.commit,i=e.state,s=-1;i.options.searchSolutions&&(s=i.options.searchSolutions.findIndex((function(e){return e.id===t.id})));var o=Object.assign({},i.options);o.searchSolutions||(o.searchSolutions=[]),-1==s?(t.id=vt()((new Date).toString()),o.searchSolutions.push(t)):o.searchSolutions[s]=t,gt.save(o).then((function(){n("updateOptions",o)})).catch()},removeSearchSolution:function(e,t){var n=e.commit,i=e.state,s=-1;i.options.searchSolutions&&(s=i.options.searchSolutions.findIndex((function(e){return e.id===t.id})));var o=Object.assign({},i.options);o.searchSolutions&&s>-1&&(o.defaultSearchSolutionId==t.id&&(o.defaultSearchSolutionId=""),o.searchSolutions.splice(s,1),gt.save(o).then((function(){n("updateOptions",o)})).catch())},addSiteSearchEntry:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options),o=s.sites.find((function(e){return e.host===t.host}));o&&(o.searchEntry||(o.searchEntry=[]),t.item.id=vt()((new Date).toString()),o.searchEntry.push(t.item),n("updateOptions",s),gt.save(s))},updateSiteSearchEntry:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options),o=s.sites.find((function(e){return e.host===t.host}));if(o){var a=o.searchEntry.findIndex((function(e){return e.isCustom&&e.id===t.item.id}));-1!==a&&(o.searchEntry[a]=t.item,n("updateOptions",s),gt.save(s))}},removeSiteSearchEntry:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options),o=s.sites.find((function(e){return e.host===t.host}));if(o){var a=o.searchEntry.findIndex((function(e){return e.isCustom&&e.id===t.item.id}));-1!==a&&(o.searchEntry.splice(a,1),n("updateOptions",s),gt.save(s))}},addLanguage:function(e,t){e.commit,e.state;gt.sendRequest(c["b"].addLanguage,null,t).then((function(){})).catch((function(e){}))},replaceLanguage:function(e,t){e.commit,e.state;gt.sendRequest(c["b"].replaceLanguage,null,t).then((function(){})).catch((function(e){}))},addBackupServer:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options);s.backupServers||(s.backupServers=[]),t.id=vt()((new Date).toString()),s.backupServers.push(t),n("updateOptions",s),gt.save(s)},updateBackupServer:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options);if(s.backupServers){var o=s.backupServers.findIndex((function(e){return e.id===t.id}));-1!==o&&(s.backupServers[o]=t,n("updateOptions",s),gt.save(s))}},removeBackupServer:function(e,t){var n=e.commit,i=e.state,s=Object.assign({},i.options);if(s.backupServers){var o=s.backupServers.findIndex((function(e){return e.id===t.id}));-1!==o&&(s.backupServers.splice(o,1),n("updateOptions",s),gt.save(s))}}},getters:{sites:function(e){return e.options.system&&e.options.system.sites&&e.options.system.sites.filter((function(t){return!e.options.sites||-1===e.options.sites.findIndex((function(e){return e.host===t.host}))}))},clients:function(e){return e.options.system&&e.options.system.clients&&e.options.system.clients.filter((function(t){return!e.options.clients||-1===e.options.clients.findIndex((function(e){return e.name===t.name}))}))},defaultClient:function(e){return e.options.defaultClientId?e.options.clients.find((function(t){return e.options.defaultClientId===t.id})):null},clientOptions:function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n||(n=t.defaultClientId||e.options.defaultClientId);var i=e.options.clients.find((function(e){return e.id===n}));return i}},siteDefaultPath:function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n||(n=t.defaultClientId||e.options.defaultClientId);var i=e.options.clients.find((function(e){return e.id===n})),s="";if(i&&i.paths)for(var o in i.paths)if(t.host===o){s=i.paths[o][0];break}return s}},pagination:function(e){return function(t,n){return e.uiOptions&&e.uiOptions.paginations&&e.uiOptions.paginations[t]||n}},viewsOptions:function(e){return function(t,n){return e.uiOptions&&e.uiOptions.views&&e.uiOptions.views[t]||n}}}});window.chrome=window.chrome||{},chrome&&chrome.tabs&&chrome.tabs.getCurrent((function(e){gt.sendRequest(c["b"].updateOptionsTabId,null,e.id)}));var bt=n("c67c"),kt=n("a925");o["default"].use(kt["a"]);var yt=new kt["a"]({locale:"",fallbackLocale:"en"}),wt=function(){function e(){Object(i["a"])(this,e),this.loadedLanguages=[],this.config=[],this.currentLanguage="",this.onChanged=function(){},this.onAdded=function(){},this.onReplaced=function(){},this.initialized=!1,this.vuei18n=yt,this.loadLangResource("en"),this.loadLangResource("zh-CN")}return Object(s["a"])(e,[{key:"init",value:function(e){var t=this;return new Promise((function(n,i){t.loadConfig().then((function(){t.reset(e).then((function(){t.initialized=!0,n(yt)})).catch((function(){i()}))})).catch((function(){console.error("Loading language configuration file failed. (加载语言配置文件失败)")}))}))}},{key:"loadConfig",value:function(){var e=this;return new Promise((function(t,n){$.getJSON("".concat(le["a"].host,"/i18n.json")).done((function(n){e.config=n,t(e.config)})).fail((function(e){n(e)}))}))}},{key:"loadLangResource",value:function(e){var t=this;return new Promise((function(n,i){$.getJSON("".concat(le["a"].host,"/i18n/").concat(e,".json")).done((function(e){t.push(e),n(e)})).fail((function(e){i(e)}))}))}},{key:"push",value:function(e){e.name&&e.code&&(this.exists(e.code)||(yt.setLocaleMessage(e.code,e.words),this.loadedLanguages.push(e.code)))}},{key:"change",value:function(e){this.currentLanguage!==e&&(yt.locale=e,this.currentLanguage=e,this.initialized&&this.onChanged.call(this,e))}},{key:"reset",value:function(e){var t=this;return new Promise((function(n,i){if(t.currentLanguage!==e){if(!t.exists(e))return void t.loadLangResource(e).then((function(){t.change(e),n(e)})).catch((function(s){"en"==e?i(s):t.reset("en").then((function(){n(e)}))}));t.change(e)}n(e)}))}},{key:"add",value:function(e){var t=this;return new Promise((function(n,i){e.name&&e.code?t.exists(e.code)?i():(t.push(e),yt.locale=e.code,t.currentLanguage=e.code,t.initialized&&t.onAdded.call(t,e),n(e.code)):i()}))}},{key:"replace",value:function(e){var t=this;return new Promise((function(n,i){e.name&&e.code?t.exists(e.code)&&(yt.setLocaleMessage(e.code,e.words),yt.locale=e.code,t.currentLanguage=e.code,t.initialized&&t.onReplaced.call(t,e),n(e.code)):i()}))}},{key:"exists",value:function(e){return this.loadedLanguages.includes(e)}}]),e}(),St=function(){function e(){Object(i["a"])(this,e),this.options={sites:[],clients:[]},this.i18n=new wt,this.loadCount=0,this.initI18n(),this.initVueConfig(),this.initMainVM(),this.init()}return Object(s["a"])(e,[{key:"initVueConfig",value:function(){var e=this;o["default"].config.productionTip=!1;var t=function(e){bt["a"].hasOwnProperty(e)&&o["default"].filter(e,(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return bt["a"][e].call(bt["a"],n)}))};for(var n in bt["a"])t(n);o["default"].filter("formatDate",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm";return e?V()(e).isValid()?(/^(\d){10}$/.test(e)&&(e=1e3*parseInt(e)),V()(e).format(t)):e:""})),o["default"].filter("timeAgo",(function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return"";var i={year:e.i18n.vuei18n.t("timeline.time.year",e.i18n.currentLanguage).toString(),month:e.i18n.vuei18n.t("timeline.time.month",e.i18n.currentLanguage).toString(),day:e.i18n.vuei18n.t("timeline.time.day",e.i18n.currentLanguage).toString(),hour:e.i18n.vuei18n.t("timeline.time.hour",e.i18n.currentLanguage).toString(),mins:e.i18n.vuei18n.t("timeline.time.mins",e.i18n.currentLanguage).toString(),week:e.i18n.vuei18n.t("timeline.time.week",e.i18n.currentLanguage).toString()},s=(new Date).getTime(),o=Math.floor(Math.abs(s-t)/1e3/60),a=Math.floor(o/60);o-=60*a;var r=Math.floor(a/24);if(a-=24*r,n){var l=Math.floor(r/7);return l<1?e.i18n.vuei18n.t("timeline.time.lessThanAWeek",e.i18n.currentLanguage).toString():"".concat(l).concat(i.week)}var c=Math.floor(r/30),u=r-30*c,d=Math.floor(r/365);c-=12*d;while(c>12)d++,c-=12;var h="";switch(!0){case d>0:h=d+i["year"]+c+i["month"];break;case c>0:h=c+i["month"]+u+i["day"];break;case r>0:h=r+i["day"]+a+i["hour"];break;case a>0:h=a+i["hour"]+o+i["mins"];break;case o>0:h=o+i["mins"];break;default:h="< 1"+i["mins"]}return h+e.i18n.vuei18n.t("timeline.time.ago",e.i18n.currentLanguage).toString()}))}},{key:"initI18n",value:function(){var e=this;this.i18n.onChanged=function(t){e.options.locale=t,_t.dispatch("saveConfig",{locale:t}),e.vm&&(e.vm.$vuetify.lang.current="zh-CN"!=t?"en":"zh-Hans")},this.i18n.onAdded=function(e){_t.dispatch("addLanguage",e)},this.i18n.onReplaced=function(e){_t.dispatch("replaceLanguage",e)},window.i18nService=this.i18n,a["a"].init("en")}},{key:"initMainVM",value:function(){this.vm=new o["default"]({router:rt,store:_t,i18n:this.i18n.vuei18n,render:function(e){return e(Oe)}}),this.vm.$mount("#app")}},{key:"init",value:function(){var e=this,t=[];t.push(_t.dispatch("readConfig")),t.push(_t.dispatch("readUIOptions")),Promise.all(t).then((function(t){e.options=t[0],e.i18n.init(e.options.locale||"zh-CN").then((function(t){"zh-CN"!=e.options.locale?e.vm.$vuetify.lang.current="en":e.vm.$vuetify.lang.current="zh-Hans",e.vm.$children[0].init()}))})).catch((function(t){++e.loadCount<5?setTimeout((function(){e.init()}),1e3):alert("加载配置失败？？"+t),console.log(t)}))}}]),e}();(function(){new St})()},d97c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"mt-3"},[n("v-flex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[n("v-card",[n("v-img",{attrs:{src:"./assets/banner/default.jpg","aspect-ratio":"2.75"}}),n("v-card-title",{staticClass:"pb-1"},[e.cancelled?n("div",{staticClass:"title mb-2"},[e._v(e._s(e.$t("permissions.cancelled")))]):n("div",[n("h3",{staticClass:"title mb-2"},[e._v(e._s(e.$t("permissions.title")))]),n("h3",[e._v(e._s(e.$t("permissions.subtitle")))]),n("v-data-table",{attrs:{headers:e.headers,items:e.items,"item-key":"key","select-all":"","hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[t.item.visible?n("tr",[n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("td",[e._v(e._s(e.$t(t.item.title)))]),n("td",[n("v-switch",{attrs:{"true-value":"true","false-value":"false","input-value":t.item.enabled?"true":"false","hide-details":""},on:{click:function(n){return n.stopPropagation(),e.updatePermissions(t.item)}}})],1)]):e._e()]}}],null,!1,393232643),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)]),e.cancelled?e._e():n("v-card-actions",[n("v-btn",{attrs:{flat:"",color:"success",disabled:0==e.selected.length},on:{click:e.authorize}},[e._v(e._s(e.$t("permissions.authorize")))]),n("v-btn",{attrs:{flat:"",color:"orange"},on:{click:e.cancel}},[e._v(e._s(e.$t("permissions.cancel")))])],1)],1)],1)],1)},s=[],o=(n("6762"),n("2fdb"),n("75fc")),a=(n("ac6a"),n("2b0e")),r=a["default"].extend({data:function(){return{permissions:[{origins:["http://*/*","https://*/*"],title:"permissions.details.allSites",visible:!0,isOrigin:!0},{key:"downloads",visible:!0,title:"permissions.details.downloads"},{key:"cookies",visible:!0,title:"permissions.details.cookies"}],selected:[],cancelled:!1,items:[]}},methods:{authorize:function(){var e=this;if(chrome&&chrome.permissions){var t={permissions:[],origins:[]};this.selected.forEach((function(e){var n;e.visible&&(e.isOrigin?(n=t.origins).push.apply(n,Object(o["a"])(e.origins)):t.permissions.push(e.key))})),chrome.permissions.request(t,(function(t){e.$emit("update",t)}))}else this.$emit("update",!0)},cancel:function(){this.cancelled=!0},updatePermissions:function(e){if(e.visible){e.enabled=!e.enabled;var t={};t=e.isOrigin?{origins:e.origins}:{permissions:[e.key]},e.enabled?chrome.permissions.request(t,(function(t){e.enabled=t})):chrome.permissions.remove(t,(function(t){e.enabled=!t})),console.log(e)}}},created:function(){var e=this;if(chrome&&chrome.permissions){var t=chrome.runtime.getManifest();this.permissions.forEach((function(n){var i={};n.isOrigin?i={origins:n.origins}:(t.optional_permissions&&n.key&&(n.visible=t.optional_permissions.includes(n.key)),i={permissions:[n.key]}),n.visible&&chrome.permissions.contains(i,(function(t){e.items.push(Object.assign({enabled:t},n))}))}))}else this.items=this.permissions},computed:{headers:function(){return[{text:this.$t("permissions.headers.title"),align:"left",sortable:!1,value:"title"},{text:this.$t("permissions.headers.enabled"),align:"left",value:"enabled",sortable:!1}]}}}),l=r,c=(n("6d99"),n("2877")),u=n("6544"),d=n.n(u),h=n("8336"),v=n("b0af"),f=n("99d9"),m=n("12b2"),p=n("ac7c"),g=n("8fea"),_=n("0e8f"),b=n("adda"),k=n("a722"),y=n("b73d"),w=Object(c["a"])(l,i,s,!1,null,"21c1f1d8",null);t["default"]=w.exports;d()(w,{VBtn:h["a"],VCard:v["a"],VCardActions:f["a"],VCardTitle:m["a"],VCheckbox:p["a"],VDataTable:g["a"],VFlex:_["a"],VImg:b["a"],VLayout:k["a"],VSwitch:y["a"]})},efd2:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("2b0e"),s=new i["default"]}});