import{V as n,E as o,b as c,n as i}from"./index-C2uF3Qql.js";const r=new c,h=n.extend({data(){return{selected:[],selectedItem:{},pagination:{rowsPerPage:10,sortBy:"time",descending:!0},items:[],dialogRemoveConfirm:!1,options:this.$store.state.options,errorMsg:"",haveError:!1,haveSuccess:!1,successMsg:"",siteCache:{}}},methods:{clear(){confirm(this.$t("searchResultSnapshot.clearConfirm").toString())&&r.sendRequest(o.clearSearchResultSnapshot).then(a=>{console.log("clearSearchResultSnapshot",a),this.items=[]})},removeSelected(){this.selected&&this.selected.length>0&&confirm(this.$t("common.removeSelectedConfirm",{count:this.selected.length}).toString())&&this.remove(this.selected)},remove(a){a||(a=[this.selectedItem]),r.sendRequest(o.removeSearchResultSnapshot,null,a).then(e=>{console.log("removeSearchResultSnapshot",e),this.items=e}),this.dialogRemoveConfirm=!1},removeConfirm(a){this.selectedItem=a,this.dialogRemoveConfirm=!0},loadSearchResultSnapshot(){r.sendRequest(o.loadSearchResultSnapshot).then(a=>{console.log("loadSearchResultSnapshot",a),this.items=a})},getInfos(a){let e="";return a.searchPayload&&(a.searchPayload.cn?e=a.searchPayload.cn:a.searchPayload.en&&(e=a.searchPayload.en)),e}},created(){this.loadSearchResultSnapshot()},computed:{headers(){return[{text:this.$t("searchResultSnapshot.headers.key"),align:"left",value:"data.key"},{text:this.$t("searchResultSnapshot.headers.time"),align:"left",value:"time"},{text:this.$t("history.headers.action"),value:"name",sortable:!1}]}}});var v=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("v-alert",{attrs:{value:!0,type:"info"}},[e._v(e._s(e.$t("searchResultSnapshot.title")))]),t("v-card",[t("v-card-title",[t("v-btn",{attrs:{color:"error",disabled:e.selected.length==0},on:{click:e.removeSelected}},[t("v-icon",{staticClass:"mr-2"},[e._v("remove")]),e._v(" "+e._s(e.$t("common.remove"))+" ")],1),t("v-btn",{attrs:{color:"error",disabled:e.items.length==0},on:{click:e.clear}},[t("v-icon",{staticClass:"mr-2"},[e._v("clear")]),e._v(" "+e._s(e.$t("common.clear"))+" ")],1),t("v-btn",{attrs:{color:"info",href:"https://github.com/pt-plugins/PT-Plugin-Plus/wiki/search-result-snapshot",target:"_blank",rel:"noopener noreferrer nofollow"}},[t("v-icon",{staticClass:"mr-2"},[e._v("help")]),e._v(" "+e._s(e.$t("settings.searchSolution.index.help"))+" ")],1),t("v-spacer"),t("v-text-field",{staticClass:"search",attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""}})],1),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,pagination:e.pagination,"item-key":"id","select-all":""},on:{"update:pagination":function(s){e.pagination=s}},scopedSlots:e._u([{key:"items",fn:function(s){return[t("td",{staticStyle:{width:"20px"}},[t("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:s.selected,callback:function(l){e.$set(s,"selected",l)},expression:"props.selected"}})],1),t("td",[e._v(e._s(s.item.key)+" "+e._s(e.getInfos(s.item)))]),t("td",[e._v(e._s(e._f("formatDate")(s.item.time)))]),t("td",[t("v-btn",{staticClass:"mx-0",attrs:{flat:"",icon:"",small:"",title:e.$t("searchResultSnapshot.show"),to:`/search-torrent/show-snapshot-${s.item.id}`}},[t("v-icon",{attrs:{small:""}},[e._v("image_search")])],1),t("v-btn",{staticClass:"mx-0",attrs:{flat:"",icon:"",small:"",color:"error",title:e.$t("common.remove")},on:{click:function(l){return e.removeConfirm(s.item)}}},[t("v-icon",{attrs:{small:""}},[e._v("delete")])],1)],1)]}}]),model:{value:e.selected,callback:function(s){e.selected=s},expression:"selected"}})],1),t("v-dialog",{attrs:{width:"300"},model:{value:e.dialogRemoveConfirm,callback:function(s){e.dialogRemoveConfirm=s},expression:"dialogRemoveConfirm"}},[t("v-card",[t("v-card-title",{staticClass:"headline red lighten-2"},[e._v(e._s(e.$t("searchResultSnapshot.removeConfirmTitle")))]),t("v-card-text",[e._v(e._s(e.$t("searchResultSnapshot.removeConfirm")))]),t("v-divider"),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{flat:"",color:"info"},on:{click:function(s){e.dialogRemoveConfirm=!1}}},[t("v-icon",[e._v("cancel")]),t("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("common.cancel")))])],1),t("v-btn",{attrs:{color:"error",flat:""},on:{click:function(s){return e.remove()}}},[t("v-icon",[e._v("check_circle_outline")]),t("span",{staticClass:"ml-1"},[e._v(e._s(e.$t("common.ok")))])],1)],1)],1)],1),t("v-snackbar",{attrs:{top:"",timeout:3e3,color:"error"},model:{value:e.haveError,callback:function(s){e.haveError=s},expression:"haveError"}},[e._v(e._s(e.errorMsg))]),t("v-snackbar",{attrs:{bottom:"",timeout:3e3,color:"success"},model:{value:e.haveSuccess,callback:function(s){e.haveSuccess=s},expression:"haveSuccess"}},[e._v(e._s(e.successMsg))])],1)},m=[],d=i(h,v,m,!1,null,null,null,null);const f=d.exports;export{f as default};
