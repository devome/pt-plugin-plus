import{V as a,n,g as o,h as r}from"./index-CFTjSAoW.js";const h=a.extend({});var v=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"keyDescription"},[e("span",[t._v(t._s(t.$t("settings.downloadPaths.keyDescription.allowKeys")))]),e("table",[e("tr",[e("td",[t._v("$site.name$")]),e("td",[t._v(" "+t._s(t.$t("settings.downloadPaths.keyDescription.siteName"))+" "),e("br"),t._v(" "+t._s(t.$t("settings.downloadPaths.keyDescription.example"))+"/volume1/$site.name$/music -> /volume1/OpenCD/music ")])]),e("tr",[e("td",[t._v("$site.host$")]),e("td",[t._v(" "+t._s(t.$t("settings.downloadPaths.keyDescription.siteHost"))+" "),e("br"),t._v(" "+t._s(t.$t("settings.downloadPaths.keyDescription.example"))+"/volume1/$site.host$/music -> /volume1/open.cd/music ")])]),e("tr",[e("td",[t._v("$YYYY$")]),e("td",[t._v(t._s(t.$t("settings.downloadPaths.keyDescription.example"))+"/volume1/$YYYY$/music -> /volume1/2019/music")])]),e("tr",[e("td",[t._v("$MM$")]),e("td",[t._v(t._s(t.$t("settings.downloadPaths.keyDescription.example"))+"/volume1/$MM$/music -> /volume1/10/music")])]),e("tr",[e("td",[t._v("$DD$")]),e("td",[t._v(t._s(t.$t("settings.downloadPaths.keyDescription.example"))+"/volume1/$DD$/music -> /volume1/01/music")])]),e("tr",[e("td",[t._v("<...>")]),e("td",[t._v(" "+t._s(t.$t("settings.downloadPaths.keyDescription.dynamic",{key:"<...>"}))+" "),e("br"),t._v(" "+t._s(t.$t("settings.downloadPaths.keyDescription.dynamicExample"))+" ")])])])])},m=[],u=n(h,v,m,!1,null,"5f0a65dd",null,null);const d=u.exports,p=a.extend({components:{KeyDescription:d},data(){return{rules:{require:[i=>!!i||"!"]},show:!1,valid:!1,paths:"",selectedSite:{}}},props:{value:Boolean,client:Object},model:{prop:"value",event:"change"},watch:{show(){this.$emit("change",this.show),this.show||(this.paths="",this.selectedSite={})},value(){this.show=this.value}},methods:{save(){this.$emit("save",{site:this.selectedSite,paths:this.paths.split(`
`)}),this.show=!1},cancel(){this.show=!1},joinTags(i){return i&&i.join?i.join(", "):""},getSites(){let i=this.$store.state.options.clients,t=this.$store.state.options.sites,e=[];if(i&&i.length){let s=i.find(l=>l.id===this.client.id);return s&&s.paths?t.forEach(l=>{s.paths.hasOwnProperty(l.host)||e.push(l)}):e=t,e}return t}},computed:{},created(){}});var _=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("v-dialog",{attrs:{"max-width":"800"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[e("v-card",[e("v-card-title",{staticClass:"headline blue-grey darken-2",staticStyle:{color:"white"}},[t._v(t._s(t.$t("settings.downloadPaths.add.title")))]),e("v-card-text",[e("v-form",{model:{value:t.valid,callback:function(s){t.valid=s},expression:"valid"}},[e("v-autocomplete",{attrs:{items:t.getSites(),label:t.$t("settings.downloadPaths.add.selectSite"),"persistent-hint":"","single-line":"","item-text":"name","item-value":"host","return-object":"",rules:t.rules.require},scopedSlots:t._u([{key:"selection",fn:function({item:s}){return[e("v-list-tile-avatar",[e("img",{attrs:{src:s.icon}})]),e("span",{domProps:{textContent:t._s(s.name)}})]}},{key:"item",fn:function(s){return[e("v-list-tile-avatar",[e("img",{attrs:{src:s.item.icon}})]),e("v-list-tile-content",[e("v-list-tile-title",{domProps:{innerHTML:t._s(s.item.name)}}),e("v-list-tile-sub-title",{domProps:{innerHTML:t._s(s.item.url)}})],1),e("v-list-tile-action",[e("v-list-tile-action-text",[t._v(t._s(t.joinTags(s.item.tags)))])],1)]}}]),model:{value:t.selectedSite,callback:function(s){t.selectedSite=s},expression:"selectedSite"}}),e("v-textarea",{attrs:{label:t.$t("settings.downloadPaths.add.path"),value:"",hint:t.$t("settings.downloadPaths.add.pathTip"),rules:t.rules.require},model:{value:t.paths,callback:function(s){t.paths=s},expression:"paths"}}),t.client.pathDescription?e("v-alert",{attrs:{value:!0,color:"info",icon:"info",outline:""}},[e("div",{domProps:{innerHTML:t._s(t.client.pathDescription)}}),e("KeyDescription")],1):t._e()],1)],1),e("v-divider"),e("v-card-actions",{staticClass:"pa-3"},[e("v-spacer"),e("v-btn",{attrs:{flat:"",color:"error"},on:{click:t.cancel}},[e("v-icon",[t._v("cancel")]),e("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("settings.downloadPaths.add.cancel")))])],1),e("v-btn",{attrs:{flat:"",color:"success",disabled:!t.valid},on:{click:t.save}},[e("v-icon",[t._v("check_circle_outline")]),e("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("settings.downloadPaths.add.ok")))])],1)],1)],1)],1)],1)},f=[],g=n(p,_,f,!1,null,null,null,null);const w=g.exports,$=a.extend({components:{KeyDescription:d},data(){return{show:!1,valid:!1,rules:{require:[i=>!!i||"!"]},defaultItem:{name:"",site:{},paths:""}}},props:{value:Boolean,option:Object,client:Object},model:{prop:"value",event:"change"},watch:{show(){this.$emit("change",this.show)},value(){this.show=this.value,this.show&&(this.defaultItem=Object.assign({},this.option),this.defaultItem.paths=this.option.paths.join(`
`))}},methods:{save(){this.$emit("save",{site:this.defaultItem.site,paths:this.defaultItem.paths.split(`
`)}),this.show=!1},cancel(){this.show=!1}}});var C=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("v-dialog",{attrs:{"max-width":"800"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[e("v-card",[e("v-card-title",{staticClass:"headline blue-grey darken-2",staticStyle:{color:"white"}},[t._v(t._s(t.$t("settings.downloadPaths.edit.title")))]),e("v-card-text",[e("v-form",{model:{value:t.valid,callback:function(s){t.valid=s},expression:"valid"}},[e("v-text-field",{attrs:{label:t.$t("settings.downloadPaths.edit.site"),disabled:"",value:t.defaultItem.name}}),e("v-textarea",{attrs:{label:t.$t("settings.downloadPaths.add.path"),value:"",hint:t.$t("settings.downloadPaths.add.pathTip"),rules:t.rules.require},model:{value:t.defaultItem.paths,callback:function(s){t.$set(t.defaultItem,"paths",s)},expression:"defaultItem.paths"}}),t.client.pathDescription?e("v-alert",{attrs:{value:!0,color:"info",icon:"info",outline:""}},[e("div",{domProps:{innerHTML:t._s(t.client.pathDescription)}}),e("KeyDescription")],1):t._e()],1)],1),e("v-divider"),e("v-card-actions",{staticClass:"pa-3"},[e("v-spacer"),e("v-btn",{attrs:{flat:"",color:"error"},on:{click:t.cancel}},[e("v-icon",[t._v("cancel")]),e("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("settings.downloadPaths.add.cancel")))])],1),e("v-btn",{attrs:{flat:"",color:"success",disabled:!t.valid},on:{click:t.save}},[e("v-icon",[t._v("check_circle_outline")]),e("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("settings.downloadPaths.add.ok")))])],1)],1)],1)],1)},x=[],P=n($,C,x,!1,null,null,null,null);const k=P.exports,b=a.extend({components:{AddItem:w,EditItem:k},data(){return{showAddDialog:!1,showEditDialog:!1,itemDuplicate:!1,selected:[],selectedItem:{},pagination:{rowsPerPage:-1},items:[],dialogRemoveConfirm:!1,selectedClient:{address:""},lastClientId:""}},created(){this.$store.state.options.clients&&this.$store.state.options.clients.length>0&&(this.items=this.$store.state.options.clients,this.initView())},watch:{selectedClient(){this.selectedClient&&this.selectedClient.id&&(this.lastClientId=this.selectedClient.id,this.updateViewOptions())}},methods:{getPaths(i){return i.join("<br>")},add(){this.showAddDialog=!0},addItem(i){this.$store.commit("updatePathsOfClient",{clientId:this.selectedClient.id,site:i.site,paths:i.paths}),this.reload()},edit(i){this.selectedItem=i,this.showEditDialog=!0},updateItem(i){console.log(i),this.$store.commit("updatePathsOfClient",{clientId:this.selectedClient.id,site:i.site,paths:i.paths}),this.reload()},remove(){this.dialogRemoveConfirm=!1,this.$store.commit("removePathsOfClient",{clientId:this.selectedClient.id,site:this.selectedItem.site}),this.reload()},removeConfirm(i){this.selectedItem=i,this.dialogRemoveConfirm=!0},reload(){let i=Object.assign({},this.selectedClient);this.selectedClient=null,this.selectedClient=i},removeSelected(){confirm(this.$t("settings.downloadPaths.index.removeSelectedConfirm").toString())&&(console.log(this.selected),this.selected.forEach(i=>{this.$store.commit("removePathsOfClient",{clientId:this.selectedClient.id,site:i.site})}),this.selected=[],this.reload())},initView(){let i=this.$store.getters.viewsOptions(o.downloadPaths,{lastClientId:""});if(this.lastClientId=i.lastClientId,this.lastClientId&&this.items.length>0){let t=this.items.find(e=>e.id==this.lastClientId);t&&(this.selectedClient=t)}},updateViewOptions(){this.$store.dispatch("updateViewOptions",{key:o.downloadPaths,options:{lastClientId:this.lastClientId}})}},computed:{getClientPaths(){if(!this.selectedClient)return[];if(!this.selectedClient.paths)return[];let i=[],t=this.selectedClient.paths[r.allSite];t&&i.push({name:this.$t("settings.downloadPaths.index.allSite").toString(),site:null,paths:t});for(const e in this.selectedClient.paths){let s=this.$store.state.options.sites.find(l=>l.host==e);s&&i.push({name:s.name,site:s,paths:this.selectedClient.paths[e]})}return i},headers(){return[{text:this.$t("settings.downloadPaths.index.headers.name"),align:"left",value:"name"},{text:this.$t("settings.downloadPaths.index.headers.path"),align:"left",sortable:!1},{text:this.$t("settings.downloadPaths.index.headers.action"),value:"name",sortable:!1}]}}});var y=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"set-download-clients"},[e("v-alert",{attrs:{value:!0,type:"info"}},[t._v(t._s(t.$t("settings.downloadPaths.index.title")))]),e("v-card",[e("v-card-title",[e("v-autocomplete",{staticStyle:{"max-width":"500px"},attrs:{items:t.items,label:t.$t("settings.downloadPaths.index.selectedClient"),"menu-props":{maxHeight:"auto"},hint:t.selectedClient.address,"return-object":"","persistent-hint":"","item-text":"name","item-value":"id"},scopedSlots:t._u([{key:"selection",fn:function({item:s}){return[e("span",[t._v(t._s(s.name))])]}},{key:"item",fn:function(s){return[e("v-list-tile-content",[e("v-list-tile-title",{domProps:{innerHTML:t._s(s.item.name)}}),e("v-list-tile-sub-title",{domProps:{innerHTML:t._s(s.item.address)}})],1),e("v-list-tile-action",[e("v-list-tile-action-text",[t._v(t._s(s.item.allowCustomPath?s.item.type:t.$t("settings.downloadPaths.index.notSupport")))])],1)]}}]),model:{value:t.selectedClient,callback:function(s){t.selectedClient=s},expression:"selectedClient"}}),e("v-spacer"),e("v-btn",{attrs:{color:"success",disabled:!t.selectedClient.id||!t.selectedClient.allowCustomPath},on:{click:t.add}},[e("v-icon",{staticClass:"mr-2"},[t._v("add")]),t._v(" "+t._s(t.$t("settings.downloadPaths.index.add"))+" ")],1),e("v-btn",{attrs:{color:"error",disabled:t.selected.length==0},on:{click:function(s){return s.stopPropagation(),t.removeSelected.apply(null,arguments)}}},[e("v-icon",{staticClass:"mr-2"},[t._v("remove")]),t._v(" "+t._s(t.$t("settings.downloadPaths.index.remove"))+" ")],1)],1),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.getClientPaths,pagination:t.pagination,"item-key":"name","select-all":""},on:{"update:pagination":function(s){t.pagination=s}},scopedSlots:t._u([{key:"items",fn:function(s){return[e("td",{staticStyle:{width:"20px"}},[e("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:s.selected,callback:function(l){t.$set(s,"selected",l)},expression:"props.selected"}})],1),e("td",[e("a",{on:{click:function(l){return t.edit(s.item)}}},[t._v(t._s(s.item.name))])]),e("td",t._l(s.item.paths,function(l,c){return e("div",{key:c},[t._v(t._s(l))])}),0),e("td",[e("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(l){return t.edit(s.item)}}},[t._v("edit")]),e("v-icon",{attrs:{small:"",color:"error"},on:{click:function(l){return t.removeConfirm(s.item)}}},[t._v("delete")])],1)]}}]),model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}})],1),e("AddItem",{attrs:{client:t.selectedClient},on:{save:t.addItem},model:{value:t.showAddDialog,callback:function(s){t.showAddDialog=s},expression:"showAddDialog"}}),e("EditItem",{attrs:{option:t.selectedItem,client:t.selectedClient},on:{save:t.updateItem},model:{value:t.showEditDialog,callback:function(s){t.showEditDialog=s},expression:"showEditDialog"}}),e("v-dialog",{attrs:{width:"300"},model:{value:t.dialogRemoveConfirm,callback:function(s){t.dialogRemoveConfirm=s},expression:"dialogRemoveConfirm"}},[e("v-card",[e("v-card-title",{staticClass:"headline red lighten-2"},[t._v(t._s(t.$t("settings.downloadPaths.index.removeConfirmTitle")))]),e("v-card-text",[t._v(t._s(t.$t("settings.downloadPaths.index.removeConfirm")))]),e("v-divider"),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{flat:"",color:"info"},on:{click:function(s){t.dialogRemoveConfirm=!1}}},[e("v-icon",[t._v("cancel")]),e("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("settings.downloadPaths.index.cancel")))])],1),e("v-btn",{attrs:{color:"error",flat:""},on:{click:t.remove}},[e("v-icon",[t._v("check_circle_outline")]),e("span",{staticClass:"ml-1"},[t._v(t._s(t.$t("settings.downloadPaths.index.ok")))])],1)],1)],1)],1),e("v-snackbar",{attrs:{top:"",timeout:3e3,color:"error"},model:{value:t.itemDuplicate,callback:function(s){t.itemDuplicate=s},expression:"itemDuplicate"}},[t._v(t._s(t.$t("settings.downloadPaths.index.itemDuplicate")))])],1)},D=[],I=n(b,y,D,!1,null,"69617754",null,null);const O=I.exports;export{O as default};
